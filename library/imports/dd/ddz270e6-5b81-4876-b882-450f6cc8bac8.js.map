{"version":3,"sources":["../../../../../../../assets/script/game/DDZ/ui/assets/script/game/DDZ/ui/UIDDZ_Play.js"],"names":["app","require","cc","Class","extends","subGameName","properties","btn_ready","Node","btn_weixin","btn_fzkl","btn_cancel","btn_go","btn_openCardStart","handCards","allCards","gameBtn","gameRobLandLord","gameRobScore","btn_tip","btn_pass","btn_outCard","btn_yaobuqi","gameMultiple","btn_openCard","btn_openSound","btn_openMusic","boom_Ani","plane_Ani","liandui_Ani","dragon_Ani","GameEnd_Ani","ShutDow_Ani","bg_menu","img_jpq","img_dzp","lb_mypdgsj","lb_ddbrjb","img_bottom_input1","img_bottom_input2","labelRoomId","Label","labeiWanfa","lb_jushu","lb_publicScore","lb_publicMultiple","roomInfo","lb_time","headPrefab","Prefab","cardPrefab","giftPrefabs","giftNode","UIInvitation","OnCreateInit","DDZRoomMgr","DDZRoom","HeroManager","SceneManager","UtilsWord","PokerCard","DDZRoomPosMgr","DDZRoomSet","LogicDDZGame","ShareDefine","DDZDefine","isFirstEnter","basePath","btn_ok","GetWndNode","tip_ok","node","getChildByName","razzNode","btn_talk","btn_cardDevice","RegEvent","Event_PosContinueGame","Event_DissolveRoom","Event_StartVoteDissolve","Event_PosLeave","Event_PosUpdate","Event_PosReadyChg","Event_GameGift","Event_ExitRoomSuccess","Event_OnRoomNotFindByReason","OnEvt_CopyTextNtf","Event_SetStart","Event_SetEnd","Event_RoomEnd","OnPack_AutoStart","Event_ChatMessage","Event_ShowHandCard","Event_OpCard","Event_ChangeStatus","Event_AddDouble","Event_OpenCard","Event_Hog","Event_OpenStartGame","Event_CardNumber","Event_SportsPointEnough","Event_SportsPointNotEnough","Event_SportsPointThresholdEnough","Event_SportsPointThresholdNotEnough","Event_CodeError","game","on","EVENT_HIDE","OnEventHide","bind","EVENT_SHOW","OnEventShow","Left","cardSpcedX","EventType","TOUCH_START","OnTouchStart","TOUCH_MOVE","OnTouchMove","TOUCH_END","OnTouchEnd","TOUCH_CANCEL","OnTouchCancel","getComponent","Animation","OnAniPlayFinished","i","OpenCard_Ani","InitData","AddCardPrefab","invitationNode","instantiate","addChild","OnShow","CheckUpdateNotice","active","roomID","GetEnterRoomID","SendPack","toUpperCase","event","ExitGame","error","IsShowChat","IsShowCardDevice","roomCfg","GetEnterRoom","GetRoomConfig","clubId","unionId","name","isChoose","AddHead","HideAll","unscheduleAllCallbacks","PlayMusic","ClearForbiddenTouch","handCardsSpacingX","Layout","spacingX","cardNodeWidth","data","width","state","GetRoomSetProperty","disslove","GetRoomProperty","roomState","xianShi","GetRoomConfigByProperty","string","WanFa","isCoinRoom","setID","current","UpdateScoreAndDouble","UpdateSelfScore","endSec","FormManager","ShowForm","RoomState_Init","setInfo","GetRoomSetInfo","UpdateCardNum","cardNumMap","posList","length","pos","isAuto","headScript","GetUICardComponentByPos","ShowAutoIcon","UpdatePlayerScore","ShowDiZhuPai","holeCards","landowner","uiPos","GetUIPosByDataPos","path","headNode","Showlandowner","DDZSetState_FaPai","InitGameStateCommon","DDZSetState_Hog","ShowBtnHog","opPos","isHaveHog","DDZSetState_AddDouble","ShowBtnMultiple","DDZSetState_Playing","SetCardData","opType","cardList","time","MaxTickTime","lastCircleEnd","isFirstOp","firstTurn","GetClientPos","ShowBtnOutCard","array","GetTipCard","ForbiddenTouch","isAutoPass","MinTickTime","ShowAllGameBtn","SortCardByMax","ShowOutCard","lastOpPos","SetSeat01OutCardPos","StartTickTime","DDZSetState_End","clientPos","clientPlayerInfo","GetPlayerInfoByPos","RefreshRoomShow","GetTuiGuangUrl"],"mappings":"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","file":"UIDDZ_Play.js","sourceRoot":"../../../../../../../assets/script/game/DDZ/ui","sourcesContent":["var app = require(\"ddz_app\");\r\ncc.Class({\r\n    extends: require(app.subGameName + \"_BasePlay\"),\r\n\r\n    properties: {\r\n        btn_ready:cc.Node,\r\n        btn_weixin:cc.Node,\r\n        btn_fzkl:cc.Node,\r\n\t    btn_cancel:cc.Node,\r\n        btn_go:cc.Node,\r\n        btn_openCardStart:cc.Node,\r\n        handCards:cc.Node,\r\n        allCards:cc.Node,\r\n        gameBtn:cc.Node,\r\n        gameRobLandLord:cc.Node,\r\n        gameRobScore:cc.Node,\r\n        btn_tip:cc.Node,\r\n        btn_pass:cc.Node,\r\n        btn_outCard:cc.Node,\r\n        btn_yaobuqi:cc.Node,\r\n        gameMultiple:cc.Node,\r\n        btn_openCard:cc.Node,\r\n        btn_openSound:cc.Node,\r\n        btn_openMusic:cc.Node,\r\n        boom_Ani:cc.Node,\r\n        plane_Ani:cc.Node,\r\n        liandui_Ani:cc.Node,\r\n        dragon_Ani:cc.Node,\r\n        GameEnd_Ani:cc.Node,\r\n        ShutDow_Ani:cc.Node,\r\n        bg_menu:cc.Node,\r\n        img_jpq:cc.Node,\r\n        img_dzp:cc.Node,\r\n        lb_mypdgsj:cc.Node,\r\n        lb_ddbrjb:cc.Node,\r\n\r\n        img_bottom_input1:cc.Node,\r\n        img_bottom_input2:cc.Node,\r\n\r\n        labelRoomId:cc.Label,//特殊处理的房间信息显示\r\n        labeiWanfa:cc.Label,\r\n        lb_jushu:cc.Label,\r\n        lb_publicScore:cc.Label,\r\n        lb_publicMultiple:cc.Label,\r\n        roomInfo:cc.Node,\r\n\r\n        lb_time:cc.Label,\r\n\r\n        headPrefab:cc.Prefab,\r\n        cardPrefab:cc.Prefab,\r\n        giftPrefabs:[cc.Prefab],\r\n        giftNode:cc.Node,\r\n\r\n        UIInvitation:cc.Prefab,\r\n     },\r\n\r\n    OnCreateInit: function () {\r\n        this.DDZRoomMgr = app.DDZRoomMgr();\r\n        this.DDZRoom = app.DDZRoom();\r\n        this.HeroManager = app[app.subGameName + \"_HeroManager\"]();\r\n        this.SceneManager = app[app.subGameName + \"_SceneManager\"]();\r\n        this.UtilsWord = app[app.subGameName + \"_UtilsWord\"]();\r\n        this.PokerCard = app[app.subGameName + \"_PokerCard\"]();\r\n        this.DDZRoomPosMgr = app.DDZRoomPosMgr();\r\n        this.DDZRoomSet = app.DDZRoomSet();\r\n        this.LogicDDZGame = app.LogicDDZGame();\r\n        this.ShareDefine = app[app.subGameName + \"_ShareDefine\"]();\r\n        this.DDZDefine = app.DDZDefine();\r\n        \r\n        //是否第一次进入\r\n        this.isFirstEnter = true;\r\n\r\n        this.basePath = 'texture/game/doudizhu/';\r\n\r\n        //UI\r\n        this.btn_ok = this.GetWndNode(\"gameBtnStartList/btn_ok\");\r\n        this.tip_ok = this.node.getChildByName(\"tip_ok\");\r\n        this.razzNode = this.node.getChildByName(\"razzNode\");\r\n        this.btn_talk = this.GetWndNode(\"bg_bottom/btn_talk\");\r\n        this.btn_cardDevice = this.GetWndNode(\"bg_bottom/btn_cardDevice\");\r\n\r\n        //公共消息\r\n        this.RegEvent(\"DDZ_PosContinueGame\", this.Event_PosContinueGame);\r\n        this.RegEvent(\"DDZ_DissolveRoom\", this.Event_DissolveRoom);\r\n        this.RegEvent(\"DDZ_StartVoteDissolve\", this.Event_StartVoteDissolve);//发起房间结算投票\r\n        this.RegEvent(\"DDZ_PosLeave\", this.Event_PosLeave);\r\n        this.RegEvent(\"DDZ_PosUpdate\", this.Event_PosUpdate);\r\n        this.RegEvent(\"DDZ_PosReadyChg\", this.Event_PosReadyChg);\r\n        this.RegEvent('GameGift',this.Event_GameGift);\r\n        this.RegEvent('ExitRoomSuccess',this.Event_ExitRoomSuccess);\r\n        this.RegEvent(\"DDZ_OnRoomNotFindByReason\", this.Event_OnRoomNotFindByReason, this);\r\n\r\n        this.RegEvent(\"OnCopyTextNtf\", this.OnEvt_CopyTextNtf, this);\r\n\r\n        //游戏消息\r\n        this.RegEvent(\"DDZSetStart\", this.Event_SetStart);\r\n\t    this.RegEvent(\"DDZSetEnd\", this.Event_SetEnd);\r\n        this.RegEvent(\"RoomEnd\", this.Event_RoomEnd);\r\n        this.RegEvent(\"SPlayer_Trusteeship\", this.OnPack_AutoStart);\r\n        this.RegEvent(\"ChatMessage\", this.Event_ChatMessage);\r\n        this.RegEvent(\"HandCard\", this.Event_ShowHandCard);\r\n        this.RegEvent(\"OpCard\", this.Event_OpCard);\r\n        this.RegEvent(\"ChangeStatus\", this.Event_ChangeStatus);\r\n        this.RegEvent(\"AddDouble\", this.Event_AddDouble);\r\n        this.RegEvent(\"OpenCard\", this.Event_OpenCard);\r\n        this.RegEvent(\"Hog\", this.Event_Hog);\r\n        this.RegEvent(\"OpenStartGame\", this.Event_OpenStartGame);\r\n        this.RegEvent(\"CardNumber\", this.Event_CardNumber);\r\n        \r\n        //比赛分不足时通知\r\n        this.RegEvent(\"SportsPointEnough\", this.Event_SportsPointEnough);\r\n        this.RegEvent(\"SportsPointNotEnough\", this.Event_SportsPointNotEnough);\r\n        //比赛分门槛不足时通知\r\n        this.RegEvent(\"SportsPointThresholdEnough\", this.Event_SportsPointThresholdEnough);\r\n        this.RegEvent(\"SportsPointThresholdNotEnough\", this.Event_SportsPointThresholdNotEnough);\r\n\r\n        this.RegEvent('CodeError',this.Event_CodeError);\r\n        cc.game.on(cc.game.EVENT_HIDE,  this.OnEventHide.bind(this));\r\n        cc.game.on(cc.game.EVENT_SHOW,  this.OnEventShow.bind(this));\r\n\r\n        this.Left = [false,true,false];\r\n\r\n        this.cardSpcedX = 0;\r\n\r\n        this.handCards.on(cc.Node.EventType.TOUCH_START, this.OnTouchStart, this);\r\n\t\tthis.handCards.on(cc.Node.EventType.TOUCH_MOVE, this.OnTouchMove, this);\r\n\t\tthis.handCards.on(cc.Node.EventType.TOUCH_END, this.OnTouchEnd, this);\r\n        this.handCards.on(cc.Node.EventType.TOUCH_CANCEL, this.OnTouchCancel, this);\r\n\r\n        this.boom_Ani.getComponent(cc.Animation).on('finished', this.OnAniPlayFinished, this);\r\n        this.plane_Ani.getComponent(cc.Animation).on('finished', this.OnAniPlayFinished, this);\r\n        this.liandui_Ani.getComponent(cc.Animation).on('finished', this.OnAniPlayFinished, this);\r\n        this.dragon_Ani.getComponent(cc.Animation).on('finished', this.OnAniPlayFinished, this);\r\n        this.GameEnd_Ani.getComponent(cc.Animation).on('finished', this.OnAniPlayFinished, this);\r\n        this.ShutDow_Ani.getComponent(cc.Animation).on('finished', this.OnAniPlayFinished, this);\r\n        for (var i = 0; i < 3; i++) {\r\n            let OpenCard_Ani = this.GetWndNode(\"sp_seat0\"+i+\"/OpenCard_Ani\");\r\n            OpenCard_Ani.getComponent(cc.Animation).on('finished', this.OnAniPlayFinished, this);\r\n        }\r\n        \r\n        this.InitData();\r\n\r\n        this.AddCardPrefab();\r\n\r\n        this.invitationNode = cc.instantiate(this.UIInvitation);\r\n        this.node.addChild(this.invitationNode);\r\n    },\r\n\r\n    OnShow:function(){\r\n        this.CheckUpdateNotice();\r\n        this.node.getChildByName(\"tip_exit_node\").active=false;\r\n        //确保该玩家还在该房间内，否则强制退出房间\r\n        let roomID = this.DDZRoomMgr.GetEnterRoomID();\r\n        app[app.subGameName + \"_NetManager\"]().SendPack(app.subGameName+\".C\"+app.subGameName.toUpperCase()+\"GetRoomID\", {},function(event){\r\n            if (event.roomID <= 0 || event.roomID != roomID) {\r\n                app[app.subGameName + \"Client\"].ExitGame();\r\n            }\r\n        },function(error){\r\n            app[app.subGameName + \"Client\"].ExitGame();\r\n        });\r\n        this.btn_talk.active = this.IsShowChat();\r\n        this.btn_cardDevice.active = this.IsShowCardDevice();\r\n         //初始化邀请在线好友的数据\r\n        this.roomCfg = this.DDZRoomMgr.GetEnterRoom().GetRoomConfig();\r\n        if (this.roomCfg.clubId > 0 || this.roomCfg.unionId > 0) {\r\n            this.invitationNode.active = true;\r\n            this.invitationNode.getComponent(this.invitationNode.name).InitData(this.roomCfg.clubId, this.roomCfg.unionId, roomID);\r\n        }else{\r\n            this.invitationNode.active = false;\r\n        }\r\n        this.isChoose = false;\r\n        this.AddHead();\r\n        this.HideAll();\r\n        this.unscheduleAllCallbacks();\r\n        this.SceneManager.PlayMusic(\"back_1\");\r\n        this.InitData();\r\n        this.ClearForbiddenTouch();\r\n        //设置牌间距,便于选牌\r\n        let handCardsSpacingX = this.handCards.getComponent(cc.Layout).spacingX;\r\n        let cardNodeWidth = this.cardPrefab.data.width;\r\n        this.cardSpcedX = cardNodeWidth + handCardsSpacingX;\r\n\r\n        let state = this.DDZRoomSet.GetRoomSetProperty(\"state\");\r\n        let disslove = this.DDZRoom.GetRoomProperty(\"dissolve\");\r\n        let roomState = this.DDZRoom.GetRoomProperty(\"state\");\r\n        this.xianShi = this.DDZRoom.GetRoomConfigByProperty(\"xianShi\");\r\n        //显示房间信息\r\n        this.labeiWanfa.string = this.WanFa();\r\n        if(app[app.subGameName + \"_ShareDefine\"]().isCoinRoom){\r\n            this.roomInfo.active = false;\r\n        }else{\r\n            this.roomInfo.active = true;\r\n            this.labelRoomId.string = \"房间号：\"+this.DDZRoom.GetRoomProperty(\"key\");\r\n            let setID = this.DDZRoom.GetRoomProperty(\"setID\");\r\n            let current = this.DDZRoom.GetRoomConfigByProperty(\"setCount\");\r\n            this.lb_jushu.string = \"局数：\" + setID + \"/\" + current;\r\n        }\r\n        //显示叫分和倍数\r\n        this.UpdateScoreAndDouble();\r\n\r\n        //更新金币和钻石\r\n        this.UpdateSelfScore();\r\n        \r\n        if(disslove.endSec != 0){\r\n            //如果有人发起解散消息\r\n            this.FormManager.ShowForm(app.subGameName + \"_UIMessage02\");\r\n        }\r\n\r\n        if(roomState != this.ShareDefine.RoomState_Init){\r\n            let setInfo = this.DDZRoomSet.GetRoomSetInfo();\r\n            //更新记牌器\r\n            this.UpdateCardNum(setInfo.cardNumMap);\r\n            //如果有玩家托管  显示托管图标\r\n            let posList = this.DDZRoom.GetRoomProperty(\"posList\");\r\n            for(let i = 0; i < posList.length; i++){\r\n                let data = posList[i];\r\n                let pos = data['pos'];\r\n                let isAuto = data['trusteeship'];\r\n                if(isAuto){\r\n                    let headScript = this.GetUICardComponentByPos(pos);\r\n                    headScript.ShowAutoIcon(isAuto);\r\n                }\r\n            }\r\n            //分数\r\n            // this.DDZRoomPosMgr.OnPoint(setInfo.posInfo, true);\r\n            this.UpdatePlayerScore();\r\n            //更新地主牌\r\n            this.ShowDiZhuPai(setInfo.holeCards);\r\n            this.landowner = setInfo.landowner;\r\n            if (this.landowner != -1) {\r\n                //已经确认地主了\r\n                let uiPos = this.DDZRoomPosMgr.GetUIPosByDataPos(this.landowner);\r\n                let path = \"sp_seat0\" + uiPos + \"/head\" + \"/UIDDZHead\" + uiPos;\r\n                let headNode = this.GetWndNode(path);\r\n                let headScript = headNode.getComponent(\"UIDDZHead\");\r\n                headScript.Showlandowner(true);\r\n            }\r\n            //发牌阶段\r\n            if(state == this.ShareDefine.DDZSetState_FaPai){\r\n                this.InitGameStateCommon(state);\r\n                this.gameMultiple.active = false;\r\n            }\r\n            else if(state == this.ShareDefine.DDZSetState_Hog){\r\n                //抢地主阶段\r\n                this.InitGameStateCommon(state);\r\n                this.gameMultiple.active = false;\r\n                this.ShowBtnHog(setInfo.opPos,setInfo.isHaveHog);\r\n            }\r\n            else if(state == this.ShareDefine.DDZSetState_AddDouble){\r\n                //加倍阶段\r\n                this.InitGameStateCommon(state);\r\n                this.ShowBtnMultiple();\r\n            }\r\n            else if(state == this.ShareDefine.DDZSetState_Playing){\r\n                this.InitGameStateCommon(state);\r\n                this.gameMultiple.active = false;\r\n                this.LogicDDZGame.SetCardData(setInfo.opType, setInfo.cardList);\r\n                //显示当前操作位和上家出的牌\r\n                let time = this.DDZDefine.MaxTickTime[this.xianShi];\r\n                this.lastCircleEnd = setInfo.isFirstOp;\r\n                this.firstTurn = setInfo.isFirstOp;\r\n                if(setInfo.opPos == this.DDZRoomPosMgr.GetClientPos()){\r\n                    if(setInfo.isFirstOp){\r\n                        this.ShowBtnOutCard();\r\n                    }\r\n                    else{\r\n                        if(setInfo.opType == 0){\r\n                            this.ShowBtnOutCard();\r\n                        }\r\n                        else{\r\n                            let array = this.LogicDDZGame.GetTipCard();\r\n                            this.ForbiddenTouch(array);\r\n                            if(!array.length){\r\n                                if (this.isAutoPass()) {\r\n                                    time = this.DDZDefine.MinTickTime;\r\n                                }else{\r\n                                    this.ShowAllGameBtn();\r\n                                    time = this.DDZDefine.MinTickTime;\r\n                                    this.lb_mypdgsj.active = true;\r\n                                }\r\n                            }\r\n                            else{\r\n                                if (array.length == 0 || (array.length == 1 && array[0].length == 0)) {\r\n                                    this.lb_mypdgsj.active = true;\r\n                                }\r\n                                this.ShowAllGameBtn();\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n                //由于获取提示牌有排序了上家出牌，这边需要再次排序，从大到小\r\n                this.LogicDDZGame.SortCardByMax(setInfo.cardList);\r\n                this.ShowOutCard(setInfo.lastOpPos, setInfo.cardList);\r\n                this.SetSeat01OutCardPos(setInfo.lastOpPos, setInfo.cardList.length);\r\n                this.StartTickTime(setInfo.opPos, time);\r\n            }\r\n            else if(state == this.ShareDefine.DDZSetState_End){\r\n                //如果玩家已经准备则不显示结算界面\r\n                let clientPos = this.DDZRoomPosMgr.GetClientPos();\r\n                let clientPlayerInfo = this.DDZRoomPosMgr.GetPlayerInfoByPos(clientPos);\r\n                if(clientPlayerInfo[\"gameReady\"]){\r\n                    this.RefreshRoomShow();\r\n                    return;\r\n                }\r\n                this.FormManager.ShowForm(\"game/DDZ/UIDDZ_Result\");\r\n            }\r\n        }\r\n        else{\r\n            this.RefreshRoomShow();\r\n        }\r\n\r\n        //获取用户推广Url\r\n        this.GetTuiGuangUrl();\r\n    },\r\n});"]}