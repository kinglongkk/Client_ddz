{"version":3,"sources":["../../../../../assets/script/ui/assets/script/ui/ddz_BaseForm.js"],"names":["app","require","ZorderLvEnum","cc","Enum","ZorderLv0","ZorderLv1","ZorderLv2","ZorderLv3","ZorderLv4","ZorderLv5","ZorderLv6","ZorderLv7","ZorderLv8","ZorderLv9","ShowEffectEnum","None","FromTop","FromBottom","FromLeft","FromRight","FromCenter","CloseEffectEnum","ToTop","ToBottom","ToLeft","ToRight","ToCenter","ddz_BaseForm","Class","extends","subGameName","properties","OnCreate","formName","JS_Name","OpenActionTag","InitNodeScale","node","scale","_dataInfo","InitBaseData","OnCreateInit","ShowFormName","SysNotifyManager","ddz_SysNotifyManager","ConfirmManager","ddz_ConfirmManager","SysDataManager","ddz_SysDataManager","ShareDefine","ddz_ShareDefine","ComTool","ddz_ComTool","EffectManager","ddz_EffectManager","FormManager","ddz_FormManager","SoundManager","ddz_SoundManager","LocalDataManager","SDKManager","ddz_SDKManager","IntegrateImage","GetTableDict","Effect","on","OnEffectAnimationEnd","bind","_effectDict","_eventFuncDict","_childFormComponentDict","_cacheChildFormDict","_loadWndImageDict","onLoad","Destroy","UnRegTargetEvent","OnDestroy","destroy","update","dt","OnUpdate","error","ErrLog","stack","ShowForm","argList","parent","find","addChild","ZorderLv","ShowFormAction","eventName","RegEvent","AddShowingForm","OnShow","apply","console","log","CloseForm","isDestory","CloseFormAction","OnClose","removeFromParent","RemoveShowingForm","ShowOrCloseForm","IsFormShow","OnFormActionEnd","sender","userData","getChildByName","Node","setPosition","label","addComponent","Label","string","GetFormProperty","fontSize","color","Color_Orange","IsShow","uiName","childs","children","i","length","name","active","openAction","startScale","ShowEffectType","scaleTo","easing","easeElasticOut","stopActionByTag","action","sequence","callFunc","setTag","runAction","CreateChildForm","childComponentName","childPrefab","parentNode","pos","zorderLv","argument","isShowForm","childFormNode","NewChildFormNode","childFormComponent","getComponent","WarnLog","AddChildFormComponent","hasOwnProperty","get","instantiate","childFormComponentList","SetDefault","push","GetChildComponentByUserData","allChildFormComponentList","count","index","childComponent","childUserData","GetChildComponentByChildIndex","childIndex","GetAllChildComponentByName","ClearAllChildComponentByName","allChildFormList","NodePool","cacheNodePool","put","ClearFormAllChildComponent","GetChildFormCacheNodePool","TriggerChildEvent","argDict","OnParentEvent","TriggerChildEventByChildComponent","TriggerAllChildEvent","GetFormContentSize","getContentSize","property","GetWndNode","wndPath","wndNode","GetWndComponent","componentType","wndComponent","GetWndProperty","EditBox","getPosition","opacity","Button","interactable","ProgressBar","progress","SetFormPosition","SetFormProperty","value","SetWndProperty","RichText","SetWndImage","imageName","fileName","imageInfo","filePath","fileNameList","SetWndImageByFilePath","SetNodeImageByFilePath","isHideFirst","nodeSprite","Sprite","that","ddz_ControlManager","CreateLoadPromise","SpriteFrame","then","spriteFrame","bluebird","resolve","sprite","resType","SpriteAtlas","loadWndImageInfo","getSpriteFrame","catch","ClearWndImage","SetWndFlyTo","startPos","endPos","time","useData","WndRunAction","SetWndOpacity","endFade","SetWndDelay","delayTime","StopWndFly","StopWndOpacity","StopWndDelay","actionType","WndFlyUseData","starPos","moveTo","OnRunActionEnd","fadeTo","FlyWnd_FlyEnd","OpacityWnd_End","FlyWnd_DelayEnd","wndName","GetWndEffectPos","wndObj","postType","offPosList","EffectPosType_5","size","posX","posY","EffectPosType_1","width","height","EffectPosType_2","EffectPosType_3","EffectPosType_4","EffectPosType_6","EffectPosType_7","EffectPosType_8","EffectPosType_9","EffectPosType_10","halfWidth","halfHeight","RandInt","v2","AddWndEffect","effectName","effectRes","repeatCount","posType","effectTableInfo","effectPos","allEffectDict","effectComponent","GetModelProperty","DeleteWndEffect","CreateEffectByEffectRes","OnCreateEffectEnd","AddModelToParent","SetModelProperty","animationState","ShowEffect","wrapMode","WrapMode","Default","PingPong","Loop","event","modelComponent","OnEffectEnd","DeleteEffect","DeleteWndAllEffect","DeleteEffectByDict","DeleteFormAllEffect","func","ShowSysMsg","msgID","msgArgList","WaitForConfirm","backArgList","curConFirmType","Confirm","SetWaitForConfirmForm","OnConFirm","SetUpTipFormConfirmList","InArray","ShowConfirm","ConfirmUse","ShowUseMsg","ConfirmBuy","ShowBuyMsg","clickType","SimulateOnClick","btnNode","buttonComponent","btnName","OnClick","OnClick_Close","OnClick_BtnWnd","eventTouch","eventData","PlaySound","currentTarget","OnClick_Toggle","toggle","OnClick_Form","OnClickForm","passSecond","OnReload","InitWeiXinShare","sys","isNative","ddz_WeChatManager","OnWeChatReady","IsIphoneX","FrameSize","view","getFrameSize","OnScrollEnded","GetTuiGuangUrl","TuiGuangUrl","GetConfigProperty","heroID","ddz_HeroManager","GetHeroProperty","ShortHeroID","GetPid","long_url","ddz_NetManager","SendPack","GetShorTuiGuangUrl","FailTuiGuangUrl","getRandom","min","max","r","Math","random","re","round","GetRandBaseUrl","urls","GetClientConfigProperty","urlList","split","rand","serverPack","randUrl","SetConfigProperty","requestUrl","jsonStr","replace","ShareUrl","eval","url_short","SuccessTcnUrl","shareUrl","text","ShareText","FailTcnUrl","BeginShare","roomKey","GetAppName","appName","localStorage","getItem","Click_btn_weixin","share","room","DDZRoom","WeChatShare","title","weChatAppShareUrl","setCount","GetRoomConfigByProperty","GetRoomProperty","allPlayerInfo","GetRoomPosMgr","GetRoomAllPlayerInfo","joinPlayerCount","GetRoomPlayerCount","nowJoin","pid","gamedesc","autoCardIdx","que","teshuwanfan","WanFa","ShareLineLink","Share","ShareDD","ShareXL","Click_btn_fzkl","str","toString","ddz_NativeManager","CallToNative","cfg","gameCreateConfig","playGame","gameType","wanfa","key","gameName","GameName","isWanFa","dataKey","Key","ToggleType","ToggleDesc","baseDiZhus","dizhuIdx","dizhu","dingzhu","j","sportsDouble","GameTyepStringUp","toUpperCase","DestroyFromParent","CheckUpdateNotice","gameTypeId","GametTypeNameDict","status","content","module","exports"],"mappings":"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","file":"ddz_BaseForm.js","sourceRoot":"../../../../../assets/script/ui","sourcesContent":["/*\r\n BaseForm 界面基类(又FormManager控制创建和销毁)\r\n */\r\n\r\nvar app = require(\"ddz_app\");\r\n\r\n//界面层级枚举\r\nvar ZorderLvEnum = cc.Enum({\r\n\r\n\t//置底界面层(UIFightTower)\r\n\tZorderLv0: 0,\r\n\r\n\t//聊天层(UIChat)\r\n\tZorderLv1: 1,\r\n\r\n\t//玩家头像层(UIPlayer)\r\n\tZorderLv2: 2,\r\n\r\n\t//通用背景层(UIResource)\r\n\tZorderLv3:3,\r\n\r\n\t//布阵层\r\n\tZorderLv4: 4,\r\n\r\n\t//主场景工具层(UIMenu)\r\n\tZorderLv5: 5,\r\n\r\n\t//正常界面层(多数界面)\r\n\tZorderLv6: 6,\r\n\r\n\t//置顶层(3级界面使用到,UICardPackFragSale)\r\n\tZorderLv7: 7,\r\n\r\n\t//模态层,消息提示层(UIMessage)\r\n\tZorderLv8:8,\r\n\r\n\t//debugTool界面\r\n\tZorderLv9:9,\r\n});\r\n\r\n//界面显示动画枚举\r\n\r\nvar ShowEffectEnum = cc.Enum({\r\n\r\n\t//没有效果\r\n\tNone:0,\r\n\t//从上划入\r\n\tFromTop:1,\r\n\t//从下划入\r\n\tFromBottom:2,\r\n\t//从左划入\r\n\tFromLeft:3,\r\n\t//从右划入\r\n\tFromRight:4,\r\n\t//从中间从小变大\r\n\tFromCenter:5,\r\n});\r\n\r\n\r\n\r\n//界面关闭动画枚举\r\nvar CloseEffectEnum = cc.Enum({\r\n\r\n\t//没有效果\r\n\tNone:0,\r\n\t//从上划入\r\n\tToTop:1,\r\n\t//从下划入\r\n\tToBottom:2,\r\n\t//从左划入\r\n\tToLeft:3,\r\n\t//从右划入\r\n\tToRight:4,\r\n\t//从中间从小变大\r\n\tToCenter:5,\r\n});\r\n\r\n\r\nvar ddz_BaseForm = cc.Class({\r\n\r\n\textends: require(app.subGameName + \"_BaseComponent\"),\r\n\r\n\tproperties: {\r\n\r\n\t\t//显示界面效果类型\r\n\t\t\"ShowEffectType\":{\r\n\t\t\t\"default\":ShowEffectEnum.None,\r\n\t\t\t\"tooltip\":\"显示界面动画\",\r\n\t\t\t\"type\": ShowEffectEnum,\r\n\t\t},\r\n\r\n\t\t//关闭界面效果类型\r\n\t\t\"CloseEffectType\":{\r\n\t\t\t\"default\":CloseEffectEnum.None,\r\n\t\t\t\"tooltip\":\"关闭界面动画\",\r\n\t\t\t\"type\": CloseEffectEnum,\r\n\t\t},\r\n\r\n\t\t//场景精灵层级\r\n\t\t\"ZorderLv\":{\r\n\t\t\t\"default\":ZorderLvEnum.ZorderLv6,\r\n\t\t\t\"tooltip\":\"界面层级\",\r\n\t\t\t\"type\": ZorderLvEnum,\r\n\t\t},\r\n\r\n\t},\r\n\t//创建对象是被调用(OnLoad前,还未执行addChild,逻辑层初始化)\r\n\tOnCreate:function(formName){\r\n\t\tthis.JS_Name = formName;\r\n\r\n\t\tthis.OpenActionTag = 1000;\r\n\t\tthis.InitNodeScale = this.node.scale;\r\n\r\n\t\t//界面数据\r\n\t\tthis._dataInfo = {\r\n\t\t\t\"FormName\":formName,\r\n\t\t};\r\n\r\n\r\n\t\tthis.InitBaseData();\r\n\r\n\t\tthis.OnCreateInit();\r\n\t\tthis.ShowFormName();\r\n\t},\r\n\r\n\t//BaseChildForm也需要初始化调用这个接口\r\n\tInitBaseData:function(){\r\n\t\t//管理器\r\n\t\tthis.SysNotifyManager = app.ddz_SysNotifyManager();\r\n\t\tthis.ConfirmManager = app.ddz_ConfirmManager();\r\n\t\tthis.SysDataManager = app.ddz_SysDataManager();\r\n\t\tthis.ShareDefine = app.ddz_ShareDefine();\r\n\t\tthis.ComTool = app.ddz_ComTool();\r\n\t\tthis.EffectManager = app.ddz_EffectManager();\r\n\t\tthis.FormManager = app.ddz_FormManager();\r\n\t\tthis.SoundManager = app.ddz_SoundManager();\r\n\t\tthis.LocalDataManager=app.LocalDataManager();\r\n\t\tthis.SDKManager=app.ddz_SDKManager();\r\n\t\t//表配置\r\n\t\tthis.IntegrateImage = this.SysDataManager.GetTableDict(\"IntegrateImage\");\r\n\t\tthis.Effect = this.SysDataManager.GetTableDict(\"Effect\");\r\n\r\n\r\n\t\tthis.node.on(\"EffectAnimationEnd\", this.OnEffectAnimationEnd.bind(this));\r\n\r\n\t\t//-----成员变量----------------\r\n\t\t//控件特效\r\n\t\t// {    spt_card/icon\r\n\t\t//     wndPath:{effectName:effectComponent},\r\n\t\t// }\r\n\t\tthis._effectDict = {};\r\n\r\n\t\t//-----事件注册函数字典------------\r\n\t\tthis._eventFuncDict = {};\r\n\r\n\t\t//子类界面组件字典\r\n\t\tthis._childFormComponentDict = {};\r\n\r\n\t\t//子类界面缓存字典\r\n\t\t// {\r\n\t\t//     'UICardReplace_Child':new cc.NodePool('UICardReplace_Child'),\r\n\t\t// }\r\n\t\tthis._cacheChildFormDict = {};\r\n\t\t//等待加载的贴图信息字典\r\n\t\tthis._loadWndImageDict = {};\r\n\r\n\t},\r\n\r\n\t//------------回掉函数----------------\r\n\r\n\t// active node时调用\r\n\tonLoad: function () {\r\n\r\n\t},\r\n\r\n\t//销毁界面\r\n\tDestroy:function(){\r\n\r\n\t\tapp[app.subGameName + \"Client\"].UnRegTargetEvent(this);\r\n\r\n\t\tthis._eventFuncDict = {};\r\n\r\n\t\tthis.OnDestroy();\r\n\t\t//销毁节点\r\n\t\tthis.node.destroy();\r\n\t},\r\n\r\n\t//没帧回掉\r\n\tupdate: function (dt) {\r\n\t\ttry{\r\n\t\t\tthis.OnUpdate(dt);\r\n\t\t}\r\n\t\tcatch(error){\r\n\t\t\tthis.ErrLog(\"update:%s\", error.stack);\r\n\t\t}\r\n\r\n\t},\r\n\r\n\t//显示界面\r\n\tShowForm:function(argList){\r\n\r\n\t\tif(!argList){\r\n\t\t\targList = [];\r\n\t\t}\r\n\r\n\t\tlet formName = this._dataInfo[\"FormName\"];\r\n\t\t//获取到当前场景的画布\r\n\t\tlet parent = cc.find('Canvas/uiLayer');\r\n\t\tif(!parent){\r\n\t\t\tthis.ErrLog(\"ShowForm not find uiLayer\");\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\tif(this.node.parent == parent){\r\n\t\t}\r\n\t\telse{\r\n\t\t\t//设置界面新父类\r\n\t\t\tparent.addChild(this.node, this.ZorderLv);\r\n\r\n\t\t\tthis.ShowFormAction();\r\n\r\n\t\t\t//开启界面重新注册已经注册的监听事件\r\n\t\t\tfor(let eventName in this._eventFuncDict){\r\n\t\t\t\tapp[app.subGameName + \"Client\"].RegEvent(eventName, this._eventFuncDict[eventName], this);\r\n\t\t\t}\r\n\r\n\t\t\tthis.FormManager.AddShowingForm(formName, this);\r\n\t\t}\r\n\t\ttry{\r\n\t\t\tthis.OnShow.apply(this, argList);\r\n\t\t}\r\n\t\tcatch(error){\r\n\t\t\tconsole.log(\"ShowForm error:\" + error.stack);\r\n\t\t}\r\n\r\n\t},\r\n\r\n\t//关闭界面\r\n\tCloseForm:function(isDestory=false){\r\n        //获取到当前场景的画布\r\n        let parent = cc.find('Canvas/uiLayer');\r\n\r\n\t\tif(this.node.parent != parent){\r\n\t\t\treturn\r\n\t\t}\r\n\t\t//关闭界面则取消所有事件监听\r\n\t\tapp[app.subGameName + \"Client\"].UnRegTargetEvent(this);\r\n\r\n\t\tthis.CloseFormAction();\r\n\r\n\t\tthis.OnClose();\r\n\r\n\t\tthis.node.removeFromParent(false);\r\n\t\tif(isDestory){\r\n\t\t\tthis.node.destroy();\r\n\t\t}\r\n\r\n\t\tthis.FormManager.RemoveShowingForm(this._dataInfo[\"FormName\"]);\r\n\r\n\t},\r\n\r\n\t//开启或者关闭界面\r\n\tShowOrCloseForm:function(argList){\r\n\t\tif (this.IsFormShow()){\r\n\t\t\tthis.CloseForm();\r\n\t\t\treturn false\r\n\t\t}\r\n\t\telse{\r\n\t\t\tthis.ShowForm(argList);\r\n\t\t\treturn true\r\n\t\t}\r\n\t},\r\n\r\n\t//界面动作执行界面回调\r\n\tOnFormActionEnd:function(sender, userData){\r\n\r\n\t},\r\n\r\n\tShowFormName:function(){\r\n\t\t//不显示界面名字\r\n\t\treturn;\r\n\t\tif(this.node.getChildByName(\"LabelFormName\")){\r\n\t\t\treturn\r\n\t\t}\r\n\t\tlet node = new cc.Node(\"LabelFormName\");\r\n\r\n\t\tnode.parent = this.node;\r\n\t\tnode.setPosition(10,-10);\r\n\t\tlet label = node.addComponent(cc.Label);\r\n\t\tlabel.string = this.GetFormProperty(\"FormName\");\r\n\t\tlabel.fontSize = 25\r\n\t\tnode.color = this.ShareDefine.Color_Orange;\r\n\t},\r\n\r\n\t//--------------获取接口-----------------\r\n\r\n\t//界面是否显示中\r\n\tIsFormShow:function(){\r\n\t\tlet parent = cc.find('Canvas/uiLayer');\r\n\r\n\t\tif(this.node.parent == parent){\r\n\t\t\treturn true\r\n\t\t}\r\n\r\n\t\treturn false\r\n\t},\r\n\r\n\tIsShow:function(uiName=''){\r\n\t\tlet childs = this.node.parent.children;\r\n\t\tfor(let i=0;i<childs.length;i++){\r\n\t\t\tif(uiName == childs[i].name && childs[i].active)\r\n\t\t\t\treturn true;\r\n\t\t}\r\n\t\treturn false;\r\n\t},\r\n\t//--------------动作函数------------\r\n\t//显示界面动作\r\n\tShowFormAction:function(){\r\n\r\n\t\tlet openAction = null;\r\n\r\n\t\t//设置起点缩放倍速\r\n\t\tlet startScale = this.InitNodeScale*0.5;\r\n\r\n\t\tswitch(this.ShowEffectType){\r\n\r\n\t\t\tcase ShowEffectEnum.None:\r\n\t\t\t\tbreak\r\n\t\t\tcase ShowEffectEnum.FromTop:\r\n\t\t\t\topenAction = cc.scaleTo(0.5, this.InitNodeScale).easing(cc.easeElasticOut());\r\n\t\t\t\tbreak\r\n\t\t\tcase ShowEffectEnum.FromBottom:\r\n\t\t\t\topenAction = cc.scaleTo(0.5, this.InitNodeScale).easing(cc.easeElasticOut());\r\n\t\t\t\tbreak\r\n\t\t\tcase ShowEffectEnum.FromLeft:\r\n\t\t\t\topenAction = cc.scaleTo(0.5, this.InitNodeScale).easing(cc.easeElasticOut());\r\n\t\t\t\tbreak\r\n\t\t\tcase ShowEffectEnum.FromRight:\r\n\t\t\t\topenAction = cc.scaleTo(0.5, this.InitNodeScale).easing(cc.easeElasticOut());\r\n\t\t\t\tbreak\r\n\t\t\tcase ShowEffectEnum.FromCenter:\r\n\t\t\t\topenAction = cc.scaleTo(0.5, this.InitNodeScale).easing(cc.easeElasticOut());\r\n\t\t\t\tbreak\r\n\t\t\tdefault:\r\n\t\t\t\tthis.ErrLog(\"ShowEffectType:%s error\", this.ShowEffectType);\r\n\t\t\t\tbreak\r\n\t\t}\r\n\r\n\t\t//如果之前有打开动作,先停止\r\n\t\tthis.node.stopActionByTag(this.OpenActionTag);\r\n\r\n\t\tif(openAction){\r\n\t\t\tlet action = cc.sequence(\r\n\t\t\t\topenAction,\r\n\t\t\t\tcc.callFunc(this.OnFormActionEnd, this, \"OpenAction\"),\r\n\t\t\t);\r\n\t\t\taction.setTag(this.OpenActionTag);\r\n\t\t\tthis.node.scale = startScale;\r\n\t\t\tthis.node.runAction(action);\r\n\t\t}\r\n\t},\r\n\r\n\t//关闭界面动作\r\n\tCloseFormAction:function(){\r\n\t\t//let closeAction = cc.scaleTo(0.5, 1).easing(cc.easeElasticIn());\r\n\t},\r\n\r\n\t//-------------子类界面操作接口------------------\r\n\t//创建子类界面\r\n\t/*\r\n\t childComponentName:子类界面的组件名字 字符串类型 \"UIBuyCard_Child\"\r\n\t childPrefab:子类界面的预制对象,cc.Prefab类型\r\n\t userData:子界面特殊数据 默认0\r\n\t parentNode:子界面的父类node 默认为界面自身对象node\r\n\t pos:子类创建时的坐标,可不传\r\n\t zorderLv:子类层级\r\n\t argument:传递给子类的显示参数 ShowForm(argument) 最终在OnShow(argument)接收\r\n\t isShowForm:创建子类默认是否显示\r\n\t */\r\n\tCreateChildForm:function(childComponentName, childPrefab, userData=0, parentNode=null, pos=null, zorderLv=0, argument=null, isShowForm=true){\r\n\r\n\t\tif(!parentNode){\r\n\t\t\tparentNode = this.node;\r\n\t\t}\r\n\t\tlet childFormNode = this.NewChildFormNode(childComponentName, childPrefab);\r\n\r\n\t\tlet childFormComponent = childFormNode.getComponent(childComponentName);\r\n\t\tif(!childFormComponent){\r\n\t\t\t//如果子类node没有这个组件,则主动添加组件对象\r\n\t\t\tthis.WarnLog(\"CreateChildForm not find:%s addComponent\", childComponentName);\r\n\t\t\tchildFormComponent = childFormNode.addComponent(childComponentName);\r\n\t\t\tif(!childFormComponent){\r\n\t\t\t\tthis.ErrLog(\"CreateChildForm(%s) fail\", childComponentName);\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t}\r\n\t\tchildFormComponent.OnCreate(this, childComponentName, 0, userData, pos);\r\n\t\tparentNode.addChild(childFormNode, zorderLv);\r\n\r\n\t\tthis.AddChildFormComponent(childComponentName, childFormComponent);\r\n\r\n\t\tif(isShowForm){\r\n\t\t\tchildFormComponent.ShowForm(argument);\r\n\t\t}\r\n\t\telse{\r\n\t\t\tchildFormComponent.CloseForm(argument);\r\n\t\t}\r\n\r\n\t\treturn childFormComponent\r\n\r\n\t},\r\n\r\n\t//new一个字界面node\r\n\tNewChildFormNode:function(childComponentName, childPrefab){\r\n\r\n\t\tlet childFormNode = null;\r\n\r\n\t\t//如果有缓存从缓存中取\r\n\t\tif(this._cacheChildFormDict.hasOwnProperty(childComponentName)){\r\n\t\t\tchildFormNode = this._cacheChildFormDict[childComponentName].get()\r\n\t\t}\r\n\r\n\t\t//如果没有创建缓存,创建一个新对象\r\n\t\tif(!childFormNode){\r\n\t\t\tchildFormNode = cc.instantiate(childPrefab);\r\n\t\t}\r\n\r\n\t\treturn childFormNode\r\n\t},\r\n\r\n\tAddChildFormComponent:function(childComponentName, childFormComponent){\r\n\t\tlet childFormComponentList = this._childFormComponentDict.SetDefault(childComponentName, []);\r\n\t\tchildFormComponentList.push(childFormComponent)\r\n\t},\r\n\r\n\t//通过userData获取子类的组件对象\r\n\tGetChildComponentByUserData:function(childComponentName, userData){\r\n\t\tlet allChildFormComponentList = this._childFormComponentDict[childComponentName];\r\n\t\tif(!allChildFormComponentList){\r\n\t\t\tthis.ErrLog(\"GetChildComponentByUserData not find(%s)\", childComponentName);\r\n\t\t\treturn\r\n\t\t}\r\n\t\tlet count = allChildFormComponentList.length;\r\n\t\tfor(let index=0; index<count; index++){\r\n\t\t\tlet childComponent = allChildFormComponentList[index];\r\n\t\t\tlet childUserData = childComponent.GetFormProperty(\"UserData\");\r\n\t\t\tif(childUserData == userData){\r\n\t\t\t\treturn childComponent\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t//通过索引获取子类界面\r\n\tGetChildComponentByChildIndex:function(childComponentName, childIndex){\r\n\t\tlet allChildFormComponentList = this._childFormComponentDict[childComponentName];\r\n\t\tif(!allChildFormComponentList){\r\n\t\t\tthis.ErrLog(\"GetChildComponentByChildIndex not find(%s)\", childComponentName);\r\n\t\t\treturn\r\n\t\t}\r\n\t\tlet childComponent = allChildFormComponentList[childIndex];\r\n\t\tif(!childComponent){\r\n\t\t\tthis.ErrLog(\"GetChildComponentByChildIndex(%s,%s) not find child\", childComponentName, childIndex);\r\n\t\t\treturn\r\n\t\t}\r\n\t\treturn childComponent\r\n\t},\r\n\r\n\t//返回子界面列表\r\n\tGetAllChildComponentByName:function(childComponentName){\r\n\r\n\t\tif(this._childFormComponentDict.hasOwnProperty(childComponentName)){\r\n\t\t\treturn this._childFormComponentDict[childComponentName];\r\n\t\t}\r\n\t\treturn []\r\n\t},\r\n\r\n\t//清楚掉指定的子类\r\n\tClearAllChildComponentByName:function(childComponentName){\r\n\r\n\t\tif(!this._childFormComponentDict.hasOwnProperty(childComponentName)){\r\n\t\t\treturn\r\n\t\t}\r\n\t\tlet allChildFormList = this._childFormComponentDict[childComponentName];\r\n\r\n\t\tdelete this._childFormComponentDict[childComponentName];\r\n\r\n\t\tif(!this._cacheChildFormDict.hasOwnProperty(childComponentName)){\r\n\t\t\tthis._cacheChildFormDict[childComponentName] = new cc.NodePool(childComponentName)\r\n\t\t}\r\n\t\tlet cacheNodePool = this._cacheChildFormDict[childComponentName];\r\n\r\n\t\tlet count = allChildFormList.length;\r\n\t\tfor(let index=0; index<count; index++){\r\n\t\t\tlet childFormComponent = allChildFormList[index];\r\n\t\t\tcacheNodePool.put(childFormComponent.node);\r\n\t\t}\r\n\t},\r\n\r\n\tClearFormAllChildComponent:function(){\r\n\r\n\t\tfor(let childComponentName in this._childFormComponentDict){\r\n\r\n\t\t\tif(!this._cacheChildFormDict.hasOwnProperty(childComponentName)){\r\n\t\t\t\tthis._cacheChildFormDict[childComponentName] = new cc.NodePool(childComponentName)\r\n\t\t\t}\r\n\t\t\tlet cacheNodePool = this._cacheChildFormDict[childComponentName];\r\n\r\n\t\t\tlet allChildFormList = this._childFormComponentDict[childComponentName];\r\n\t\t\tlet count = allChildFormList.length;\r\n\t\t\tfor(let index=0; index<count; index++){\r\n\t\t\t\tcacheNodePool.put(allChildFormList[index].node);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis._childFormComponentDict = {};\r\n\t},\r\n\r\n\t//获取指定子类的缓存池对象\r\n\tGetChildFormCacheNodePool:function(childComponentName){\r\n\t\tif(!this._cacheChildFormDict.hasOwnProperty(childComponentName)){\r\n\t\t\tthis._cacheChildFormDict[childComponentName] = new cc.NodePool(childComponentName)\r\n\t\t}\r\n\t\treturn this._cacheChildFormDict[childComponentName];\r\n\t},\r\n\r\n\t//触发子类事件\r\n\tTriggerChildEvent:function(childComponentName, userData, eventName, argDict){\r\n\r\n\t\tlet allChildFormComponentList = this._childFormComponentDict[childComponentName];\r\n\t\tif(!allChildFormComponentList){\r\n\t\t\tthis.ErrLog(\"TriggerChildEvent not find(%s)\", childComponentName);\r\n\t\t\treturn\r\n\t\t}\r\n\t\tlet count = allChildFormComponentList.length;\r\n\t\tfor(let index=0; index<count; index++){\r\n\t\t\tlet childComponent = allChildFormComponentList[index];\r\n\t\t\tlet childUserData = childComponent.GetFormProperty(\"UserData\");\r\n\r\n\t\t\t//找到一个子类,执行则跳出\r\n\t\t\tif(childUserData == userData){\r\n\t\t\t\tchildComponent.OnParentEvent(eventName, argDict);\r\n\t\t\t\tbreak\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t//触发子界面事件\r\n\tTriggerChildEventByChildComponent:function(childComponent, eventName, argDict){\r\n\t\tchildComponent.OnParentEvent(eventName, argDict);\r\n\t},\r\n\r\n\t//触发所有子类的事件\r\n\tTriggerAllChildEvent:function(childComponentName, eventName, argDict){\r\n\t\tlet allChildFormComponentList = this._childFormComponentDict[childComponentName];\r\n\t\tif(!allChildFormComponentList){\r\n\t\t\tthis.ErrLog(\"TriggerAllChildEvent not find(%s)\", childComponentName);\r\n\t\t\treturn\r\n\t\t}\r\n\t\tlet count = allChildFormComponentList.length;\r\n\t\tfor(let index=0; index<count; index++){\r\n\t\t\tallChildFormComponentList[index].OnParentEvent(eventName, argDict);\r\n\t\t}\r\n\t},\r\n\r\n\r\n\t//-------------获取接口-------------------\r\n\tGetFormContentSize:function(){\r\n\t\treturn this.node.getContentSize();\r\n\t},\r\n\t//获取界面属性\r\n\tGetFormProperty:function(property){\r\n\r\n\t\tif(!this._dataInfo.hasOwnProperty(property)){\r\n\t\t\tthis.ErrLog(\"GetFormProperty not find:%s\", property);\r\n\t\t\treturn\r\n\t\t}\r\n\t\treturn this._dataInfo[property];\r\n\t},\r\n\r\n\tGetWndNode:function(wndPath){\r\n\t\tlet wndNode = cc.find(wndPath, this.node);\r\n\t\tif(!wndNode){\r\n\t\t\tthis.ErrLog(\"GetWndNode(%s) not find\", wndPath);\r\n\t\t\treturn\r\n\t\t}\r\n\t\treturn wndNode\r\n\t},\r\n\r\n\t//获取指定控件的组件对象\r\n\tGetWndComponent:function(wndPath, componentType){\r\n\r\n\t\tlet wndNode = cc.find(wndPath, this.node);\r\n\t\tif(!wndNode){\r\n\t\t\tthis.ErrLog(\"GetWndComponent wndPath(%s) error\", wndPath);\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\tlet wndComponent = wndNode.getComponent(componentType);\r\n\r\n\t\tif(!wndComponent){\r\n\t\t\tthis.ErrLog(\"GetWndComponent wndPath(%s) not find Component(%s)\", wndPath, componentType.name);\r\n\t\t\treturn\r\n\t\t}\r\n\t\treturn wndComponent\r\n\t},\r\n\r\n\tGetWndProperty:function(wndPath, property){\r\n\t\tlet wndNode = cc.find(wndPath, this.node);\r\n\t\tif(!wndNode){\r\n\t\t\tthis.ErrLog(\"GetWndProperty(%s,%s) not find wndPath\", wndPath, property);\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\tlet wndComponent = null;\r\n\t\tif(property == \"text\"){\r\n\t\t\twndComponent = wndNode.getComponent(cc.Label);\r\n\t\t\t//可能是label\r\n\t\t\tif(wndComponent){\r\n\t\t\t}\r\n\t\t\t//没有label可能是editbox\r\n\t\t\telse{\r\n\t\t\t\twndComponent = wndNode.getComponent(cc.EditBox);\r\n\t\t\t}\r\n\r\n\t\t\tif(!wndComponent){\r\n\t\t\t\tthis.ErrLog(\"GetWndProperty(%s,%s) wnd not find cc.Label cc.EditBox\", wndPath, property);\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\treturn wndComponent.string;\r\n\t\t}\r\n\t\telse if(property == \"position\"){\r\n\t\t\treturn wndNode.getPosition()\r\n\t\t}\r\n\t\telse if(property == \"active\"){\r\n\t\t\treturn wndNode.active;\r\n\t\t}\r\n\t\telse if(property == \"color\"){\r\n\t\t\treturn wndNode.color;\r\n\t\t}\r\n\t\telse if(property == \"scale\"){\r\n\t\t\treturn wndNode.scale;\r\n\t\t}\r\n\t\telse if(property == \"opacity\"){\r\n\t\t\treturn wndNode.opacity;\r\n\t\t}\r\n\t\telse if(property == \"interactable\"){\r\n\t\t\twndComponent = wndNode.getComponent(cc.Button);\r\n\t\t\tif(!wndComponent){\r\n\t\t\t\tthis.ErrLog(\"GetWndProperty(%s,%s) wnd not find cc.Button\", wndPath, property);\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\treturn wndComponent.interactable;\r\n\t\t}\r\n\t\telse if(property == \"progress\"){\r\n\t\t\twndComponent = wndNode.getComponent(cc.ProgressBar);\r\n\t\t\tif(!wndComponent){\r\n\t\t\t\tthis.ErrLog(\"GetWndProperty(%s,%s) wnd not find cc.ProgressBar\", wndPath, property);\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\treturn wndComponent.progress;\r\n\t\t}\r\n\t\telse{\r\n\t\t\tthis.ErrLog(\"GetWndProperty(%s,%s) property error\", wndPath, property);\r\n\t\t\treturn\r\n\t\t}\r\n\t},\r\n\r\n\r\n\t//-------------设置接口-----------------\r\n\r\n\tSetFormPosition:function(pos){\r\n\t\tthis.node.setPosition(pos);\r\n\t},\r\n\r\n\t//获取界面属性\r\n\tSetFormProperty:function(property, value){\r\n\r\n\t\tif(!this._dataInfo.hasOwnProperty(property)){\r\n\t\t\tthis.ErrLog(\"SetFormProperty not find:%s\", property);\r\n\t\t\treturn\r\n\t\t}\r\n\t\tthis._dataInfo[property] = value;\r\n\t},\r\n\r\n\t//设置控件属性\r\n\tSetWndProperty:function(wndPath, property, value){\r\n\r\n\t\tlet wndNode = cc.find(wndPath, this.node);\r\n\t\tif(!wndNode){\r\n\t\t\tthis.ErrLog(\"SetWndProperty(%s,%s,%s) not find wndPath\", wndPath, property, value);\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\tlet wndComponent = null;\r\n\t\tif(property == \"text\"){\r\n\t\t\twndComponent = wndNode.getComponent(cc.Label);\r\n\t\t\t//可能是label\r\n\t\t\tif(wndComponent){\r\n\t\t\t}\r\n\t\t\t//没有label可能是editbox\r\n\t\t\telse if(wndNode.getComponent(cc.RichText)){\r\n\t\t\t\twndComponent = wndNode.getComponent(cc.RichText);\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\twndComponent = wndNode.getComponent(cc.EditBox);\r\n\t\t\t}\r\n\r\n\t\t\tif(!wndComponent){\r\n\t\t\t\tthis.ErrLog(\"SetWndProperty(%s,%s,%s) wnd not find cc.Label cc.EditBox\", wndPath, property, value);\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\twndComponent.string = value + \"\";\r\n\t\t}\r\n\t\telse if(property == \"position\"){\r\n\t\t\twndNode.setPosition(value)\r\n\t\t}\r\n\t\telse if(property == \"active\"){\r\n\t\t\twndNode.active = value;\r\n\t\t}\r\n\t\telse if(property == \"color\"){\r\n\t\t\twndNode.color = value\r\n\t\t}\r\n\t\telse if(property == \"image\"){\r\n\t\t\tthis.SetWndImage(wndPath, value);\r\n\t\t}\r\n\t\telse if(property == \"scale\"){\r\n\t\t\twndNode.scale = value\r\n\t\t}\r\n\t\telse if(property == \"opacity\"){\r\n\t\t\twndNode.opacity = value\r\n\t\t}\r\n\t\telse if(property == \"interactable\"){\r\n\t\t\twndComponent = wndNode.getComponent(cc.Button);\r\n\t\t\tif(!wndComponent){\r\n\t\t\t\tthis.ErrLog(\"SetWndProperty(%s,%s,%s) wnd not find cc.Button\", wndPath, property, value);\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\twndComponent.interactable = value;\r\n\t\t}\r\n\t\telse if(property == \"progress\"){\r\n\t\t\twndComponent = wndNode.getComponent(cc.ProgressBar);\r\n\t\t\tif(!wndComponent){\r\n\t\t\t\tthis.ErrLog(\"SetWndProperty(%s,%s,%s) wnd not find cc.ProgressBar\", wndPath, property, value);\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\twndComponent.progress = value;\r\n\t\t}\r\n\t\telse{\r\n\t\t\tthis.ErrLog(\"SetWndProperty(%s,%s,%s) property error\", wndPath, property, value);\r\n\t\t\treturn\r\n\t\t}\r\n\t},\r\n\r\n\r\n\tSetWndImage:function(wndPath, imageName){\r\n\r\n\t\tlet fileName = \"\";\r\n\t\t//如果有传图片\r\n\t\tlet imageInfo = this.IntegrateImage[imageName];\r\n\t\tif(!imageInfo){\r\n\t\t\tthis.ErrLog(\"SetWndImage IntegrateImage.txt not find key(%s)\", imageName);\r\n\t\t\treturn\r\n\t\t}\r\n\t\tlet filePath = imageInfo[\"FilePath\"];\r\n\t\tlet fileNameList = imageInfo[\"FileNameList\"];\r\n\r\n\t\tif(fileNameList && fileNameList.length){\r\n\t\t\tfileName = fileNameList[0];\r\n\t\t}\r\n\t\tthis.SetWndImageByFilePath(wndPath, filePath, fileName);\r\n\t},\r\n\tSetNodeImageByFilePath:function(node,filePath,isHideFirst=false){\r\n\t\tlet nodeSprite = node.getComponent(cc.Sprite);\r\n\t\tif(!nodeSprite){\r\n\t\t\tthis.ErrLog('SetNodeImageByFilePath error not cc.Sprite');\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tlet that = this;\r\n\t\treturn app.ddz_ControlManager().CreateLoadPromise(filePath, cc.SpriteFrame)\r\n\t\t\t.then(function(spriteFrame){\r\n\t\t\t\tif(!spriteFrame){\r\n\t\t\t\t\t// that.ErrLog(\"SetNodeImageByFilePath load spriteFrame fail filePath : \", filePath);\r\n\t\t\t\t\treturn false\r\n\t\t\t\t}\r\n\t\t\t\tnodeSprite.spriteFrame = spriteFrame;\r\n\t\t\t\tif(isHideFirst)\r\n\t\t\t\t\tnode.active = true;\r\n\t\t\t});\r\n\t},\r\n\t//通过图片路径设置控件贴图\r\n\tSetWndImageByFilePath:function(wndPath, filePath, fileName=\"\", isHideFirst=false){\r\n\r\n\t\tlet wndNode = cc.find(wndPath, this.node);\r\n\t\tif(!wndNode){\r\n\t\t\tthis.ErrLog(\"(%s) SetWndImageByFilePath(%s,%s) not find node\", wndPath, filePath, fileName);\r\n\t\t\treturn app.bluebird.resolve(false)\r\n\t\t}\r\n\r\n\t\tlet sprite = wndNode.getComponent(cc.Sprite);\r\n\t\tif(!sprite){\r\n\t\t\tthis.ErrLog(\"SetWndImageByFilePath(%s) not find cc.Sprite\", wndPath);\r\n\t\t\treturn app.bluebird.resolve(false)\r\n\t\t}\r\n\r\n\t\tlet that = this;\r\n\r\n\t\tlet resType = cc.SpriteFrame;\r\n\t\tif(fileName){\r\n\t\t\tresType = cc.SpriteAtlas;\r\n\t\t}\r\n\r\n\t\t//记录图片设置的贴图信息\r\n\t\tthis._loadWndImageDict[wndPath] = {\"FilePath\":filePath, \"FileName\":fileName, \"IsHideFirst\":isHideFirst};\r\n\r\n\t\t//是否先隐藏节点,等待资源加载完成在显示节点\r\n\t\tif(isHideFirst){\r\n\t\t\t//闲隐藏掉控件,加注完成在显示\r\n\t\t\twndNode.active = 0;\r\n\t\t}\r\n\r\n\t\treturn app.ddz_ControlManager().CreateLoadPromise(filePath, resType)\r\n\t\t\t.then(function(spriteFrame){\r\n\r\n\t\t\t\t//重新激活控件显示\r\n\t\t\t\tif(isHideFirst && !wndNode.active){\r\n\t\t\t\t\twndNode.active = 1;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(!spriteFrame){\r\n\t\t\t\t\t// that.ErrLog(\"SetWndImageByFilePath(%s,%s,%s) load spriteFrame fail\", wndPath, filePath, fileName);\r\n\t\t\t\t\treturn false\r\n\t\t\t\t}\r\n\r\n\t\t\t\tlet loadWndImageInfo = that._loadWndImageDict[wndPath];\r\n\t\t\t\tif(!loadWndImageInfo){\r\n\t\t\t\t\tthat.WarnLog(\"_loadWndImageDict not find:%s\", wndPath);\r\n\t\t\t\t\treturn false\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//如果设置的贴图路径异步回调回来判断已经被更新设置贴图路径了,则跳出\r\n\t\t\t\tif(loadWndImageInfo[\"FilePath\"] != filePath){\r\n\t\t\t\t\tthat.WarnLog(\"wndPath:%s FilePath(%s)!=(%s)\", wndPath, loadWndImageInfo[\"FilePath\"], filePath);\r\n\t\t\t\t\treturn false\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(fileName){\r\n\t\t\t\t\t//如果设置的贴图路径异步回调回来判断已经被更新设置贴图路径下的贴图了,则跳出\r\n\t\t\t\t\tif(loadWndImageInfo[\"FileName\"] != fileName){\r\n\t\t\t\t\t\tthat.WarnLog(\"wndPath:%s FileName(%s)!=(%s)\", wndPath, loadWndImageInfo[\"FilePath\"], filePath);\r\n\t\t\t\t\t\treturn false\r\n\t\t\t\t\t}\r\n\t\t\t\t\tsprite.spriteFrame = spriteFrame.getSpriteFrame(fileName);\r\n\t\t\t\t}\r\n\t\t\t\telse{\r\n\t\t\t\t\tsprite.spriteFrame = spriteFrame;\r\n\t\t\t\t}\r\n\t\t\t\treturn true\r\n\t\t\t})\r\n\t\t\t.catch(function(error){\r\n\t\t\t\t// that.ErrLog(\"SetWndImageByFilePath(%s,%s,%s) error:%s\", wndPath, filePath, fileName, error.stack);\r\n\t\t\t})\r\n\r\n\t},\r\n\r\n\t//清除控件贴图\r\n\tClearWndImage:function(wndPath){\r\n\t\tlet wndNode = cc.find(wndPath, this.node);\r\n\t\tif(!wndNode){\r\n\t\t\tthis.ErrLog(\"ClearWndImage(%s) not find node\", wndPath);\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\tlet sprite = wndNode.getComponent(cc.Sprite);\r\n\t\tif(!sprite){\r\n\t\t\tthis.ErrLog(\"ClearWndImage(%s) not find cc.Sprite\", wndPath);\r\n\t\t\treturn\r\n\t\t}\r\n\t\tsprite.spriteFrame = null;\r\n\t},\r\n\r\n\t//------------控件飞行--------------------\r\n\r\n\t//设置控件飞行\r\n\tSetWndFlyTo:function(wndPath, startPos, endPos, time, useData=0){\r\n\r\n\t\tlet argDict = {\r\n\t\t\t\"StartPos\":startPos,\r\n\t\t\t\"EndPos\":endPos,\r\n\t\t\t\"Time\":time,\r\n\t\t};\r\n\r\n\t\tthis.WndRunAction(wndPath, \"FlyAction\", argDict, useData);\r\n\t},\r\n\r\n\t//设置控件透明度\r\n\tSetWndOpacity:function(wndPath, endFade, time, useData=0){\r\n\t\tlet argDict = {\r\n\t\t\t\"EndFade\":endFade,\r\n\t\t\t\"Time\":time,\r\n\t\t};\r\n\r\n\t\tthis.WndRunAction(wndPath, \"OpacityAction\", argDict, useData);\r\n\t},\r\n\r\n\tSetWndDelay:function(wndPath, delayTime, useData=0){\r\n\t\tlet argDict = {\r\n\t\t\t\"DelayTime\":delayTime,\r\n\t\t};\r\n\r\n\t\tthis.WndRunAction(wndPath, \"DelayAction\", argDict, useData);\r\n\t},\r\n\r\n\t//停止控件飞行\r\n\tStopWndFly:function(wndPath){\r\n\t\tlet wndNode = cc.find(wndPath, this.node);\r\n\t\tif(!wndNode){\r\n\t\t\tthis.ErrLog(\"StopWndFly(%s) wndPath not find\", wndPath);\r\n\t\t\treturn\r\n\t\t}\r\n\t\twndNode.stopActionByTag(11111);\r\n\t},\r\n\r\n\t//停止控件渐变\r\n\tStopWndOpacity:function(wndPath){\r\n\t\tlet wndNode = cc.find(wndPath, this.node);\r\n\t\tif(!wndNode){\r\n\t\t\tthis.ErrLog(\"StopWndFly(%s) wndPath not find\", wndPath);\r\n\t\t\treturn\r\n\t\t}\r\n\t\twndNode.stopActionByTag(22222);\r\n\t},\r\n\r\n\tStopWndDelay:function(wndPath){\r\n\t\tlet wndNode = cc.find(wndPath, this.node);\r\n\t\tif(!wndNode){\r\n\t\t\tthis.ErrLog(\"StopWndDelay(%s) wndPath not find\", wndPath);\r\n\t\t\treturn\r\n\t\t}\r\n\t\twndNode.stopActionByTag(33333);\r\n\t},\r\n\r\n\t/**\r\n\t * 控件动作接口\r\n\t */\r\n\tWndRunAction:function(wndPath, actionType, argDict, useData){\r\n\r\n\t\tlet wndNode = cc.find(wndPath, this.node);\r\n\t\tif(!wndNode){\r\n\t\t\tthis.ErrLog(\"WndRunAction(%s,%s) wndPath not find\", wndPath, actionType);\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\twndNode.WndFlyUseData = useData;\r\n\r\n\t\t//控件飞行效果\r\n\t\tif(actionType == \"FlyAction\"){\r\n\t\t\tvar starPos = argDict[\"StartPos\"];\r\n\t\t\tvar endPos = argDict[\"EndPos\"];\r\n\t\t\tvar time = argDict[\"Time\"];\r\n\r\n\t\t\twndNode.setPosition(starPos);\r\n\t\t\twndNode.stopActionByTag(11111);\r\n\r\n\t\t\tvar action = cc.sequence(\r\n\t\t\t\tcc.moveTo(time, endPos),\r\n\t\t\t\tcc.callFunc(this.OnRunActionEnd, this, \"FlyWndEnd\")\r\n\t\t\t);\r\n\t\t\taction.setTag(11111);\r\n\t\t\twndNode.runAction(action);\r\n\t\t}\r\n\t\t//控件透明度效果\r\n\t\telse if(actionType == \"OpacityAction\"){\r\n\t\t\tvar endFade = argDict[\"EndFade\"];\r\n\t\t\tvar time = argDict[\"Time\"];\r\n\r\n\t\t\tvar action = cc.sequence(\r\n\t\t\t\tcc.fadeTo(time, endFade),\r\n\t\t\t\tcc.callFunc(this.OnRunActionEnd, this, \"OpacityWndEnd\")\r\n\t\t\t);\r\n\r\n\t\t\taction.setTag(22222);\r\n\t\t\twndNode.runAction(action);\r\n\t\t}\r\n\t\t//停留等待\r\n\t\telse if(actionType == \"DelayAction\"){\r\n\t\t\tvar delayTime = argDict[\"DelayTime\"];\r\n\t\t\tvar action = cc.sequence(\r\n\t\t\t\tcc.delayTime(delayTime),\r\n\t\t\t\tcc.callFunc(this.OnRunActionEnd, this, \"DelayEnd\")\r\n\t\t\t);\r\n\r\n\t\t\taction.setTag(33333);\r\n\t\t\twndNode.runAction(action);\r\n\t\t}\r\n\t\telse{\r\n\t\t\tthis.ErrLog(\"WndRunAction(%s) error\", actionType);\r\n\t\t\treturn\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t * runAction结束回调\r\n\t */\r\n\tOnRunActionEnd:function(sender, useData){\r\n\r\n\t\tif(useData == \"FlyWndEnd\"){\r\n\t\t\tthis.FlyWnd_FlyEnd(sender.name, sender);\r\n\t\t}\r\n\t\telse if(useData == \"OpacityWndEnd\"){\r\n\t\t\tthis.OpacityWnd_End(sender.name, sender);\r\n\t\t}\r\n\t\telse if(useData == \"DelayEnd\"){\r\n\t\t\tthis.FlyWnd_DelayEnd(sender.name, sender);\r\n\t\t}\r\n\t\telse{\r\n\t\t\tthis.ErrLog(\"OnRunActionEnd useData:%s error\", useData);\r\n\t\t}\r\n\t},\r\n\r\n\t//控件飞行结束回调\r\n\tFlyWnd_FlyEnd:function(wndName, wndNode){\r\n\r\n\t},\r\n\r\n\tOpacityWnd_End:function(wndName, wndNode){\r\n\r\n\t},\r\n\r\n\tFlyWnd_DelayEnd:function(wndName, wndNode){\r\n\r\n\t},\r\n\t//------------特效接口-------------------\r\n\r\n\tGetWndEffectPos:function(wndObj, postType, offPosList){\r\n\r\n\t\tif(!postType){\r\n\t\t\tpostType = this.ShareDefine.EffectPosType_5;\r\n\t\t}\r\n\r\n\t\tlet size = wndObj.getContentSize();\r\n\t\tlet posX = 0;\r\n\t\tlet posY = 0;\r\n\r\n\t\tswitch(postType){\r\n\t\t\t// 控件特效位置1左下\r\n\t\t\tcase this.ShareDefine.EffectPosType_1:\r\n\t\t\t\t//在控件中心添加特效\r\n\t\t\t\tposX = -size.width/2;\r\n\t\t\t\tposY = -size.height/2;\r\n\t\t\t\tbreak\r\n\r\n\t\t\t// 控件特效位置2下中\r\n\t\t\tcase this.ShareDefine.EffectPosType_2:\r\n\t\t\t\tposX = 0;\r\n\t\t\t\tposY = -size.height/2;\r\n\t\t\t\tbreak\r\n\t\t\t// 控件特效位置3右下\r\n\t\t\tcase this.ShareDefine.EffectPosType_3:\r\n\t\t\t\tposX = size.width/2;\r\n\t\t\t\tposY = -size.height/2;\r\n\t\t\t\tbreak\r\n\r\n\t\t\t// 控件特效位置中左\r\n\t\t\tcase this.ShareDefine.EffectPosType_4:\r\n\t\t\t\tposX = -size.width/2;\r\n\t\t\t\tposY = 0;\r\n\t\t\t\tbreak\r\n\r\n\t\t\t// 控件特效位置中间\r\n\t\t\tcase this.ShareDefine.EffectPosType_5:\r\n\t\t\t\t//在控件中心添加特效\r\n\t\t\t\tposX = 0;\r\n\t\t\t\tposY = 0;\r\n\t\t\t\tbreak\r\n\r\n\t\t\t// 控件特效位置中右\r\n\t\t\tcase this.ShareDefine.EffectPosType_6:\r\n\t\t\t\t//在控件中心添加特效\r\n\t\t\t\tposX = size.width/2;\r\n\t\t\t\tposY = 0;\r\n\t\t\t\tbreak\r\n\r\n\t\t\t// 控件特效位置上左\r\n\t\t\tcase this.ShareDefine.EffectPosType_7:\r\n\t\t\t\tposX = -size.width/2;\r\n\t\t\t\tposY = size.height/2;\r\n\t\t\t\tbreak\r\n\r\n\t\t\t// 控件特效位置上中\r\n\t\t\tcase this.ShareDefine.EffectPosType_8:\r\n\t\t\t\tposX = 0;\r\n\t\t\t\tposY = size.height/2;\r\n\t\t\t\tbreak\r\n\r\n\t\t\t// 控件特效位置上右\r\n\t\t\tcase this.ShareDefine.EffectPosType_9:\r\n\t\t\t\tposX = size.width/2;\r\n\t\t\t\tposY = size.height/2;\r\n\t\t\t\tbreak\r\n\r\n\t\t\t//随机位置\r\n\t\t\tcase this.ShareDefine.EffectPosType_10:\r\n\t\t\t\tlet halfWidth = size.width/2;\r\n\t\t\t\tlet halfHeight = size.height/2;\r\n\t\t\t\tposX = this.ComTool.RandInt(-halfWidth, halfWidth);\r\n\t\t\t\tposY = this.ComTool.RandInt(-halfHeight, halfHeight);\r\n\t\t\t\tbreak\r\n\t\t}\r\n\r\n\t\t// if(offPosList.length == 2){\r\n\t\t// \tposX += offPosList[0];\r\n\t\t// \tposY += offPosList[1];\r\n\t\t// }\r\n\r\n\t\treturn cc.v2(posX, posY);\r\n\t},\r\n\r\n\t//给控件加特效\r\n\tAddWndEffect:function(wndPath, effectName, effectRes, repeatCount=0, userData=0, offPosList=null, posType=null){\r\n\r\n\t\tlet effectTableInfo = this.Effect[effectRes];\r\n\t\tif(!effectTableInfo){\r\n\t\t\tthis.ErrLog(\"AddWndEffect Effect.txt not find:%s\", effectRes);\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\tlet wndNode = cc.find(wndPath, this.node);\r\n\t\tif(!wndNode){\r\n\t\t\tthis.ErrLog(\"AddWndEffect wndPath(%s) error\", wndPath);\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\t//如果没有传递偏移坐标,取配置表默认偏移坐标\r\n\t\tif(!offPosList){\r\n\t\t\toffPosList = effectTableInfo[\"OffPosList\"];\r\n\t\t}\r\n\t\tif(!posType){\r\n\t\t\tposType = effectTableInfo[\"PosType\"];\r\n\t\t}\r\n\t\tlet effectPos = this.GetWndEffectPos(wndNode, posType, offPosList);\r\n\r\n\r\n\t\t//初始化父类的特效字典\r\n\t\tlet allEffectDict = this._effectDict.SetDefault(wndPath, {});\r\n\r\n\t\t//如果子控件已经被加上这个特效了,需要删除,因为可能特效名一样但是特效使用的资源不一样了\r\n\t\tif(allEffectDict.hasOwnProperty(effectName)){\r\n\r\n\t\t\tlet effectComponent = allEffectDict[effectName];\r\n\r\n\t\t\tif(effectComponent){\r\n\r\n\t\t\t\t//如果特效名和特效资源名都一样,则不添加新特效\r\n\t\t\t\tif(effectComponent.GetModelProperty(\"EffectRes\") == effectRes){\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\t//资源不一样需要删除旧的特效\r\n\t\t\t\tthis.DeleteWndEffect(wndPath, effectName);\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t\t//初始化特效对象null避免AddWndEffect重复调用时出现CreateEffectByEffectRes被多次调用\r\n\t\tallEffectDict[effectName] = 0;\r\n\r\n\t\tlet that = this;\r\n\r\n\t\tthis.EffectManager.CreateEffectByEffectRes(effectName, effectRes, userData)\r\n\t\t\t.then(function(effectComponent){\r\n\t\t\t\treturn that.OnCreateEffectEnd(wndPath, wndNode, effectName, effectComponent, effectPos, repeatCount);\r\n\t\t\t})\r\n\t\t\t.catch(function(error){\r\n\t\t\t\tthat.ErrLog(\"CreateFormEffect(%s,%s,%s):%s\", effectName, effectRes, userData, error.stack);\r\n\t\t\t})\r\n\r\n\t},\r\n\r\n\r\n\t//创建特效成功回调\r\n\tOnCreateEffectEnd:function(wndPath, wndNode, effectName, effectComponent, effectPos, repeatCount){\r\n\t\tif(!effectComponent){\r\n\t\t\tthis.ErrLog(\"OnCreateEffectEnd(%s) fail\", effectName);\r\n\t\t\treturn\r\n\t\t}\r\n\t\tlet allEffectDict = this._effectDict.SetDefault(wndPath, {});\r\n\r\n\t\t//默认初始化为0\r\n\t\tif(allEffectDict[effectName]){\r\n\t\t\tthis.ErrLog(\"OnCreateEffectEnd allEffectDict have find:%s \", effectName);\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\teffectComponent.AddModelToParent(wndNode, this.node, effectPos);\r\n\t\teffectComponent.SetModelProperty(\"WndPath\", wndPath);\r\n\r\n\t\tlet animationState = effectComponent.ShowEffect();\r\n\t\tif(!animationState){\r\n\t\t\tthis.ErrLog(\"OnCreateEffectEnd ShowEffect fail\");\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\t//如果是0代表循环播放\r\n\t\tif(repeatCount > 0){\r\n\t\t\tanimationState.wrapMode  = cc.WrapMode.Default;\r\n\t\t\tanimationState.repeatCount = repeatCount;\r\n\t\t}\r\n\t\t//如果是-1,播放结束马上倒序播放\r\n\t\telse if(repeatCount == -1){\r\n\t\t\tanimationState.wrapMode  = cc.WrapMode.PingPong ;\r\n\t\t}\r\n\t\t//0是循环播放\r\n\t\telse{\r\n\t\t\t//需要注意的是，修改wrapMode时，会重置time以及repeatCount\r\n\t\t\tanimationState.wrapMode  = cc.WrapMode.Loop;\r\n\t\t}\r\n\r\n\t\tallEffectDict[effectName] = effectComponent;\r\n\r\n\t\treturn effectComponent\r\n\t},\r\n\r\n\tOnEffectAnimationEnd:function(event){\r\n\t\tlet modelComponent = event[\"Model\"];\r\n\t\t//let animationName = event[\"AnimationName\"];\r\n\r\n\t\tlet wndPath = modelComponent.GetModelProperty(\"WndPath\");\r\n\t\tlet effectName = modelComponent.GetModelProperty(\"EffectName\");\r\n\r\n\t\t//特效播放结束删除掉\r\n\t\tthis.DeleteWndEffect(wndPath, effectName);\r\n\t\tthis.OnEffectEnd(wndPath, effectName);\r\n\t},\r\n\r\n\t//删除控件特效\r\n\tDeleteWndEffect:function(wndPath, effectName){\r\n\t\tlet allEffectDict = this._effectDict[wndPath];\r\n\t\tif(!allEffectDict){\r\n\t\t\treturn\r\n\t\t}\r\n\t\tlet effectComponent = allEffectDict[effectName];\r\n\t\tif(!effectComponent){\r\n\t\t\treturn\r\n\t\t}\r\n\t\tdelete allEffectDict[effectName];\r\n\r\n\t\tthis.EffectManager.DeleteEffect(effectComponent);\r\n\t},\r\n\r\n\t//删除控件所有的特效\r\n\tDeleteWndAllEffect:function(wndPath){\r\n\t\tlet allEffectDict = this._effectDict[wndPath];\r\n\t\tif(!allEffectDict){\r\n\t\t\treturn\r\n\t\t}\r\n\t\tthis.EffectManager.DeleteEffectByDict(allEffectDict);\r\n\r\n\t\tdelete this._effectDict[wndPath]\r\n\t},\r\n\r\n\t//删除界面所有特效\r\n\tDeleteFormAllEffect:function(){\r\n\r\n\t\tfor(let wndPath in this._effectDict){\r\n\t\t\tthis.EffectManager.DeleteEffectByDict(this._effectDict[wndPath]);\r\n\t\t}\r\n\t\tthis._effectDict = {};\r\n\t},\r\n\t//------------快捷功能函数-------------\r\n\r\n\t//注冊事件函数\r\n\tRegEvent:function(eventName, func){\r\n\t\tthis._eventFuncDict[eventName] = func;\r\n\t},\r\n\r\n\t//系统提示\r\n\tShowSysMsg:function(msgID, msgArgList){\r\n\t\tthis.SysNotifyManager.ShowSysMsg(msgID, msgArgList);\r\n\t},\r\n\r\n\t//------------------2次确认框----------------------------\r\n\r\n\t/**\r\n\t * 等待\"是\"\"否\"确认框\r\n\t */\r\n\tWaitForConfirm:function(msgID, msgArgList, backArgList, curConFirmType){\r\n\r\n\t\t// 事件类型参数\r\n\t\tif(!backArgList){\r\n\t\t\tbackArgList = [];\r\n\t\t}\r\n\t\t// 默认确认框类型\r\n\t\tif(!curConFirmType){\r\n\t\t\tcurConFirmType = this.ShareDefine.Confirm;\r\n\t\t}\r\n\r\n\t\tthis.ConfirmManager.SetWaitForConfirmForm(this.OnConFirm.bind(this), msgID, backArgList);\r\n\r\n\t\t// frmSetUpTips 界面的确认框类型\r\n\t\tif(this.ShareDefine.SetUpTipFormConfirmList.InArray(curConFirmType)){\r\n\t\t\tthis.ConfirmManager.ShowConfirm(curConFirmType, msgID, msgArgList);\r\n\t\t}\r\n\t\t// frmSetUpTipsUse 使用道具界面\r\n\t\telse if(curConFirmType == this.ShareDefine.ConfirmUse){\r\n\t\t\tthis.ConfirmManager.ShowUseMsg(msgID, msgArgList);\r\n\t\t}\r\n\t\t// frmSetUpTips01 购买道具界面\r\n\t\telse if(curConFirmType == this.ShareDefine.ConfirmBuy){\r\n\t\t\tthis.ConfirmManager.ShowBuyMsg(msgID, backArgList);\r\n\t\t}\r\n\t\telse{\r\n\t\t\tthis.ErrLog(\"WaitForConfirm((%s, %s), (%s), %s) error\", msgID, msgArgList, backArgList, curConFirmType);\r\n\t\t\treturn;\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t * 2次确认点击回调\r\n\t * @param curEventType\r\n\t * @param curArgList\r\n\t */\r\n\tOnConFirm:function(clickType, msgID, backArgList){\r\n\t\t// 如果子类没有继承接口报错提示\r\n\t\tthis.ErrLog(\"Not have func OnConFirm(%s,%s,%s)\", clickType, msgID, backArgList);\r\n\t},\r\n\r\n\r\n\t//-------------点击函数-------------\r\n\r\n\t//模拟点击控件\r\n\tSimulateOnClick:function(wndPath){\r\n\r\n\t\tlet btnNode = cc.find(wndPath, this.node);\r\n\t\tif(!btnNode){\r\n\t\t\tthis.ErrLog(\"SimulateOnClick not find (%s)\", wndPath);\r\n\t\t\treturn\r\n\t\t}\r\n\t\tlet buttonComponent = btnNode.getComponent(cc.Button);\r\n\t\tif(!buttonComponent){\r\n\t\t\tthis.ErrLog(\"SimulateOnClick(%s) not find cc.Button\", wndPath);\r\n\t\t\treturn\r\n\t\t}\r\n\t\tlet btnName = btnNode.name;\r\n\t\tthis.OnClick(btnName, btnNode);\r\n\t},\r\n\r\n\t//关闭界面\r\n\tOnClick_Close:function(){\r\n\t\ttry{\r\n\t\t\tthis.CloseForm();\r\n\t\t}\r\n\t\tcatch(error){\r\n\t\t\tthis.ErrLog(\"OnClick_Close:%s\", error.stack);\r\n\t\t}\r\n\r\n\t},\r\n\r\n\t//控件点击回调\r\n\tOnClick_BtnWnd:function(eventTouch, eventData){\r\n\t\ttry{\r\n\t\t\tthis.SoundManager.PlaySound(\"BtnClick\");\r\n\t\t\tlet btnNode = eventTouch.currentTarget;\r\n\t\t\tlet btnName = btnNode.name;\r\n\t\t\tthis.OnClick(btnName, btnNode);\r\n\t\t}\r\n\t\tcatch (error){\r\n\t\t\tthis.ErrLog(\"OnClick_BtnWnd:%s\", error.stack);\r\n\t\t}\r\n\t},\r\n\r\n\tOnClick_Toggle:function(toggle){\r\n\r\n\t\ttry{\r\n\t\t\tthis.SoundManager.PlaySound(\"BtnClick\");\r\n\t\t\tlet btnNode = toggle.node;\r\n\t\t\tlet btnName = btnNode.name;\r\n\t\t\tthis.OnClick(btnName, btnNode);\r\n\t\t}\r\n\t\tcatch (error){\r\n\t\t\tthis.ErrLog(\"OnClick_Toggle:%s\", error.stack);\r\n\t\t}\r\n\t},\r\n\r\n\tOnClick_Form:function(eventTouch, eventData){\r\n\t\ttry{\r\n\t\t\tthis.OnClickForm(eventTouch);\r\n\t\t}\r\n\t\tcatch(error){\r\n\t\t\tthis.ErrLog(\"OnClick_Form:%s\", error.stack);\r\n\t\t}\r\n\r\n\t},\r\n\r\n\t//--------------子类重载接口---------------\r\n\t//创建界面被调用一次\r\n\tOnCreateInit:function(){\r\n\t},\r\n\r\n\t//每次显示界面被调用\r\n\tOnShow:function(/*..*/){\r\n\t},\r\n\r\n\t//每次关闭界面被调用\r\n\tOnClose:function(){\r\n\t},\r\n\r\n\t//销毁界面被调用\r\n\tOnDestroy:function(){\r\n\r\n\t},\r\n\t//定时回掉\r\n\tOnUpdate:function(passSecond){\r\n\r\n\t},\r\n\r\n\t//切换账号\r\n\tOnReload:function(){\r\n\r\n\t},\r\n\r\n\t//控件被点击\r\n\tOnClick:function(btnName, eventData){\r\n\r\n\t},\r\n\r\n\t//界面被点击\r\n\tOnClickForm:function(){\r\n\r\n\t},\r\n\r\n\t//特效播放结束\r\n\tOnEffectEnd:function(wndPath, effectName){\r\n\r\n\t},\r\n\t//网页版微信分享处理\r\n\tInitWeiXinShare:function(){\r\n\t\tconsole.log(\"XiaoFu InitWeiXinShare\");\r\n\t\tif(!cc.sys.isNative){\r\n\t\t\t//更新微信分享信息\r\n\t\t\tconsole.log(\"XiaoFu InitWeiXinShare OnWeChatReady\");\r\n    \t\tapp.ddz_WeChatManager().OnWeChatReady();\r\n    \t}\r\n\t},\r\n\tIsIphoneX:function(){\r\n\t    let FrameSize=cc.view.getFrameSize();\r\n\t    if(FrameSize.width==2436 && FrameSize.height==1125){\r\n\t    \treturn true;\r\n\t    }\r\n    \t//{ name: 'IPhone X', width: 375, height: 812, ratio: 3 },\r\n    \tif(!cc.sys.isNative){\r\n\t    \tif(FrameSize.width==812 && FrameSize.height==375){\r\n\t    \t\treturn true;\r\n\t    \t}\r\n    \t}\r\n    \treturn false;\r\n\t},\r\n\r\n\t//滑动结束\r\n\tOnScrollEnded:function(){\r\n\r\n\t},\r\n\t//获取用户推广Url\r\n\tGetTuiGuangUrl:function(){\r\n\t\tconsole.log(\"GetTuiGuangUrl begin\");\r\n\t\tthis.TuiGuangUrl = this.LocalDataManager.GetConfigProperty(\"SysSetting\", \"TuiGuangUrl\");\r\n\t\tconsole.log(\"GetTuiGuangUrl this.TuiGuangUrl:\",this.TuiGuangUrl);\r\n        if(this.TuiGuangUrl == ''){\r\n\t\t\tconsole.log(\"GetTuiGuangUrl 1\");\r\n        \tlet heroID = app.ddz_HeroManager().GetHeroProperty(\"pid\");\r\n        \tconsole.log(\"GetTuiGuangUrl 2\");\r\n\t\t\tlet ShortHeroID=this.ComTool.GetPid(heroID);\r\n\t\t\tconsole.log(\"GetTuiGuangUrl 3\");\r\n        \tlet long_url=\"http://api.t.sina.com.cn/short_url/shorten.json?source=3271760578&url_long=https://www.qp355.com/\"+ShortHeroID+'/';\r\n        \t//let long_url=\"http://api.t.sina.com.cn/short_url/shorten.json?source=3271760578&url_long=http://m.zle.com/xiaofu.php\";\r\n        \tconsole.log(\"GetTuiGuangUrl 4\");\r\n        \tapp.ddz_NetManager().SendPack(\"game.CShortenGenerate\",{\"url\":long_url},this.GetShorTuiGuangUrl.bind(this),this.FailTuiGuangUrl.bind(this));\r\n        \tconsole.log(\"GetTuiGuangUrl 5\");\r\n        }\r\n        else {\r\n        \tconsole.log(\"GetTuiGuangUrl 6\");\r\n        \tthis.InitWeiXinShare();\r\n        }\r\n        console.log(\"GetTuiGuangUrl end\");\r\n\t},\r\n\tgetRandom:function(min, max){\r\n            var r = Math.random() * (max - min);\r\n            var re = Math.round(r + min);\r\n            re = Math.max(Math.min(re, max), min)\r\n            return re;\r\n        },\r\n\tGetRandBaseUrl:function(){\r\n\t\tlet urls=app[app.subGameName + \"Client\"].GetClientConfigProperty(\"UrlLists\");\r\n\t\tif(urls==0){\r\n\t\t\treturn 0;\r\n\t\t}\r\n\t\tlet urlList=urls.split(',');\r\n\t\tlet count=urlList.length;\r\n\t\tlet rand=this.getRandom(0,count-1);\r\n\t\treturn urlList[rand]+\":89\";  //走89端口\r\n\t},\r\n\tFailTuiGuangUrl:function(serverPack){\r\n\t\tlet heroID = app.ddz_HeroManager().GetHeroProperty(\"pid\");\r\n\t\tlet ShortHeroID=this.ComTool.GetPid(heroID);\r\n\t\tlet randUrl=this.GetRandBaseUrl();\r\n\t\tthis.TuiGuangUrl='http://'+randUrl+\"/\"+ShortHeroID+\"/\";\r\n\t\tthis.LocalDataManager.SetConfigProperty(\"SysSetting\", \"TuiGuangUrl\",this.TuiGuangUrl);\r\n        this.InitWeiXinShare();\r\n\t},\r\n\t//获取微信短域名并且设置到字典\r\n\tGetShorTuiGuangUrl:function(serverPack){\r\n        if(typeof(serverPack.requestUrl)==\"undefined\"){\r\n            return;\r\n        }\r\n        let jsonStr=serverPack.requestUrl;\r\n        jsonStr=jsonStr.replace('[','');\r\n        jsonStr=jsonStr.replace(']','');\r\n        let ShareUrl=eval('(' + jsonStr + ')');\r\n        this.TuiGuangUrl=ShareUrl.url_short;\r\n        this.LocalDataManager.SetConfigProperty(\"SysSetting\", \"TuiGuangUrl\",this.TuiGuangUrl);\r\n        this.InitWeiXinShare();\r\n\r\n    },\r\n    //微信分享获取短域名并且启动分享\r\n    SuccessTcnUrl:function(serverPack){\r\n        let shareUrl=\"https://www.qp355.com/\"+app.ddz_ComTool().GetPid(app.ddz_HeroManager().GetHeroProperty(\"pid\"))+\"/\";\r\n    \tif(this.TuiGuangUrl){\r\n        \ttext=this.ShareText+\"\\n\"+\"下载地址:\"+shareUrl;\r\n    \t}else{\r\n    \t\tif(url_short){\r\n    \t\t\ttext=this.ShareText;\r\n    \t\t}else{\r\n    \t\t\ttext=this.ShareText;\r\n    \t\t}\r\n    \t}\r\n        console.log(\"SuccessTcnUrl text:\",text);\r\n        this.SDKManager.ShareText(text,\"0\");\r\n    },\r\n    //微信分享获取短域名失败分享\r\n    FailTcnUrl:function(event){\r\n    \tlet shareUrl=\"https://www.qp355.com/\"+app.ddz_ComTool().GetPid(app.ddz_HeroManager().GetHeroProperty(\"pid\"))+\"/\";\r\n        let text=this.ShareText+\"\\n\"+\"下载地址:\"+shareUrl;\r\n        this.SDKManager.ShareText(text,\"0\");\r\n    },\r\n\r\n    //启动微信房间分享\r\n    BeginShare:function(roomKey,text){\r\n    \tthis.ShareText=text;\r\n    \tthis.roomKey=roomKey;\r\n    \t//校服\r\n    \tlet long_url=\"http://api.t.sina.com.cn/short_url/shorten.json?source=3271760578&url_long=https://www.qp355.com/room\"+roomKey;\r\n        app.ddz_NetManager().SendPack(\"game.CShortenGenerate\",{\"url\":long_url},this.SuccessTcnUrl.bind(this),this.FailTcnUrl.bind(this));\r\n    },\r\n    GetAppName:function(){\r\n        let appName=cc.sys.localStorage.getItem('appName');\r\n        if (appName==\"baodao\") {\r\n            return \"baodao\";\r\n        }\r\n        if (appName==\"sansan\") {\r\n            return \"sansan\";\r\n        }\r\n        return \"xinhua\";\r\n    },\r\n    Click_btn_weixin:function(share = \"\"){\r\n    \tlet room = app.DDZRoom();\r\n        var WeChatShare= app.ddz_WeChatManager().WeChatShare(app.subGameName);\r\n        let title = null;\r\n        if(WeChatShare['special']){\r\n           title =WeChatShare['special'];\r\n        }else{\r\n           title =WeChatShare['title'];\r\n        }\r\n        let weChatAppShareUrl =WeChatShare['url'];\r\n        let setCount = room.GetRoomConfigByProperty(\"setCount\");  //多少局\r\n        let roomKey = room.GetRoomProperty(\"key\");  //房间号\r\n\r\n        let allPlayerInfo = room.GetRoomPosMgr().GetRoomAllPlayerInfo();\r\n        let joinPlayerCount = room.GetRoomPosMgr().GetRoomPlayerCount();  //几人场\r\n        let nowJoin=0;\r\n\r\n        for(let i=0;i<joinPlayerCount;i++){\r\n            if(allPlayerInfo[i].pid > 0)\r\n                nowJoin++;\r\n        }\r\n        title=title.replace('{房间号}',roomKey);\r\n        let gamedesc =\"\";\r\n        gamedesc=joinPlayerCount+\"人场\";\r\n        gamedesc=gamedesc+\",\"+setCount+\"局\";\r\n        let autoCardIdx= room.GetRoomConfigByProperty(\"paymentRoomCardType\"); \r\n        if(0 == autoCardIdx)\r\n            gamedesc=gamedesc+\",房主出卡\";\r\n        else if(1 == autoCardIdx)\r\n            gamedesc=gamedesc+\",平分房卡\";\r\n        else\r\n        \tgamedesc=gamedesc+\",大赢家出卡\";\r\n        let que=joinPlayerCount-nowJoin;\r\n        gamedesc+=\",\"+nowJoin+\"缺\"+que;\r\n        let teshuwanfan=this.WanFa();\r\n        //let CheckShareContent();\r\n        if(teshuwanfan){\r\n        \tgamedesc += \",\" + teshuwanfan;\r\n        }\r\n        //this.BeginShare(room.GetRoomProperty(\"key\"),text);\r\n\t    console.log(\"Click_btn_weixin:\",title);\r\n\t    console.log(\"Click_btn_weixin:\",gamedesc);\r\n\t    console.log(\"Click_btn_weixin:\",weChatAppShareUrl);\r\n\t    //this.SDKManager.Share(title, gamedesc, weChatAppShareUrl, \"0\");\r\n\t    if (share == \"WX\") {\r\n\t    \tlet appName=this.GetAppName();\r\n\t    \tif(appName == \"baodao\"){\r\n\t            this.SDKManager.ShareLineLink(title, gamedesc, weChatAppShareUrl);\r\n\t        }else{\r\n\t\t\t\tthis.SDKManager.Share(title, gamedesc, weChatAppShareUrl, \"0\");\r\n\t\t\t}\r\n\t\t} else if (share == \"DD\") {\r\n\t\t\tthis.SDKManager.ShareDD(title, gamedesc, weChatAppShareUrl);\r\n\t\t} else if (share == \"XL\") {\r\n\t\t\tthis.SDKManager.ShareXL(title, gamedesc, weChatAppShareUrl);\r\n\t\t} else {\r\n\t    \tthis.FormManager.ShowForm(app.subGameName + '_UIRoomCopy',roomKey,title,gamedesc,weChatAppShareUrl);\r\n\t    }\r\n    },\r\n    \r\n    Click_btn_fzkl:function(str){\r\n        if(cc.sys.isNative){\r\n            let argList = [{\"Name\":\"msg\",\"Value\":str.toString()}];\r\n            app.ddz_NativeManager().CallToNative(\"copyText\", argList);\r\n        }\r\n        else{\r\n            console.log(\"真机复制分享cc.sys.isNative\", str);\r\n        }\r\n    },\r\n\r\n    WanFa:function(cfg = null){\r\n    \tthis.gameCreateConfig = this.SysDataManager.GetTableDict(\"gameCreate\");\r\n \t\tlet playGame = app.subGameName;\r\n \t\tif(playGame==''){\r\n \t\t\treturn false;\r\n \t\t}\r\n \t\tlet gameType = playGame;\r\n \t\tconsole.log(\"XiaoFu this.gameCreateConfig:\",this.gameCreateConfig);\r\n    \tlet room = app.DDZRoom();\r\n    \tlet wanfa = '';\r\n    \tfor(let key in this.gameCreateConfig){\r\n    \t\tlet gameName = this.gameCreateConfig[key].GameName;\r\n    \t\tlet isWanFa = this.gameCreateConfig[key].isWanFa;\r\n            if( gameType == gameName && isWanFa == 1 ){\r\n            \tlet dataKey = this.gameCreateConfig[key].Key;\r\n            \tlet value = room.GetRoomConfigByProperty(dataKey);\r\n            \tif (cfg != null) {\r\n            \t\tvalue = cfg[dataKey];\r\n            \t}\r\n            \tif (value < 0) {\r\n            \t\tcontinue;\r\n            \t}\r\n            \tlet ToggleType = this.gameCreateConfig[key].ToggleType;\r\n \t\t\t\tlet ToggleDesc = this.gameCreateConfig[key].ToggleDesc.split(',');\r\n \t\t\t\tif(ToggleType == 0){\r\n \t\t\t\t\t//单选\r\n \t\t\t\t\tlet str = '';\r\n \t\t\t\t\tstr = ToggleDesc[value];\r\n \t\t\t\t\tif('zjh' == gameType && ('dingzhu' == dataKey || 'dizhu' == dataKey)){\r\n\t\t\t\t\t\tlet baseDiZhus = [1,2,5,10];\r\n\t\t\t\t\t\tlet dizhuIdx = room.GetRoomConfigByProperty('dizhu');\r\n\t\t\t\t\t\tlet dizhu = baseDiZhus[dizhuIdx];\r\n\t\t\t\t\t\tlet dingzhu = 0;\r\n\t\t\t\t\t\tif(0 == value)\r\n\t\t\t\t            dingzhu = dizhu * 5;\r\n\t\t\t\t        else\r\n\t\t\t\t            dingzhu = dizhu * 10;\r\n\t\t\t\t        dizhu = dizhu * room.GetRoomConfigByProperty('baseMark');\r\n\t\t\t\t\t\tdingzhu = dingzhu * room.GetRoomConfigByProperty('baseMark');\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif('dingzhu' == dataKey)\r\n\t\t\t\t\t\t\tstr = dingzhu.toString() + '分';\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\tstr = dizhu.toString() + '分';\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(typeof(str)==\"undefined\"){\r\n                        continue;\r\n                    }\r\n \t\t\t\t\tif (wanfa == ''){\r\n \t\t\t\t\t\twanfa = str;\r\n \t\t\t\t\t} else {\r\n \t\t\t\t\t\twanfa = wanfa + \"，\" + str;\r\n \t\t\t\t\t}\r\n \t\t\t\t}else if(ToggleType == 1){\r\n \t\t\t\t\t//多选\r\n \t\t\t\t\tfor(let j = 0; j < value.length;j++){\r\n\t\t\t\t\t\tif(gameType == 'pdk_lyfj'){\r\n\t\t\t\t\t\t\tif(value[j] == 4 || value[j] == 15 || value[j] == 18){\r\n\t\t\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tlet str = '';\r\n\t\t\t\t\t\tif(gameType == 'pdk_lyfj'){\r\n\t\t\t\t\t\t\tif(value[j] == 11){\r\n\t\t\t\t\t\t\t\tstr = ToggleDesc[3];\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse if(value[j] == 21){\r\n\t\t\t\t\t\t\t\tstr = ToggleDesc[4];\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse{\r\n\t\t\t\t\t\t\t\tstr = ToggleDesc[value[j]];\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse{\r\n\t\t\t\t\t\t\tstr = ToggleDesc[value[j]];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif(typeof(str)==\"undefined\"){\r\n                            continue;\r\n                        }\r\n \t\t\t\t\t\tif(wanfa == ''){\r\n \t\t\t\t\t\t\twanfa = str;\r\n \t\t\t\t\t\t}else{\r\n \t\t\t\t\t\t\twanfa = wanfa + \"，\" + str;\r\n \t\t\t\t\t\t}\r\n \t\t\t\t\t}\r\n \t\t\t\t}\r\n            }\r\n        }\r\n        let sportsDouble = room.GetRoomConfigByProperty(\"sportsDouble\");\r\n        if (cfg != null) {\r\n\t\t\tsportsDouble = cfg[\"sportsDouble\"];\r\n\t\t}\r\n\t\tif (typeof(sportsDouble) != \"undefined\") {\r\n\t\t\twanfa += \"，比赛分倍数：\"+sportsDouble;\r\n\t\t}\r\n \t\t\r\n \t\treturn wanfa;\r\n    },\r\n    GameTyepStringUp:function(){\r\n    \treturn app.subGameName.toUpperCase();\r\n\t},\r\n    //手动释放内存\r\n    DestroyFromParent:function(node){\r\n    \tnode.removeFromParent();\r\n    \t//销毁节点\r\n        node.destroy();\r\n    },\r\n    CheckUpdateNotice:function(){\r\n        let gameTypeId=this.ShareDefine.GametTypeNameDict[this.GameTyepStringUp()];\r\n        app[app.subGameName + \"_NetManager\"]().SendPack(\"game.CMaintainGameNotice\", {\"gameTypeId\":gameTypeId},function(event){\r\n            if(typeof(event.status)==\"undefined\"){\r\n                return;\r\n            }\r\n            app[app.subGameName + \"_NetManager\"]().SendPack(\"game.CMaintainGameIsGetNotice\", {\"gameTypeId\":gameTypeId});\r\n            if(typeof(event.content)!=\"undefined\"){\r\n                if(event.content!=\"\" && event.content!=null){\r\n                    app[app.subGameName + \"_SysNotifyManager\"]().ShowSysMsg(event.content); //弹窗提示用户\r\n                }\r\n            }\r\n            \r\n        });\r\n    },\r\n});\r\n\r\nmodule.exports = ddz_BaseForm;\r\n\r\n\r\n\r\n"]}