{"version":3,"sources":["../../../../../assets/script/common/assets/script/common/ddz_ConfirmManager.js"],"names":["app","require","ddz_ConfirmManager","BaseClass","extend","Init","JS_Name","subGameName","_ConfirmFunc","_ConfirmMsgID","_ConfirmBackArgList","SysNotifyManager","ddz_SysNotifyManager","SetWaitForConfirmForm","curFunc","msgID","backArgList","ErrLog","SetConfirmArgList","ShowConfirm","confirmType","msgArgList","content","GetSysMsgContentByMsgID","ddz_FormManager","ShowForm","CloseAllBox","ShowBuyMsg","ShowUseMsg","OnConFirmResult","clickType","func","argList","g_ddz_ConfirmManager","exports","GetModel"],"mappings":";;;;;;AAAA;;;;;;;;;;;;;;AAcA,IAAIA,MAAMC,QAAQ,SAAR,CAAV;AACA;;;AAGA,IAAIC,qBAAqBF,IAAIG,SAAJ,CAAcC,MAAd,CAAqB;;AAE7C;;;AAGAC,OAAK,gBAAU;AACd,OAAKC,OAAL,GAAeN,IAAIO,WAAJ,GAAkB,iBAAjC;AACA;AACA,OAAKC,YAAL,GAAoB,IAApB;;AAEA;AACA,OAAKC,aAAL,GAAqB,EAArB;;AAEA;AACA,OAAKC,mBAAL,GAA2B,EAA3B;;AAEA,OAAKC,gBAAL,GAAwBX,IAAIY,oBAAJ,EAAxB;AAEA,EAlB4C;;AAqB7C;;;;;;AAMAC,wBAAsB,+BAASC,OAAT,EAAkBC,KAAlB,EAAyBC,WAAzB,EAAqC;;AAE1D;AACA,MAAG,OAAOF,OAAP,IAAmB,UAAtB,EAAiC;AAChC,QAAKG,MAAL,CAAY,mCAAZ,EAAiDH,OAAjD,EAA0DC,KAA1D;AACA;AACA;AACD,OAAKP,YAAL,GAAoBM,OAApB;AACA,OAAKL,aAAL,GAAqBM,KAArB;AACA,OAAKL,mBAAL,GAA2BM,WAA3B;AACA,EArC4C;;AAuC7C;;;;;;AAMAE,oBAAkB,2BAASF,WAAT,EAAqB;AACtC,OAAKN,mBAAL,GAA2BM,WAA3B;AACA,EA/C4C;;AAiD7C;;;;;;AAMAG,cAAY,qBAASC,WAAT,EAAsBL,KAAtB,EAA6BM,UAA7B,EAAwC;AACnD,MAAIC,UAAU,KAAKX,gBAAL,CAAsBY,uBAAtB,CAA8CR,KAA9C,EAAqDM,UAArD,CAAd;AACArB,MAAIwB,eAAJ,GAAsBC,QAAtB,CAA+BzB,IAAIO,WAAJ,GAAkB,YAAjD,EAA+D,WAA/D,EAA4Ea,WAA5E,EAAyFL,KAAzF,EAAgGM,UAAhG,EAA4GC,OAA5G;AACA,EA1D4C;;AA4D7C;;;;;;AAMAI,cAAY,uBAAU,CACrB,CAnE4C;;AAqE7C;;;;;;AAMAC,aAAW,oBAASZ,KAAT,EAAgBM,UAAhB,EAA2B;AACrCrB,MAAIwB,eAAJ,GAAsBC,QAAtB,CAA+B,gBAA/B,EAAiDV,KAAjD,EAAwDM,UAAxD;AACA,EA7E4C;;AAgF7C;;;;;;AAMAO,aAAW,oBAASb,KAAT,EAAgBM,UAAhB,EAA2B;AACrC,OAAKJ,MAAL,CAAY,YAAZ;AACA,EAxF4C;;AA0F7C;;;;;;AAMAY,kBAAgB,yBAASC,SAAT,EAAmB;;AAElC,MAAG,CAAC,KAAKtB,YAAT,EAAsB;AACrB;AACA;;AAED,MAAG,OAAO,KAAKA,YAAZ,IAA6B,UAAhC,EAA2C;AAC1C,QAAKS,MAAL,CAAY,iCAAZ,EAA+C,KAAKT,YAApD;AACA;AACA;AACD;AACA,MAAIO,QAAQ,KAAKN,aAAjB;AACA,MAAIsB,OAAO,KAAKvB,YAAhB;AACA,MAAIwB,UAAU,KAAKtB,mBAAnB;;AAEA,OAAKF,YAAL,GAAoB,IAApB;AACA,OAAKE,mBAAL,GAA2B,EAA3B;;AAEAqB,OAAKD,SAAL,EAAgBf,KAAhB,EAAuBiB,OAAvB;AACA;;AAnH4C,CAArB,CAAzB;;AAuHA;AACA,IAAIC,uBAAuB,IAA3B;;AAEA;;;AAGAC,QAAQC,QAAR,GAAmB,YAAU;AAC5B,KAAI,CAACF,oBAAL,EACCA,uBAAuB,IAAI/B,kBAAJ,EAAvB;;AAED,QAAO+B,oBAAP;AAEA,CAND","file":"ddz_ConfirmManager.js","sourceRoot":"../../../../../assets/script/common","sourcesContent":["/*\r\n * \tConfirmManager.js\r\n * \t2次确认框管理器\r\n * \r\n *\tauthor:hongdian\r\n *\tdate:2014-10-28\r\n *\tversion:1.0\r\n *\r\n * 修改时间 修改人 修改内容:\r\n * \r\n * change: \"2014-10-28 20:24\" hongdian 同步C++\r\n * \r\n */\r\n\r\nvar app = require(\"ddz_app\");\r\n/**\r\n * 类构造\r\n */\r\nvar ddz_ConfirmManager = app.BaseClass.extend({\r\n\t\r\n\t/**\r\n\t * 初始化函数\r\n\t */\r\n\tInit:function(){\r\n\t\tthis.JS_Name = app.subGameName + \"_ConfirmManager\";\r\n\t\t//等待玩家确认执行函数\r\n\t\tthis._ConfirmFunc = null;\r\n\r\n\t\t//等待事件类型\r\n\t\tthis._ConfirmMsgID = \"\";\r\n\r\n\t\t//等待事件附加参数列表\r\n\t\tthis._ConfirmBackArgList = [];\r\n\r\n\t\tthis.SysNotifyManager = app.ddz_SysNotifyManager();\r\n\r\n\t},\r\n\r\n\t\r\n\t/**\r\n\t * 记录等待确认界面事件\r\n\t * @param {}  curFunc 回调函数\r\n\t * @return {} 0/1\r\n\t * @remarks {} PY调用  \r\n\t */\r\n\tSetWaitForConfirmForm:function(curFunc, msgID, backArgList){\r\n\r\n\t\t//界面不存在\r\n\t\tif(typeof(curFunc) != \"function\"){\r\n\t\t\tthis.ErrLog(\"SetWaitForConfirmForm(%s,%s)error\", curFunc, msgID);\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis._ConfirmFunc = curFunc;\r\n\t\tthis._ConfirmMsgID = msgID;\r\n\t\tthis._ConfirmBackArgList = backArgList;\r\n\t},\r\n\r\n\t/**\r\n\t * 修改事件回调参数列表\r\n\t * @param {}  curFunc 回调函数\r\n\t * @return {} 0/1\r\n\t * @remarks {} PY调用\r\n\t */\r\n\tSetConfirmArgList:function(backArgList){\r\n\t\tthis._ConfirmBackArgList = backArgList;\r\n\t},\r\n\r\n\t/**\r\n\t * 带有\"确定\"和\"取消\"按钮的消息提示框\r\n\t * @param {}  msgID 提示信息id\r\n\t * @return {} 0/1\r\n\t * @remarks {} PY调用      \r\n\t */\r\n\tShowConfirm:function(confirmType, msgID, msgArgList){\r\n\t\tlet content = this.SysNotifyManager.GetSysMsgContentByMsgID(msgID, msgArgList);\r\n\t\tapp.ddz_FormManager().ShowForm(app.subGameName + \"_UIMessage\", \"OnConFirm\", confirmType, msgID, msgArgList, content)\r\n\t},\r\n\r\n\t/**\r\n\t * 关闭全部提示框界面\r\n\t * @param {}  self 类本身 \r\n\t * @return {} 无\r\n\t * @remarks {} 函数详细说明:关闭全部提示框界面\r\n\t */\r\n\tCloseAllBox:function(){\r\n\t},\r\n\r\n\t/**\r\n\t * 显示购买按钮\r\n\t * @param {}  msgID 提示信息id\r\n\t * @return {} 0/1\r\n\t * @remarks {} PY调用\r\n\t */\r\n\tShowBuyMsg:function(msgID, msgArgList){\r\n\t\tapp.ddz_FormManager().ShowForm(\"UIAmountAffirm\", msgID, msgArgList)\r\n\t},\r\n\r\n\r\n\t/**\r\n\t * 使用道具界面\r\n\t * @param {}  msgID 提示信息id\r\n\t * @return {} 0/1\r\n\t * @remarks {} PY调用\r\n\t */\r\n\tShowUseMsg:function(msgID, msgArgList){\r\n\t\tthis.ErrLog(\"ShowUseMsg\")\r\n\t},\r\n\r\n\t/**\r\n\t * 等待确认框回调函数\r\n\t * @param {}  result \r\n\t * @return {} null\r\n\t * @remarks {} null\r\n\t */\r\n\tOnConFirmResult:function(clickType){\r\n\r\n\t\tif(!this._ConfirmFunc){\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\tif(typeof(this._ConfirmFunc) != \"function\"){\r\n\t\t\tthis.ErrLog(\"OnConFirm _ConfirmFunc:%s error\", this._ConfirmFunc);\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t//清空\r\n\t\tvar msgID = this._ConfirmMsgID;\r\n\t\tvar func = this._ConfirmFunc;\r\n\t\tvar argList = this._ConfirmBackArgList;\r\n\r\n\t\tthis._ConfirmFunc = null;\r\n\t\tthis._ConfirmBackArgList = [];\r\n\r\n\t\tfunc(clickType, msgID, argList);\r\n\t},\r\n\r\n})\r\n\r\n//定义单例\r\nvar g_ddz_ConfirmManager = null;\r\n\r\n/**\r\n * 绑定模块外部方法\r\n */\r\nexports.GetModel = function(){\r\n\tif (!g_ddz_ConfirmManager)\r\n\t\tg_ddz_ConfirmManager = new ddz_ConfirmManager();\r\n\r\n\treturn g_ddz_ConfirmManager\r\n\r\n}\r\n"]}