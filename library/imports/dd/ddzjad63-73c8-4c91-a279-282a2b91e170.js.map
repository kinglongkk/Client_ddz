{"version":3,"sources":["../../../../../assets/script/net/assets/script/net/ddz_NetManager.js"],"names":["app","require","emitter","ddz_NetManager","BaseClass","extend","Init","JS_Name","ShareDefine","ddz_ShareDefine","SysDataManager","ddz_SysDataManager","NetWork","ddz_NetWork","httpRequest","ddz_NetRequest","ComTool","ddz_ComTool","NewSysMsg","GetTableDict","H5ClientStartUrl","InitServerAddress","InitHttpPack","RegNetPack","OnPack_GMPack","RetryTime","OnReload","InitConnectAccountID","accountID","InitConnectInfo","clientConfig","subGameName","GetClientConfig","AccountServerUrl","join","OrderServerUrl","ResServerUrl","gateServerInfo","SysLog","SetGateServerAddress","gateServerIP","gateServerPort","ErrLog","LocalDataManager","GetConfigProperty","OnEvent","SetServerAddress","gameServerIP","gameServerPort","dbGameServerInfo","SetConfigProperty","RefreshClientConfig","SetAccountAddress","accountServerIP","serverServerPort","dbAccountServerInfo","SetResAddress","resServerIP","dbResServerInfo","SetOrderAddress","orderServerIP","dbOrderServerInfo","SetH5ClientStartUrl","h5ClientStartUrl","sendHttpPackDict","packReceiveServerTypeDict","ClientHttpPackDict","ddz_HttpPack","packHeadName","headNameList","split","length","headInt","Math","floor","hasOwnProperty","InitConnectServer","InitWebSocket","OnWebSocketEvent","bind","OnConnectSuccess","GetUrlStr","dataDict","urlSendStr","key","substring","GetHttpSendPack","head","GetHttpSendPackUrl","serverType","url","GetH5ClientStartUrl","GetResServerHttpAddress","SendReConnect","eventName","sendPack","RequestReConnect","SendPack","callback","errorCallback","Request","SendPackOnly","NotifyPack","Notify","func","target","toLocaleLowerCase","valueType","Object","prototype","toString","call","slice","on","UnRegNetPack","off","UnAllRegNetPack","removeAllListeners","isReconnecting","arg","ReConnect","ddz_SysNotifyManager","ShowSysMsg","OnReceive","OnCodeError","OnGMReceive","OnConFirm","clickType","msgID","backArgList","ddz_FormManager","ShowForm","CloseForm","routeName","receivePack","emit","error","stack","JSON","stringify","code","resultInfo","codeMsg","ErrorSysMsg","InOtherRoomPlay","ExitGame","ResetRoomInfo","roomID","toUpperCase","GetEnterRoomID","SendGetRoomInfo","Maintain","finishttime","GetDateYearMonthDayHourMinuteString","ErrorNotRoomCard","desc","GetSysMsgContentByMsgID","ddz_ConfirmManager","SetWaitForConfirmForm","ConfirmBuyGoTo","ErrorMaxRoom","NotMagic","ErrorNotQuanCard","GetFormComponentByFormName","OnClick","roomMgr","errorMsg","IsDevelopment","NoShowSysMsgCodeList","InArray","argDict","RegHttpNetPack","UnRegHttpNetPack","SendHttpPack","console","log","serverUrl","Head","argString","NetLog","SendHttpRequest","OnReceiveHttpPack","httpResText","parse","OnConnectHttpFail","readyState","status","ddz_HeroAccountManager","UpdateAccessPoint","AccountServerUrlHttps","Disconnect","byLogout","SendGMPack","cmdString","serverPack","g_ddz_NetManager","exports","GetModel"],"mappings":"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","file":"ddz_NetManager.js","sourceRoot":"../../../../../assets/script/net","sourcesContent":["/*\r\n    网络通信管理器\r\n*/\r\nvar app = require(\"ddz_app\");\r\nvar emitter = require('ddz_emitter');\r\n\r\nvar ddz_NetManager = app.BaseClass.extend({\r\n\r\n    Init:function(){\r\n        this.JS_Name = \"ddz_NetManager\";\r\n\r\n        this.emitter = new emitter();\r\n\t    this.ShareDefine = app.ddz_ShareDefine();\r\n        this.SysDataManager = app.ddz_SysDataManager();\r\n\t    this.NetWork = app.ddz_NetWork();\r\n\t    this.httpRequest = app.ddz_NetRequest();\r\n\t    this.ComTool = app.ddz_ComTool();\r\n\r\n\r\n\t    this.NewSysMsg = this.SysDataManager.GetTableDict(\"NewSysMsg\");\r\n\r\n\t    //h5客户端启动url\r\n\t    this.H5ClientStartUrl = \"\";\r\n\r\n        this.InitServerAddress();\r\n\r\n        this.InitHttpPack();\r\n\r\n\t    this.RegNetPack(\"game.C1105GMPack\", this.OnPack_GMPack, this);\r\n\r\n\t    this.RetryTime=0;\r\n    },\r\n\r\n\t//切换账号\r\n\tOnReload:function(){\r\n\t\tthis.NetWork.OnReload();\r\n\t},\r\n\r\n\t//初始化连接\r\n\tInitConnectAccountID:function(accountID){\r\n\t\tthis.NetWork.InitConnectInfo(accountID);\r\n\t},\r\n\r\n    //初始化连接的服务器地址\r\n    InitServerAddress:function(){\r\n\r\n\t    let clientConfig = app[app.subGameName + \"Client\"].GetClientConfig();\r\n\r\n\t    this.AccountServerUrl = ['http://', clientConfig[\"AccountServerIP\"], \":\", clientConfig[\"AccountServerPort\"], \"/ClientPack\"].join(\"\");\r\n\r\n\t    //this.AccountServerUrlHttps = ['https://', clientConfig[\"AccountServerIP\"], \":\", clientConfig[\"AccountServerPort\"].toString()+'0', \"/ClientPack\"].join(\"\");\r\n\r\n\r\n\t    this.OrderServerUrl = ['http://', clientConfig[\"OrderServerIP\"], \":\", clientConfig[\"OrderServerPort\"], \"/ClientPack\"].join(\"\");\r\n\r\n\t    this.ResServerUrl = ['http://', clientConfig[\"ResServerIP\"], \":\", clientConfig[\"ResServerPort\"], \"/ClientPack\"].join(\"\");\r\n\r\n\t    let gateServerInfo = app[\"GateServerInfo\"];\r\n\r\n\t\tthis.SysLog(\"AccountServer(%s)\", this.AccountServerUrl, \"b-g\");\r\n\t    this.SysLog(\"OrderServer(%s)\", this.OrderServerUrl, \"b-g\");\r\n\t    this.SysLog(\"ResServerUrl(%s)\", this.ResServerUrl, \"b-g\");\r\n\t    this.SysLog(\"Server(%s:%s)\", clientConfig[\"GameServerIP\"], clientConfig[\"GameServerPort\"], \"b-g\");\r\n    },\r\n\r\n\t//设置首次连接服务器IP\r\n\tSetGateServerAddress:function(gateServerIP, gateServerPort){\r\n\t\tif(!gateServerIP || !gateServerPort){\r\n\t\t\tthis.ErrLog(\"SetGateServerAddress(%s,%s) error\", gateServerIP, gateServerPort);\r\n\t\t\treturn\r\n\t\t}\r\n\t\t//更新内存\r\n\t\tlet gateServerInfo = app[\"GateServerInfo\"];\r\n\t\tgateServerInfo[\"GateServerIP\"] = gateServerIP;\r\n\t\tgateServerInfo[\"GateServerPort\"] = gateServerPort;\r\n\r\n\t\t//修改本地数据库\r\n\t\tapp.LocalDataManager().GetConfigProperty(\"DebugInfo\", \"GateServerInfo\", gateServerInfo);\r\n\r\n\t\tapp[app.subGameName + \"Client\"].OnEvent(\"OnGateServerChangeIP\", null);\r\n\t},\r\n\r\n\t//设置服务器连接IP地址\r\n    SetServerAddress:function(gameServerIP, gameServerPort){\r\n\r\n\t    if(!gameServerIP || !gameServerPort){\r\n\t\t    this.ErrLog(\"SetServerAddress(%s,%s) error\", gameServerIP, gameServerPort);\r\n\t\t    return\r\n\t    }\r\n\r\n\t    //保存到本地数据库\r\n\t    let LocalDataManager = app.LocalDataManager();\r\n\t    let dbGameServerInfo = {\r\n\t\t\t\t\t\t\t\t    \"GameServerIP\":gameServerIP,\r\n\t\t\t\t\t\t\t\t    \"GameServerPort\":gameServerPort,\r\n\t\t\t\t\t\t\t    }\r\n\t    LocalDataManager.SetConfigProperty(\"DebugInfo\", \"GameServerInfo\", dbGameServerInfo);\r\n\r\n\t    //修改内存中缓存的字典\r\n\t    app[app.subGameName + \"Client\"].RefreshClientConfig()\r\n\r\n\t    app[app.subGameName + \"Client\"].OnEvent(\"OnChangeIP\", null);\r\n    },\r\n\tSetAccountAddress:function(accountServerIP, serverServerPort){\r\n\t\tif(!accountServerIP || !serverServerPort){\r\n\t\t\tthis.ErrLog(\"SetAccountAddress(%s,%s) error\", accountServerIP, serverServerPort);\r\n\t\t\treturn\r\n\t\t}\r\n\t\tthis.AccountServerUrl = ['http://', accountServerIP, \":\", serverServerPort, \"/ClientPack\"].join(\"\");\r\n\t\t//this.AccountServerUrlHttps = ['https://', accountServerIP, \":\", serverServerPort.toString()+'0', \"/ClientPack\"].join(\"\");\r\n\r\n\t\t//保存到本地数据库\r\n\t\tlet LocalDataManager = app.LocalDataManager();\r\n\t\tlet dbAccountServerInfo = {\r\n\t\t\t\"AccountServerIP\":accountServerIP,\r\n\t\t\t\"AccountServerPort\":serverServerPort,\r\n\t\t}\r\n\t\tLocalDataManager.SetConfigProperty(\"DebugInfo\", \"AccountServerInfo\", dbAccountServerInfo);\r\n\r\n\t\t//修改内存中缓存的字典\r\n\t\tapp[app.subGameName + \"Client\"].RefreshClientConfig()\r\n\r\n\t\tapp[app.subGameName + \"Client\"].OnEvent(\"OnChangeIP\", null);\r\n\t},\r\n    SetResAddress:function(resServerIP, serverServerPort){\r\n        if(!resServerIP || !serverServerPort){\r\n            this.ErrLog(\"SetResAddress(%s,%s) error\", resServerIP, serverServerPort);\r\n            return\r\n        }\r\n        this.ResServerUrl = ['http://', resServerIP, \":\", serverServerPort, \"/ClientPack\"].join(\"\");\r\n\r\n        //保存到本地数据库\r\n        let LocalDataManager = app.LocalDataManager();\r\n        let dbResServerInfo = {\r\n            \"ResServerIP\":resServerIP,\r\n            \"ResServerPort\":serverServerPort,\r\n        }\r\n        LocalDataManager.SetConfigProperty(\"DebugInfo\", \"ResServerInfo\", dbResServerInfo);\r\n\r\n        //修改内存中缓存的字典\r\n        app[app.subGameName + \"Client\"].RefreshClientConfig()\r\n\r\n        app[app.subGameName + \"Client\"].OnEvent(\"OnChangeIP\", null);\r\n    },\r\n    SetOrderAddress:function(orderServerIP, serverServerPort){\r\n        if(!orderServerIP || !serverServerPort){\r\n            this.ErrLog(\"SetOrderAddress(%s,%s) error\", orderServerIP, serverServerPort);\r\n            return\r\n        }\r\n        this.OrderServerUrl = ['http://', orderServerIP, \":\", serverServerPort, \"/ClientPack\"].join(\"\");\r\n\r\n        //保存到本地数据库\r\n        let LocalDataManager = app.LocalDataManager();\r\n        let dbOrderServerInfo = {\r\n            \"OrderServerIP\":orderServerIP,\r\n            \"OrderServerPort\":serverServerPort,\r\n        }\r\n        LocalDataManager.SetConfigProperty(\"DebugInfo\", \"OrderServerInfo\", dbOrderServerInfo);\r\n\r\n        //修改内存中缓存的字典\r\n        app[app.subGameName + \"Client\"].RefreshClientConfig()\r\n\r\n        app[app.subGameName + \"Client\"].OnEvent(\"OnChangeIP\", null);\r\n    },\r\n\r\n\r\n\t//设置资源服务器地址\r\n\tSetH5ClientStartUrl:function(h5ClientStartUrl){\r\n\t\tthis.H5ClientStartUrl = h5ClientStartUrl;\r\n\t},\r\n\r\n\r\n\t//初始化http封包\r\n    InitHttpPack:function(){\r\n        //输出发送封包字典\r\n        // {\r\n        //     0xFF00:packName\r\n        // }\r\n        this.sendHttpPackDict = {};\r\n\r\n        //封包发送到那个服务器\r\n        // {\r\n        //     0xFF00:account,\r\n        // }\r\n        this.packReceiveServerTypeDict = {};\r\n\r\n        let ClientHttpPackDict = app.ddz_HttpPack().ClientHttpPackDict;\r\n\r\n        for(let packHeadName in ClientHttpPackDict){\r\n            let headNameList = packHeadName.split(\".\");\r\n            if(headNameList.length != 3){\r\n                this.ErrLog(\"InitHttpPack ClientHttpPackDict packHeadName:%s error\", packHeadName);\r\n                continue\r\n            }\r\n            let headInt = Math.floor(headNameList[1]);\r\n\r\n            if(this.sendHttpPackDict.hasOwnProperty(headInt)){\r\n                this.ErrLog(\"InitHttpPack sendHttpPackDict have find(%s) headInt\", packHeadName);\r\n                continue\r\n            }\r\n            this.sendHttpPackDict[headInt] = ClientHttpPackDict[packHeadName];\r\n\r\n            this.packReceiveServerTypeDict[headInt] = headNameList[2];\r\n        }\r\n    },\r\n\r\n    //初始化连接\r\n\tInitConnectServer:function(){\r\n        app[app.subGameName + \"Client\"].OnEvent(\"ModalLayer\", \"OpenNet\");\r\n\r\n\t\tlet clientConfig = app[app.subGameName + \"Client\"].GetClientConfig();\r\n\r\n\t\tlet gameServerIP = clientConfig[\"GameServerIP\"];\r\n\t\tlet gameServerPort = clientConfig[\"GameServerPort\"];\r\n\r\n    \t//初始化连接服务器\r\n\t    this.NetWork.InitWebSocket(gameServerIP, gameServerPort, this.OnWebSocketEvent.bind(this), this.OnConnectSuccess.bind(this));\r\n\r\n    },\r\n\r\n\r\n    /**\r\n     * 获取url字符串格式\r\n     * @param dataDict\r\n     * @returns {String}\r\n     */\r\n    GetUrlStr:function(dataDict){\r\n\r\n        if(!dataDict){\r\n            return \"\"\r\n        }\r\n        var urlSendStr = '?';\r\n        for(var key in dataDict){\r\n            urlSendStr += key + '=' + dataDict[key] + '&';\r\n        }\r\n        //去掉最后一个&\r\n        urlSendStr = urlSendStr.substring(0, urlSendStr.length-1);\r\n\r\n        return urlSendStr;\r\n    },\r\n\r\n    //获取http请求发送的封包\r\n    GetHttpSendPack:function(head){\r\n        if(!this.sendHttpPackDict.hasOwnProperty(head)){\r\n            this.ErrLog(\"GetHttpSendPack sendHttpPackDict not find:%s\", head);\r\n            return\r\n        }\r\n        return {\"Head\":head}\r\n    },\r\n\r\n    //获取http封包发送的目的地地址\r\n    GetHttpSendPackUrl:function(head){\r\n        let serverType = this.packReceiveServerTypeDict[head];\r\n        if(!serverType){\r\n            this.ErrLog(\"GetHttpSendPackUrl(%s) not find\", head);\r\n            return\r\n        }\r\n\r\n        let url = \"\";\r\n        switch(serverType){\r\n            case \"account\":\r\n                url = this.AccountServerUrl;\r\n                break\r\n\t        case \"order\":\r\n\t\t        url = this.OrderServerUrl;\r\n\t\t        break\r\n\t        case \"res\":\r\n\t\t        url = this.ResServerUrl;\r\n\t\t        break\r\n            default:\r\n                this.ErrLog(\"GetHttpSendPackUrl serverType:%s error\", serverType);\r\n                break\r\n        }\r\n\r\n        return url\r\n    },\r\n\r\n\t//获取客户端启动后的html地址串\r\n\tGetH5ClientStartUrl:function(){\r\n\t\treturn this.H5ClientStartUrl\r\n\t},\r\n\r\n\t//获取客户端资源服务器HTTP地址\r\n\tGetResServerHttpAddress:function(){\r\n\t\tlet clientConfig = app[app.subGameName + \"Client\"].GetClientConfig();\r\n\t\treturn ['http://', clientConfig[\"ResServerIP\"], \":\", clientConfig[\"ResServerPort\"]].join(\"\");\r\n\t},\r\n\r\n\t//-------------websocket请求------------------\r\n\t//系统自主发送重连请求\r\n\tSendReConnect:function(eventName, sendPack){\r\n\t\tapp[app.subGameName + \"Client\"].OnEvent(\"ModalLayer\", \"OpenNet\");\r\n\t\tthis.NetWork.RequestReConnect(eventName, sendPack)\r\n\t},\r\n\t//向服务器发起请求\r\n\tSendPack:function(eventName, sendPack, callback=null, errorCallback=null){\r\n\t\t// console.log(sendPack);\r\n\t\t//开启模态层\r\n\t\tapp[app.subGameName + \"Client\"].OnEvent(\"ModalLayer\", \"OpenNet\");\r\n\t\tthis.NetWork.Request(eventName, sendPack, callback, errorCallback);\r\n\t},\r\n\r\n\t//向服务器发起请求,不触发网络\r\n\tSendPackOnly:function(eventName, sendPack, callback=null, errorCallback=null){\r\n\t\tthis.NetWork.Request(eventName, sendPack, callback, errorCallback);\r\n\t},\r\n\t\r\n\t//通知服务器得封包数据\r\n\tNotifyPack:function(eventName, sendPack){\r\n\t\tthis.NetWork.Notify(eventName, sendPack);\r\n\t},\r\n\r\n    //注册封包事件(需要字符串封包头,才可以避免RegHttpNetPack相同封包头注册事件区分)\r\n    RegNetPack:function(head, func, target){\r\n        head = head.toLocaleLowerCase();\r\n        let valueType = Object.prototype.toString.call(head).slice(\"[object \".length, -1);\r\n        if(valueType != \"String\"){\r\n            this.ErrLog(\"RegNetPack need String head\");\r\n            return\r\n        }\r\n\r\n\t    if(!func || !target){\r\n\t\t    this.ErrLog(\"RegNetPack head:%s error\", head);\r\n\t\t    return\r\n\t    }\r\n    \tthis.emitter.on(head, func, target);\r\n    },\r\n\r\n    //取消封包注册\r\n    UnRegNetPack:function(eventName, func){\r\n        this.emitter.off(eventName, func);\r\n    },\r\n    \r\n    //取消所有封包注册\r\n    UnAllRegNetPack:function(){\r\n        this.emitter.removeAllListeners();\r\n    },\r\n\r\n    //服务器连接成功\r\n\tOnConnectSuccess:function(isReconnecting){\r\n        //关闭模态层\r\n        app[app.subGameName + \"Client\"].OnEvent(\"ModalLayer\", \"ReceiveNet\");\r\n        app[app.subGameName + \"Client\"].OnEvent(app.subGameName + \"_ConnectSuccess\", {\"ServerName\":\"GameServer\", \"IsReconnecting\":isReconnecting});\r\n    },\r\n\t//websocket事件回掉\r\n\tOnWebSocketEvent:function(eventName, arg){\r\n\t\t// console.log(\"子游戏 OnWebSocketEvent 回调\");\r\n\t\t//关闭模态层\r\n\t\tapp[app.subGameName + \"Client\"].OnEvent(\"ModalLayer\", \"ReceiveNet\");\r\n\r\n\t\tswitch (eventName) {\r\n\t\t\tcase \"OnError\":\r\n\t\t\t\tapp[app.subGameName + \"Client\"].OnEvent(\"ConnectFail\", {\"ServerName\":\"GameServer\", \"EventType\": \"OnError\"});\r\n\t\t\t\tbreak\r\n\r\n\t\t\tcase \"Reconnectd\":\r\n\t\t\t\tapp[app.subGameName + \"Client\"].OnEvent(\"ModalLayer\", \"StartReConnect\");\r\n\t\t\t\tthis.NetWork.ReConnect();\r\n\t\t\t\tbreak\r\n\r\n\t\t\tcase \"OnClose\":\r\n\t\t\t\tapp[app.subGameName + \"Client\"].OnEvent(\"ConnectFail\", {\"bCloseByLogout\":arg[0],\"ServerName\":\"GameServer\", \"EventType\": \"OnClose\"});\r\n\t\t\t\tbreak\r\n\r\n\t\t\tcase \"OnKick\":\r\n\t\t\t\tapp.ddz_SysNotifyManager().ShowSysMsg(\"Kick_ByServer\");\r\n\t\t\t\tbreak\r\n\r\n\t\t\tcase \"OnReceive\":\r\n\t\t\t\tthis.OnReceive(arg[0], arg[1]);\r\n\t\t\t\tbreak\r\n\r\n\t\t\tcase \"OnCodeError\":\r\n\t\t\t\tthis.OnCodeError(arg[0], arg[1], arg[2]);\r\n\t\t\t\tbreak\r\n\r\n\t\t\tcase \"OnGMReceive\":\r\n\t\t\t\tthis.OnGMReceive(arg[0], arg[1]);\r\n\t\t\t\tbreak\r\n\r\n\t\t\tdefault:\r\n\t\t\t\tthis.ErrLog(\"OnWebSocketEvent(%s):\", eventName, arg);\r\n\t\t\t\tbreak\r\n\t\t}\r\n\t},\r\n\r\n\tOnConFirm:function(clickType, msgID, backArgList){\r\n\t\tif(clickType != \"Sure\"){\r\n\t\t\treturn\r\n\t\t}\r\n\t\tif(\"goBuyCard\" == msgID){\r\n\t\t\tlet clientConfig = app[app.subGameName + \"Client\"].GetClientConfig();\r\n\t\t\tapp.ddz_FormManager().ShowForm(\"UIStore\");\r\n\t\t\tapp.ddz_FormManager().CloseForm(\"UIJoin\");\r\n\t\t\tapp.ddz_FormManager().CloseForm(\"UIChouJiang\");\r\n\t\t\tapp.ddz_FormManager().CloseForm(\"game/base/ui/majiang/UIMJResultDetail\");\r\n\t\t\treturn;\r\n\t\t}\r\n\t},\r\n\r\n    //封包事件回掉\r\n    OnReceive:function(routeName, receivePack){\r\n        try {\r\n            this.emitter.emit(routeName, receivePack);\r\n        }\r\n        catch(error){\r\n            this.ErrLog(\"OnReceive:%s\", error.stack);\r\n            this.ErrLog(\"OnReceive routeName :%s, receivePack:%s\", routeName, JSON.stringify(receivePack));\r\n        }\r\n    },\r\n\r\n    //封包事件失败回掉\r\n    OnCodeError:function(eventName, code, resultInfo){\r\n\t    let codeMsg = [\"Code\", code].join(\"_\");\r\n\r\n\t    //如果是错误提示类型,根据提示码提示,直接提示\r\n\t    if(code == this.ShareDefine.ErrorSysMsg){\r\n\t\t    app.ddz_SysNotifyManager().ShowSysMsg(resultInfo[\"Msg\"]);\r\n\t\t}\r\n\t\t// else if(code == this.ShareDefine.NotAllow){\r\n\t\t// \tapp.ddz_SysNotifyManager().ShowSysMsg('MSG_SERVICE_NOTALLOW');\r\n\t\t// }\r\n\t    else if(code == this.ShareDefine.InOtherRoomPlay){\r\n\t    \tapp.ddz_SysNotifyManager().ShowSysMsg('MSG_IN_OTHER_ROOM_PLAY');\r\n\t    }\r\n\t    else if (code == 12) {\r\n            app[app.subGameName + \"Client\"].ExitGame();\r\n        }\r\n         //继续游戏失败\r\n        else if(code == this.ShareDefine.ResetRoomInfo){\r\n        \tlet roomID = app[app.subGameName.toUpperCase() + \"RoomMgr\"]().GetEnterRoomID();\r\n        \tif(roomID){\r\n        \t\t app[app.subGameName.toUpperCase() + \"RoomMgr\"]().SendGetRoomInfo(roomID);\r\n        \t}\r\n        }\r\n\t    else if(code == this.ShareDefine.Maintain){\r\n\t    \tlet finishttime = resultInfo[\"Msg\"];\r\n\t    \tapp.ddz_SysNotifyManager().ShowSysMsg('服务器维护中,预计结束时间：'+app.ddz_ComTool().GetDateYearMonthDayHourMinuteString(finishttime));\r\n\t    }\r\n\t    else if(code == this.ShareDefine.ErrorNotRoomCard){//房卡不足\r\n\t    \tlet desc = app.ddz_SysNotifyManager().GetSysMsgContentByMsgID(\"MSG_NotRoomCard\");\r\n\t\t\tapp.ddz_ConfirmManager().SetWaitForConfirmForm(this.OnConFirm.bind(this), \"goBuyCard\", []);\r\n\t    \tapp.ddz_FormManager().ShowForm(app.subGameName + \"_UIMessage\", null, this.ShareDefine.ConfirmBuyGoTo, 0, 0,desc)\r\n\t    }\r\n\t    else if(code == this.ShareDefine.ErrorMaxRoom){\r\n\t    \tapp.ddz_SysNotifyManager().ShowSysMsg('可以创建的房间数量不足');\r\n\t    }\r\n\t\telse if (code == this.ShareDefine.NotMagic) {\r\n\t\t\tapp[app.subGameName + \"_SysNotifyManager\"]().ShowSysMsg('禁止魔法表情');\r\n\t\t}\r\n\t    else if(code == this.ShareDefine.ErrorNotQuanCard){//圈币不足\r\n\t\t   app.ddz_SysNotifyManager().ShowSysMsg('圈卡不足，请前往亲友圈商城购买圈卡');\r\n\t\t   app.ddz_FormManager().GetFormComponentByFormName(\"ui/club/UIClub\").OnClick('btn_addRoomCard',null);\r\n\t\t}else if(code == 5025){//重新刷新下房间信息\r\n\t\t\tlet roomMgr = app[app.subGameName.toUpperCase()+\"RoomMgr\"]();\r\n\t\t\tif (roomMgr && typeof(roomMgr) != \"undefined\") {\r\n\t\t\t\tlet roomID = roomMgr.GetEnterRoomID();\r\n\t\t\t\troomMgr.SendGetRoomInfo(roomID);\r\n\t\t\t}\r\n\t\t}\r\n\t    //如果有配置系统提示码,则提示错误提示码对应的文本\r\n\t    else if(this.NewSysMsg.hasOwnProperty(codeMsg)){\r\n\r\n\t\t    let errorMsg = resultInfo[\"Msg\"];\r\n\t\t\t//开发模式有 提示文本的话 显示错误文本\r\n\t\t    if(this.ShareDefine.IsDevelopment && errorMsg){\r\n\t\t\t    app.ddz_SysNotifyManager().ShowSysMsg(\"CodeErrorMsg\", [errorMsg]);\r\n\t\t    }\r\n\t\t    //如果不是开发模式,弹通用的系统提示\r\n\t\t    else{\r\n\t\t\t    app.ddz_SysNotifyManager().ShowSysMsg(codeMsg);\r\n\t\t    }\r\n\t    }\r\n\t    //如果配置表没有配置的错误码\r\n\t    else{\r\n\t\t    //如果是不需要提示的,不配置也不需要显示的系统提示码\r\n\t\t    if(this.ShareDefine.NoShowSysMsgCodeList.InArray(code)){\r\n\r\n\t\t    }\r\n\t\t    //没有配置,是开发模式弹框\r\n\t\t    else if(this.ShareDefine.IsDevelopment){\r\n\t\t\t    app.ddz_SysNotifyManager().ShowSysMsg(\"CodeErrorMsg\", [resultInfo[\"Msg\"]]);\r\n\t\t    }\r\n\t    }\r\n\t    app[app.subGameName + \"Client\"].OnEvent(\"CodeError\", {\"Code\":code, \"EventName\":eventName, \"Result\":resultInfo});\r\n    },\r\n\r\n    //接受到GM命令汇报\r\n    OnGMReceive:function(eventName, argDict){\r\n        app[app.subGameName + \"Client\"].OnEvent(\"ReceiveGM\", argDict);\r\n    },\r\n\r\n\t//------------------http请求--------------------------------\r\n\r\n\t//注册http封包事件(需要整形封包头,才可以避免RegNetPack相同封包头注册事件区分)\r\n\tRegHttpNetPack:function(head, func, target){\r\n\t\tlet valueType = Object.prototype.toString.call(head).slice(\"[object \".length, -1);\r\n\t\tif(valueType != \"Number\"){\r\n\t\t\tthis.ErrLog(\"RegNetPack need Int head\");\r\n\t\t\treturn\r\n\t\t}\r\n\t\thead = head.toString();\r\n\t\tthis.emitter.on(head, func, target);\r\n\t},\r\n\r\n\tUnRegHttpNetPack:function(head, func){\r\n\t\tlet valueType = Object.prototype.toString.call(head).slice(\"[object \".length, -1);\r\n\t\tif(valueType != \"Number\"){\r\n\t\t\tthis.ErrLog(\"UnRegHttpNetPack need Int head\");\r\n\t\t\treturn\r\n\t\t}\r\n\t\thead = head.toString();\r\n\t\tthis.emitter.off(head, func);\r\n\t},\r\n\r\n    //发送HTTP请求\r\n    SendHttpPack:function(sendPack){\r\n    \tconsole.log(\"sendPack:\",sendPack);\r\n        let serverUrl = this.GetHttpSendPackUrl(sendPack.Head);\r\n        if(!serverUrl){\r\n            this.ErrLog(\"SendHttpPack(%s) not find serverUrl\", sendPack);\r\n            return\r\n        }\r\n\t\t//开启模态层\r\n        app[app.subGameName + \"Client\"].OnEvent(\"ModalLayer\", \"OpenNet\");\r\n        let argDict = {\"Sign\":\"ddcat\"};\r\n        let argString = this.GetUrlStr(argDict);\r\n\r\n\t    if(this.IsDevelopment()){\r\n\t\t    this.NetLog(\"[SendHttp](%s):\", serverUrl, sendPack, \"b-g\");\r\n\t    }\r\n\t    this.sendPack=sendPack;\r\n        this.httpRequest.SendHttpRequest(serverUrl, argString, \"POST\", sendPack);\r\n    },\r\n\r\n    //发送HTTPS请求\r\n    /*SendHttpsPack:function(){\r\n    \tlet sendPack=this.sendPack;\r\n        let serverUrl=this.AccountServerUrlHttps;\r\n        if(!serverUrl){\r\n            this.ErrLog(\"SendHttpPacks(%s) not find serverUrl\", sendPack);\r\n            return\r\n        }\r\n\t\t//开启模态层\r\n        app[app.subGameName + \"Client\"].OnEvent(\"ModalLayer\", \"OpenNet\");\r\n        let argDict = {\"Sign\":\"ddcat\"};\r\n        let argString = this.GetUrlStr(argDict);\r\n\r\n\t    if(this.IsDevelopment()){\r\n\t\t    this.NetLog(\"[SendHttps](%s):\", serverUrl, sendPack, \"b-g\");\r\n\t    }\r\n\r\n        this.httpRequest.SendHttpRequest(serverUrl, argString, \"POST\", sendPack);\r\n    },\r\n*/\r\n\t//接受到http请求回复\r\n\tOnReceiveHttpPack:function(serverUrl, httpResText){\r\n\t\t//关闭模态层\r\n\t\tapp[app.subGameName + \"Client\"].OnEvent(\"ModalLayer\", \"ReceiveNet\");\r\n\r\n\t\tvar receivePack = JSON.parse(httpResText);\r\n\t\tif(this.IsDevelopment()){\r\n\t\t\tthis.NetLog(\"[RecvHttp]:\", receivePack, \"b-gb\");\r\n\t\t}\r\n\r\n\t\tif(receivePack.hasOwnProperty(\"code\")){\r\n\t\t\tthis.ErrLog(\"OnReceiveHttpPack HttpCode:\", receivePack);\r\n\r\n\t\t\tlet eventName = \"HttpRequestCode\";\r\n\t\t\tif(serverUrl == this.AccountServerUrl){\r\n\t\t\t\teventName = \"AccountServerCode\";\r\n\t\t\t\tthis.OnCodeError(eventName, receivePack[\"code\"], receivePack);\r\n\t\t\t}\r\n\t\t\telse if(serverUrl == this.ResServerUrl){\r\n\t\t\t\teventName = \"ResServerCode\";\r\n\t\t\t\tthis.OnCodeError(eventName, receivePack[\"code\"], receivePack);\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tthis.ErrLog(\"OnReceiveHttpPack serverUrl(%s) error\", serverUrl);\r\n\t\t\t}\r\n\t\t}\r\n\t\telse{\r\n\t\t\ttry{\r\n\t\t\t\t//转化封包头为字符串 分发事件\r\n\t\t\t\tlet head = receivePack.Head.toString();\r\n\t\t\t\tthis.emitter.emit(head, receivePack);\r\n\t\t\t}\r\n\t\t\tcatch(error){\r\n\t\t\t\tthis.ErrLog(\"OnReceiveHttpPack(%s) error\", httpResText);\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\t/**\r\n\t * 请求连接失败\r\n\t */\r\n\tOnConnectHttpFail:function(serverUrl, readyState, status){\r\n\t\tthis.ErrLog(\"HttpConnectFail(%s, %s,%s)\", serverUrl, readyState, status);\r\n\r\n\t\t//关闭模态层\r\n\t\tapp[app.subGameName + \"Client\"].OnEvent(\"ModalLayer\", \"ReceiveNet\");\r\n\r\n\t\tif(serverUrl == this.AccountServerUrl){\r\n\t\t\t//app.ddz_SysNotifyManager().ShowSysMsg(\"Code_10010\");\r\n\t\t\t//app[app.subGameName + \"Client\"].OnEvent(\"ConnectHttpFail\", {\"ServerName\":\"AccountServer\"});\r\n\t\t\t//http请求失败，尝试用https请求\r\n\t\t\t//this.SendHttpsPack();\r\n\t\t\tif(this.RetryTime==9){\r\n\t\t\t\tapp.ddz_SysNotifyManager().ShowSysMsg(\"Code_10010\");\r\n\t\t\t\tapp[app.subGameName + \"Client\"].OnEvent(\"ConnectHttpFail\", {\"ServerName\":\"AccountServer\"});\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t//换节点\r\n\t\t\tapp.ddz_HeroAccountManager().UpdateAccessPoint();\r\n\t\t\tthis.InitServerAddress();\r\n\t\t\tthis.SendHttpPack(this.sendPack);\r\n\t\t\tthis.RetryTime=this.RetryTime+1;\r\n\t\t}else if(serverUrl == this.AccountServerUrlHttps){\r\n\t\t\t/*if(this.RetryTime==5){\r\n\t\t\t\tapp.ddz_SysNotifyManager().ShowSysMsg(\"Code_10010\");\r\n\t\t\t\tapp[app.subGameName + \"Client\"].OnEvent(\"ConnectHttpFail\", {\"ServerName\":\"AccountServer\"});\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t//换节点\r\n\t\t\tapp.ddz_HeroAccountManager().UpdateAccessPoint();\r\n\t\t\tthis.InitServerAddress();\r\n\t\t\tthis.SendHttpPack(this.sendPack);\r\n\t\t\tthis.RetryTime=this.RetryTime+1;*/\r\n\t\t}\r\n\t\telse{\r\n\t\t\tthis.ErrLog(\"OnConnectHttpFail serverUrl:%s error\", serverUrl);\r\n\t\t}\r\n\t},\r\n\r\n    //------------操作函数-----------------------------\r\n\r\n    //下线\r\n    Disconnect:function(byLogout = false){\r\n        this.NetWork.Disconnect(byLogout);\r\n    },\r\n\r\n\tSendGMPack:function(cmdString){\r\n\t\tlet sendPack = {\"cmdString\":cmdString};\r\n\t\tthis.SendPack(\"game.C1105GMPack\", sendPack)\r\n\t},\r\n\r\n\tOnPack_GMPack:function(serverPack){\r\n\t\tapp[app.subGameName + \"Client\"].OnEvent(\"GMPack\", serverPack);\r\n\t},\r\n\r\n});\r\n\r\nvar g_ddz_NetManager = null;\r\n\r\n/**\r\n * 绑定模块外部方法\r\n */\r\nexports.GetModel = function(){\r\n    if(!g_ddz_NetManager){\r\n        g_ddz_NetManager = new ddz_NetManager();\r\n    }\r\n    return g_ddz_NetManager;\r\n}"]}