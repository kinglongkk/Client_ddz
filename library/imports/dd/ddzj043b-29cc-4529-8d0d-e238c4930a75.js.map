{"version":3,"sources":["../../../../../assets/script/sdk/assets/script/sdk/ddz_SDKManager.js"],"names":["app","require","ddz_SDKManager","BaseClass","extend","Init","JS_Name","subGameName","ShareDefine","ddz_ShareDefine","SysDataManager","ddz_SysDataManager","HeroManager","ddz_HeroManager","ServerTimeManager","ddz_ServerTimeManager","NetManager","ddz_NetManager","HeroAccountManager","ddz_HeroAccountManager","LocalDataManager","WeChatManager","ddz_WeChatManager","WeChatAppManager","ddz_WeChatAppManager","ComTool","ddz_ComTool","RegHttpNetPack","OnHttpPack_PrepayOrderInfo","Log","OnReload","accountSDKManager","GetAccountSDK","ErrLog","serverPack","isSuccess","IsSuccess","ddz_SysNotifyManager","ShowSysMsg","prepayOrderInfo","PrepayOrderInfo","orderID","OrderID","appID","ProductID","itemType","ItemType","orderType","OrderType","DiamondStore","GetTableDict","diamondStore","appPrice","OrderType_Wechat","ReceivePrepayOrder","OrderType_QRCode","ReceivePrepayQRCodeOrder","OrderType_WechatApp","InitSDKParameter","dataInfo","accountType","GetClientConfigProperty","SDKType_WeChat","InitWeChatSDKParameter","SDKType_Company","SDKType_WeChatApp","IsH5AccountSDK","IsWeChatBrowser","H5AccountSDKTypeList","InArray","IsAppAccountSDK","AppAccountSDKTypeList","GetOrderSDK","Pay","CheckIsAppCheck","SendCreatePrePayOrder","orderSdkManager","GetSDK","LoginBySDK","Login","CheckLoginBySDK","ShareText","title","flag","ddz_FormManager","ShowForm","Share","description","url","argDict","ShareDD","urlStr","argList","ddz_NativeManager","CallToNative","ShareXL","ShareLineLink","ShareLineText","ShareScreen","ShareScreenDD","filePath","Capture","ShareImageDD","imagePath","ShareScreenXL","ShareImageXL","heroID","GetHeroID","openid","GetAccountProperty","accountID","GetHeroProperty","sendPack","GetHttpSendPack","hasOwnProperty","gameID","mpID","serverID","Math","floor","SendHttpPack","clientConfig","GetClientConfig","checkVersion","localVersion","appPackType","IsIOS","g_ddz_SDKManager","exports","GetModel"],"mappings":"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","file":"ddz_SDKManager.js","sourceRoot":"../../../../../assets/script/sdk","sourcesContent":["/*\r\n    sdk管理器\r\n*/\r\nvar app = require(\"ddz_app\");\r\n\r\nvar ddz_SDKManager = app.BaseClass.extend({\r\n\r\n    Init:function(){\r\n    \tthis.JS_Name = app.subGameName + \"_SDKManager\";\r\n\r\n    \tthis.ShareDefine = app.ddz_ShareDefine();\r\n        this.SysDataManager = app.ddz_SysDataManager();\r\n        this.HeroManager = app.ddz_HeroManager();\r\n        this.ServerTimeManager = app.ddz_ServerTimeManager();\r\n        this.NetManager = app.ddz_NetManager();\r\n        this.HeroAccountManager = app.ddz_HeroAccountManager();\r\n        this.LocalDataManager = app.LocalDataManager();\r\n        this.WeChatManager = app.ddz_WeChatManager();\r\n\t\tthis.WeChatAppManager = app.ddz_WeChatAppManager();\r\n        this.ComTool = app.ddz_ComTool();\r\n\r\n\t    this.NetManager.RegHttpNetPack(0x0008, this.OnHttpPack_PrepayOrderInfo, this);\r\n\r\n\t\t//this.OnReload();\r\n\r\n    \tthis.Log(\"Init\");\r\n    },\r\n\r\n\tOnReload:function(){\r\n\t\tlet accountSDKManager = this.GetAccountSDK();\r\n\t\tif(!accountSDKManager){\r\n\t\t\tthis.ErrLog(\"OnReload not find sdk\");\r\n\t\t\treturn\r\n\t\t}\r\n\t\treturn accountSDKManager.OnReload();\r\n\t},\r\n\r\n\t//收到预订单服务器信息\r\n\tOnHttpPack_PrepayOrderInfo:function(serverPack){\r\n\t\tlet isSuccess = serverPack.IsSuccess;\r\n\t\tif(!isSuccess){\r\n\t\t\tapp.ddz_SysNotifyManager().ShowSysMsg(\"Order_PrepayOrderFail\");\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\tlet prepayOrderInfo = serverPack.PrepayOrderInfo;\r\n\t\tlet orderID = serverPack.OrderID;\r\n\t\tlet appID = prepayOrderInfo.ProductID;\r\n\t\tlet itemType = prepayOrderInfo.ItemType;\r\n\t\tlet orderType = prepayOrderInfo.OrderType;\r\n\r\n\t\tlet DiamondStore = this.SysDataManager.GetTableDict(\"DiamondStore\");\r\n\t\tlet diamondStore = DiamondStore[appID];\r\n\t\tif(!diamondStore){\r\n\t\t\tthis.ErrLog(\"Pay DiamondStore.txt not find:%s\", appID);\r\n\t\t\treturn\r\n\t\t}\r\n\t\tlet appPrice = diamondStore[\"AppPrice\"];\r\n\r\n\t\t// app.TalkingDataManager().RecordStartPay(orderID, itemType, appID, appPrice);\r\n\r\n\t\tif(orderType == this.ShareDefine.OrderType_Wechat){\r\n\t\t\tthis.WeChatManager.ReceivePrepayOrder(serverPack);\r\n\t\t}\r\n\t\telse if(orderType == this.ShareDefine.OrderType_QRCode){\r\n\t\t\tthis.WeChatManager.ReceivePrepayQRCodeOrder(serverPack);\r\n\t\t}\r\n\t\telse if(orderType == this.ShareDefine.OrderType_WechatApp){\r\n\t\t\tthis.WeChatAppManager.ReceivePrepayOrder(serverPack);\r\n\t\t}else if(orderType == 6){\r\n\t\t\tthis.WeChatAppManager.ReceivePrepayOrder(serverPack);\r\n\t\t}\r\n\t\telse{\r\n\t\t\tthis.ErrLog(\"OnHttpPack_PrepayOrderInfo orderType:%s error\", orderType);\r\n\t\t}\r\n\t},\r\n\r\n\t//初始化sdk参数H5启动携带参数\r\n    InitSDKParameter:function(dataInfo){\r\n\r\n\t    let accountType = app[app.subGameName + \"Client\"].GetClientConfigProperty(\"AccountType\");\r\n\r\n    \t\r\n\t    //微信登录\r\n\t    if(accountType == this.ShareDefine.SDKType_WeChat){\r\n\t\t\tthis.WeChatManager.InitWeChatSDKParameter(dataInfo);\r\n\t    }\r\n\t    //官网登录\r\n\t    else if(accountType == this.ShareDefine.SDKType_Company){\r\n\r\n\t    }\r\n\t    //微信app授权\r\n\t    else if(accountType == this.ShareDefine.SDKType_WeChatApp){\r\n\t    }\r\n\t    else{\r\n\t\t\t// this.SysLog(\"InitSDKParameter(%s):\", accountType, dataInfo);\r\n\t    }\r\n    },\r\n\r\n\t//H5sdk\r\n\tIsH5AccountSDK:function(){\r\n\r\n\t\tlet accountType = app[app.subGameName + \"Client\"].GetClientConfigProperty(\"AccountType\");\r\n\r\n\t\t//如果是微信公众授权,需要判断是否是微信浏览器\r\n\t\tif(accountType == this.ShareDefine.SDKType_WeChat) {\r\n\t\t\tif (this.ComTool.IsWeChatBrowser()) {\r\n\t\t\t\treturn true\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\treturn false\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(this.ShareDefine.H5AccountSDKTypeList.InArray(accountType)){\r\n\t\t\treturn true\r\n\t\t}\r\n\t\treturn false\r\n\t},\r\n\r\n\t//appsdk\r\n\tIsAppAccountSDK:function(){\r\n\t\tlet accountType = app[app.subGameName + \"Client\"].GetClientConfigProperty(\"AccountType\");\r\n\t\tif(this.ShareDefine.AppAccountSDKTypeList.InArray(accountType)){\r\n\t\t\treturn true\r\n\t\t}\r\n\t\treturn false\r\n\t},\r\n\r\n\tGetAccountSDK:function(){\r\n\t\tlet accountType = app[app.subGameName + \"Client\"].GetClientConfigProperty(\"AccountType\");\r\n\t\tif(accountType == this.ShareDefine.SDKType_WeChat){\r\n\t\t\treturn this.WeChatManager\r\n\t\t}\r\n\t\telse if(accountType == this.ShareDefine.SDKType_WeChatApp) {\r\n\t\t\treturn this.WeChatAppManager;\r\n\t\t}\r\n\t\telse{\r\n\t\t\tthis.ErrLog(\"accountSDKType:%s\", accountType);\r\n\t\t\treturn\r\n\t\t}\r\n\t},\r\n\r\n\tGetOrderSDK:function(){\r\n\t\tlet orderType = app[app.subGameName + \"Client\"].GetClientConfigProperty(\"OrderType\");\r\n\r\n\t\tif(orderType == this.ShareDefine.OrderType_Wechat){\r\n\t\t\treturn this.WeChatManager;\r\n\t\t}\r\n\t\telse if(orderType == this.ShareDefine.OrderType_QRCode){\r\n\t\t\treturn this.WeChatManager;\r\n\t\t}\r\n\t\telse if(orderType == this.ShareDefine.OrderType_WechatApp){\r\n\t\t\treturn this.WeChatAppManager\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthis.ErrLog(\"GetOrderSDK:%s\", orderType);\r\n\t\t\treturn null\r\n\t\t}\r\n\t},\r\n\r\n\t//支付入口\r\n    Pay:function(appID){\r\n\t\tif (this.CheckIsAppCheck()) {\r\n\t\t\tthis.SendCreatePrePayOrder(\"Diamond\", appID);\r\n\t\t\treturn;\r\n    \t}\r\n\t\tlet orderSdkManager = this.GetOrderSDK();\r\n        if(!orderSdkManager){\r\n            this.ErrLog(\"pay not orderSdkManager\");\r\n            return\r\n        }\r\n\r\n\t\tif(!orderSdkManager.GetSDK()){\r\n\t\t\tthis.ErrLog(\"pay not sdk\");\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\tthis.SendCreatePrePayOrder(\"Diamond\", appID);\r\n\r\n    },\r\n\r\n\t//登录授权\r\n\tLoginBySDK:function(){\r\n\t\tlet accountSDKManager = this.GetAccountSDK();\r\n\t\tif(!accountSDKManager){\r\n\t\t\tthis.ErrLog(\"LoginBySDK not find sdk\");\r\n\t\t\treturn\r\n\t\t}\r\n\t\taccountSDKManager.Login();\r\n\t},\r\n\r\n\t//检查登录是否是短线重登\r\n\tCheckLoginBySDK:function(){\r\n\t\tlet accountSDKManager = this.GetAccountSDK();\r\n\t\tif(!accountSDKManager){\r\n\t\t\tthis.ErrLog(\"CheckLoginBySDK not find sdk\");\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\treturn accountSDKManager.CheckLoginBySDK();\r\n\t},\r\n\tShareText:function(title,flag){\r\n\t\tlet accountType = app[app.subGameName + \"Client\"].GetClientConfigProperty(\"AccountType\");\r\n\t\tif(accountType == this.ShareDefine.SDKType_WeChatApp){\r\n\t\t\tthis.WeChatAppManager.ShareText(title,flag);\r\n\t\t}else if(accountType == this.ShareDefine.SDKType_WeChat){\r\n\t\t\tapp.ddz_FormManager().ShowForm(\"UIMessageWeiXinShare\");\r\n\t\t}\r\n\t\telse{\r\n\t\t\tthis.ErrLog(\"Share not find SDKType_WeChatApp\");\r\n\t\t}\r\n\t},\r\n\t//吊起微信APP分享\r\n\t//title:分享的标题\r\n\t//description:分享的描述\r\n\t//argDict:分享携带的参数字典(\"ShareRoomKey\":11111)\r\n\t//url:分享携带的点击跳转地址\r\n\t//flag:native分享是需要指定\"0\":朋友,\"1\":朋友圈\r\n\t//\r\n\tShare:function(title, description, url, flag, argDict){\r\n\t\tlet accountType = app[app.subGameName + \"Client\"].GetClientConfigProperty(\"AccountType\");\r\n\t\tif(accountType == this.ShareDefine.SDKType_WeChatApp){\r\n\t\t\tthis.WeChatAppManager.Share(title, description, url, flag, argDict);\r\n\t\t}else if(accountType == this.ShareDefine.SDKType_WeChat){\r\n\t\t\tapp.ddz_FormManager().ShowForm(\"UIMessageWeiXinShare\");\r\n\t\t}\r\n\t\telse{\r\n\t\t\tthis.ErrLog(\"Share not find SDKType_WeChatApp\");\r\n\t\t}\r\n\r\n\t},\r\n\tShareDD:function(title,description,urlStr){\r\n\t\tlet argList = [{\"Name\":\"title\",\"Value\":title},{\"Name\":\"description\",\"Value\":description},{\"Name\":\"urlStr\",\"Value\":urlStr}];\r\n\t\tapp.ddz_NativeManager().CallToNative(\"OnDDWeChatShare\", argList);\r\n\t},\r\n\tShareXL:function(title,description,urlStr){\r\n\t\tlet argList = [{\"Name\":\"Title\",\"Value\":title},{\"Name\":\"description\",\"Value\":description},{\"Name\":\"urlStr\",\"Value\":urlStr},{\"Name\":\"roomID\",\"Value\":'roomID'},{\"Name\":\"roomToken\",\"Value\":\"roomToken\"}];\r\n\t\tapp.ddz_NativeManager().CallToNative(\"OnXLShare\", argList);\r\n\t},\r\n\tShareLineLink:function(title,description,urlStr){\r\n\t\tlet argList = [{\"Name\":\"Title\",\"Value\":title},{\"Name\":\"description\",\"Value\":description},{\"Name\":\"urlStr\",\"Value\":urlStr}];\r\n\t\tapp[app.subGameName + \"_NativeManager\"]().CallToNative(\"OnLineShareLink\", argList);\r\n\t},\r\n\tShareLineText:function(title,description){\r\n\t\tlet argList = [{\"Name\":\"Title\",\"Value\":title},{\"Name\":\"description\",\"Value\":description}];\r\n\t\tapp[app.subGameName + \"_NativeManager\"]().CallToNative(\"OnLineShareText\", argList);\r\n\t},\r\n\t//微信全屏分享\r\n\tShareScreen:function(flag){\r\n\t\tlet accountType = app[app.subGameName + \"Client\"].GetClientConfigProperty(\"AccountType\");\r\n\t\tif(accountType == this.ShareDefine.SDKType_WeChatApp){\r\n\t\t\tthis.WeChatAppManager.ShareScreen(flag);\r\n\t\t}else if(accountType == this.ShareDefine.SDKType_WeChat){\r\n\t\t\tapp.ddz_FormManager().ShowForm(\"UIMessageWeiXinShare\");\r\n\t\t}\r\n\t\telse{\r\n\t\t\tthis.ErrLog(\"Share not find SDKType_WeChatApp\");\r\n\t\t}\r\n\t},\r\n\tShareScreenDD:function(){\r\n\t\tlet filePath = this.WeChatAppManager.Capture();\r\n        if (filePath != \"\") {\r\n        \tthis.ShareImageDD(filePath);\r\n        }\r\n\t},\r\n\tShareImageDD:function(imagePath){\r\n\t\tlet argList = [{\"Name\":\"imagePath\",\"Value\":imagePath}];\r\n\t\tapp.ddz_NativeManager().CallToNative(\"OnDDWeChatShareImage\", argList);\r\n\t},\r\n\tShareScreenXL:function(){\r\n\t\tlet filePath = this.WeChatAppManager.Capture();\r\n        if (filePath != \"\") {\r\n        \tthis.ShareImageXL(filePath);\r\n        }\r\n\t},\r\n\tShareImageXL:function(imagePath){\r\n\t\tlet argList = [{\"Name\":\"ImagePath\",\"Value\":imagePath}];\r\n\t\tapp.ddz_NativeManager().CallToNative(\"OnXLShareImage\", argList);\r\n\t},\r\n\r\n\r\n\r\n\t//----------------发包接口------------------------\r\n\t//发送创建预付订单申请\r\n\tSendCreatePrePayOrder:function(itemType, appID){\r\n\t\tlet heroID = this.HeroManager.GetHeroID();\r\n\t\tif(!heroID){\r\n\t\t\tthis.ErrLog(\"SendCreatePrePayOrder not heroID\");\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\tlet openid = this.HeroAccountManager.GetAccountProperty(\"Openid\");\r\n\t\tlet accountID = this.HeroManager.GetHeroProperty(\"accountID\");\r\n\t\tlet sendPack = this.NetManager.GetHttpSendPack(0xFF0A);\r\n\r\n\t\tlet DiamondStore = this.SysDataManager.GetTableDict(\"DiamondStore\");\r\n\t\tif(!DiamondStore.hasOwnProperty(appID)){\r\n\t\t\tthis.ErrLog(\"SendCreatePrePayOrder DiamondStore.txt not find %s\", appID);\r\n\t\t\treturn\r\n\t\t}\r\n\t\tlet appPrice = DiamondStore[appID][\"AppPrice\"] * 100;\r\n\r\n\t\tlet gameID = app[app.subGameName + \"Client\"].GetClientConfigProperty(\"GameID\");\r\n\t\tlet mpID = app[app.subGameName + \"Client\"].GetClientConfigProperty(\"MPID\");\r\n\t\tlet orderType = app[app.subGameName + \"Client\"].GetClientConfigProperty(\"OrderType\");\r\n\t\tlet serverID = app[app.subGameName + \"Client\"].GetClientConfigProperty(\"ServerID\");\r\n\r\n\t\tif(!mpID){\r\n\t\t\tthis.ErrLog(\"SendCreatePrePayOrder not find MPID\");\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\t\r\n\t\tif (this.CheckIsAppCheck()) {\r\n\t\t\torderType = 6;\r\n    \t}\r\n\r\n\t\tsendPack[\"ServerName\"] = gameID;\r\n\t\tsendPack[\"ServerID\"] = serverID;\r\n\t\tsendPack[\"HeroID\"] = heroID;\r\n\t\tsendPack[\"AccountID\"] = accountID;\r\n\t\tsendPack[\"ItemType\"] = itemType;\r\n\t\tsendPack[\"ProductID\"] = Math.floor(appID);\r\n\t\tsendPack[\"AppPrice\"] = appPrice;\r\n\t\tsendPack[\"OrderType\"] = orderType;\r\n\t\tsendPack[\"MPID\"] = mpID;\r\n\t\tsendPack[\"Openid\"] = openid;\r\n\r\n\t\t//console.log('SendCreatePrePayOrder pack', JSON.stringify(sendPack));\r\n\r\n\t\tthis.NetManager.SendHttpPack(sendPack)\r\n\t},\r\n\r\n\r\n\t//是否是苹果送检版本\r\n\tCheckIsAppCheck:function(){\r\n\t\tlet flag = false;\r\n\t\tlet clientConfig = app[app.subGameName + \"Client\"].GetClientConfig();\r\n\t\t//let checkVersion = app.ddz_ComTool().IsIOS() ? app.ddz_NativeManager().CallToNative(\"checkVersion\", []) : false;\r\n\t\tlet checkVersion = false;\r\n\t\t//let localVersion = app.ddz_ComTool().IsIOS() ? app.ddz_NativeManager().CallToNative(\"getVersion\", [], \"String\") : \"\";\r\n\t\tlet localVersion = '';\r\n\t\tlet appPackType = false;\t\t// this.SysLog(\"app.PackDefine.APPLE_CHECK:%s,clientConfig[appPackType]:%s\", app.PackDefine().APPLE_CHECK , clientConfig[\"appPackType\"]);\r\n\t\t// this.SysLog(\"checkVersion:%s, appPackType:%s， clientConfig[appPackType]:%s,\", checkVersion, appPackType, clientConfig[\"appPackType\"]);\r\n\t\t// this.SysLog(\"appCheckVersion:%s\",JSON.stringify( app[app.subGameName + \"Client\"].GetClientConfig()));\r\n\t\t// this.SysLog(\"appCheckVersion:%s, localVersion:%s\", app[app.subGameName + \"Client\"].GetClientConfigProperty(\"appCheckVersion\"), localVersion);\r\n\t\t\r\n\t\tif (app.ddz_ComTool().IsIOS() && appPackType &&   app[app.subGameName + \"Client\"].GetClientConfigProperty(\"appCheckVersion\") == localVersion)  {\r\n\t\t\tflag = true;\r\n\t\t}\r\n\t\treturn flag;\r\n\t},\r\n});\r\n\r\nvar g_ddz_SDKManager = null;\r\n\r\n/**\r\n * 绑定模块外部方法\r\n */\r\nexports.GetModel = function(){\r\n    if(!g_ddz_SDKManager){\r\n        g_ddz_SDKManager = new ddz_SDKManager();\r\n    }\r\n    return g_ddz_SDKManager;\r\n}"]}