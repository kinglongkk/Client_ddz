{"version":3,"sources":["../../../../../../../assets/script/game/DDZ/ui/assets/script/game/DDZ/ui/ddz_BasePlay.js"],"names":["app","require","BasePlayForm","cc","Class","extends","subGameName","OnCreateInit","DDZRoomMgr","DDZRoom","HeroManager","SceneManager","UtilsWord","PokerCard","DDZRoomPosMgr","DDZRoomSet","LogicDDZGame","ShareDefine","DDZDefine","isFirstEnter","basePath","btn_ok","GetWndNode","tip_ok","node","getChildByName","razzNode","RegEvent","Event_PosContinueGame","Event_DissolveRoom","Event_StartVoteDissolve","Event_PosLeave","Event_PosUpdate","Event_PosReadyChg","Event_GameGift","Event_ExitRoomSuccess","Event_OnRoomNotFindByReason","OnEvt_CopyTextNtf","Event_SetStart","Event_SetEnd","Event_RoomEnd","OnPack_AutoStart","Event_ChatMessage","Event_ShowHandCard","Event_OpCard","Event_ChangeStatus","Event_AddDouble","Event_OpenCard","Event_Hog","Event_OpenStartGame","Event_CardNumber","Event_SportsPointEnough","Event_SportsPointNotEnough","Event_SportsPointThresholdEnough","Event_SportsPointThresholdNotEnough","Event_CodeError","game","on","EVENT_HIDE","OnEventHide","bind","EVENT_SHOW","OnEventShow","Left","cardSpcedX","handCards","Node","EventType","TOUCH_START","OnTouchStart","TOUCH_MOVE","OnTouchMove","TOUCH_END","OnTouchEnd","TOUCH_CANCEL","OnTouchCancel","boom_Ani","getComponent","Animation","OnAniPlayFinished","plane_Ani","liandui_Ani","dragon_Ani","GameEnd_Ani","ShutDow_Ani","i","OpenCard_Ani","InitData","AddCardPrefab","invitationNode","instantiate","UIInvitation","addChild","event","argDict","code","SportsPointNotEnough","ShowSysMsg","NotAllow","FormManager","IsFormShow","CloseForm","ApplyDissolve","msg","SetWaitForConfirm","ConfirmOK","allCardIdx","openCardMutiple","allPlayerCardIdx","card3Idx","firstTurn","tipCount","lastCircleEnd","openCardInfo","notUp","landowner","IsShowCardDevice","room","GetEnterRoom","kexuanwanfa","GetRoomConfigByProperty","length","indexOf","IsShowChat","gaoji","OnShow","CheckUpdateNotice","active","roomID","GetEnterRoomID","SendPack","toUpperCase","ExitGame","error","roomCfg","GetRoomConfig","clubId","unionId","name","AddHead","HideAll","unscheduleAllCallbacks","PlayMusic","ClearForbiddenTouch","handCardsSpacingX","Layout","spacingX","cardNodeWidth","cardPrefab","data","width","state","GetRoomSetProperty","disslove","GetRoomProperty","roomState","xianShi","labeiWanfa","string","WanFa","isCoinRoom","roomInfo","labelRoomId","setID","current","lb_jushu","UpdateScoreAndDouble","UpdateSelfScore","endSec","ShowForm","RoomState_Init","setInfo","GetRoomSetInfo","UpdateCardNum","cardNumMap","posList","pos","isAuto","headScript","GetUICardComponentByPos","ShowAutoIcon","UpdatePlayerScore","ShowDiZhuPai","holeCards","uiPos","GetUIPosByDataPos","path","headNode","Showlandowner","DDZSetState_FaPai","InitGameStateCommon","gameMultiple","DDZSetState_Hog","ShowBtnHog","opPos","isHaveHog","DDZSetState_AddDouble","ShowBtnMultiple","DDZSetState_Playing","SetCardData","opType","cardList","time","MaxTickTime","isFirstOp","GetClientPos","ShowBtnOutCard","array","GetTipCard","ForbiddenTouch","isAutoPass","MinTickTime","ShowAllGameBtn","lb_mypdgsj","SortCardByMax","ShowOutCard","lastOpPos","SetSeat01OutCardPos","StartTickTime","DDZSetState_End","clientPos","clientPlayerInfo","GetPlayerInfoByPos","RefreshRoomShow","GetTuiGuangUrl","type","console","log","ShowAllCard","allCards","cardNum","MidHandCardEx","playerNum","allCardNum","xPos","yPos","card","children","y","x","MaxTableCard","toString","MaxHandCard","MaxPlayer","outCardList","j","openCardList","scale","img_dzp","downList","GetHandCard","cardValue","cardNode","bSelected","CheckSelected","MaxRisePosY","isLastCard","isShowLandowner","ShowCard","ChangeCardNum","dataPos","len","Label","ShowWarningByPos","warning","play","sex","GetPlayerSex","pathStr","SoundPath","SoundManager","PlaySound","stop","posX","SetAniPos","setPosition","v2","PlayCardSound","opCardType","circleEnd","DDZ_CARD_TYPE_SINGLECARD","value","GetCardValue","DDZ_CARD_TYPE_DUIZI","DDZ_CARD_TYPE_SHUNZI","DDZ_CARD_TYPE_3BUDAI","DDZ_CARD_TYPE_3DAI1","DDZ_CARD_TYPE_3DAI2","DDZ_CARD_TYPE_4DAI1","DDZ_CARD_TYPE_4DAI21","DDZ_CARD_TYPE_4DAI2","DDZ_CARD_TYPE_4DAI4","DDZ_CARD_TYPE_FEIJI0","DDZ_CARD_TYPE_FEIJI1","DDZ_CARD_TYPE_FEIJI2","DDZ_CARD_TYPE_LIANDUI","DDZ_CARD_TYPE_ZHADAN","DDZ_CARD_TYPE_BUCHU","randomNum","Math","floor","random","gameBtn","roomDouble","SetRoomSetProperty","turnEnd","ClearCardData","opPosCardLength","HideClockByPos","DeleteOpenCardList","CheckDragon","OutPokerCard","isSetEnd","nextPos","IsHaveBoom","GetCardType","isOut","tipArray","myHangCard","serverPack","self","scheduleOnce","ClientOpCardByType","isCanChoose","pokerList","cardType","GetLastCardType","CheckOnlyBoom","lastValue","poker","touchTag","isHas","list","ChangeSelectCard","splice","ShowOpenCard","HideAllPass","HideAllClock","btn_go","btn_openCardStart","DDZSetState_OpenCard","lb_ddbrjb","StartGame","addDouble","ShowAddDouble","ShowImgTipByPos","OpenCard","posInfo","posID","openCard","cards","btn_openCard","hogScore","hogTime","curPos","quedingdizhu","hog","HogCommon","HogScore","push","InitHandCard","allOpenCardList","AddCardAction","openStartGame","SetPlayerInfoByPos","img_jpq","key","num","imgTipName","img_tip","SetNodeImageByFilePath","HideAllOpenCard","isAddDouble","outCardNodeList","HideAllOutCard","outCard","pass","clock","HideAllWarning","HideAllHandCard","child","HideAllCardNum","poker_back","ClearPlayerTable","second","tick","schedule","CallEverySecond","unschedule","ShowBtnTipAndOutCard","btn_tip","btn_outCard","btn_pass","HideAllGameBtn","gameRobScore","gameRobLandLord","isAlreadyHog","imgBtnNoRob","imgBtnRob","isWangZhaHog","IsHaveWangZhaOrBoom","HideAllBsNode","ShowBtnPass","FaPaiAction","clientCards","FaPaiFinish","position","getPosition","action","sequence","moveTo","callFunc","runAction","CheckShouPai","SendFaPaiFinish","pokers","sort","a","b","allDzCard","dzCard","realValue","GetPokeCard","wndNode","isChoose","startIndex","moveIndex","lastMoveIndex","moveX","target","convertToNodeSpaceAR","touch","getLocation","startsWith","minX","maxX","endIndex","isEnd","Click_card","cardArray","GetTipCardSlCard","clickNode","cardIdx","substring","SetCardSelected","parseInt","DeleteCardSelected","playerCount","idx","head","headPrefab","Init","curTime","Date","getTime","lostHearTime","LostHearTime","outGameTime","isConnectIng","Disconnect","bStartReConnect","StartReConnect","ReConnectByTipSureBtn","StartTimer","StopTimer","ClearHead","OnClose","off","playerAll","GetRoomAllPlayerInfo","playerAllList","Object","keys","player","info","pid","InitCardNum","lb_publicScore","lb_publicMultiple","count","ShowPlayerReady","HideAllZhunBeiLabel","setReady","ShowOrHideZhunbei","isShow","HidePlayerAllBtn","btn_ready","btn_weixin","btn_fzkl","btn_cancel","HideAllAni","OnClickForm","OnClick","btnName","btnNode","Click_btn_go","Click_btn_ok","Click_btn_openCardStart","Click_btn_ready","Click_btn_cancel","Click_btn_weixin","str","Click_btn_fzkl","ReInRoom","Click_btn_pass","Click_btn_tip","Click_btn_outCard","SendOpenCard","SendHog","SendAddDouble","bg_menu","valueBackMusic","LocalDataManager","GetConfigProperty","imgPath","btnPath","SetWndImageByFilePath","valueSpSound","SetConfigProperty","PauseSceneMusic","RecoverySceneMusic","RoomState_Playing","zIndex","Click_btn_jiesan","HideRazzNode","SendAutoStart","ClearSelectCard","ErrLog","SendOpCard","razzCardList","GetAllCardTypeBySpc","ShowRazzNode","isSelectCard","DDZ_CARD_TYPE_NOMARL","GetSelectCard","TransformValueToS","daiNum","GetDaiNum","GetRoomPosMgr","SendReady","SendUnReady","SendOpenCardStart","needArg","SendExitRoom","RoomState_End","ClientPos","posName","jiesan","SetWaitForConfirmForm","OnConFirm","ShowConfirm","Confirm","msgID","createType","IsClientIsCreater","SendGetRoomInfo","OnEvent","ownerID","owner","isAlreadyOpen","GetRoomWanfa","senderPid","quickID","content","playerList","playerListKey","initiatorPos","playerSex","InitHeroSex","soundName","i18n","t","join","roomPosMgr","CheckContentDirty","ShowFaceContent","ShowChatContent","OnEffectEnd","wndPath","effectName","GiftMoveEnd","sender","useData","bMove","OnGiftAniEnd","nodes","giftNode","aniState","getAnimationState","isPlaying","removeFromParent","sendPos","recivePos","productId","sendUiPos","sendPath","sendHeadNode","sendHead","reciveUiPos","recivePath","reciveHeadNode","reciveHead","giftIdx","tempNode","giftPrefabs","ani","defaultClip","vec1","convertToWorldSpaceAR","vec2","Sex","HeroSex_Boy","HeroSex_Girl","RoomPosMgr","setEnd","pointList","isPingJu","robCloseList","ownnerForce","IsClientIsOwner","dissolveNoticeType","UpDateLabJiFen","UpDateLabSportsPoint","allPlayerInfo","img_bottom_input1","coin","GetHeroProperty","score","realPoint","roomCard","img_bottom_input2","roomSetID","ReadyState","SetPlayerReadyInfo","HideClientReady","ShowPlayerOk","IsClientReady","isClientReady","IsOpenStartGame","JoinPlayerFinish","tempNum","ShowPlayerYaoQing","realCardList","cardLength","bg_lz","removeAllChildren","razzCell","lb_cardType","OnRazzCell","itemName","allRazzCardList","selectIndex","substr","OnUpdate","DateNow","Hours","getHours","Minutes","getMinutes","ComTool","StringAddNumSuffix","lb_time","msgArg","cbArg","ConfirmManager","clickType","backArgList","SendDissolveRoom","module","exports"],"mappings":"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","file":"ddz_BasePlay.js","sourceRoot":"../../../../../../../assets/script/game/DDZ/ui","sourcesContent":["var app = require(\"ddz_app\");\r\nvar BasePlayForm = cc.Class({\r\n    extends: require(app.subGameName + \"_BaseForm\"),\r\n\r\n    OnCreateInit: function () {\r\n        this.DDZRoomMgr = app.DDZRoomMgr();\r\n        this.DDZRoom = app.DDZRoom();\r\n        this.HeroManager = app[app.subGameName + \"_HeroManager\"]();\r\n        this.SceneManager = app[app.subGameName + \"_SceneManager\"]();\r\n        this.UtilsWord = app[app.subGameName + \"_UtilsWord\"]();\r\n        this.PokerCard = app[app.subGameName + \"_PokerCard\"]();\r\n        this.DDZRoomPosMgr = app.DDZRoomPosMgr();\r\n        this.DDZRoomSet = app.DDZRoomSet();\r\n        this.LogicDDZGame = app.LogicDDZGame();\r\n        this.ShareDefine = app[app.subGameName + \"_ShareDefine\"]();\r\n        this.DDZDefine = app.DDZDefine();\r\n        \r\n        //是否第一次进入\r\n        this.isFirstEnter = true;\r\n\r\n        this.basePath = 'texture/game/doudizhu/';\r\n\r\n        //UI\r\n        this.btn_ok = this.GetWndNode(\"gameBtnStartList/btn_ok\");\r\n        this.tip_ok = this.node.getChildByName(\"tip_ok\");\r\n        this.razzNode = this.node.getChildByName(\"razzNode\");\r\n\r\n        //公共消息\r\n        this.RegEvent(\"DDZ_PosContinueGame\", this.Event_PosContinueGame);\r\n        this.RegEvent(\"DDZ_DissolveRoom\", this.Event_DissolveRoom);\r\n        this.RegEvent(\"DDZ_StartVoteDissolve\", this.Event_StartVoteDissolve);//发起房间结算投票\r\n        this.RegEvent(\"DDZ_PosLeave\", this.Event_PosLeave);\r\n        this.RegEvent(\"DDZ_PosUpdate\", this.Event_PosUpdate);\r\n        this.RegEvent(\"DDZ_PosReadyChg\", this.Event_PosReadyChg);\r\n        this.RegEvent('GameGift',this.Event_GameGift);\r\n        this.RegEvent('ExitRoomSuccess',this.Event_ExitRoomSuccess);\r\n        this.RegEvent(\"DDZ_OnRoomNotFindByReason\", this.Event_OnRoomNotFindByReason, this);\r\n\r\n        this.RegEvent(\"OnCopyTextNtf\", this.OnEvt_CopyTextNtf, this);\r\n\r\n        //游戏消息\r\n        this.RegEvent(\"DDZSetStart\", this.Event_SetStart);\r\n\t    this.RegEvent(\"DDZSetEnd\", this.Event_SetEnd);\r\n        this.RegEvent(\"RoomEnd\", this.Event_RoomEnd);\r\n        this.RegEvent(\"SPlayer_Trusteeship\", this.OnPack_AutoStart);\r\n        this.RegEvent(\"ChatMessage\", this.Event_ChatMessage);\r\n        this.RegEvent(\"HandCard\", this.Event_ShowHandCard);\r\n        this.RegEvent(\"OpCard\", this.Event_OpCard);\r\n        this.RegEvent(\"ChangeStatus\", this.Event_ChangeStatus);\r\n        this.RegEvent(\"AddDouble\", this.Event_AddDouble);\r\n        this.RegEvent(\"OpenCard\", this.Event_OpenCard);\r\n        this.RegEvent(\"Hog\", this.Event_Hog);\r\n        this.RegEvent(\"OpenStartGame\", this.Event_OpenStartGame);\r\n        this.RegEvent(\"CardNumber\", this.Event_CardNumber);\r\n        \r\n        //比赛分不足时通知\r\n        this.RegEvent(\"SportsPointEnough\", this.Event_SportsPointEnough);\r\n        this.RegEvent(\"SportsPointNotEnough\", this.Event_SportsPointNotEnough);\r\n        //比赛分门槛不足时通知\r\n        this.RegEvent(\"SportsPointThresholdEnough\", this.Event_SportsPointThresholdEnough);\r\n        this.RegEvent(\"SportsPointThresholdNotEnough\", this.Event_SportsPointThresholdNotEnough);\r\n\r\n        this.RegEvent('CodeError',this.Event_CodeError);\r\n        cc.game.on(cc.game.EVENT_HIDE,  this.OnEventHide.bind(this));\r\n        cc.game.on(cc.game.EVENT_SHOW,  this.OnEventShow.bind(this));\r\n\r\n        this.Left = [false,true,false];\r\n\r\n        this.cardSpcedX = 0;\r\n\r\n        this.handCards.on(cc.Node.EventType.TOUCH_START, this.OnTouchStart, this);\r\n\t\tthis.handCards.on(cc.Node.EventType.TOUCH_MOVE, this.OnTouchMove, this);\r\n\t\tthis.handCards.on(cc.Node.EventType.TOUCH_END, this.OnTouchEnd, this);\r\n        this.handCards.on(cc.Node.EventType.TOUCH_CANCEL, this.OnTouchCancel, this);\r\n\r\n        this.boom_Ani.getComponent(cc.Animation).on('finished', this.OnAniPlayFinished, this);\r\n        this.plane_Ani.getComponent(cc.Animation).on('finished', this.OnAniPlayFinished, this);\r\n        this.liandui_Ani.getComponent(cc.Animation).on('finished', this.OnAniPlayFinished, this);\r\n        this.dragon_Ani.getComponent(cc.Animation).on('finished', this.OnAniPlayFinished, this);\r\n        this.GameEnd_Ani.getComponent(cc.Animation).on('finished', this.OnAniPlayFinished, this);\r\n        this.ShutDow_Ani.getComponent(cc.Animation).on('finished', this.OnAniPlayFinished, this);\r\n        for (var i = 0; i < 3; i++) {\r\n            let OpenCard_Ani = this.GetWndNode(\"sp_seat0\"+i+\"/OpenCard_Ani\");\r\n            OpenCard_Ani.getComponent(cc.Animation).on('finished', this.OnAniPlayFinished, this);\r\n        }\r\n        \r\n        this.InitData();\r\n\r\n        this.AddCardPrefab();\r\n\r\n        this.invitationNode = cc.instantiate(this.UIInvitation);\r\n        this.node.addChild(this.invitationNode);\r\n    },\r\n    Event_CodeError:function(event){\r\n        let argDict = event;\r\n        let code = argDict[\"Code\"];\r\n        if(code == this.ShareDefine.SportsPointNotEnough){    \r\n            this.ShowSysMsg(\"比赛分不足房间自动解散\");\r\n            // this.SetWaitForConfirm(\"SportsPointNotEnough\",this.ShareDefine.ConfirmYN, []);\r\n        } else if(code == this.ShareDefine.NotAllow){\r\n            if (this.FormManager.IsFormShow(\"game/DDZ/UIDDZ_Result\")) {\r\n                this.FormManager.CloseForm(\"game/DDZ/UIDDZ_Result\");\r\n            }\r\n            if (this.FormManager.IsFormShow(\"game/DDZ/UIDDZ_2DResult\")) {\r\n                this.FormManager.CloseForm(\"game/DDZ/UIDDZ_2DResult\");\r\n            }\r\n        } else if(code == this.ShareDefine.SportsPointNotEnough){   \r\n            this.ShowSysMsg(\"比赛分不足房间自动解散\"); \r\n            // this.SetWaitForConfirm(\"SportsPointNotEnough\",this.ShareDefine.ConfirmYN, []);\r\n        } \r\n        else if(code == this.ShareDefine.ApplyDissolve){\r\n            this.ShowSysMsg(\"申请解散次数已达上限\");\r\n        }\r\n    },\r\n    Event_SportsPointEnough:function(event){\r\n        let msg=event.msg;\r\n        this.SetWaitForConfirm(\"SportsPointEnough\",this.ShareDefine.ConfirmOK, [msg]);\r\n    },\r\n    Event_SportsPointNotEnough:function(event){\r\n        let msg=event.msg;\r\n        this.ShowSysMsg(\"比赛分不足房间自动解散\");\r\n        // this.SetWaitForConfirm(\"SportsPointNotEnough\",this.ShareDefine.ConfirmYN, []);\r\n    },\r\n\r\n    Event_SportsPointThresholdEnough: function(event) {\r\n        let msg = event.msg;\r\n        this.SetWaitForConfirm(\"SportsPointThresholdEnough\", this.ShareDefine.ConfirmOK, [msg]);\r\n    },\r\n    Event_SportsPointThresholdNotEnough: function(event) {\r\n        let msg = event.msg;\r\n        // this.ShowSysMsg(\"您得比赛分门槛不足，请联系赛事管理\");\r\n        this.SetWaitForConfirm(\"SportsPointThresholdNotEnough\", this.ShareDefine.ConfirmOK, []);\r\n    },\r\n    InitData:function(){\r\n        //所有的牌索引\r\n        this.allCardIdx = 0;\r\n        this.openCardMutiple = 0;\r\n        this.allPlayerCardIdx = [0,0,0,0];\r\n        //黑桃3牌索引\r\n        this.card3Idx = 0;\r\n\r\n        this.firstTurn = false;\r\n\r\n        this.tipCount = 0;\r\n\r\n        this.lastCircleEnd = false;\r\n\r\n        this.openCardInfo = {};\r\n\r\n        this.notUp = false;\r\n\r\n        this.landowner = -1;\r\n    },\r\n    IsShowCardDevice:function(){\r\n        let room = this.DDZRoomMgr.GetEnterRoom();\r\n        let kexuanwanfa=room.GetRoomConfigByProperty('kexuanwanfa');\r\n        if(kexuanwanfa.length>0){\r\n            if(kexuanwanfa.indexOf(8)>-1){\r\n                return false;\r\n            }\r\n        }\r\n        return true;\r\n    },\r\n    IsShowChat:function(){\r\n        let room = this.DDZRoomMgr.GetEnterRoom();\r\n        let gaoji=room.GetRoomConfigByProperty('gaoji');\r\n        if(gaoji.length>0){\r\n            if(gaoji.indexOf(6)>-1){\r\n                return false;\r\n            }\r\n        }\r\n        return true;\r\n    },\r\n    OnShow:function(){\r\n        this.CheckUpdateNotice();\r\n        this.node.getChildByName(\"tip_exit_node\").active=false;\r\n        //确保该玩家还在该房间内，否则强制退出房间\r\n        let roomID = this.DDZRoomMgr.GetEnterRoomID();\r\n        app[app.subGameName + \"_NetManager\"]().SendPack(app.subGameName+\".C\"+app.subGameName.toUpperCase()+\"GetRoomID\", {},function(event){\r\n            if (event.roomID <= 0 || event.roomID != roomID) {\r\n                app[app.subGameName + \"Client\"].ExitGame();\r\n            }\r\n        },function(error){\r\n            app[app.subGameName + \"Client\"].ExitGame();\r\n        });\r\n         //初始化邀请在线好友的数据\r\n        this.roomCfg = this.DDZRoomMgr.GetEnterRoom().GetRoomConfig();\r\n        if (this.roomCfg.clubId > 0 || this.roomCfg.unionId > 0) {\r\n            this.invitationNode.active = true;\r\n            this.invitationNode.getComponent(this.invitationNode.name).InitData(this.roomCfg.clubId, this.roomCfg.unionId, roomID);\r\n        }else{\r\n            this.invitationNode.active = false;\r\n        }\r\n        this.AddHead();\r\n        this.HideAll();\r\n        this.unscheduleAllCallbacks();\r\n        this.SceneManager.PlayMusic(\"back_1\");\r\n        this.InitData();\r\n        this.ClearForbiddenTouch();\r\n        //设置牌间距,便于选牌\r\n        let handCardsSpacingX = this.handCards.getComponent(cc.Layout).spacingX;\r\n        let cardNodeWidth = this.cardPrefab.data.width;\r\n        this.cardSpcedX = cardNodeWidth + handCardsSpacingX;\r\n\r\n        let state = this.DDZRoomSet.GetRoomSetProperty(\"state\");\r\n        let disslove = this.DDZRoom.GetRoomProperty(\"dissolve\");\r\n        let roomState = this.DDZRoom.GetRoomProperty(\"state\");\r\n        this.xianShi = this.DDZRoom.GetRoomConfigByProperty(\"xianShi\");\r\n        //显示房间信息\r\n        this.labeiWanfa.string = this.WanFa();\r\n        if(app[app.subGameName + \"_ShareDefine\"]().isCoinRoom){\r\n            this.roomInfo.active = false;\r\n        }else{\r\n            this.roomInfo.active = true;\r\n            this.labelRoomId.string = \"房间号：\"+this.DDZRoom.GetRoomProperty(\"key\");\r\n            let setID = this.DDZRoom.GetRoomProperty(\"setID\");\r\n            let current = this.DDZRoom.GetRoomConfigByProperty(\"setCount\");\r\n            this.lb_jushu.string = \"局数：\" + setID + \"/\" + current;\r\n        }\r\n        //显示叫分和倍数\r\n        this.UpdateScoreAndDouble();\r\n\r\n        //更新金币和钻石\r\n        this.UpdateSelfScore();\r\n        \r\n        if(disslove.endSec != 0){\r\n            //如果有人发起解散消息\r\n            this.FormManager.ShowForm(app.subGameName + \"_UIMessage02\");\r\n        }\r\n\r\n        if(roomState != this.ShareDefine.RoomState_Init){\r\n            let setInfo = this.DDZRoomSet.GetRoomSetInfo();\r\n            //更新记牌器\r\n            this.UpdateCardNum(setInfo.cardNumMap);\r\n            //如果有玩家托管  显示托管图标\r\n            let posList = this.DDZRoom.GetRoomProperty(\"posList\");\r\n            for(let i = 0; i < posList.length; i++){\r\n                let data = posList[i];\r\n                let pos = data['pos'];\r\n                let isAuto = data['trusteeship'];\r\n                if(isAuto){\r\n                    let headScript = this.GetUICardComponentByPos(pos);\r\n                    headScript.ShowAutoIcon(isAuto);\r\n                }\r\n            }\r\n            //分数\r\n            // this.DDZRoomPosMgr.OnPoint(setInfo.posInfo, true);\r\n            this.UpdatePlayerScore();\r\n            //更新地主牌\r\n            this.ShowDiZhuPai(setInfo.holeCards);\r\n            this.landowner = setInfo.landowner;\r\n            if (this.landowner != -1) {\r\n                //已经确认地主了\r\n                let uiPos = this.DDZRoomPosMgr.GetUIPosByDataPos(this.landowner);\r\n                let path = \"sp_seat0\" + uiPos + \"/head\" + \"/UIDDZHead\" + uiPos;\r\n                let headNode = this.GetWndNode(path);\r\n                let headScript = headNode.getComponent(\"UIDDZHead\");\r\n                headScript.Showlandowner(true);\r\n            }\r\n            //发牌阶段\r\n            if(state == this.ShareDefine.DDZSetState_FaPai){\r\n                this.InitGameStateCommon(state);\r\n                this.gameMultiple.active = false;\r\n            }\r\n            else if(state == this.ShareDefine.DDZSetState_Hog){\r\n                //抢地主阶段\r\n                this.InitGameStateCommon(state);\r\n                this.gameMultiple.active = false;\r\n                this.ShowBtnHog(setInfo.opPos,setInfo.isHaveHog);\r\n            }\r\n            else if(state == this.ShareDefine.DDZSetState_AddDouble){\r\n                //加倍阶段\r\n                this.InitGameStateCommon(state);\r\n                this.ShowBtnMultiple();\r\n            }\r\n            else if(state == this.ShareDefine.DDZSetState_Playing){\r\n                this.InitGameStateCommon(state);\r\n                this.gameMultiple.active = false;\r\n                this.LogicDDZGame.SetCardData(setInfo.opType, setInfo.cardList);\r\n                //显示当前操作位和上家出的牌\r\n                let time = this.DDZDefine.MaxTickTime[this.xianShi];\r\n                this.lastCircleEnd = setInfo.isFirstOp;\r\n                this.firstTurn = setInfo.isFirstOp;\r\n                if(setInfo.opPos == this.DDZRoomPosMgr.GetClientPos()){\r\n                    if(setInfo.isFirstOp){\r\n                        this.ShowBtnOutCard();\r\n                    }\r\n                    else{\r\n                        if(setInfo.opType == 0){\r\n                            this.ShowBtnOutCard();\r\n                        }\r\n                        else{\r\n                            let array = this.LogicDDZGame.GetTipCard();\r\n                            this.ForbiddenTouch(array);\r\n                            if(!array.length){\r\n                                if (this.isAutoPass()) {\r\n                                    time = this.DDZDefine.MinTickTime;\r\n                                }else{\r\n                                    this.ShowAllGameBtn();\r\n                                    time = this.DDZDefine.MinTickTime;\r\n                                    this.lb_mypdgsj.active = true;\r\n                                }\r\n                            }\r\n                            else{\r\n                                if (array.length == 0 || (array.length == 1 && array[0].length == 0)) {\r\n                                    this.lb_mypdgsj.active = true;\r\n                                }\r\n                                this.ShowAllGameBtn();\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n                //由于获取提示牌有排序了上家出牌，这边需要再次排序，从大到小\r\n                this.LogicDDZGame.SortCardByMax(setInfo.cardList);\r\n                this.ShowOutCard(setInfo.lastOpPos, setInfo.cardList);\r\n                this.SetSeat01OutCardPos(setInfo.lastOpPos, setInfo.cardList.length);\r\n                this.StartTickTime(setInfo.opPos, time);\r\n            }\r\n            else if(state == this.ShareDefine.DDZSetState_End){\r\n                //如果玩家已经准备则不显示结算界面\r\n                let clientPos = this.DDZRoomPosMgr.GetClientPos();\r\n                let clientPlayerInfo = this.DDZRoomPosMgr.GetPlayerInfoByPos(clientPos);\r\n                if(clientPlayerInfo[\"gameReady\"]){\r\n                    this.RefreshRoomShow();\r\n                    return;\r\n                }\r\n                this.FormManager.ShowForm(\"game/DDZ/UIDDZ_Result\");\r\n            }\r\n        }\r\n        else{\r\n            this.RefreshRoomShow();\r\n        }\r\n\r\n        //获取用户推广Url\r\n        this.GetTuiGuangUrl();\r\n    },\r\n\r\n    OnAniPlayFinished:function(type, state){\r\n        console.log(\"type ==\"+type);\r\n        if(state.name == 'feiji'){\r\n            this.plane_Ani.active = false;\r\n        }\r\n        else if(state.name == 'zhadan'){\r\n            this.boom_Ani.active = false;\r\n        }\r\n        else if(state.name == 'wangzha'){\r\n            this.boom_Ani.active = false;\r\n        }\r\n        else if(state.name == 'liandui'){\r\n            this.liandui_Ani.active = false;\r\n        }\r\n        else if(state.name == 'shunzi'){\r\n            this.dragon_Ani.active = false;\r\n        }\r\n        else if(state.name == 'dragon'){\r\n            this.dragon_Ani.active = false;\r\n        }else if(state.name == 'chuntian'){\r\n            this.ShutDow_Ani.active = false;\r\n        }else if(state.name == 'fanchuntian'){\r\n            this.ShutDow_Ani.active = false;\r\n        }else if(state.name == 'mingpai'){\r\n            for (var i = 0; i < 3; i++) {\r\n                let OpenCard_Ani = this.GetWndNode(\"sp_seat0\"+i+\"/OpenCard_Ani\");\r\n                OpenCard_Ani.active = false;\r\n            }\r\n        }\r\n        else if(state.name == 'nongminshengli' ||\r\n                state.name == 'nongminshibai' ||\r\n                state.name == 'dizhushengli' ||\r\n                state.name == 'dizhushibai'){\r\n            this.GameEnd_Ani.active = false;\r\n        }\r\n    },\r\n\r\n    ShowAllCard:function(){\r\n        this.allCards.active = true;\r\n        let cardNum = this.DDZDefine.MidHandCardEx;\r\n        let playerNum = this.DDZRoom.GetRoomConfigByProperty(\"playerNum\");\r\n        let allCardNum = playerNum*cardNum;\r\n        let xPos = -520;\r\n        let yPos = 0;\r\n        for(let i = 0; i < allCardNum; i++){\r\n            let card = this.allCards.children[i];\r\n            card.getChildByName(\"poker_back\").active = true;\r\n            card.active = true;\r\n            card.y = 0;\r\n            card.x = xPos;\r\n            xPos += 20;\r\n        }\r\n    },\r\n\r\n    AddCardPrefab:function(){\r\n        //发牌的牌墩\r\n        this.allCards.active = false;\r\n        for(let i = 0; i < this.DDZDefine.MaxTableCard; i++){\r\n            let card = cc.instantiate(this.cardPrefab);\r\n            this.allCards.addChild(card);\r\n            card.active = false;\r\n            card.name = \"card_\" + (i+1).toString();\r\n        }\r\n\r\n        //玩家手牌\r\n        this.handCards.active = false;\r\n        for(let i = 0; i < this.DDZDefine.MaxHandCard; i++){\r\n            let card = cc.instantiate(this.cardPrefab);\r\n            card.active = false;\r\n            card.name = \"card_\" + (i+1).toString();\r\n            this.handCards.addChild(card);\r\n        }\r\n\r\n        //玩家打出去的牌\r\n        for(let i = 0; i < this.DDZDefine.MaxPlayer; i++){\r\n            let outCardList = this.node.getChildByName(\"outCardList\"+i);\r\n            outCardList.active = false;\r\n            for(let j = 0; j < this.DDZDefine.MaxHandCard; j++){\r\n                let card = cc.instantiate(this.cardPrefab);\r\n                card.active = false;\r\n                card.name = \"card_\" + (i+1).toString();\r\n                outCardList.addChild(card);\r\n            }\r\n        }\r\n\r\n        //玩家明牌的牌\r\n        for(let i = 1; i < this.DDZDefine.MaxPlayer; i++){\r\n            let openCardList = this.node.getChildByName(\"openCardList\"+i);\r\n            openCardList.active = false;\r\n            for(let j = 0; j < this.DDZDefine.MaxHandCard; j++){\r\n                let card = cc.instantiate(this.cardPrefab);\r\n                card.active = false;\r\n                card.name = \"card_\" + (i+1).toString();\r\n                openCardList.addChild(card);\r\n            }\r\n        }\r\n\r\n        //地主牌\r\n        for (var i = 0; i < 3; i++) {\r\n            let card = cc.instantiate(this.cardPrefab);\r\n            card.active = false;\r\n            card.scale = 0.39;\r\n            card.name = \"dzcard_\" + (i+1).toString();\r\n            this.img_dzp.addChild(card);\r\n        }\r\n    },\r\n\r\n    Event_ShowHandCard:function(){\r\n        let downList = this.LogicDDZGame.GetHandCard();\r\n        console.log(\"Event_ShowHandCard downList === \" + downList);\r\n        for(let i = 0; i < this.handCards.children.length; i++){\r\n            let cardValue = downList[i];\r\n            let cardNode = this.handCards.children[i];\r\n            cardNode.y = 0;\r\n            if(cardValue){\r\n                let bSelected = this.LogicDDZGame.CheckSelected(cardValue);\r\n                if (bSelected){\r\n                    cardNode.y += this.DDZDefine.MaxRisePosY;\r\n                }\r\n                let isLastCard = false;\r\n                if (i == downList.length - 1) {\r\n                    isLastCard = true;\r\n                }\r\n                let isShowLandowner = false;\r\n                if (this.landowner == this.DDZRoomPosMgr.GetClientPos() && isLastCard) {\r\n                    isShowLandowner = true;\r\n                }\r\n                this.ShowCard(cardValue, cardNode, isLastCard, isShowLandowner);\r\n            }\r\n            else{\r\n                cardNode.active = false;\r\n            }\r\n        }\r\n    },\r\n\r\n    ChangeCardNum:function(dataPos, len){\r\n        let uiPos = this.DDZRoomPosMgr.GetUIPosByDataPos(dataPos);\r\n        if(uiPos == 0) return;\r\n        let card = this.GetWndNode(\"sp_seat0\"+uiPos+\"/card\");\r\n        card.active = true;\r\n        let cardNum = this.GetWndNode(\"sp_seat0\"+uiPos+\"/cardNum\");\r\n        cardNum.active = true;\r\n        cardNum.getComponent(cc.Label).string = len.toString();\r\n        if(!card.getChildByName(\"poker_back\").active){\r\n            card.getChildByName(\"poker_back\").active = true;\r\n        }\r\n        this.ShowWarningByPos(dataPos, len);\r\n        return len;\r\n    },\r\n\r\n    ShowWarningByPos:function(dataPos, len){\r\n        if(this.DDZRoomPosMgr.GetClientPos() == dataPos) return;\r\n        let uiPos = this.DDZRoomPosMgr.GetUIPosByDataPos(dataPos);\r\n        let warning = this.GetWndNode(\"sp_seat0\" + uiPos + \"/warning\");\r\n        //只有剩一张牌才显示警告动画\r\n        if(len <= 2 && len > 0){\r\n            warning.active = true;\r\n            warning.getComponent(cc.Animation).play(\"warning\");\r\n            let sex = this.GetPlayerSex(dataPos);\r\n            let pathStr = this.DDZDefine.SoundPath + \"game_\" + sex + \"/\";\r\n            if (len == 1) {\r\n                this.SoundManager.PlaySound(sex + \"baojing1\",pathStr + \"baojing1\");\r\n            }else{\r\n                this.SoundManager.PlaySound(sex + \"baojing2\",pathStr + \"baojing2\");\r\n            }\r\n        }\r\n        else{\r\n            warning.active = false;\r\n            warning.getComponent(cc.Animation).stop(\"warning\");\r\n        }\r\n    },\r\n\r\n    SetSeat01OutCardPos:function(dataPos, len){\r\n        let uiPos = this.DDZRoomPosMgr.GetUIPosByDataPos(dataPos);\r\n        if(uiPos != 1) return;\r\n\r\n        let node = this.node.getChildByName(\"outCardList1\");\r\n        let posX = 410 - 20 * len;\r\n        node.x = posX;\r\n    },\r\n\r\n    SetAniPos:function(dataPos){\r\n        let uiPos = this.DDZRoomPosMgr.GetUIPosByDataPos(dataPos);\r\n        if(uiPos == 1){\r\n            this.boom_Ani.setPosition(cc.v2(232, 64));\r\n        }\r\n        else{\r\n           let outCardList = this.node.getChildByName(\"outCardList\"+uiPos);\r\n           this.boom_Ani.setPosition(cc.v2(outCardList.x, outCardList.y));\r\n        }\r\n    },\r\n\r\n    PlayCardSound:function(pos, opCardType, cardList, circleEnd){\r\n        let sex = this.GetPlayerSex(pos);\r\n        let pathStr = this.DDZDefine.SoundPath + \"game_\" + sex + \"/\";\r\n        if(this.lastCircleEnd){\r\n            if(opCardType == this.LogicDDZGame.DDZ_CARD_TYPE_SINGLECARD){\r\n                let value = this.LogicDDZGame.GetCardValue(cardList[0]);\r\n                this.SoundManager.PlaySound(sex + \"One_\" + value,pathStr + \"One_\" + value + \"\");\r\n            }\r\n            else if(opCardType == this.LogicDDZGame.DDZ_CARD_TYPE_DUIZI){\r\n                let value = this.LogicDDZGame.GetCardValue(cardList[0]);\r\n                this.SoundManager.PlaySound(sex + \"Double_\" + value,pathStr + \"Double_\" + value + \"\");\r\n            }\r\n            else if(opCardType == this.LogicDDZGame.DDZ_CARD_TYPE_SHUNZI){\r\n                this.SoundManager.PlaySound(sex + \"Series\",pathStr + \"Series\");\r\n            }\r\n            else if(opCardType == this.LogicDDZGame.DDZ_CARD_TYPE_3BUDAI){\r\n                let value = this.LogicDDZGame.GetCardValue(cardList[0]);\r\n                this.SoundManager.PlaySound(sex + \"Three_\" + value,pathStr + \"Three_\" + value + \"\");\r\n            }\r\n            else if(opCardType == this.LogicDDZGame.DDZ_CARD_TYPE_3DAI1){\r\n                this.SoundManager.PlaySound(sex + \"ThreeAndOne\",pathStr + \"ThreeAndOne\");\r\n            }\r\n            else if(opCardType == this.LogicDDZGame.DDZ_CARD_TYPE_3DAI2){\r\n                this.SoundManager.PlaySound(sex + \"ThreeAndTwo\",pathStr + \"ThreeAndTwo\");\r\n            }\r\n            else if(opCardType == this.LogicDDZGame.DDZ_CARD_TYPE_4DAI1){\r\n                this.SoundManager.PlaySound(sex + \"FourAndTwo\",pathStr + \"FourAndOne\");\r\n            }\r\n            else if(opCardType == this.LogicDDZGame.DDZ_CARD_TYPE_4DAI21){\r\n                this.SoundManager.PlaySound(sex + \"FourAndFour\",pathStr + \"FourAndOneDui\");\r\n            }\r\n            else if(opCardType == this.LogicDDZGame.DDZ_CARD_TYPE_4DAI2){\r\n                this.SoundManager.PlaySound(sex + \"FourAndTwo\",pathStr + \"FourAndTwo\");\r\n            }\r\n            else if(opCardType == this.LogicDDZGame.DDZ_CARD_TYPE_4DAI4){\r\n                this.SoundManager.PlaySound(sex + \"FourAndFour\",pathStr + \"FourAndFour\");\r\n            }\r\n            else if(opCardType == this.LogicDDZGame.DDZ_CARD_TYPE_FEIJI0 ||\r\n                    opCardType == this.LogicDDZGame.DDZ_CARD_TYPE_FEIJI1 ||\r\n                    opCardType == this.LogicDDZGame.DDZ_CARD_TYPE_FEIJI2){\r\n                this.SoundManager.PlaySound(sex + \"Plane\",pathStr + \"Plane\");\r\n            }\r\n            else if(opCardType == this.LogicDDZGame.DDZ_CARD_TYPE_LIANDUI){\r\n                this.SoundManager.PlaySound(sex + \"SeriesTwo\",pathStr + \"SeriesTwo\");\r\n            }\r\n            else if(opCardType == this.LogicDDZGame.DDZ_CARD_TYPE_ZHADAN){\r\n                let value = this.LogicDDZGame.GetCardValue(cardList[0]);\r\n                if (value == 16 || value == 17) {\r\n                    this.SoundManager.PlaySound(sex + \"wangzha\",pathStr + \"wangzha\");\r\n                }\r\n                else{\r\n                    this.SoundManager.PlaySound(sex + \"Boom\",pathStr + \"Boom\");\r\n                }\r\n            }\r\n        }\r\n        else{\r\n            if(opCardType == this.LogicDDZGame.DDZ_CARD_TYPE_BUCHU){\r\n                let randomNum = Math.floor(Math.random()*4+1);\r\n                this.SoundManager.PlaySound(sex + \"Not_\" + randomNum,pathStr + \"Not_\" + randomNum + \"\");\r\n            }\r\n            else if(opCardType == this.LogicDDZGame.DDZ_CARD_TYPE_ZHADAN){\r\n                let value = this.LogicDDZGame.GetCardValue(cardList[0]);\r\n                if (value == 16 || value == 17) {\r\n                    this.SoundManager.PlaySound(sex + \"wangzha\",pathStr + \"wangzha\");\r\n                }\r\n                else{\r\n                    this.SoundManager.PlaySound(sex + \"Boom\",pathStr + \"Boom\");\r\n                }\r\n            }\r\n            else{\r\n                let randomNum = Math.floor(Math.random()*3+1);\r\n                this.SoundManager.PlaySound(sex + \"Bigger_\" + randomNum,pathStr + \"Bigger_\" + randomNum + \"\");\r\n            }\r\n        }\r\n\r\n        this.lastCircleEnd = circleEnd;\r\n    },\r\n\r\n    Event_OpCard:function(event){\r\n        console.log(\"OpCard信息 == \"+event.opCardType);\r\n        let data = event;\r\n        this.firstTurn = false;\r\n        this.notUp = false;\r\n        this.gameBtn.active = false;\r\n        this.tipCount = 0;\r\n        let time = this.DDZDefine.MaxTickTime[this.xianShi];\r\n        //更新公共倍数\r\n        let roomDouble = data.roomDouble;\r\n        this.DDZRoomSet.SetRoomSetProperty(\"roomDouble\", roomDouble);\r\n        this.DDZRoomSet.SetRoomSetProperty(\"opType\", data.opCardType);\r\n        this.DDZRoomSet.SetRoomSetProperty(\"cardList\", data.cardList);\r\n        this.UpdateScoreAndDouble();\r\n\r\n        this.LogicDDZGame.SortCardByMax(data.cardList);\r\n\r\n        if(data.turnEnd){\r\n            this.LogicDDZGame.ClearCardData();\r\n        }\r\n        //不显示手牌\r\n        if (data.opPosCardLength >= 0) {\r\n            this.ChangeCardNum(data.pos, data.opPosCardLength);\r\n        }\r\n        this.HideClockByPos(data.pos);\r\n        this.LogicDDZGame.SetCardData(data.opCardType, data.cardList);\r\n        this.ShowOutCard(data.pos, data.cardList);\r\n        this.SetSeat01OutCardPos(data.pos, data.cardList.length);\r\n        this.DeleteOpenCardList(data.pos, data.cardList);\r\n\r\n        //音效\r\n        this.PlayCardSound(data.pos, data.opCardType, data.cardList, data.turnEnd);\r\n        \r\n        //显示动画特效\r\n        if(data.opCardType == this.LogicDDZGame.DDZ_CARD_TYPE_SHUNZI){\r\n            //一条龙\r\n            if(this.LogicDDZGame.CheckDragon()){\r\n                this.dragon_Ani.active = true;\r\n                this.dragon_Ani.getComponent(cc.Animation).stop(\"shunzi\");\r\n                this.dragon_Ani.getComponent(cc.Animation).play(\"dragon\");\r\n            }else{\r\n                this.dragon_Ani.active = true;\r\n                this.dragon_Ani.getComponent(cc.Animation).stop(\"dragon\");\r\n                this.dragon_Ani.getComponent(cc.Animation).play(\"shunzi\");\r\n            }\r\n        }\r\n        else if(data.opCardType == this.LogicDDZGame.DDZ_CARD_TYPE_ZHADAN){\r\n            //炸弹\r\n            this.boom_Ani.active = true;\r\n            // this.SetAniPos(data.pos);\r\n            let cardValue = this.LogicDDZGame.GetCardValue(data.cardList[0]);\r\n            if (cardValue == 16 || cardValue == 17) {\r\n                this.boom_Ani.getComponent(cc.Animation).stop(\"zhadan\");\r\n                this.boom_Ani.getComponent(cc.Animation).play(\"wangzha\");\r\n            }else{\r\n                this.boom_Ani.getComponent(cc.Animation).stop(\"wangzha\");\r\n                this.boom_Ani.getComponent(cc.Animation).play(\"zhadan\");\r\n            }\r\n        }\r\n        else if(data.opCardType == this.LogicDDZGame.DDZ_CARD_TYPE_FEIJI0 ||\r\n                data.opCardType == this.LogicDDZGame.DDZ_CARD_TYPE_FEIJI1 ||\r\n                data.opCardType == this.LogicDDZGame.DDZ_CARD_TYPE_FEIJI2){\r\n            this.plane_Ani.active = true;\r\n            this.plane_Ani.getComponent(cc.Animation).play(\"feiji\");\r\n        }\r\n        else if(data.opCardType == this.LogicDDZGame.DDZ_CARD_TYPE_LIANDUI){\r\n            this.liandui_Ani.active = true;\r\n            this.liandui_Ani.getComponent(cc.Animation).play(\"liandui\");\r\n        }\r\n        \r\n        if(data.pos == this.DDZRoomPosMgr.GetClientPos()){\r\n            this.LogicDDZGame.OutPokerCard(data.cardList);\r\n            this.ClearForbiddenTouch();\r\n        }\r\n        //检测是否是当前游戏已经结束\r\n        if(data.isSetEnd){\r\n            return;\r\n        }\r\n        this.lb_mypdgsj.active = false;\r\n        if(data.nextPos == this.DDZRoomPosMgr.GetClientPos()){\r\n            //判断剩余手牌是否能一次出完并且没有炸弹，如果可以，直接出\r\n            if (!this.LogicDDZGame.IsHaveBoom()) {\r\n                let opCardType = this.LogicDDZGame.GetCardType(false);\r\n                console.log(\"所有手牌组成一个牌型：\" + opCardType);\r\n                if (opCardType > 0) {\r\n                    let isOut = false;\r\n                    if (data.turnEnd) {\r\n                        isOut = true;\r\n                    } else {\r\n                        let tipArray = this.LogicDDZGame.GetTipCard();\r\n                        if (tipArray.length > 0) {\r\n                            let myHangCard = this.LogicDDZGame.GetHandCard();\r\n                            for (let i = 0; i < tipArray.length; i++) {\r\n                                //发给服务端的消息\r\n                                if (tipArray[i].length == myHangCard.length) {\r\n                                    isOut = true;\r\n                                    break;\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                    if (isOut == true) {\r\n                        let serverPack = {};\r\n                        let roomID = this.DDZRoomMgr.GetEnterRoom().GetRoomProperty(\"roomID\");\r\n                        serverPack.roomID = roomID;\r\n                        let pos = this.DDZRoomPosMgr.GetClientPos();\r\n                        serverPack.pos = pos;\r\n                        let self = this;\r\n                        this.scheduleOnce(function() {\r\n                            self.ClientOpCardByType(opCardType, serverPack, false);\r\n                        }, 1.0);\r\n                        return;\r\n                    }\r\n                }\r\n            }\r\n            if(data.turnEnd){\r\n                this.ShowBtnOutCard();\r\n            }\r\n            else{\r\n                let array = this.LogicDDZGame.GetTipCard();\r\n                this.ForbiddenTouch(array);\r\n                if(!array.length){\r\n                    if (this.isAutoPass()) {\r\n                        time = this.DDZDefine.MinTickTime;\r\n                    }else{\r\n                        this.ShowAllGameBtn();\r\n                        time = this.DDZDefine.MinTickTime;\r\n                        this.lb_mypdgsj.active = true;\r\n                    }\r\n                }\r\n                else{\r\n                    if (array.length == 0 || (array.length == 1 && array[0].length == 0)) {\r\n                        this.lb_mypdgsj.active = true;\r\n                    }\r\n                    this.ShowAllGameBtn();\r\n                }\r\n            }\r\n        }\r\n        \r\n        this.StartTickTime(data.nextPos, time);\r\n    },\r\n\r\n    isCanChoose: function() {\r\n        for (let i = 0; i < this.handCards.children.length; i++) {\r\n            if (this.handCards.children[i].y > 0) {\r\n                return false;\r\n            }\r\n        }\r\n        return true;\r\n    },\r\n    ForbiddenTouch:function(pokerList){\r\n        this.ClearForbiddenTouch();\r\n        // return;//暂时不需要置灰\r\n\r\n        let downList = this.LogicDDZGame.GetHandCard();\r\n        if(pokerList.length){\r\n            let cardType = this.LogicDDZGame.GetLastCardType();\r\n            if(cardType == this.LogicDDZGame.DDZ_CARD_TYPE_3BUDAI ||\r\n                cardType == this.LogicDDZGame.DDZ_CARD_TYPE_3DAI1 ||\r\n                cardType == this.LogicDDZGame.DDZ_CARD_TYPE_3DAI2 ||\r\n                cardType == this.LogicDDZGame.DDZ_CARD_TYPE_4DAI2 ||\r\n                cardType == this.LogicDDZGame.DDZ_CARD_TYPE_4DAI4 ||\r\n                cardType == this.LogicDDZGame.DDZ_CARD_TYPE_FEIJI0 ||\r\n                cardType == this.LogicDDZGame.DDZ_CARD_TYPE_FEIJI1 ||\r\n                cardType == this.LogicDDZGame.DDZ_CARD_TYPE_FEIJI2\r\n                ){\r\n                    if(!this.LogicDDZGame.CheckOnlyBoom(pokerList)){\r\n                        return;\r\n                    }\r\n            }\r\n            let lastValue = 0;\r\n            for(let i = downList.length - 1; i >= 0; i--){\r\n                let poker = downList[i];\r\n                let cardValue = this.LogicDDZGame.GetCardValue(poker);\r\n                this.handCards.children[i].y = 0;\r\n\r\n                if(lastValue == cardValue){\r\n                    if(this.handCards.children[i+1].touchTag){\r\n                        this.handCards.children[i].touchTag = true;\r\n                        this.handCards.children[i].getChildByName('bg_black').active = true;\r\n                    }\r\n                    else{\r\n                        this.handCards.children[i].touchTag = false;\r\n                        this.handCards.children[i].getChildByName('bg_black').active = false;\r\n                    }\r\n                    continue;\r\n                }\r\n    \r\n                let isHas = false;\r\n                for(let j = 0; j < pokerList.length; j++){\r\n                    let list = pokerList[j];\r\n                    if(list.indexOf(poker) != -1){\r\n                        isHas = true;\r\n                        break;\r\n                    }\r\n                }\r\n    \r\n                if(isHas){\r\n                    this.handCards.children[i].touchTag = false;\r\n                    this.handCards.children[i].getChildByName('bg_black').active = false;\r\n                }\r\n                else{\r\n                    this.handCards.children[i].touchTag = true;\r\n                    this.handCards.children[i].getChildByName('bg_black').active = true;\r\n //                   this.handCards.children[i].addComponent(cc.Button);\r\n                }\r\n                lastValue = cardValue;\r\n            }\r\n        }\r\n        else{\r\n            for(let i = 0; i < downList.length; i++){\r\n                this.handCards.children[i].y = 0;\r\n                this.handCards.children[i].touchTag = true;\r\n                this.handCards.children[i].getChildByName('bg_black').active = true;\r\n                // this.handCards.children[i].addComponent(cc.Button);\r\n            }\r\n        }\r\n    },\r\n\r\n    ClearForbiddenTouch:function(){\r\n        this.LogicDDZGame.ChangeSelectCard([]);\r\n        let downList = this.LogicDDZGame.GetHandCard();\r\n        for(let i = 0; i < downList.length; i++){\r\n            this.handCards.children[i].y = 0;\r\n            this.handCards.children[i].touchTag = false;\r\n            this.handCards.children[i].getChildByName('bg_black').active = false;\r\n //           this.handCards.children[i].removeComponent(cc.Button);\r\n        }\r\n    },\r\n\r\n    DeleteOpenCardList:function(dataPos, cardList){\r\n        if(dataPos == this.DDZRoomPosMgr.GetClientPos()) return;\r\n\r\n        if(this.openCardInfo[dataPos]){\r\n            let openCardList = this.openCardInfo[dataPos];\r\n            for(let i = 0; i < cardList.length; i++){\r\n                let value = cardList[i];\r\n                let pos = openCardList.indexOf(value);\r\n                if(pos != -1){\r\n                    openCardList.splice(pos, 1);\r\n                }\r\n            }\r\n\r\n            this.ShowOpenCard(dataPos, openCardList);\r\n        }\r\n    },\r\n\r\n    Event_ChangeStatus:function(event){\r\n        let opPos = this.DDZRoomSet.GetRoomSetProperty(\"opPos\");\r\n        this.HideAllPass();\r\n        this.HideAllClock();\r\n        //不是明牌阶段隐藏按钮\r\n        this.btn_go.active = false;\r\n        this.btn_openCardStart.active = false;\r\n        if (event.state == this.ShareDefine.DDZSetState_OpenCard) {\r\n            console.log(\"明牌阶段...\");\r\n            this.btn_ok.active = false;\r\n            this.tip_ok.active = false;\r\n            this.btn_go.active = true;\r\n            this.btn_openCardStart.active = true;\r\n            this.StartTickTime(opPos, 5);\r\n        }else if (event.state == this.ShareDefine.DDZSetState_FaPai) {\r\n            console.log(\"发牌阶段...\");\r\n            //更新地主牌\r\n            this.ShowDiZhuPai(event.holeCards);\r\n            this.btn_go.active = false;\r\n            this.btn_openCardStart.active = false;\r\n            this.gameMultiple.active = false;\r\n            this.lb_ddbrjb.active = false;\r\n        } else if (event.state == this.ShareDefine.DDZSetState_Hog) {\r\n            console.log(\"叫地主阶段...\");\r\n            //更新地主牌\r\n            this.ShowDiZhuPai(event.holeCards);\r\n            this.gameMultiple.active = false;\r\n            this.lb_ddbrjb.active = false;\r\n            this.ShowBtnHog(opPos);\r\n        } else if (event.state == this.ShareDefine.DDZSetState_AddDouble) {\r\n            console.log(\"加倍阶段...\");\r\n            //更新地主牌\r\n            this.ShowDiZhuPai(event.holeCards);\r\n            this.ShowBtnMultiple();\r\n            //莫名其妙会出现牌遮挡不能出，强制清理下\r\n            this.ClearForbiddenTouch();\r\n        } else if (event.state == this.ShareDefine.DDZSetState_Playing) {\r\n            console.log(\"打牌阶段...\");\r\n            //更新地主牌\r\n            this.ShowDiZhuPai(event.holeCards);\r\n            this.gameMultiple.active = false;\r\n            this.lb_ddbrjb.active = false;\r\n            this.StartGame(opPos);\r\n        } else if (event.state == this.ShareDefine.DDZSetState_End) {\r\n            console.log(\"打牌结束阶段...\");\r\n            this.lb_ddbrjb.active = false;\r\n        }\r\n    },\r\n\r\n    Event_AddDouble:function(event){\r\n        let data = event;\r\n        let uiPos = this.DDZRoomPosMgr.GetUIPosByDataPos(data.pos);\r\n        let sex = this.GetPlayerSex(data.pos);\r\n        let pathStr = this.DDZDefine.SoundPath + \"game_\" + sex + \"/\";\r\n        if(data.addDouble == 1){\r\n            this.ShowAddDouble(data.pos, data.addDouble);\r\n            this.ShowImgTipByPos(uiPos, \"lb_jb\");\r\n            this.SoundManager.PlaySound(sex + \"jiabei\",pathStr + \"jiabei\");\r\n        }\r\n        else{\r\n            this.ShowImgTipByPos(uiPos, \"lb_bjb\");\r\n            this.SoundManager.PlaySound(sex + \"bujiabei\",pathStr + \"bujiabei\");\r\n        }\r\n\r\n        if(data.pos == this.DDZRoomPosMgr.GetClientPos()){\r\n            this.lb_ddbrjb.active = true;\r\n            this.gameMultiple.active = false;\r\n            this.HideClockByPos(data.pos);\r\n        }\r\n    },\r\n\r\n    Event_OpenCard:function(event){\r\n        let data = event;\r\n        if(data.OpenCard == 0) return;\r\n        let sex = this.GetPlayerSex(data.pos);\r\n        let pathStr = this.DDZDefine.SoundPath + \"game_\" + sex + \"/\";\r\n        let uiPos = this.DDZRoomPosMgr.GetUIPosByDataPos(data.pos);\r\n        let state = this.DDZRoomSet.GetRoomSetProperty(\"state\");\r\n        if (state == this.ShareDefine.DDZSetState_End) {\r\n            this.ShowOpenCard(data.pos, data.cardList);\r\n        }else{\r\n            let OpenCard_Ani = this.GetWndNode(\"sp_seat0\"+uiPos+\"/OpenCard_Ani\");\r\n            OpenCard_Ani.active = true;\r\n            OpenCard_Ani.getComponent(cc.Animation).play(\"mingpai\");\r\n            this.SoundManager.PlaySound(sex + \"ShowCard\",pathStr + \"ShowCard\");\r\n            //更新公共倍数\r\n            let roomDouble = data.roomDouble;\r\n            this.DDZRoomSet.SetRoomSetProperty(\"roomDouble\", roomDouble);\r\n            this.UpdateScoreAndDouble();\r\n        }\r\n        this.openCardInfo[data.pos] = data.cardList;\r\n        let setInfo = this.DDZRoomSet.GetRoomSetInfo();\r\n        let posInfo = setInfo.posInfo;\r\n        for (let i = 0; i < posInfo.length; i++) {\r\n            if (posInfo[i].posID == data.pos) {\r\n                posInfo[i].openCard = 1;\r\n                posInfo[i].cards = data.cardList;\r\n                break;\r\n            }\r\n        }\r\n        this.DDZRoomSet.SetRoomSetProperty(\"posInfo\", posInfo);\r\n        if(data.pos == this.DDZRoomPosMgr.GetClientPos()){\r\n            this.btn_openCard.active = false;\r\n        }\r\n    },\r\n\r\n    Event_Hog:function(event){\r\n        let data = event;\r\n        let hogScore = data.hogScore;\r\n        let roomDouble = data.roomDouble;\r\n        let isHaveHog = data.isHaveHog;//是否有人叫了地主\r\n        let hogTime = data.hogTime;//当前位置操作了几次\r\n        this.DDZRoomSet.SetRoomSetProperty(\"hogScore\", hogScore);\r\n        this.DDZRoomSet.SetRoomSetProperty(\"roomDouble\", roomDouble);\r\n        this.UpdateScoreAndDouble();\r\n        let uiPos = this.DDZRoomPosMgr.GetUIPosByDataPos(data.curPos);\r\n        let sex = this.GetPlayerSex(data.curPos);\r\n        let pathStr = this.DDZDefine.SoundPath + \"game_\" + sex + \"/\";\r\n        let quedingdizhu = this.DDZRoom.GetRoomConfigByProperty(\"quedingdizhu\");\r\n        //刷新每个人叫地主次数\r\n        let setInfo = this.DDZRoomSet.GetRoomSetInfo();\r\n        let posInfo = setInfo.posInfo;\r\n        for (let i = 0; i < posInfo.length; i++) {\r\n            if (posInfo[i].posID == data.curPos) {\r\n                posInfo[i].hog = data.hog;\r\n                break;\r\n            }\r\n        }\r\n        this.DDZRoomSet.SetRoomSetProperty(\"posInfo\", posInfo);\r\n        if(data.hog == 0){\r\n            //不叫\r\n            if (quedingdizhu == this.DDZDefine.HogCommon) {\r\n                if (isHaveHog) {\r\n                    this.SoundManager.PlaySound(sex + \"buqiang\",pathStr + \"buqiang\");\r\n                    this.ShowImgTipByPos(uiPos, \"lb_bq\");\r\n                }else{\r\n                    this.SoundManager.PlaySound(sex + \"bujiao_1\",pathStr + \"bujiao_1\");\r\n                    this.ShowImgTipByPos(uiPos, \"lb_bj\");\r\n                }\r\n            }else{\r\n                this.SoundManager.PlaySound(sex + \"bujiao_2\",pathStr + \"bujiao_2\");\r\n                this.ShowImgTipByPos(uiPos, \"lb_bj\");\r\n            }\r\n        }else{\r\n            //叫了地主\r\n            if (quedingdizhu == this.DDZDefine.HogCommon) {\r\n                if (hogTime == 1) {\r\n                    this.SoundManager.PlaySound(sex + \"jiaodizhu\",pathStr + \"jiaodizhu\");\r\n                    this.ShowImgTipByPos(uiPos, \"lb_jdz\");\r\n                } else if (hogTime == 2) {\r\n                    this.SoundManager.PlaySound(sex + \"qiangdizhu\",pathStr + \"qiangdizhu\");\r\n                    this.ShowImgTipByPos(uiPos, \"lb_qdz\");\r\n                } else if (hogTime == 3) {\r\n                    this.SoundManager.PlaySound(sex + \"qiangdizhu_2\",pathStr + \"qiangdizhu_2\");\r\n                    this.ShowImgTipByPos(uiPos, \"lb_qdz\");\r\n                } else {\r\n                    this.SoundManager.PlaySound(sex + \"woqiang\",pathStr + \"woqiang\");\r\n                    this.ShowImgTipByPos(uiPos, \"lb_qdz\");\r\n                }\r\n            } else if (quedingdizhu == this.DDZDefine.HogScore) {\r\n                if (data.hog == 1) {\r\n                    this.ShowImgTipByPos(uiPos, \"lb_yf\");\r\n                    this.SoundManager.PlaySound(sex + \"oneScore\",pathStr + \"oneScore\");\r\n                } else if (data.hog == 2) {\r\n                    this.ShowImgTipByPos(uiPos, \"lb_ef\");\r\n                    this.SoundManager.PlaySound(sex + \"twoScore\",pathStr + \"twoScore\");\r\n                } else if (data.hog == 3) {\r\n                    this.ShowImgTipByPos(uiPos, \"lb_sf\");\r\n                    this.SoundManager.PlaySound(sex + \"threeScore\",pathStr + \"threeScore\");\r\n                }\r\n            }\r\n        }\r\n        this.HideClockByPos(data.curPos);\r\n        if (data.landowner == -1) {\r\n            this.ShowBtnHog(data.nextPos, isHaveHog);\r\n        }else{\r\n            console.log(\"地主pos位置：\" + data.landowner);\r\n            //已经确认地主了\r\n            this.landowner = data.landowner;\r\n            let uiPos = this.DDZRoomPosMgr.GetUIPosByDataPos(data.landowner);\r\n            let path = \"sp_seat0\" + uiPos + \"/head\" + \"/UIDDZHead\" + uiPos;\r\n            let headNode = this.GetWndNode(path);\r\n            let headScript = headNode.getComponent(\"UIDDZHead\");\r\n            headScript.Showlandowner(true);\r\n            //更新地主牌\r\n            this.ShowDiZhuPai(data.holeCards);\r\n            //把地主牌发给地主\r\n            setInfo = this.DDZRoomSet.GetRoomSetInfo();\r\n            posInfo = setInfo.posInfo;\r\n            for (let i = 0; i < posInfo.length; i++) {\r\n                if (posInfo[i].posID == data.landowner) {\r\n                    for (let j = 0; j < data.holeCards.length; j++) {\r\n                        console.log(\"添加地主牌\");\r\n                        posInfo[i].cards.push(data.holeCards[j]);\r\n                    }\r\n                    break;\r\n                }\r\n            }\r\n            this.DDZRoomSet.SetRoomSetProperty(\"posInfo\", posInfo);\r\n            this.LogicDDZGame.InitHandCard();\r\n            for (var i = 0; i < 3; i++) {\r\n                if(this.DDZRoomPosMgr.GetClientPos() == data.landowner){\r\n                    this.Event_ShowHandCard();\r\n                    this.allPlayerCardIdx[0] += 1;\r\n                }\r\n                else if (this.DDZRoomPosMgr.GetClientPos() != data.landowner && \r\n                    posInfo[data.landowner].openCard == 1) {\r\n                    let allOpenCardList = posInfo[data.landowner].cards;\r\n                    this.ShowOpenCard(data.landowner, allOpenCardList);\r\n                    this.AddCardAction(data.landowner);\r\n                }\r\n                else{\r\n                    this.AddCardAction(data.landowner);\r\n                }\r\n            }\r\n        }\r\n    },\r\n\r\n    Event_OpenStartGame:function(event){\r\n        let pos = event.pos;\r\n        let openStartGame = event.openStartGame;\r\n        this.DDZRoomPosMgr.SetPlayerInfoByPos(pos, \"openStartGame\", openStartGame);\r\n        this.RefreshRoomShow();\r\n    },\r\n\r\n    Event_CardNumber:function(event){\r\n        let cardNumMap = event.cardNumMap;\r\n        this.UpdateCardNum(cardNumMap);\r\n    },\r\n\r\n    UpdateCardNum:function(cardNumMap){\r\n        for (let i = 0; i < this.img_jpq.children.length; i++) {\r\n            let key = this.img_jpq.children[i].name;\r\n            let num = cardNumMap[key];\r\n            this.img_jpq.children[i].getComponent(cc.Label).string = num;\r\n        }\r\n    },\r\n\r\n    ShowImgTipByPos:function(uiPos, imgTipName = \"\"){\r\n        let img_tip = this.GetWndNode(\"sp_seat0\"+uiPos+\"/img_tip\");\r\n        if (imgTipName == \"\"){\r\n            img_tip.active = false;\r\n        }\r\n        else{\r\n            img_tip.active = true;\r\n            this.SetNodeImageByFilePath(img_tip,this.basePath + imgTipName);\r\n        }\r\n    },\r\n\r\n    ShowOpenCard:function(dataPos, cardList){\r\n        let uiPos = this.DDZRoomPosMgr.GetUIPosByDataPos(dataPos);\r\n        if(uiPos == 0) return;\r\n        this.LogicDDZGame.SortCardByMax(cardList);\r\n        let openCardList = this.node.getChildByName(\"openCardList\" + uiPos);\r\n        openCardList.active = true;\r\n        for(let i = 0; i < openCardList.children.length; i++){\r\n            let cardNode = openCardList.children[i];\r\n            let value = cardList[i];\r\n            let isLastCard = false;\r\n            if (i == cardList.length - 1) {\r\n                isLastCard = true;\r\n            }\r\n            let isShowLandowner = false;\r\n            if (this.landowner == dataPos && isLastCard) {\r\n                isShowLandowner = true;\r\n            }\r\n            if(value){\r\n                this.ShowCard(value, cardNode,isLastCard,isShowLandowner);\r\n            }\r\n            else{\r\n                cardNode.active = false;\r\n            }\r\n        }\r\n    },\r\n\r\n    HideAllOpenCard:function(){\r\n        for(let i = 1; i < this.DDZDefine.MaxPlayer; i++){\r\n            let openCardList = this.node.getChildByName(\"openCardList\" + i);\r\n            openCardList.active = false;\r\n        }\r\n    },\r\n\r\n    ShowAddDouble:function(dataPos, addDouble){\r\n        let uiPos = this.DDZRoomPosMgr.GetUIPosByDataPos(dataPos);\r\n        let path = \"sp_seat0\" + uiPos + \"/head\" + \"/UIDDZHead\" + uiPos;\r\n        let headNode = this.GetWndNode(path);\r\n        let headScript = headNode.getComponent(\"UIDDZHead\");\r\n        let isAddDouble = false;\r\n        if (addDouble == 1) {\r\n            isAddDouble = true;\r\n        }\r\n        headScript.ShowAddDouble(isAddDouble);\r\n    },\r\n\r\n    ShowOutCard:function(dataPos, cardList){\r\n        if (dataPos < 0) return;\r\n        let uiPos = this.DDZRoomPosMgr.GetUIPosByDataPos(dataPos);\r\n        if(!cardList.length){\r\n            this.ShowImgTipByPos(uiPos, \"lb_bc\");\r\n            return;\r\n        }\r\n        let outCardNodeList = this.node.getChildByName(\"outCardList\"+uiPos);\r\n        outCardNodeList.active = true;\r\n        for(let i = 0; i < outCardNodeList.children.length; i++){\r\n            let cardNode = outCardNodeList.children[i];\r\n            let value = cardList[i];\r\n            let isLastCard = false;\r\n            if (i == cardList.length - 1) {\r\n                isLastCard = true;\r\n            }\r\n            let isShowLandowner = false;\r\n            if (this.landowner == dataPos && isLastCard) {\r\n                isShowLandowner = true;\r\n            }\r\n            if(value){\r\n                this.ShowCard(value, cardNode,isLastCard,isShowLandowner);\r\n            }\r\n            else{\r\n                cardNode.active = false;\r\n            }\r\n        }\r\n    },\r\n\r\n    HideAllOutCard:function(){\r\n        for(let i = 0; i < this.DDZDefine.MaxPlayer; i++){\r\n            let outCard = this.node.getChildByName(\"outCardList\" + i);\r\n            outCard.active = false;\r\n        }\r\n    },\r\n\r\n    HideAllPass:function(){\r\n        for(let i = 0; i < this.DDZDefine.MaxPlayer; i++){\r\n            let pass = this.GetWndNode(\"sp_seat0\" + i + \"/img_tip\");\r\n            pass.active = false;\r\n        }\r\n    },\r\n\r\n    HideAllClock:function(){\r\n        for(let i = 0; i < this.DDZDefine.MaxPlayer; i++){\r\n            let clock = this.GetWndNode(\"sp_seat0\" + i + \"/clock\");\r\n            clock.active = false;\r\n        }\r\n    },\r\n\r\n    HideAllWarning:function(){\r\n        for(let i = 1; i < this.DDZDefine.MaxPlayer; i++){\r\n            let warning = this.GetWndNode(\"sp_seat0\" + i + \"/warning\");\r\n            warning.getComponent(cc.Animation).stop(\"warning\");\r\n            warning.active = false;\r\n        }\r\n    },\r\n\r\n    HideAllHandCard:function(){\r\n        this.handCards.active = false;\r\n        for(let i = 0; i < this.handCards.children.length; i++){\r\n            let child = this.handCards.children[i];\r\n            child.active = false;\r\n        }\r\n    },\r\n\r\n    HideAllCardNum:function(){\r\n        for(let i = 1; i < this.DDZDefine.MaxPlayer; i++){\r\n            let card = this.GetWndNode(\"sp_seat0\" + i + \"/card\");\r\n            card.active = false;\r\n            let cardNum = this.GetWndNode(\"sp_seat0\" + i + \"/cardNum\");\r\n            cardNum.active = false;\r\n            let poker_back = this.GetWndNode(\"sp_seat0\" + i + \"/card/poker_back\");\r\n            poker_back.active = false;\r\n        }\r\n    },\r\n\r\n    HideClockByPos:function(dataPos){\r\n        let uiPos = this.DDZRoomPosMgr.GetUIPosByDataPos(dataPos);\r\n        let clock = this.GetWndNode(\"sp_seat0\"+uiPos+\"/clock\");\r\n        clock.active = false;\r\n    },\r\n\r\n    ClearPlayerTable:function(dataPos){\r\n        let uiPos = this.DDZRoomPosMgr.GetUIPosByDataPos(dataPos);\r\n        let outCardList = this.GetWndNode(\"outCardList\" + uiPos);\r\n        for(let i = 0; i < outCardList.children.length; i++){\r\n            let child = outCardList.children[i];\r\n            if(child.active){\r\n                child.active = false;\r\n            }\r\n        }\r\n\r\n        this.ShowImgTipByPos(uiPos, \"\");\r\n    },\r\n\r\n    //开始倒计时\r\n    StartTickTime:function(dataPos, second = this.DDZDefine.MaxTickTime[this.xianShi]){\r\n        //先清理之前打出去的牌或者玩家的状态\r\n        this.ClearPlayerTable(dataPos);\r\n        this.tick = second;\r\n        if (this.tick <= 0) return;\r\n        let uiPos = this.DDZRoomPosMgr.GetUIPosByDataPos(dataPos);\r\n        this.clock = this.GetWndNode(\"sp_seat0\"+uiPos+\"/clock\");\r\n        this.clock.active = true;\r\n        this.clock.getChildByName(\"num\").getComponent(cc.Label).string = this.tick;\r\n        this.schedule(this.CallEverySecond, 1);\r\n    },\r\n\r\n    //每一秒进入\r\n    CallEverySecond:function(){\r\n        //this.SoundManager.PlaySound(\"timeUp\");\r\n        this.tick--;\r\n        this.clock.getChildByName(\"num\").getComponent(cc.Label).string = this.tick;\r\n        if(this.tick <= 0){\r\n            this.unschedule(this.CallEverySecond);\r\n            this.clock.active = false;\r\n            // if(this.notUp){\r\n            //     this.Click_btn_pass();\r\n            // }\r\n        }\r\n    },\r\n\r\n    //显示提示和出牌按钮\r\n    ShowBtnTipAndOutCard:function(){\r\n        this.gameBtn.active = true;\r\n        this.btn_tip.x = -120;\r\n        this.btn_tip.active = true;\r\n        // this.btn_pass.getChildByName(\"icon\").getComponent(cc.Label).string = '不要';\r\n        this.btn_outCard.x = 120;\r\n        this.btn_outCard.active = true;\r\n        this.btn_pass.active = false;\r\n    },\r\n    //显示所有按钮\r\n    ShowAllGameBtn:function(){\r\n        this.gameBtn.active = true;\r\n        this.btn_pass.x = -230;\r\n        this.btn_pass.active = true;\r\n        this.btn_tip.x = 0;\r\n        this.btn_tip.active = true;\r\n        this.btn_outCard.x = 230;\r\n        this.btn_outCard.active = true;\r\n    },\r\n\r\n    HideAllGameBtn:function(){\r\n        this.gameBtn.active = false;\r\n        this.btn_pass.active = false;\r\n        this.btn_tip.active = false;\r\n        this.btn_outCard.active = false;\r\n\r\n        this.btn_openCard.active = false;\r\n        this.gameRobScore.active = false;\r\n        this.gameRobLandLord.active = false;\r\n        this.gameMultiple.active = false;\r\n    },\r\n    //显示抢地主按钮\r\n    ShowBtnHog:function(opPos, isHaveHog = false){\r\n        this.gameBtn.active = false;\r\n        let setInfo = this.DDZRoomSet.GetRoomSetInfo();\r\n        let posInfo = setInfo.posInfo;\r\n        let isAlreadyHog = false;\r\n        for (let i = 0; i < posInfo.length; i++) {\r\n            if (posInfo[i].posID == this.DDZRoomPosMgr.GetClientPos() && \r\n                posInfo[i].hog >= 1) {\r\n                isAlreadyHog = true;\r\n                break;\r\n            }\r\n        }\r\n        if (opPos == this.DDZRoomPosMgr.GetClientPos()) {\r\n            let quedingdizhu = this.DDZRoom.GetRoomConfigByProperty(\"quedingdizhu\");\r\n            if (quedingdizhu == this.DDZDefine.HogCommon) {\r\n                this.gameRobLandLord.active = true;\r\n                if (isHaveHog) {\r\n                    //图片变成不抢 抢地主\r\n                    let imgBtnNoRob = this.gameRobLandLord.getChildByName(\"btn_noRob\").getChildByName(\"lb_btn_bjb\");\r\n                    this.SetNodeImageByFilePath(imgBtnNoRob,this.basePath + \"lb_btn_bq\");\r\n                    let imgBtnRob = this.gameRobLandLord.getChildByName(\"btn_rob\").getChildByName(\"lb_btn_jb\");\r\n                    this.SetNodeImageByFilePath(imgBtnRob,this.basePath + \"lb_btn_qdz\");\r\n                }\r\n                else{\r\n                    //图片变成不叫 叫地主\r\n                    let imgBtnNoRob = this.gameRobLandLord.getChildByName(\"btn_noRob\").getChildByName(\"lb_btn_bjb\");\r\n                    this.SetNodeImageByFilePath(imgBtnNoRob,this.basePath + \"lb_btn_bj\");\r\n                    let imgBtnRob = this.gameRobLandLord.getChildByName(\"btn_rob\").getChildByName(\"lb_btn_jb\");\r\n                    this.SetNodeImageByFilePath(imgBtnRob,this.basePath + \"lb_btn_jdz\");\r\n                }\r\n                if (this.isWangZhaHog() && this.LogicDDZGame.IsHaveWangZhaOrBoom() && !isAlreadyHog) {\r\n                    this.gameRobLandLord.getChildByName(\"btn_noRob\").active = false;\r\n                }else{\r\n                    this.gameRobLandLord.getChildByName(\"btn_noRob\").active = true;\r\n                }\r\n                this.gameRobScore.active = false;\r\n            } else if (quedingdizhu == this.DDZDefine.HogScore) {\r\n                this.gameRobLandLord.active = false;\r\n                this.gameRobScore.active = true;\r\n                //根据当前叫分来显示对应按钮\r\n                let hogScore = this.DDZRoomSet.GetRoomSetProperty(\"hogScore\");\r\n                if (hogScore == 0) {\r\n                    this.gameRobScore.getChildByName(\"btn_1\").active = true;\r\n                    this.gameRobScore.getChildByName(\"btn_2\").active = true;\r\n                    this.gameRobScore.getChildByName(\"btn_3\").active = true;\r\n                }\r\n                else if (hogScore == 1) {\r\n                    this.gameRobScore.getChildByName(\"btn_1\").active = false;\r\n                    this.gameRobScore.getChildByName(\"btn_2\").active = true;\r\n                    this.gameRobScore.getChildByName(\"btn_3\").active = true;\r\n                }\r\n                else if (hogScore == 2) {\r\n                    this.gameRobScore.getChildByName(\"btn_1\").active = false;\r\n                    this.gameRobScore.getChildByName(\"btn_2\").active = false;\r\n                    this.gameRobScore.getChildByName(\"btn_3\").active = true;\r\n                }\r\n                else if (hogScore == 3) {\r\n                    this.gameRobScore.getChildByName(\"btn_1\").active = false;\r\n                    this.gameRobScore.getChildByName(\"btn_2\").active = false;\r\n                    this.gameRobScore.getChildByName(\"btn_3\").active = false;\r\n                }\r\n                if (this.isWangZhaHog() && this.LogicDDZGame.IsHaveWangZhaOrBoom() && !isAlreadyHog) {\r\n                    this.gameRobScore.getChildByName(\"btn_noRobScore\").active = false;\r\n                }else{\r\n                    this.gameRobScore.getChildByName(\"btn_noRobScore\").active = true;\r\n                }\r\n            }\r\n        }else{\r\n            this.gameRobLandLord.active = false;\r\n            this.gameRobScore.active = false;\r\n        }\r\n        this.StartTickTime(opPos, 15);\r\n    },\r\n    //显示加倍按钮\r\n    ShowBtnMultiple:function(){\r\n        this.gameBtn.active = false;\r\n        this.gameRobLandLord.active = false;\r\n        this.gameRobScore.active = false;\r\n        this.gameMultiple.active = true;\r\n        this.StartTickTime(this.DDZRoomPosMgr.GetClientPos(), 5);\r\n        // let playerAll = this.DDZRoomPosMgr.GetRoomAllPlayerInfo();\r\n        // let playerAllList= Object.keys(playerAll);\r\n        // for(var i = 0; i < playerAllList.length; i++){\r\n        //     let player = playerAll[playerAllList[i]];\r\n        //     this.StartTickTime(player.pos, 15);\r\n    },\r\n\r\n    HideAllBsNode:function(){\r\n        // let room = this.DDZRoomMgr.GetEnterRoom();\r\n        // let posList = room.GetRoomProperty(\"posList\");\r\n        // for(let idx = 0; idx < posList.length; idx++){\r\n        //     let uiPos = this.DDZRoomPosMgr.GetUIPosByDataPos(posList[idx].pos);\r\n        //     let path = \"sp_seat0\" + uiPos + \"/head\" + \"/UIDDZHead\" + uiPos;\r\n        //     let headNode = this.GetWndNode(path);\r\n        //     headNode.getChildByName(\"otherNode\").active = false;\r\n        // }\r\n    },\r\n\r\n    //只显示出牌按钮\r\n    ShowBtnOutCard:function(){\r\n        this.gameBtn.active = true;\r\n        this.btn_pass.active = false;\r\n        this.btn_tip.active = false;\r\n        this.btn_outCard.x = 0;\r\n        this.btn_outCard.active = true;\r\n    },\r\n    //只显示不要按钮\r\n    ShowBtnPass:function(){\r\n        this.gameBtn.active = true;\r\n        this.btn_pass.x = 0;\r\n        this.btn_pass.active = true;\r\n        // this.btn_pass.getChildByName(\"icon\").getComponent(cc.Label).string = '要不起';\r\n        this.btn_tip.active = false;\r\n        this.btn_outCard.active = false;\r\n    },\r\n\r\n    StartGame:function(opPos){\r\n        this.lastCircleEnd = this.DDZRoomSet.GetRoomSetProperty(\"isFirstOp\");\r\n        this.gameBtn.active = false;\r\n        this.gameRobLandLord.active = false;\r\n        this.gameRobScore.active = false;\r\n        this.gameMultiple.active = false;\r\n        if (opPos == this.DDZRoomPosMgr.GetClientPos()) {\r\n            this.ClearForbiddenTouch();\r\n            this.ShowBtnOutCard();\r\n        }\r\n        this.StartTickTime(opPos);\r\n    },\r\n\r\n    //发牌动作\r\n    FaPaiAction:function(dataPos){\r\n        let card = this.allCards.children[this.allCardIdx];\r\n        let clientCards = this.DDZRoomSet.GetHandCard();\r\n        this.SortCardByMax(clientCards);\r\n        if(!card || !card.active){\r\n            this.btn_openCard.active = false;\r\n            this.FaPaiFinish();\r\n            return;\r\n        }\r\n        let posList = this.DDZRoomMgr.GetEnterRoom().GetRoomProperty(\"posList\");\r\n        \r\n        if(dataPos >= posList.length){\r\n            dataPos = 0;\r\n        }\r\n\r\n        let uiPos = this.DDZRoomPosMgr.GetUIPosByDataPos(dataPos);\r\n            \r\n        this.allCardIdx++;\r\n        if (this.allCardIdx <= 18) {\r\n            this.btn_openCard.getChildByName(\"lb_multiple\").getComponent(cc.Label).string = \"x4\";\r\n            this.openCardMutiple = 4;\r\n        } else if (this.allCardIdx > 18 && this.allCardIdx <= 36) {\r\n            this.btn_openCard.getChildByName(\"lb_multiple\").getComponent(cc.Label).string = \"x3\";\r\n            this.openCardMutiple = 3;\r\n        } else {\r\n            this.btn_openCard.getChildByName(\"lb_multiple\").getComponent(cc.Label).string = \"x2\";\r\n            this.openCardMutiple = 2;\r\n        }\r\n        \r\n        let position = null;\r\n        if(dataPos == this.DDZRoomPosMgr.GetClientPos()){\r\n            position = this.handCards.getPosition();\r\n        }\r\n        else{\r\n            let node = this.GetWndNode(\"sp_seat0\" + uiPos);\r\n            position = node.getPosition();\r\n        }\r\n        let setInfo = this.DDZRoomSet.GetRoomSetInfo();\r\n        let posInfo = setInfo.posInfo;\r\n        let self = this;\r\n        let action = cc.sequence(cc.moveTo(0.025, position), cc.callFunc(function(card){\r\n            if(self.DDZRoomPosMgr.GetClientPos() == dataPos){\r\n                self.handCards.active = true;\r\n                let cardNode = self.handCards.children[self.allPlayerCardIdx[0]]\r\n                cardNode.y = 0;\r\n                let cardValue = clientCards[self.allPlayerCardIdx[0]];\r\n                let isLastCard = false;\r\n                if (self.allPlayerCardIdx[0] == clientCards.length - 1) {\r\n                    isLastCard = true;\r\n                }\r\n                self.ShowCard(cardValue, cardNode, isLastCard);\r\n                self.allPlayerCardIdx[0] += 1;\r\n            }\r\n            else if (self.DDZRoomPosMgr.GetClientPos() != dataPos && \r\n                posInfo[dataPos].openCard == 1) {\r\n                let openCardList = [];\r\n                self.AddCardAction(dataPos);\r\n                let allOpenCardList = posInfo[dataPos].cards;\r\n                self.openCardInfo[dataPos] = posInfo[dataPos].cards;\r\n                let uiPos = self.DDZRoomPosMgr.GetUIPosByDataPos(dataPos);\r\n                for (let i = 0; i < self.allPlayerCardIdx[uiPos]; i++) {\r\n                    openCardList.push(allOpenCardList[i]);\r\n                }\r\n                console.log(\"位置 \" + dataPos + \" 明牌:\" + openCardList);\r\n                self.ShowOpenCard(dataPos, openCardList);\r\n            }\r\n            else{\r\n                self.AddCardAction(dataPos);\r\n            }\r\n            dataPos++;\r\n            card.active = false;\r\n            self.FaPaiAction(dataPos);\r\n            self.SoundManager.PlaySound(\"giveCard\",self.DDZDefine.SoundPath + \"giveCard\");\r\n        }));\r\n        card.runAction(action);\r\n    },\r\n    CheckShouPai:function(){\r\n        \r\n    },\r\n    FaPaiFinish:function(){\r\n        console.log(\"FaPaiFinish....\");\r\n        this.DDZRoomMgr.SendFaPaiFinish(this.DDZRoomPosMgr.GetClientPos());\r\n        //检查手牌长度\r\n        this.CheckShouPai();\r\n    },\r\n    SortCardByMax:function(pokers){\r\n        let self = this;\r\n        pokers.sort(function(a, b){\r\n            //return (b&0x0F) - (a&0x0F);\r\n            return self.LogicDDZGame.GetCardValue(b) - self.LogicDDZGame.GetCardValue(a);\r\n        });\r\n    },\r\n    //显示地主牌\r\n    ShowDiZhuPai:function(allDzCard = null){\r\n        this.img_dzp.active = true;\r\n        for (let i = 0; i < this.img_dzp.children.length; i++) {\r\n            let dzCard = this.img_dzp.children[i];\r\n            if (allDzCard == null || allDzCard.length == 0) {\r\n                dzCard.getChildByName(\"poker_back\").active = true;\r\n                dzCard.active = true;\r\n            }\r\n            else{\r\n                this.ShowCard(allDzCard[i], dzCard, true, false);\r\n            }\r\n        }\r\n    },\r\n\r\n    //显示poker牌\r\n    ShowCard:function(cardType, cardNode, isLastCard, isShowLandowner = false){\r\n        let realValue = 0;\r\n        if(cardType > 500){\r\n            realValue = cardType - 500;\r\n        }\r\n        else{\r\n            realValue = cardType;\r\n        }\r\n        // if (!isLastCard) {\r\n        //     cardNode.getChildByName('icon_1').active = false;\r\n        // }else{\r\n        //     cardNode.getChildByName('icon_1').active = true;\r\n        // }\r\n        this.PokerCard.GetPokeCard(realValue, cardNode, isLastCard, isShowLandowner);\r\n        cardNode.active = true;\r\n        cardNode.getChildByName(\"poker_back\").active = false;\r\n    },\r\n\r\n    AddCardAction:function(dataPos){\r\n        let uiPos = this.DDZRoomPosMgr.GetUIPosByDataPos(dataPos);\r\n        let wndNode = this.GetWndNode(\"sp_seat0\"+uiPos+\"/cardNum\");\r\n        this.allPlayerCardIdx[uiPos] += 1;\r\n        wndNode.getComponent(cc.Label).string = this.allPlayerCardIdx[uiPos];\r\n    },\r\n\r\n    ///////////////////////////////////////////////////////////////////////////////////////\r\n    ////////////////////////////牌触摸\r\n    OnTouchStart:function(event){\r\n        this.isChoose = this.isCanChoose();\r\n        this.startIndex = 0;\r\n        this.moveIndex = -1;\r\n        this.lastMoveIndex = -1;\r\n        let moveX = event.target.convertToNodeSpaceAR(event.touch.getLocation()).x;\r\n        let downList = this.LogicDDZGame.GetHandCard();\r\n\t\tfor(let i = 0; i < this.handCards.children.length; i++){\r\n\t\t\tif(this.handCards.children[i].name.startsWith(\"card\")){\r\n\t\t\t\tlet minX = this.handCards.children[i].x - this.handCards.children[i].width/2;\r\n                let maxX = minX + this.cardSpcedX;\r\n                if(i == downList.length-1)\r\n                 \tmaxX = minX + this.handCards.children[i].width;\r\n\t\t\t\tif(moveX >= minX && moveX < maxX){\r\n\t\t\t\t\tthis.startIndex = i;\r\n\t\t\t\t\tthis.handCards.children[i].getChildByName(\"bg_black\").active = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n    },\r\n\r\n    OnTouchMove:function(event){\r\n\t\tlet moveX = event.target.convertToNodeSpaceAR(event.touch.getLocation()).x;\r\n\t\tfor(let i = 0; i < this.handCards.children.length; i++){\r\n\t\t\tif(this.handCards.children[i].name.startsWith(\"card\")){\r\n                if (this.handCards.children[i].touchTag==false || typeof(this.handCards.children[i].touchTag) == \"undefined\"){\r\n                    this.handCards.children[i].getChildByName(\"bg_black\").active = false;\r\n                }\r\n\t\t\t\tlet minX = this.handCards.children[i].x - this.handCards.children[i].width/2;\r\n\t\t\t\tlet maxX = minX + this.cardSpcedX;\r\n\t\t\t\tif(moveX >= minX && moveX < maxX){\r\n                    if (this.moveIndex >= 0 && this.moveIndex != i) {\r\n                        this.lastMoveIndex = this.moveIndex;\r\n                    }\r\n\t\t\t\t\tthis.moveIndex = i;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n        if (this.lastMoveIndex == -1 || this.moveIndex == -1){\r\n            return;\r\n        }\r\n        if(this.startIndex > this.moveIndex){//从右往左\r\n\t\t\tfor(let i = this.startIndex; i >= this.moveIndex; i--){\r\n\t\t\t\tif(this.handCards.children[i].name.startsWith(\"card\")){\r\n                    if(this.handCards.children[i].touchTag)\r\n                        continue\r\n\t\t\t\t\tthis.handCards.children[i].getChildByName(\"bg_black\").active = true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n        else{//从左往右\r\n            if (this.lastMoveIndex > this.moveIndex) {\r\n                if(this.handCards.children[this.lastMoveIndex].name.startsWith(\"card\")){\r\n                    if(!this.handCards.children[this.lastMoveIndex].touchTag){\r\n                        this.handCards.children[this.lastMoveIndex].getChildByName(\"bg_black\").active = false;\r\n                    }\r\n                }\r\n            }\r\n\t\t\tfor(let i = this.startIndex; i <= this.moveIndex; i++){\r\n\t\t\t\tif(this.handCards.children[i].name.startsWith(\"card\")){\r\n                    if(this.handCards.children[i].touchTag)\r\n                        continue\r\n\t\t\t\t\tthis.handCards.children[i].getChildByName(\"bg_black\").active = true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n    },\r\n\r\n    OnTouchEnd:function(event){\r\n        this.endIndex = this.startIndex;\r\n        let moveX = event.target.convertToNodeSpaceAR(event.touch.getLocation()).x;\r\n        let downList = this.LogicDDZGame.GetHandCard();\r\n\t\tfor(let i = 0;i < this.handCards.children.length; i++){\r\n\t\t\tif(this.handCards.children[i].name.startsWith(\"card\")){\r\n                if(this.handCards.children[i].touchTag){\r\n                    this.handCards.children[i].getChildByName(\"bg_black\").active = true;\r\n                }\r\n                else{\r\n                    this.handCards.children[i].getChildByName(\"bg_black\").active = false;\r\n                }\r\n\t\t\t\tif(isEnd) continue;\r\n\t\t\t\tlet isEnd = false;\r\n\t\t\t\tlet minX = this.handCards.children[i].x - this.handCards.children[i].width/2;\r\n                let maxX = minX + this.cardSpcedX;\r\n                if(i == downList.length-1)\r\n                    maxX = minX + this.handCards.children[i].width;\r\n\t\t\t\tif(moveX >= minX && moveX < maxX){\r\n\t\t\t\t\tthis.endIndex = i;\r\n\t\t\t\t\tisEnd = true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n        }\r\n        \r\n        if(this.startIndex == this.endIndex){\r\n            if(this.handCards.children[this.endIndex].active && !this.handCards.children[this.endIndex].touchTag){\r\n                this.Click_card(this.handCards.children[this.endIndex]);\r\n            }\r\n        }\r\n        else{\r\n            if(this.startIndex > this.endIndex){//从右往左\r\n                for(let i = this.startIndex; i >= this.endIndex; i--){\r\n                    if(this.handCards.children[i].touchTag)\r\n                        continue\r\n                    if(this.handCards.children[i].active)\r\n                        this.Click_card(this.handCards.children[i]);\r\n                }\r\n            }\r\n            else{//从左往右\r\n                for(let i = this.startIndex; i <= this.endIndex; i++){\r\n                    if(this.handCards.children[i].touchTag)\r\n                        continue\r\n                    if(this.handCards.children[i].active)\r\n                        this.Click_card(this.handCards.children[i]);\r\n                }\r\n            }\r\n        }\r\n\r\n        if (this.isChoose == true) {\r\n            let cardArray = this.LogicDDZGame.GetTipCardSlCard();\r\n            if (cardArray.length > 0) {\r\n                this.LogicDDZGame.ChangeSelectCard(cardArray[0]);\r\n                this.Event_ShowHandCard();\r\n            }\r\n        }\r\n    },\r\n\r\n    OnTouchCancel:function(event){\r\n\t\tfor(let i = 0;i < this.handCards.children.length; i++){\r\n\t\t\tif(this.handCards.children[i].name.startsWith(\"card\")){\r\n                if(this.handCards.children[i].touchTag)\r\n                    continue\r\n\t\t\t\tthis.handCards.children[i].getChildByName(\"bg_black\").active = false;\r\n\t\t\t}\r\n\t\t}\r\n\r\n        if (this.isChoose == true) {\r\n            let cardArray = this.LogicDDZGame.GetTipCardSlCard();\r\n            if (cardArray.length > 0) {\r\n                this.LogicDDZGame.ChangeSelectCard(cardArray[0]);\r\n                this.Event_ShowHandCard();\r\n            }\r\n        }\r\n    },\r\n\r\n    Click_card:function(clickNode){\r\n        let name = \"\";\r\n        name = clickNode.name;\r\n        let cardIdx = name.substring(5,name.length);\r\n        if(clickNode.y == 0){\r\n            clickNode.y = this.DDZDefine.MaxRisePosY;\r\n            this.LogicDDZGame.SetCardSelected(parseInt(cardIdx));\r\n        }\r\n        else{\r\n            clickNode.y = 0;\r\n            this.LogicDDZGame.DeleteCardSelected(parseInt(cardIdx));\r\n        }\r\n    },\r\n\r\n    ///////////////////////////////////////////////////////////////////////////////////////////////////\r\n    /////////////////////////\r\n\r\n    //添加头像\r\n    AddHead:function(){\r\n        //初始化加入头像 如果已经有加入了头像 显示出来\r\n        let posList = this.DDZRoomMgr.GetEnterRoom().GetRoomProperty(\"posList\");\r\n        let playerCount = posList.length;\r\n        for(let idx = 0; idx < posList.length; idx++){\r\n            let uiPos = this.DDZRoomPosMgr.GetUIPosByDataPos(posList[idx].pos);\r\n            let path = \"sp_seat0\"  + uiPos.toString() + \"/head\";\r\n            let node = this.GetWndNode(path);\r\n            if(!node.getChildByName(\"UIDDZHead\" + uiPos)){\r\n                let head = cc.instantiate(this.headPrefab);\r\n                node.addChild(head);\r\n               \r\n                let headScript = head.getComponent(\"UIDDZHead\");\r\n                headScript.Init(uiPos, posList[idx].pos, cc.v2(0,0), this.Left[uiPos]);\r\n            }\r\n            else{\r\n                let headNode = node.getChildByName(\"UIDDZHead\" + uiPos);\r\n                // headNode.getChildByName(\"otherNode\").active = false;\r\n                // headNode.getChildByName(\"otherNode\").getChildByName(\"bsPrefab\").active = false;\r\n                let headScript = headNode.getComponent(\"UIDDZHead\");\r\n                headScript.Init(uiPos, posList[idx].pos, cc.v2(0,0), this.Left[uiPos]);\r\n            }\r\n        }\r\n    },\r\n\r\n    OnEventShow:function(){\r\n        console.log(\"从后台返回游戏内\");\r\n        let curTime = new Date().getTime();\r\n        let lostHearTime = app[app.subGameName + \"Client\"].LostHearTime;\r\n        if(this.outGameTime && curTime > this.outGameTime + 30000){\r\n            // app[app.subGameName + \"Client\"].lastHearTime = 0;\r\n            this.outGameTime = 0;\r\n            if(app[app.subGameName + \"_NetWork\"]().isConnectIng){//ios的可能websoket不会主动断开\r\n                console.log(\"后台切回来，先断开连接\");\r\n                app[app.subGameName + \"_NetManager\"]().Disconnect();\r\n            }\r\n            if(!app[app.subGameName + \"Client\"].bStartReConnect){\r\n                console.log(\"后台切回来，发起断线重连\");\r\n                app[app.subGameName + \"Client\"].StartReConnect();\r\n                app[app.subGameName + \"_NetWork\"]().ReConnectByTipSureBtn();\r\n            }\r\n        }else{\r\n            let roomID = this.DDZRoom.GetRoomProperty(\"roomID\");\r\n            app[app.subGameName + \"_NetManager\"]().SendPack(app.subGameName + \".C\" + app.subGameName.toUpperCase() + \"ShowLeave\", { \"roomID\": roomID, \"isShowLeave\": false });\r\n        }\r\n        app[app.subGameName + \"Client\"].scheduleOnce(function(){\r\n            app[app.subGameName + \"Client\"].StartTimer();\r\n        },2);\r\n    },\r\n\r\n    OnEventHide:function(){\r\n        console.log(\"从游戏内切换后台\");\r\n        this.outGameTime = new Date().getTime();\r\n        let roomID = this.DDZRoom.GetRoomProperty(\"roomID\");\r\n        app[app.subGameName + \"_NetManager\"]().SendPack(app.subGameName + \".C\" + app.subGameName.toUpperCase() + \"ShowLeave\", { \"roomID\": roomID, \"isShowLeave\": true });\r\n        app[app.subGameName + \"Client\"].StopTimer();\r\n    },\r\n\r\n    ClearHead:function(){\r\n        for(let idx = 0; idx < this.DDZDefine.MaxPlayer; idx++){\r\n            let path = \"sp_seat0\" + idx + \"/head\" + \"/UIDDZHead\" + idx;\r\n            let node = this.GetWndNode(path);\r\n            if(node){\r\n                let headScript = node.getComponent(\"UIDDZHead\");\r\n                headScript.OnClose();\r\n            }\r\n        }\r\n    },\r\n\r\n    OnClose:function(){\r\n        this.HideAll();\r\n        this.ClearHead();\r\n        this.unscheduleAllCallbacks();\r\n        cc.game.off(cc.game.EVENT_HIDE);\r\n        cc.game.off(cc.game.EVENT_SHOW);\r\n    },\r\n\r\n    InitGameStateCommon:function(state){\r\n        let setInfo = this.DDZRoomSet.GetRoomSetInfo();\r\n        //得到玩家自己的手牌\r\n        this.handCards.active = true;\r\n        this.LogicDDZGame.InitHandCard();\r\n        this.Event_ShowHandCard();\r\n\r\n        //隐藏发牌的牌墩\r\n        this.allCards.active = false;\r\n        \r\n        let playerAll = this.DDZRoomPosMgr.GetRoomAllPlayerInfo();\r\n        let playerAllList= Object.keys(playerAll);\r\n        for(var i = 0; i < playerAllList.length; i++){\r\n            let player = playerAll[playerAllList[i]];\r\n            for(let j = 0; j < setInfo.posInfo.length; j++){\r\n                let info = setInfo.posInfo[j];\r\n                if(player.pid == info.pid){\r\n                    // console.log(\"InitGameStateCommon info cards === \" + info.cards);\r\n                    // if (state == this.ShareDefine.DDZSetState_Hog) {\r\n                    //同步下牌根数\r\n                    let uiPos = this.DDZRoomPosMgr.GetUIPosByDataPos(player.pos);\r\n                    this.allPlayerCardIdx[uiPos] = info.cards.length;\r\n                    // }\r\n                    this.InitCardNum(player.pos, info.cards.length);\r\n                    this.ShowWarningByPos(player.pos, info.cards.length);\r\n                    if(info.addDouble > 0){\r\n                        this.ShowAddDouble(player.pos, info.addDouble);\r\n                    }\r\n                    if(info.openCard == 1){\r\n                        this.openCardInfo[player.pos] = info.cards;\r\n                        this.ShowOpenCard(player.pos, info.cards);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    },\r\n\r\n    UpdateScoreAndDouble:function(){\r\n        this.lb_publicScore.string = this.DDZRoomSet.GetRoomSetProperty(\"hogScore\");\r\n        this.lb_publicMultiple.string = this.DDZRoomSet.GetRoomSetProperty(\"roomDouble\");\r\n    },\r\n\r\n    InitCardNum:function(pos, count){\r\n        if(this.DDZRoomPosMgr.GetClientPos() == pos) return;\r\n        let uiPos = this.DDZRoomPosMgr.GetUIPosByDataPos(pos);\r\n        let card = this.GetWndNode(\"sp_seat0\"+uiPos+\"/card\");\r\n        card.active = true;\r\n        let cardNum = this.GetWndNode(\"sp_seat0\"+uiPos+\"/cardNum\");\r\n        let room = this.DDZRoomMgr.GetEnterRoom();\r\n        let kexuanwanfa=room.GetRoomConfigByProperty(\"kexuanwanfa\");\r\n        if(kexuanwanfa.indexOf(5) >= 0){\r\n            card.active = false;\r\n            if (count <= 2) {\r\n                card.active = true;\r\n                cardNum.active = true;\r\n                if(!card.getChildByName(\"poker_back\").active){\r\n                    card.getChildByName(\"poker_back\").active = true;\r\n                }\r\n                cardNum.getComponent(cc.Label).string = count.toString();\r\n            }\r\n        }\r\n        else{\r\n            card.active = true;\r\n            cardNum.active = true;\r\n            if(!card.getChildByName(\"poker_back\").active){\r\n                card.getChildByName(\"poker_back\").active = true;\r\n            }\r\n            cardNum.getComponent(cc.Label).string = count.toString();\r\n        }\r\n    },\r\n////////////////////////////////show///////////////////////////////////////////\r\n\tRefreshRoomShow:function () {\r\n        let room = this.DDZRoomMgr.GetEnterRoom();\r\n        this.ShowPlayerReady(room);\r\n    },\r\n\r\n    HideAllZhunBeiLabel:function(){\r\n        let playerAll = this.DDZRoomPosMgr.GetRoomAllPlayerInfo();\r\n        let playerAllList= Object.keys(playerAll);\r\n        for(var i = 0; i < playerAllList.length; i++){\r\n            let player = playerAll[playerAllList[i]];\r\n            let uiPos = this.DDZRoomPosMgr.GetUIPosByDataPos(player.pos);\r\n            let path = \"sp_seat0\" + uiPos + \"/head\" + \"/UIDDZHead\" + uiPos;\r\n            let headNode = this.GetWndNode(path);\r\n            let headScript = headNode.getComponent(\"UIDDZHead\");\r\n            headScript.setReady(false);\r\n        }\r\n    },\r\n\r\n    ShowOrHideZhunbei:function(pos, isShow){\r\n        let headScript = this.GetUICardComponentByPos(pos);\r\n        headScript.setReady(isShow);\r\n    },\r\n\r\n    HidePlayerAllBtn:function(){\r\n\t\tthis.btn_ready.active = false;\r\n\t\tthis.btn_weixin.active = false;\r\n        this.btn_fzkl.active = false;\r\n\t\tthis.btn_cancel.active = false;\r\n\t\tthis.btn_go.active = false;\r\n        this.btn_openCardStart.active = false;\r\n        this.btn_ok.active = false;\r\n        this.tip_ok.active = false;\r\n        this.invitationNode.active = false;\r\n\t},\r\n    \r\n    HideAll:function(){\r\n        // this.HideAllZhunBeiLabel();\r\n        this.HidePlayerAllBtn();\r\n        this.HideAllClock();\r\n        this.HideAllHandCard();\r\n        this.HideAllPass();\r\n        this.HideAllWarning();\r\n        this.HideAllCardNum();\r\n        this.HideAllOutCard();\r\n        this.HideAllGameBtn();\r\n        this.HideAllBsNode();\r\n        this.HideAllOpenCard();\r\n        this.btn_openCard.active = false;\r\n        this.img_dzp.active = false;\r\n        this.lb_mypdgsj.active = false;\r\n        this.lb_ddbrjb.active = false;\r\n        this.GameEnd_Ani.active = false;\r\n        this.razzNode.active = false;\r\n    },\r\n\r\n    HideAllAni:function(){\r\n        this.plane_Ani.active = false;\r\n        this.liandui_Ani.active = false;\r\n        this.boom_Ani.active = false;\r\n        this.dragon_Ani.active = false;\r\n    },\r\n\r\n    OnClickForm:function(){\r\n        this.FormManager.CloseForm(app.subGameName + \"_UIChat\");\r\n\t},\r\n\r\n    OnClick:function(btnName, btnNode){\r\n        console.log('btnName', btnName, btnNode);\r\n        let roomID = this.DDZRoom.GetRoomProperty(\"roomID\");\r\n        let pos = this.DDZRoomPosMgr.GetClientPos();\r\n        if(btnName == \"btn_go\"){\r\n\t        this.Click_btn_go();\r\n        } else if(btnName == \"btn_ok\"){\r\n            this.Click_btn_ok();\r\n        }\r\n        else if(btnName == \"btn_openCardStart\"){\r\n            this.Click_btn_openCardStart();\r\n        }\r\n        else if(btnName == \"btn_ready\"){\r\n\t\t\tthis.Click_btn_ready();\r\n        }\r\n        else if(btnName == \"btn_cancel\"){\r\n\t\t\tthis.Click_btn_cancel();\r\n        }\r\n        else if(btnName == \"btn_weixin\"){\r\n\t\t\tthis.Click_btn_weixin(\"WX\");\r\n        }\r\n        else if (btnName == \"btn_fzkl\") {\r\n            let str = \"房间号：\"+this.DDZRoomMgr.GetEnterRoom().GetRoomProperty(\"key\");\r\n            this.Click_btn_fzkl(str);\r\n        }\r\n        else if (btnName == \"btn_shuaxin\") {\r\n            this.ReInRoom();\r\n        }\r\n        else if(btnName == \"bg\"){\r\n            this.FormManager.CloseForm(app.subGameName + \"_UIChat\");\r\n        }\r\n        else if(btnName == \"btn_pass\"){\r\n            this.Click_btn_pass();\r\n        }\r\n        else if(btnName == \"btn_tip\"){\r\n            this.Click_btn_tip();\r\n        }\r\n        else if(btnName == \"btn_outCard\"){\r\n            this.Click_btn_outCard();\r\n        }\r\n        else if(btnName == \"btn_openCard\"){\r\n            this.DDZRoomMgr.SendOpenCard(roomID,1,this.openCardMutiple);\r\n        }\r\n        else if(btnName == \"btn_noRob\"){\r\n            this.gameRobLandLord.active = false;\r\n            this.gameRobScore.active = false;\r\n            this.DDZRoomMgr.SendHog(roomID,0);\r\n        }\r\n        else if(btnName == \"btn_rob\"){\r\n            this.gameRobLandLord.active = false;\r\n            this.gameRobScore.active = false;\r\n            this.DDZRoomMgr.SendHog(roomID,1);\r\n        }\r\n        else if(btnName == \"btn_noRobScore\"){\r\n            this.gameRobLandLord.active = false;\r\n            this.gameRobScore.active = false;\r\n            this.DDZRoomMgr.SendHog(roomID,0);\r\n        }\r\n        else if(btnName == \"btn_1\"){\r\n            this.gameRobLandLord.active = false;\r\n            this.gameRobScore.active = false;\r\n            this.DDZRoomMgr.SendHog(roomID,1);\r\n        }\r\n        else if(btnName == \"btn_2\"){\r\n            this.gameRobLandLord.active = false;\r\n            this.gameRobScore.active = false;\r\n            this.DDZRoomMgr.SendHog(roomID,2);\r\n        }\r\n        else if(btnName == \"btn_3\"){\r\n            this.gameRobLandLord.active = false;\r\n            this.gameRobScore.active = false;\r\n            this.DDZRoomMgr.SendHog(roomID,3);\r\n        }\r\n        else if (btnName == \"btn_noMultiple\") {\r\n            this.DDZRoomMgr.SendAddDouble(roomID, 0);\r\n        }\r\n        else if (btnName == \"btn_multiple\") {\r\n            this.DDZRoomMgr.SendAddDouble(roomID, 1);   \r\n        }\r\n        else if(btnName == \"btn_menu\"){\r\n            if (this.bg_menu.active) {\r\n                this.bg_menu.active = false;\r\n            }\r\n            else{\r\n                let valueBackMusic = this.LocalDataManager.GetConfigProperty(\"SysSetting\",\"BackMusic\");\r\n                if(valueBackMusic){\r\n                    //替换按钮图片\r\n                    let imgPath = 'texture/game/doudizhu/btn_openMusic';\r\n                    let btnPath = 'bg_bottom/bg_menu/btn_openMusic';\r\n                    this.SetWndImageByFilePath(btnPath,imgPath);\r\n                }\r\n                else{\r\n                    //替换按钮图片\r\n                    let imgPath = 'texture/game/doudizhu/btn_closeMusic';\r\n                    let btnPath = 'bg_bottom/bg_menu/btn_openMusic';\r\n                    this.SetWndImageByFilePath(btnPath,imgPath);\r\n                }\r\n                let valueSpSound = this.LocalDataManager.GetConfigProperty(\"SysSetting\",\"SpSound\");\r\n                if(valueSpSound){\r\n                    //替换按钮图片\r\n                    let imgPath = 'texture/game/doudizhu/btn_openSound';\r\n                    let btnPath = 'bg_bottom/bg_menu/btn_openSound';\r\n                    this.SetWndImageByFilePath(btnPath,imgPath);\r\n                }\r\n                else{\r\n                    //替换按钮图片\r\n                    let imgPath = 'texture/game/doudizhu/btn_closeSound';\r\n                    let btnPath = 'bg_bottom/bg_menu/btn_openSound';\r\n                    this.SetWndImageByFilePath(btnPath,imgPath);\r\n                }\r\n                this.bg_menu.active = true;\r\n            }\r\n        }\r\n        else if (btnName == \"btn_openMusic\") {\r\n            let value = this.LocalDataManager.GetConfigProperty(\"SysSetting\",\"BackMusic\");\r\n            if(value){\r\n                this.LocalDataManager.SetConfigProperty(\"SysSetting\", \"BackMusic\", 0);\r\n                //替换按钮图片\r\n                let imgPath = 'texture/game/doudizhu/btn_closeMusic';\r\n                let btnPath = 'bg_bottom/bg_menu/btn_openMusic';\r\n                this.SetWndImageByFilePath(btnPath,imgPath);\r\n                this.SceneManager.PauseSceneMusic();\r\n            }\r\n            else{\r\n                this.LocalDataManager.SetConfigProperty(\"SysSetting\", \"BackMusic\", 1);\r\n                //替换按钮图片\r\n                let imgPath = 'texture/game/doudizhu/btn_openMusic';\r\n                let btnPath = 'bg_bottom/bg_menu/btn_openMusic';\r\n                this.SetWndImageByFilePath(btnPath,imgPath);\r\n                this.SceneManager.RecoverySceneMusic();\r\n            }\r\n        }\r\n        else if (btnName == \"btn_openSound\") {\r\n            let value = this.LocalDataManager.GetConfigProperty(\"SysSetting\",\"SpSound\");\r\n            if(value){\r\n                this.LocalDataManager.SetConfigProperty(\"SysSetting\", \"SpSound\", 0);\r\n                //替换按钮图片\r\n                let imgPath = 'texture/game/doudizhu/btn_closeSound';\r\n                let btnPath = 'bg_bottom/bg_menu/btn_openSound';\r\n                this.SetWndImageByFilePath(btnPath,imgPath);\r\n            }\r\n            else{\r\n                this.LocalDataManager.SetConfigProperty(\"SysSetting\", \"SpSound\", 1);\r\n                //替换按钮图片\r\n                let imgPath = 'texture/game/doudizhu/btn_openSound';\r\n                let btnPath = 'bg_bottom/bg_menu/btn_openSound';\r\n                this.SetWndImageByFilePath(btnPath,imgPath);\r\n            }\r\n        }\r\n        else if (btnName == \"btn_talk\") {\r\n            this.FormManager.ShowForm(app.subGameName + \"_UIChat\");\r\n        }\r\n        else if (btnName == \"btn_cardDevice\"){\r\n            if (this.img_jpq.active) {\r\n                this.img_jpq.active = false;\r\n            }\r\n            else{\r\n                let state = this.DDZRoomSet.GetRoomSetProperty(\"state\");\r\n                let roomState = this.DDZRoom.GetRoomProperty(\"state\");\r\n                if (roomState == this.ShareDefine.RoomState_Playing && \r\n                    state == this.ShareDefine.DDZSetState_Playing) {\r\n                    this.img_jpq.active = true;\r\n                }\r\n            }\r\n        }\r\n\r\n        else if(btnName == \"btn_jsfj\" || btnName == \"btn_Exit\"){\r\n            //提示退出房间还是查看大厅\r\n            let room = this.DDZRoomMgr.GetEnterRoom();\r\n            let roomCfg = room.GetRoomConfig();\r\n            if(roomCfg.clubId!=0){\r\n                this.node.getChildByName(\"tip_exit_node\").zIndex=100;\r\n                this.node.getChildByName(\"tip_exit_node\").active=true;\r\n            }else{\r\n                this.Click_btn_jiesan();\r\n            }\r\n        }\r\n\r\n        else if(btnName==\"btn_close_tip\"){\r\n            this.node.getChildByName(\"tip_exit_node\").active=false;\r\n        }\r\n        else if(btnName==\"btn_exit_room\"){\r\n            this.Click_btn_jiesan();\r\n        }\r\n        else if(btnName==\"btn_go_hall\"){\r\n            app[app.subGameName + \"Client\"].ExitGame(null,'0');\r\n        }else if(btnName==\"razzNode\"){\r\n            this.HideRazzNode();\r\n        }else if(btnName==\"bg_table\"){\r\n            this.HideRazzNode();\r\n        }else if(btnName==\"btn_setting\"){\r\n            app[app.subGameName + \"_FormManager\"]().ShowForm(app.subGameName + '_UISetting02');\r\n        }else if(btnName==\"btn_auto\"){\r\n            app[app.subGameName + \"_GameManager\"]().SendAutoStart();\r\n        }else if(btnName==\"btn_gps\"){\r\n            \r\n        }else if(btnName==\"btn_gameHelp\"){\r\n            app[app.subGameName + \"_FormManager\"]().ShowForm(app.subGameName + '_UIGameHelp');\r\n        }\r\n\t    else{\r\n            this.LogicDDZGame.ClearSelectCard();\r\n\t        this.ErrLog(\"OnClick(%s) not find\", btnName);\r\n        }\r\n    },\r\n\r\n    Click_btn_tip:function(){\r\n        //是否要先出黑桃3\r\n        let array = this.LogicDDZGame.GetTipCard();\r\n        \r\n        if(array.length){\r\n            if(this.tipCount >= array.length){\r\n                this.tipCount = 0;\r\n            }\r\n            this.LogicDDZGame.ChangeSelectCard(array[this.tipCount]);\r\n            this.Event_ShowHandCard();\r\n            this.tipCount++;\r\n        }\r\n    },\r\n\r\n    Click_btn_pass:function(){\r\n        let serverPack = {};\r\n        let roomID = this.DDZRoomMgr.GetEnterRoom().GetRoomProperty(\"roomID\");\r\n        serverPack.roomID = roomID;\r\n        let pos = this.DDZRoomPosMgr.GetClientPos();\r\n        serverPack.pos = pos;\r\n        serverPack.opCardType = this.LogicDDZGame.DDZ_CARD_TYPE_BUCHU;\r\n        serverPack.cardList = [];\r\n        this.DDZRoomMgr.SendOpCard(serverPack);\r\n        this.razzNode.active = false;\r\n    },\r\n\r\n    Click_btn_outCard:function(){\r\n        //发给服务端的消息\r\n        let serverPack = {};\r\n        let roomID = this.DDZRoomMgr.GetEnterRoom().GetRoomProperty(\"roomID\");\r\n        serverPack.roomID = roomID;\r\n        let pos = this.DDZRoomPosMgr.GetClientPos();\r\n        serverPack.pos = pos;\r\n        let razzCardList = this.LogicDDZGame.GetAllCardTypeBySpc();\r\n        if (razzCardList.length > 1) {\r\n            this.ShowRazzNode(razzCardList);\r\n            return;\r\n        }\r\n        let opCardType = this.LogicDDZGame.GetCardType();\r\n        this.ClientOpCardByType(opCardType, serverPack);\r\n    },\r\n    ClientOpCardByType: function(opCardType, serverPack, isSelectCard = true) {\r\n        if(opCardType > this.LogicDDZGame.DDZ_CARD_TYPE_NOMARL){\r\n            serverPack.opCardType = opCardType;\r\n            let cardList = [];\r\n            if (isSelectCard) {\r\n                cardList = this.LogicDDZGame.GetSelectCard();\r\n            } else {\r\n                cardList = this.LogicDDZGame.GetHandCard();\r\n            }\r\n            //获取当前局数\r\n            let setID = this.DDZRoomMgr.GetEnterRoom().GetRoomProperty(\"setID\");\r\n\r\n            this.LogicDDZGame.TransformValueToS(cardList);\r\n            serverPack.cardList = cardList;\r\n            serverPack.daiNum = this.LogicDDZGame.GetDaiNum();\r\n            console.log(\"打出去的牌类型 ==\"+serverPack.opCardType);\r\n            this.DDZRoomMgr.SendOpCard(serverPack);\r\n            this.razzNode.active = false;\r\n        }\r\n        else{\r\n            this.ShowSysMsg(\"MSG_CANT_OUT\");\r\n            this.ReInRoom();\r\n        }\r\n    },\r\n    Click_btn_ready:function(){\r\n\t\tlet room = this.DDZRoomMgr.GetEnterRoom();\r\n\t\tif(!room){\r\n\t\t\tthis.ErrLog(\"Click_btn_ready not enter room\");\r\n\t\t\treturn\r\n\t\t}\r\n\t\tlet roomID = room.GetRoomProperty(\"roomID\");\r\n\t\tlet clientPos = room.GetRoomPosMgr().GetClientPos();\r\n\t\tconsole.log('roomID', roomID, clientPos);\r\n\t\tapp[app.subGameName + \"_GameManager\"]().SendReady(roomID, clientPos);\r\n    },\r\n    \r\n\tClick_btn_cancel:function(){\r\n\t\tlet room = this.DDZRoomMgr.GetEnterRoom();\r\n\t\tif(!room){\r\n\t\t\tthis.ErrLog(\"Click_btn_cancel not enter room\");\r\n\t\t\treturn\r\n\t\t}\r\n\t\tlet roomID = room.GetRoomProperty(\"roomID\");\r\n\t\tlet clientPos = room.GetRoomPosMgr().GetClientPos();\r\n\t\tapp[app.subGameName + \"_GameManager\"]().SendUnReady(roomID, clientPos);\r\n\t},\r\n    Click_btn_ok:function(){\r\n        let room = this.DDZRoomMgr.GetEnterRoom();\r\n        if(!room){\r\n            this.ErrLog(\"Click_btn_ready not enter room\");\r\n            return\r\n        }\r\n        let roomID = room.GetRoomProperty(\"roomID\");\r\n        let clientPos = room.GetRoomPosMgr().GetClientPos();\r\n        app[app.subGameName + \"_GameManager\"]().SendReady(roomID, clientPos);\r\n        this.btn_ok.active=false;\r\n        this.tip_ok.active=true;\r\n    },\r\n    Click_btn_go:function(){\r\n        let roomID = this.DDZRoomMgr.GetEnterRoomID();\r\n        this.btn_openCardStart.active = false;\r\n        this.btn_go.active = false;\r\n        this.DDZRoomMgr.SendOpenCardStart(roomID, false, 0);   \r\n    },\r\n    Click_btn_openCardStart:function(){\r\n        let roomID = this.DDZRoomMgr.GetEnterRoomID();\r\n        this.btn_openCardStart.active = false;\r\n        this.btn_go.active = false;\r\n        this.DDZRoomMgr.SendOpenCardStart(roomID, false, 1);\r\n    },\r\n\r\n    Click_btn_jiesan:function () {\r\n        let room = this.DDZRoomMgr.GetEnterRoom();\r\n        if(!room){\r\n            this.ErrLog(\"Click_btn_jiesan not enter room\");\r\n            return;\r\n        }\r\n\r\n        if(app[app.subGameName + \"_ShareDefine\"]().isCoinRoom){\r\n            //Event_ExitRoomSuccess 都有做退出处理\r\n            //Event_CodeError\r\n            let needArg = this.DDZRoomPosMgr.GetClientPos();\r\n            let roomID = this.DDZRoomMgr.GetEnterRoomID();\r\n            app[app.subGameName + \"_GameManager\"]().SendExitRoom(roomID, needArg);\r\n            // app.FormManager().AddDefaultFormName(\"UIPractice\");\r\n            // app[app.subGameName + \"_SceneManager\"]().LoadScene(\"ddzMainScene\");\r\n            app[app.subGameName + \"Client\"].ExitGame();\r\n            return;\r\n        }\r\n\r\n        let state = room.GetRoomProperty(\"state\");\r\n        if(state == this.ShareDefine.RoomState_End){\r\n            //直接退出到大厅\r\n            // app[app.subGameName + \"_SceneManager\"]().LoadScene(\"ddzMainScene\");\r\n            app[app.subGameName + \"Client\"].ExitGame();\r\n            return\r\n        }\r\n        let ClientPos = this.DDZRoomPosMgr.GetClientPos();\r\n        let player = this.DDZRoomPosMgr.GetPlayerInfoByPos(ClientPos);\r\n        if(!player)\r\n            return;\r\n        let posName = player.name;\r\n        let roomID = this.DDZRoomMgr.GetEnterRoomID();\r\n        if(state == this.ShareDefine.RoomState_Playing){\r\n            let jiesan = room.GetRoomConfigByProperty(\"jiesan\");\r\n            if (jiesan == 4) {\r\n                this.ShowSysMsg(\"此房间不可解散\");\r\n                return;\r\n            }\r\n            // app[app.subGameName + \"_GameManager\"]().SendDissolveRoom(roomID, posName);\r\n            app[app.subGameName+\"_ConfirmManager\"]().SetWaitForConfirmForm(this.OnConFirm.bind(this), 'MSG_GAME_DissolveRoom', []);\r\n            app[app.subGameName+\"_ConfirmManager\"]().ShowConfirm(this.ShareDefine.Confirm, 'MSG_GAME_DissolveRoom', []);\r\n            return;\r\n        }\r\n\r\n        let msgID = '';\r\n\r\n        let roomCfg = room.GetRoomConfig();\r\n        if(roomCfg.createType==2 || roomCfg.clubId!=0){\r\n            msgID = 'UIMoreTuiChuFangJian';\r\n        }else{\r\n            if(room.IsClientIsCreater()){\r\n                msgID = 'PlayerLeaveRoom';\r\n            }\r\n            else{\r\n                msgID = 'UIMoreTuiChuFangJian';\r\n            }\r\n        }\r\n\r\n        app[app.subGameName + \"_ConfirmManager\"]().SetWaitForConfirmForm(this.OnConFirm.bind(this), msgID, []);\r\n        app[app.subGameName + \"_ConfirmManager\"]().ShowConfirm(this.ShareDefine.Confirm, msgID, []);\r\n    },\r\n    ReInRoom: function (room) {\r\n        let roomID = this.DDZRoomMgr.GetEnterRoomID();\r\n        this.DDZRoomMgr.SendGetRoomInfo(roomID);\r\n    },\r\n\t//////////////////////////////////////////////////////////////////////////\r\n\tEvent_PosReadyChg:function (event) {\r\n        this.RefreshRoomShow();\r\n        let serverPack = event;\r\n        app[app.subGameName + \"Client\"].OnEvent(\"Head_PosReadyChg\", serverPack);\r\n\t},\r\n\r\n    Event_RoomEnd:function(event){\r\n        // this.FormManager.ShowForm(\"UIPublic_Record\");\r\n        // this.HideAll();\r\n    },\r\n\r\n    OnPack_AutoStart:function(event){\r\n        \r\n    },\r\n\r\n    //一局开始\r\n    Event_SetStart:function(event){\r\n        let setID = this.DDZRoom.GetRoomProperty(\"setID\");\r\n        let current = this.DDZRoom.GetRoomConfigByProperty(\"setCount\");\r\n        this.lb_jushu.string = \"局数：\" + setID + \"/\" + current;\r\n\r\n        this.btn_go.active = false;\r\n        this.tip_ok.active = false;\r\n        app[app.subGameName + \"Client\"].OnEvent(\"SetStart\");\r\n        this.firstTurn = true;\r\n        this.allPlayerCardIdx = [0,0,0,0];\r\n        this.LogicDDZGame.InitHandCard();\r\n        this.ClearForbiddenTouch();\r\n        this.allCardIdx = 0;\r\n        this.openCardMutiple = 0;\r\n        this.openCardInfo = {};\r\n        this.landowner = -1;\r\n        this.HideAll();\r\n        //显示叫分和倍数\r\n        this.UpdateScoreAndDouble();\r\n        //显示需要发的牌\r\n        this.ShowAllCard();\r\n        //从房主开始发牌\r\n        let ownerID = this.DDZRoomMgr.GetEnterRoom().GetRoomProperty(\"ownerID\");\r\n        let playerAll = this.DDZRoomPosMgr.GetRoomAllPlayerInfo();\r\n        let playerAllList= Object.keys(playerAll);\r\n        let owner = null;\r\n        let room = this.DDZRoomMgr.GetEnterRoom();\r\n        let kexuanwanfa=room.GetRoomConfigByProperty(\"kexuanwanfa\");\r\n        for(var i = 0; i < playerAllList.length; i++){\r\n            let player = playerAll[playerAllList[i]];\r\n            if(ownerID == player.pid){\r\n                owner = player;\r\n            }\r\n            // 是否显示手牌\r\n            if(kexuanwanfa.indexOf(5) < 0){\r\n                this.InitCardNum(player.pos, 0);\r\n            }\r\n        }\r\n        //先判断是是否已经明牌了，如果已经明牌，则不显示明牌按钮\r\n        let setInfo = this.DDZRoomSet.GetRoomSetInfo();\r\n        let posInfo = setInfo.posInfo;\r\n        //更新记牌器\r\n        this.UpdateCardNum(setInfo.cardNumMap);\r\n        let isAlreadyOpen = false;\r\n        for (let i = 0; i < posInfo.length; i++) {\r\n            if (posInfo[i].posID == this.DDZRoomPosMgr.GetClientPos() && \r\n                posInfo[i].openCard == 1) {\r\n                isAlreadyOpen = true;\r\n                break;\r\n            }\r\n        }\r\n        if (isAlreadyOpen) {\r\n            this.btn_openCard.active = false;\r\n        }else{\r\n            if(this.DDZRoom.GetRoomWanfa(0)){\r\n                this.btn_openCard.active = false;\r\n            }else{\r\n                this.btn_openCard.active = true;\r\n            }\r\n        }\r\n        if (owner == null) {\r\n            this.FaPaiAction(0);\r\n        }else{\r\n            this.FaPaiAction(owner.pos);\r\n        }\r\n    },\r\n    \r\n    //-----------------回调函数------------------------\r\n\tEvent_ChatMessage:function (event) {\r\n        let argDict = event;\r\n\t\tlet senderPid = argDict[\"senderPid\"];\r\n\t\tlet quickID = parseInt(argDict[\"quickID\"]);\r\n\t\tlet content = argDict[\"content\"];\r\n\r\n        let playerList = this.DDZRoomMgr.GetEnterRoom().GetRoomPosMgr().GetRoomAllPlayerInfo();\r\n        let playerListKey = Object.keys(playerList);\r\n        let initiatorPos = \"\";\r\n        for(let i = 0; i < playerListKey.length; i++){\r\n\t\t\tlet player = playerList[playerListKey[i]];\r\n\t\t\tlet pid = player[\"pid\"];\r\n\t\t\tif(senderPid == pid){\r\n                initiatorPos = parseInt(i);\r\n\t\t\t}\r\n        }\r\n        let playerSex = this.InitHeroSex(initiatorPos);\r\n        let soundName = \"\";\r\n        let path = \"\";\r\n        if(quickID < 101){\r\n            switch (quickID){\r\n                case 1:\r\n                    content = app.i18n.t(\"UIVoiceStringBieChao\");\r\n                    soundName = [playerSex,\"_FastVoice_1\"].join(\"\");\r\n                    break;\r\n                case 2:\r\n                    content = app.i18n.t(\"UIVoiceStringBieZou\");\r\n                    soundName = [playerSex,\"_FastVoice_2\"].join(\"\");\r\n                    break;\r\n                case 3:\r\n                    content = app.i18n.t(\"UIVoiceStringZhaoHu\");\r\n                    soundName = [playerSex,\"_FastVoice_3\"].join(\"\");\r\n                    break;\r\n                case 4:\r\n                    content = app.i18n.t(\"UIVoiceStringZanLi\");\r\n                    soundName = [playerSex,\"_FastVoice_4\"].join(\"\");\r\n                    break;\r\n                case 5:\r\n                    content = app.i18n.t(\"UIVoiceStringZanShang\");\r\n                    soundName = [playerSex,\"_FastVoice_5\"].join(\"\");\r\n                    break;\r\n                case 6:\r\n                    content = app.i18n.t(\"UIVoiceStringCuiCu\");\r\n                    soundName = [playerSex,\"_FastVoice_6\"].join(\"\");\r\n                    break;\r\n                case 7:\r\n                    content = app.i18n.t(\"UIVoiceStringKuaJiang\");\r\n                    soundName = [playerSex,\"_FastVoice_7\"].join(\"\");\r\n                    break;\r\n                case 8:\r\n                    content = app.i18n.t(\"UIVoiceStringDaShang\");\r\n                    soundName = [playerSex,\"_FastVoice_8\"].join(\"\");\r\n                    break;\r\n                case 9:\r\n                    content = app.i18n.t(\"UIVoiceStringLiKai\");\r\n                    soundName = [playerSex,\"_FastVoice_9\"].join(\"\");\r\n                    break;\r\n                case 10:\r\n                    content = app.i18n.t(\"UIVoiceStringYanChi\");\r\n                    soundName = [playerSex,\"_FastVoice_10\"].join(\"\");\r\n                    break;\r\n                default:\r\n                    this.ErrLog(\"Event_chatmessage not find(%s)\",quickID);\r\n                }\r\n        }\r\n        else{\r\n            switch (quickID){\r\n                case 101:\r\n                    path = \"face1Action\";\r\n                    break;\r\n                case 102:\r\n                    path = \"face2Action\";\r\n                    break;\r\n                case 103:\r\n                    path = \"face3Action\";\r\n                    break;\r\n                case 104:\r\n                    path = \"face4Action\";\r\n                    break;\r\n                case 105:\r\n                    path = \"face5Action\";\r\n                    break;\r\n                case 106:\r\n                    path = \"face6Action\";\r\n                    break;\r\n                case 107:\r\n                    path = \"face7Action\";\r\n                    break;\r\n                case 108:\r\n                    path = \"face8Action\";\r\n                    break;\r\n                case 109:\r\n                    path = \"face9Action\";\r\n                    break;\r\n                case 110:\r\n                    path = \"face10Action\";\r\n                    break;\r\n                case 111:\r\n                    path = \"face11Action\";\r\n                    break;\r\n                case 112:\r\n                    path = \"face12Action\";\r\n                    break;\r\n                case 113:\r\n                    path = \"face13Action\";\r\n                    break;\r\n                case 114:\r\n                    path = \"face14Action\";\r\n                    break;\r\n                case 115:\r\n                    path = \"face15Action\";\r\n                    break;\r\n                case 116:\r\n                    path = \"face16Action\";\r\n                    break;\r\n                case 117:\r\n                    path = \"face17Action\";\r\n                    break;\r\n                case 118:\r\n                    path = \"face18Action\";\r\n                    break;\r\n                case 119:\r\n                    path = \"face19Action\";\r\n                    break;\r\n                case 120:\r\n                    path = \"face20Action\";\r\n                    break;\r\n                default:\r\n                    this.ErrLog(\"Event_chatmessage not find(%s)\",quickID);\r\n            }\r\n        }\r\n        this.SoundManager.PlaySound(soundName);\r\n\r\n        let roomPosMgr = this.DDZRoomMgr.GetEnterRoom().GetRoomPosMgr();\r\n\r\n        //敏感词汇替换\r\n        content = this.UtilsWord.CheckContentDirty(content);\r\n        let headScript = this.GetUICardComponentByPos(initiatorPos);\r\n        if(content == \"\"){\r\n            headScript.ShowFaceContent(path);\r\n        }\r\n        else{\r\n            headScript.ShowChatContent(content);\r\n        }\r\n    },\r\n\r\n    //特效播放结束\r\n    OnEffectEnd:function(wndPath, effectName){\r\n\r\n\r\n    },\r\n    GiftMoveEnd:function(sender, useData){\r\n        sender.getComponent(cc.Animation).play();\r\n        sender.bMove = false;\r\n        //播放音效\r\n        app[app.subGameName + \"_SoundManager\"]().PlaySound('mofa_'+sender.name);\r\n    },\r\n    OnGiftAniEnd:function(event){\r\n        let nodes = this.giftNode.children;\r\n        for(let i=nodes.length;i>0;i--){\r\n            if(event){\r\n                let aniState = nodes[i-1].getComponent(cc.Animation).getAnimationState(nodes[i-1].name);\r\n                if(aniState.isPlaying)\r\n                    continue;\r\n                if(!nodes[i-1].bMove)\r\n                    nodes[i-1].removeFromParent();\r\n            }\r\n            else\r\n                nodes[i-1].removeFromParent();\r\n        }\r\n    },\r\n    //-----------------回调函数------------------\r\n    Event_GameGift:function(event){\r\n        let self = this;\r\n        let argDict = event;\r\n        let sendPos = argDict['sendPos'];\r\n        let recivePos = argDict['recivePos'];\r\n        let productId = argDict['productId'];\r\n\r\n        let sendUiPos = this.DDZRoomPosMgr.GetUIPosByDataPos(sendPos);\r\n        let sendPath = \"sp_seat0\" + sendUiPos + \"/head\" + \"/UIDDZHead\" + sendUiPos;\r\n        let sendHeadNode = this.GetWndNode(sendPath);\r\n        let sendHead = sendHeadNode.getComponent(\"UIDDZHead\");\r\n        let reciveUiPos = this.DDZRoomPosMgr.GetUIPosByDataPos(recivePos);\r\n        let recivePath = \"sp_seat0\" + reciveUiPos + \"/head\" + \"/UIDDZHead\" + reciveUiPos;\r\n        let reciveHeadNode = this.GetWndNode(recivePath);\r\n        let reciveHead = reciveHeadNode.getComponent(\"UIDDZHead\");\r\n\r\n        let giftIdx = productId - 1;\r\n        let tempNode = cc.instantiate(this.giftPrefabs[giftIdx]);\r\n        let ani = tempNode.getComponent(cc.Animation);\r\n        // tempNode.tag = giftIdx;\r\n        tempNode.name = ani.defaultClip.name;\r\n        tempNode.bMove = true;\r\n        ani.on('finished',this.OnGiftAniEnd, this);\r\n        let vec1 = sendHead.node.convertToWorldSpaceAR(cc.v2(0, 0));\r\n        let vec2 = reciveHead.node.convertToWorldSpaceAR(cc.v2(0, 0));\r\n        vec1 = this.giftNode.convertToNodeSpaceAR(vec1);\r\n        vec2 = this.giftNode.convertToNodeSpaceAR(vec2);\r\n        tempNode.x = vec1.x;\r\n        tempNode.y = vec1.y;\r\n        this.giftNode.addChild(tempNode);\r\n        let action = cc.sequence(\r\n            cc.moveTo(1,vec2),\r\n            cc.callFunc(self.GiftMoveEnd,self)\r\n        );\r\n        tempNode.runAction(action);\r\n    },\r\n\r\n    InitHeroSex:function (pos) {\r\n\t\tlet DDZRoomPosMgr = this.DDZRoomMgr.GetEnterRoom().GetRoomPosMgr();\r\n\t\tlet player = DDZRoomPosMgr.GetPlayerInfoByPos(pos);\r\n\t\tlet Sex = player[\"sex\"];\r\n\t\tlet playerSex = \"\";\r\n\t\tif(Sex == this.ShareDefine.HeroSex_Boy){\r\n            playerSex = \"boy\";\r\n\t\t}\r\n\t\telse if(Sex == this.ShareDefine.HeroSex_Girl){\r\n            playerSex = \"girl\";\r\n\t\t}\r\n\t\treturn playerSex;\r\n    },\r\n\t//继续游戏\r\n\tEvent_PosContinueGame:function(event){\r\n        // this.HideAll();\r\n\t\tlet argDict = event;\r\n\t\tlet room = this.DDZRoomMgr.GetEnterRoom();\r\n\t\tif(!room){\r\n\t\t\tthis.ErrLog(\"Event_PosContinueGame not enter room\");\r\n\t\t\treturn\r\n\t\t}\r\n\t\tlet RoomPosMgr = room.GetRoomPosMgr();\r\n\t\tlet clientPos = RoomPosMgr.GetClientPos();\r\n\t\tif(argDict[\"pos\"] != clientPos){\r\n\t\t\tlet clientPlayerInfo = RoomPosMgr.GetPlayerInfoByPos(clientPos);\r\n\t\t\t// //如果玩家已经继续了,需要渲染其他人的状态\r\n\t\t\tif(!clientPlayerInfo[\"gameReady\"]){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t}\r\n        else{//如果是自己准备就清理界面\r\n            this.FormManager.CloseForm(\"game/DDZ/UIDDZ_Result\");\r\n            this.FormManager.CloseForm(\"game/DDZ/UIDDZ_2DResult\");\r\n        }\r\n\t\tthis.RefreshRoomShow();\r\n        app[app.subGameName + \"Client\"].OnEvent(\"Head_PosReadyChg\", argDict);\r\n    },\r\n    \r\n    \r\n\t//位置更新\r\n\tEvent_PosUpdate:function(event){\r\n\t\tlet serverPack = event;\r\n        app[app.subGameName + \"Client\"].OnEvent('Head_PosUpdate',serverPack);\r\n        this.RefreshRoomShow();\r\n\t},\r\n\r\n\t//位置离开\r\n\tEvent_PosLeave:function(event){\r\n        this.btn_ok.active = 0;\r\n        this.tip_ok.active=0;\r\n\t\tlet room = this.DDZRoomMgr.GetEnterRoom();\r\n\t\tif(!room){\r\n\t\t\tthis.ErrLog(\"Event_PosLeave not enter room\");\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\tlet argDict = event;\r\n\t\tlet pos = argDict[\"pos\"];\r\n\t\t\r\n\t\tapp[app.subGameName + \"Client\"].OnEvent('Head_PosLeave',argDict);\r\n\r\n\t\tlet clientPos = room.GetRoomPosMgr().GetClientPos();\r\n\t\t//如果是客户端玩家并且是被T了\r\n\t\tif(argDict[\"beKick\"] && clientPos == pos){\r\n            if(argDict[\"kickOutTYpe\"] == 2){\r\n                this.SetWaitForConfirm('MSG_BeKick',this.ShareDefine.ConfirmOK,[argDict.msg]);\r\n            }\r\n            else if(argDict[\"kickOutTYpe\"] == 3){\r\n                this.SetWaitForConfirm('MSG_BeKick',this.ShareDefine.ConfirmOK,[\"由于长时间未准备，您已被请出房间\"]);\r\n            }\r\n            else{\r\n                this.SetWaitForConfirm('UIPlay_BeKick',this.ShareDefine.ConfirmOK);\r\n            }\r\n\t\t}\r\n        //如果是客户端自己，返回大厅\r\n        if (!argDict[\"beKick\"] && clientPos == pos) {\r\n            app[app.subGameName + \"Client\"].ExitGame();\r\n        }\r\n\t\tthis.RefreshRoomShow();\r\n\t},\r\n\r\n    Event_ExitRoomSuccess:function(event){\r\n        let room = this.DDZRoomMgr.GetEnterRoom();\r\n        if(!room){\r\n            this.ErrLog(\"Event_PosLeave not enter room\");\r\n            return\r\n        }\r\n        let clientPos = room.GetRoomPosMgr().GetClientPos();\r\n        if(event[\"beKick\"] && clientPos == event[\"pos\"]){\r\n            //如果是被t先弹提示，不能直接退出\r\n            return;\r\n        }\r\n        // app[app.subGameName + \"_SceneManager\"]().LoadScene(\"ddzMainScene\");\r\n        app[app.subGameName + \"Client\"].ExitGame();\r\n    },\r\n\r\n    Event_OnRoomNotFindByReason:function(event){\r\n        let roomID = this.DDZRoom.GetRoomProperty(\"roomID\");\r\n        if (roomID != event.roomID) return;\r\n        this.ShowSysMsg(event.msg);\r\n        //弹出总结算\r\n        this.FormManager.ShowForm(\"game/DDZ/UIDDZ_Record\");\r\n    },\r\n\r\n    OnEvt_CopyTextNtf:function(event){\r\n        if(0 == event.code)\r\n            this.ShowSysMsg(\"已复制：\"+event.msg);\r\n        else\r\n            this.ShowSysMsg(\"房间号复制失败\");\r\n    },\r\n\t\r\n\t//一局结束\r\n\tEvent_SetEnd:function(event){\r\n        this.unschedule(this.CallEverySecond);\r\n        let setEnd = this.DDZRoomSet.GetRoomSetProperty(\"setEnd\");\r\n        //显示动画\r\n        this.GameEnd_Ani.active = true;\r\n        if (setEnd.landowner == this.DDZRoomPosMgr.GetClientPos()) {\r\n            if (setEnd.pointList[this.DDZRoomPosMgr.GetClientPos()] > 0) {\r\n                this.GameEnd_Ani.getComponent(cc.Animation).stop(\"nongminshengli\");\r\n                this.GameEnd_Ani.getComponent(cc.Animation).stop(\"nongminshibai\");\r\n                this.GameEnd_Ani.getComponent(cc.Animation).stop(\"dizhushibai\");\r\n                this.GameEnd_Ani.getComponent(cc.Animation).play(\"dizhushengli\");\r\n                this.SoundManager.PlaySound(\"MusicEx_Win\",this.DDZDefine.SoundPath + \"MusicEx_Win\");\r\n            }else{\r\n                this.GameEnd_Ani.getComponent(cc.Animation).stop(\"nongminshengli\");\r\n                this.GameEnd_Ani.getComponent(cc.Animation).stop(\"nongminshibai\");\r\n                this.GameEnd_Ani.getComponent(cc.Animation).stop(\"dizhushengli\");\r\n                this.GameEnd_Ani.getComponent(cc.Animation).play(\"dizhushibai\");\r\n                this.SoundManager.PlaySound(\"MusicEx_Lose\",this.DDZDefine.SoundPath + \"MusicEx_Lose\");\r\n            }\r\n        }else{\r\n           if (setEnd.pointList[this.DDZRoomPosMgr.GetClientPos()] > 0) {\r\n                this.GameEnd_Ani.getComponent(cc.Animation).stop(\"dizhushengli\");\r\n                this.GameEnd_Ani.getComponent(cc.Animation).stop(\"nongminshibai\");\r\n                this.GameEnd_Ani.getComponent(cc.Animation).stop(\"dizhushibai\");\r\n                this.GameEnd_Ani.getComponent(cc.Animation).play(\"nongminshengli\");\r\n                this.SoundManager.PlaySound(\"MusicEx_Win\",this.DDZDefine.SoundPath + \"MusicEx_Win\");\r\n            }else{\r\n                this.GameEnd_Ani.getComponent(cc.Animation).stop(\"nongminshengli\");\r\n                this.GameEnd_Ani.getComponent(cc.Animation).stop(\"dizhushibai\");\r\n                this.GameEnd_Ani.getComponent(cc.Animation).stop(\"dizhushengli\");\r\n                this.GameEnd_Ani.getComponent(cc.Animation).play(\"nongminshibai\");\r\n                this.SoundManager.PlaySound(\"MusicEx_Lose\",this.DDZDefine.SoundPath + \"MusicEx_Lose\");\r\n            }\r\n        }\r\n        //是否留局。三家全没叫地主\r\n        let isPingJu = false;\r\n        if (setEnd.pointList[0] == 0 &&\r\n            setEnd.pointList[1] == 0 &&\r\n            setEnd.pointList[2] == 0) {\r\n            isPingJu = true;\r\n        }\r\n        //判断是否被春天\r\n        for (let i = 0; i < setEnd.robCloseList.length; i++) {\r\n            if (setEnd.robCloseList[i] == 1 && !isPingJu) {\r\n                this.ShutDow_Ani.active = true;\r\n                this.ShutDow_Ani.getComponent(cc.Animation).stop(\"fanchuntian\");\r\n                this.ShutDow_Ani.getComponent(cc.Animation).play(\"chuntian\");\r\n                break;\r\n            }\r\n            else if (setEnd.robCloseList[i] == -1 && !isPingJu) {\r\n                this.ShutDow_Ani.active = true;\r\n                this.ShutDow_Ani.getComponent(cc.Animation).stop(\"chuntian\");\r\n                this.ShutDow_Ani.getComponent(cc.Animation).play(\"fanchuntian\");\r\n                break;\r\n            }\r\n        }\r\n        \r\n        this.UpdatePlayerScore();\r\n        //发送明牌消息\r\n        // let roomID = this.DDZRoom.GetRoomProperty(\"roomID\");\r\n        // this.DDZRoomMgr.SendOpenCard(roomID, 1, 1);\r\n\r\n        let self = this;\r\n        this.scheduleOnce(function(){\r\n            self.FormManager.ShowForm(\"game/DDZ/UIDDZ_Result\");\r\n        },2.0);\r\n    },\r\n\t\r\n\t//房间解散\r\n\tEvent_DissolveRoom:function(event){\r\n\r\n\t\tlet argDict = event;\r\n\t\tlet ownnerForce = argDict[\"ownnerForce\"];\r\n\r\n\t\t//未开启房间游戏时才会触发\r\n\t\tif(ownnerForce){\r\n\t\t\tlet room = this.DDZRoomMgr.GetEnterRoom();\r\n\t\t\t//如果是房主主动接撒直接退出\r\n\t\t\tif(room && room.IsClientIsOwner()){\r\n\t\t\t\t// app[app.subGameName + \"_SceneManager\"]().LoadScene(\"ddzMainScene\");\r\n                app[app.subGameName + \"Client\"].ExitGame();\r\n\t\t\t}\r\n\t\t\telse{\r\n                this.SetWaitForConfirm('OwnnerForceRoom',this.ShareDefine.ConfirmOK);\r\n\t\t\t}\r\n\t\t}\r\n        else if (event.dissolveNoticeType == 1) {\r\n            this.SetWaitForConfirm('SportsPointDissolveRoom',this.ShareDefine.ConfirmOK,[event.msg]);\r\n        }else if(event.dissolveNoticeType == 3){\r\n            this.SetWaitForConfirm('MSG_BeDissolve',this.ShareDefine.ConfirmOK,[event.msg]);\r\n        }\r\n\t\telse{\r\n\t\t\tlet state = this.DDZRoomMgr.GetEnterRoom().GetRoomProperty(\"state\");\r\n\t\t\t//如果没有打完一局不会下发roomend,直接显示2次弹框\r\n\t\t\tif(state != this.ShareDefine.RoomState_End){\r\n                this.SetWaitForConfirm('DissolveRoom',this.ShareDefine.ConfirmOK);\r\n\t\t\t\tthis.FormManager.CloseForm(app.subGameName + \"_UIMessage02\");\r\n\t\t\t}\r\n\t\t\t//如果有roomend数据显示 结果界面\r\n\t\t\telse{\r\n\t\t\t\tthis.FormManager.CloseForm(app.subGameName + \"_UIMessage02\");\r\n                this.FormManager.ShowForm(\"game/DDZ/UIDDZ_Record\");\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t},\r\n\r\n\t//收到解散房间\r\n    Event_StartVoteDissolve:function (event) {\r\n        this.FormManager.ShowForm(app.subGameName + \"_UIMessage02\");\r\n    },\r\n\r\n    UpdatePlayerScore:function(){\r\n        let room = this.DDZRoomMgr.GetEnterRoom();\r\n        let posList = room.GetRoomProperty(\"posList\");\r\n        for(let idx = 0; idx < posList.length; idx++){\r\n            let uiPos = this.DDZRoomPosMgr.GetUIPosByDataPos(posList[idx].pos);\r\n            let path = \"sp_seat0\" + uiPos + \"/head\" + \"/UIDDZHead\" + uiPos;\r\n            let headNode = this.GetWndNode(path);\r\n            let headScript = headNode.getComponent(\"UIDDZHead\");\r\n            headScript.UpDateLabJiFen();\r\n            headScript.UpDateLabSportsPoint();\r\n            if (uiPos == 0) {\r\n                this.UpdateSelfScore();\r\n            }\r\n        }\r\n    },\r\n\r\n    UpdateSelfScore:function(){\r\n        let pos = this.DDZRoomPosMgr.GetClientPos();\r\n        let room = this.DDZRoomMgr.GetEnterRoom();\r\n        let allPlayerInfo = room.GetRoomPosMgr().GetRoomAllPlayerInfo();\r\n        // let createRoomType = this.DDZRoom.GetRoomConfigByProperty(\"createRoomType\");\r\n        if (this.ShareDefine.isCoinRoom) {\r\n            //创建的是金币玩法\r\n            this.img_bottom_input1.getChildByName(\"icon_jb\").active = true;\r\n            this.img_bottom_input1.getChildByName(\"icon_jf\").active = false;\r\n            let coin = app[app.subGameName + \"_HeroManager\"]().GetHeroProperty('gold');\r\n            this.img_bottom_input1.getChildByName(\"lb_score\").getComponent(cc.Label).string = coin;\r\n        // }else if (createRoomType == this.ShareDefine.ScoreRoom) {\r\n        //     //创建的是积分玩法\r\n        //     this.img_bottom_input1.getChildByName(\"icon_jb\").active = false;\r\n        //     this.img_bottom_input1.getChildByName(\"icon_jf\").active = true;\r\n        //     let score = 0;\r\n        //     score = allPlayerInfo[pos].point;\r\n        //     this.img_bottom_input1.getChildByName(\"lb_score\").getComponent(cc.Label).string = score;\r\n        }else{\r\n            this.img_bottom_input1.getChildByName(\"icon_jb\").active = false;\r\n            this.img_bottom_input1.getChildByName(\"icon_jf\").active = true;\r\n            let score = 0;\r\n            score = allPlayerInfo[pos].realPoint;\r\n            this.img_bottom_input1.getChildByName(\"lb_score\").getComponent(cc.Label).string = score;\r\n        }\r\n        let roomCard = app[app.subGameName + \"_HeroManager\"]().GetHeroProperty('roomCard');\r\n        this.img_bottom_input2.active = false;\r\n        this.img_bottom_input2.getChildByName(\"lb_crystal\").getComponent(cc.Label).string = roomCard;\r\n    },\r\n\t\r\n\tGetUICardComponentByPos:function(pos){\r\n\t\tlet room = this.DDZRoomMgr.GetEnterRoom();\r\n\t\tif(!room){\r\n\t\t\tthis.ErrLog(\"GetUICardComponentByPos not enter room\");\r\n\t\t\treturn\r\n\t\t}\r\n\r\n        let posList = room.GetRoomProperty(\"posList\");\r\n        for(let idx = 0; idx < posList.length; idx++){\r\n            if(pos == posList[idx].pos){\r\n                let uiPos = this.DDZRoomPosMgr.GetUIPosByDataPos(posList[idx].pos);\r\n                let path = \"sp_seat0\" + uiPos + \"/head\" + \"/UIDDZHead\" + uiPos;\r\n                let headNode = this.GetWndNode(path);\r\n                let headScript = headNode.getComponent(\"UIDDZHead\");\r\n                return headScript;\r\n            }\r\n        }\r\n\t},\r\n\t//显示玩家准备状态\r\n\tShowPlayerReady:function (room) {\r\n\t\tif (!room) {\r\n\t\t\tthis.ErrLog(\"Event_ShowReadyOrNoReady not enter room\");\r\n\t\t\treturn\r\n\t\t}\r\n\t\tlet roomSetID = room.GetRoomProperty(\"setID\");\r\n\t\tlet ReadyState = \"\";\r\n\t\tif(roomSetID > 0){\r\n            ReadyState = \"gameReady\";   \r\n\t\t}\r\n\t\telse {\r\n            ReadyState = \"roomReady\";\r\n        }\r\n\r\n        this.SetPlayerReadyInfo(ReadyState);\r\n    },\r\n    HideClientReady:function(){\r\n        this.btn_ready.active = false;\r\n        this.btn_weixin.active = false;\r\n        this.btn_ok.active = false;\r\n        this.invitationNode.active = false;\r\n\r\n    },\r\n    ShowPlayerOk:function(){\r\n        this.btn_ready.active = 0;\r\n        let room = this.DDZRoomMgr.GetEnterRoom();\r\n        let kexuanwanfa=room.GetRoomConfigByProperty(\"kexuanwanfa\");\r\n        if(kexuanwanfa.indexOf(2) != -1){\r\n            //自动准备玩法\r\n            this.btn_ok.active = 0;\r\n            this.Click_btn_ok();\r\n        }else{\r\n            //手动准备玩法\r\n            this.btn_ok.active = 1;\r\n        }\r\n        this.btn_weixin.active = 0;\r\n        this.invitationNode.active = false;\r\n        this.btn_go.active = 0;\r\n    },\r\n    isAutoPass: function() {\r\n        let room = this.DDZRoomMgr.GetEnterRoom();\r\n        let kexuanwanfa = room.GetRoomConfigByProperty('kexuanwanfa');\r\n        if (kexuanwanfa.length > 0) {\r\n            if (kexuanwanfa.indexOf(3) > -1) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    },\r\n    isWangZhaHog: function() {\r\n        let room = this.DDZRoomMgr.GetEnterRoom();\r\n        let kexuanwanfa = room.GetRoomConfigByProperty('kexuanwanfa');\r\n        if (kexuanwanfa.length > 0) {\r\n            if (kexuanwanfa.indexOf(4) > -1) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    },\r\n    IsClientReady:function(ReadyState){\r\n        let roomPosMgr = this.DDZRoomMgr.GetEnterRoom().GetRoomPosMgr();\r\n        let clientPos = roomPosMgr.GetClientPos();\r\n        let playerAll = roomPosMgr.GetRoomAllPlayerInfo();\r\n        let playerAllList= Object.keys(playerAll);\r\n        for(let i = 0; i < playerAllList.length; i++){\r\n            let player = playerAll[playerAllList[i]];\r\n            let isClientReady = player[ReadyState];\r\n            if (player[\"pos\"] == clientPos) {\r\n                return isClientReady;\r\n                break;\r\n            }\r\n        }\r\n    },\r\n    IsOpenStartGame:function(){\r\n        let roomPosMgr = this.DDZRoomMgr.GetEnterRoom().GetRoomPosMgr();\r\n        let clientPos = roomPosMgr.GetClientPos();\r\n        let playerAll = roomPosMgr.GetRoomAllPlayerInfo();\r\n        let playerAllList= Object.keys(playerAll);\r\n        for(let i = 0; i < playerAllList.length; i++){\r\n            let player = playerAll[playerAllList[i]];\r\n            if(this.DDZRoom.GetRoomWanfa(0)){\r\n                return false;\r\n            }\r\n            return !player[\"openStartGame\"]\r\n        }\r\n    },\r\n    JoinPlayerFinish:function(){\r\n        let roomPosMgr = this.DDZRoomMgr.GetEnterRoom().GetRoomPosMgr();\r\n        let playerAll = roomPosMgr.GetRoomAllPlayerInfo();\r\n        let playerAllList= Object.keys(playerAll);\r\n        var tempNum = 0;\r\n        for(let j=0;j< playerAllList.length; j++){\r\n            let player = playerAll[playerAllList[j]];\r\n            if(player.pid>0){\r\n                tempNum++;\r\n            }\r\n        }\r\n        if(tempNum == playerAllList.length){\r\n            return true;\r\n        }\r\n        return false;\r\n    },\r\n    SetPlayerReadyInfo: function (ReadyState) {\r\n        if(ReadyState==\"gameReady\"){\r\n            //第二局\r\n            this.HideClientReady();\r\n        }else if(ReadyState==\"roomReady\"){\r\n            //第一局\r\n            if(this.JoinPlayerFinish() && this.IsClientReady(ReadyState)==false){\r\n                //人数加满，本家没准备\r\n                this.ShowPlayerOk();\r\n            }else if(this.JoinPlayerFinish() && this.IsClientReady(ReadyState)==true){\r\n                //人数加满，本家准备\r\n                this.HideClientReady();\r\n            }else{\r\n                //人数未满\r\n                this.ShowPlayerYaoQing();\r\n            }\r\n        }\r\n    },\r\n    ShowPlayerYaoQing:function(){\r\n        this.btn_ready.active = 0;\r\n        this.btn_weixin.active = 1;\r\n        this.btn_ok.active = false;\r\n        if (this.roomCfg.clubId > 0 || this.roomCfg.unionId > 0) {\r\n            this.invitationNode.active = true;\r\n        }else{\r\n            this.invitationNode.active = false;\r\n        }\r\n    },\r\n    GetPlayerSex:function (pos) {\r\n        let playerSex = \"\";\r\n        let player = this.DDZRoomPosMgr.GetPlayerInfoByPos(pos);\r\n        let Sex = player[\"sex\"];\r\n        if(Sex == this.ShareDefine.HeroSex_Boy){\r\n            playerSex = \"boy\";\r\n        }\r\n        else if(Sex == this.ShareDefine.HeroSex_Girl){\r\n            playerSex = \"girl\";\r\n        }\r\n        return playerSex;\r\n    },\r\n\r\n    //显示选择癞子牌选择\r\n    ShowRazzNode:function(razzCardList){\r\n        let realCardList = razzCardList[0].realCardList;\r\n        let cardLength = realCardList.length;\r\n        let bg_lz = this.razzNode.getChildByName(\"bg_lz\");\r\n        bg_lz.width = 240 + (cardLength - 1)*20;\r\n        let content = bg_lz.getChildByName(\"razzView\").getChildByName(\"view\").getChildByName(\"content\");\r\n        content.removeAllChildren();\r\n        bg_lz.getChildByName(\"razzView\").width = bg_lz.width;\r\n        bg_lz.getChildByName(\"razzView\").getChildByName(\"view\").width = bg_lz.width;\r\n        content.width = bg_lz.width;\r\n        for (let i = 0; i < razzCardList.length; i++) {\r\n            let razzCell = cc.instantiate(this.razzNode.getChildByName(\"selectCardDemo\"));\r\n            razzCell.getChildByName(\"pokers\").removeAllChildren();\r\n            realCardList = razzCardList[i].realCardList;\r\n            let cardType = razzCardList[i].cardType;\r\n            let lb_cardType = razzCell.getChildByName(\"lb_cardType\");\r\n            lb_cardType.x = bg_lz.width/2;\r\n            if (cardType == this.LogicDDZGame.DDZ_CARD_TYPE_FEIJI1) {\r\n                lb_cardType.getComponent(cc.Label).string = \"飞机带单\";\r\n            }else if (cardType == this.LogicDDZGame.DDZ_CARD_TYPE_FEIJI2) {\r\n                lb_cardType.getComponent(cc.Label).string = \"飞机带对\";\r\n            }else if (cardType == this.LogicDDZGame.DDZ_CARD_TYPE_4DAI4) {\r\n                lb_cardType.getComponent(cc.Label).string = \"四带2对\";\r\n            }else{\r\n                lb_cardType.getComponent(cc.Label).string = \"未知牌型\";\r\n            }\r\n            for (let j = 0; j < realCardList.length; j++) {\r\n                let cardNode = cc.instantiate(this.cardPrefab);\r\n                razzCell.getChildByName(\"pokers\").addChild(cardNode);\r\n                cardNode.name = \"card_\" + j.toString();\r\n                let cardValue = realCardList[j];\r\n                if(cardValue){\r\n                    let isLastCard = false;\r\n                    if((j+1) == realCardList.length){\r\n                        isLastCard = true;\r\n                    }\r\n                    this.ShowCard(cardValue,cardNode,isLastCard,false);\r\n                }\r\n                else{\r\n                    cardNode.active = false;\r\n                }\r\n            }\r\n            razzCell.active = true;\r\n            content.addChild(razzCell);\r\n            razzCell.name = \"razzCell_\" + i.toString();\r\n            razzCell.on('click',this.OnRazzCell,this);\r\n        }\r\n        this.razzNode.active = true;\r\n    },\r\n\r\n    HideRazzNode:function(){\r\n        this.razzNode.active = false;\r\n    },\r\n\r\n    OnRazzCell:function(event){\r\n        let itemName = event.target.name;\r\n        let allRazzCardList = this.LogicDDZGame.GetAllCardTypeBySpc();\r\n        let selectIndex = parseInt(itemName.substr(('razzCell_').length));\r\n        let serverPack = {};\r\n        let roomID = this.DDZRoomMgr.GetEnterRoom().GetRoomProperty(\"roomID\");\r\n        serverPack.roomID = roomID;\r\n        let pos = this.DDZRoomPosMgr.GetClientPos();\r\n        serverPack.pos = pos;\r\n        serverPack.opCardType = allRazzCardList[selectIndex][\"cardType\"];\r\n        //获取当前局数\r\n        let setID = this.DDZRoomMgr.GetEnterRoom().GetRoomProperty(\"setID\");\r\n\r\n        this.LogicDDZGame.TransformValueToS(allRazzCardList[selectIndex][\"realCardList\"]);\r\n        serverPack.cardList = allRazzCardList[selectIndex][\"realCardList\"];\r\n        serverPack.daiNum = this.LogicDDZGame.GetDaiNum();\r\n        console.log(\"打出去的牌类型 ==\"+serverPack.opCardType);\r\n        this.DDZRoomMgr.SendOpCard(serverPack);\r\n\r\n        this.razzNode.active = false;\r\n    },\r\n\r\n    OnUpdate:function(){\r\n        //更新系统时间\r\n        var DateNow = new Date();\r\n        let Hours=DateNow.getHours();  \r\n        let Minutes=DateNow.getMinutes();\r\n        Hours=this.ComTool.StringAddNumSuffix(\"\", Hours, 2);\r\n        Minutes=this.ComTool.StringAddNumSuffix(\"\", Minutes, 2);\r\n        this.lb_time.string=Hours+\":\"+Minutes;\r\n    },\r\n\r\n\t/**\r\n\t * 2次确认点击回调\r\n\t */\r\n    SetWaitForConfirm:function(msgID,type,msgArg=[],cbArg=[]){\r\n        let ConfirmManager = app[app.subGameName + \"_ConfirmManager\"]();\r\n        ConfirmManager.SetWaitForConfirmForm(this.OnConFirm.bind(this), msgID, cbArg);\r\n        ConfirmManager.ShowConfirm(type, msgID, msgArg);\r\n    },\r\n\tOnConFirm:function(clickType, msgID, backArgList){\r\n        let ClientPos = this.DDZRoomPosMgr.GetClientPos();\r\n        let player = this.DDZRoomPosMgr.GetPlayerInfoByPos(ClientPos);\r\n        let posName = player.name;\r\n        let roomID = this.DDZRoomMgr.GetEnterRoomID();\r\n\t\tif(clickType != \"Sure\"){\r\n            if(msgID == \"SportsPointNotEnough\"){\r\n                app[app.subGameName+\"_GameManager\"]().SendDissolveRoom(roomID);\r\n            }\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif(msgID == \"UIPlay_BeKick\"){\r\n\t\t\t// app[app.subGameName + \"_SceneManager\"]().LoadScene(\"ddzMainScene\");\r\n            app[app.subGameName + \"Client\"].ExitGame();\r\n\t\t}\r\n\t\telse if(msgID == \"OwnnerForceRoom\"){\r\n\t\t\t// app[app.subGameName + \"_SceneManager\"]().LoadScene(\"ddzMainScene\");\r\n            app[app.subGameName + \"Client\"].ExitGame();\r\n\t\t}\r\n\t\telse if(msgID == \"DissolveRoom\"){\r\n\t\t\t// app[app.subGameName + \"_SceneManager\"]().LoadScene(\"ddzMainScene\");\r\n            app[app.subGameName + \"Client\"].ExitGame();\r\n\t\t}\r\n        else if(msgID == \"PlayerLeaveRoom\"){\r\n            app[app.subGameName + \"_GameManager\"]().SendDissolveRoom(roomID);\r\n        }\r\n        else if(msgID == \"SportsPointNotEnough\"){\r\n\r\n        }\r\n        else if (msgID == \"SportsPointThresholdEnough\" || msgID == \"SportsPointThresholdNotEnough\") {\r\n            app[app.subGameName + \"Client\"].ExitGame();\r\n        }\r\n        else if(msgID == \"MSG_BeKick\" || msgID == \"MSG_BeDissolve\"){\r\n            app[app.subGameName + \"Client\"].ExitGame();\r\n        }\r\n        else if(msgID == \"MSG_GAME_DissolveRoom\"){\r\n            app[app.subGameName+\"_GameManager\"]().SendDissolveRoom(roomID, posName);\r\n        }\r\n        else if(msgID == \"UIMoreTuiChuFangJian\"){\r\n            if(!player)\r\n                return;\r\n            let state = this.DDZRoom.GetRoomProperty(\"state\");\r\n            if(state == this.ShareDefine.RoomState_Playing){\r\n                app[app.subGameName + \"_GameManager\"]().SendDissolveRoom(roomID, posName);\r\n                return\r\n            }\r\n            app[app.subGameName + \"_GameManager\"]().SendExitRoom(roomID, ClientPos);\r\n        }\r\n\t\telse{\r\n\t\t\tthis.ErrLog(\"OnConFirm msgID:%s error\", msgID);\r\n\t\t}\r\n\t},\r\n});\r\n\r\nmodule.exports = BasePlayForm;"]}