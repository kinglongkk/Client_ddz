{"version":3,"sources":["../../../../../../../assets/script/game/DDZ/ui/assets/script/game/DDZ/ui/UIDDZ_2DPlay.js"],"names":["app","require","cc","Class","extends","subGameName","properties","headPrefab","Prefab","cardPrefab","giftPrefabs","icon_signal","SpriteFrame","UIInvitation","OnCreateInit","DDZRoomMgr","DDZRoom","HeroManager","SceneManager","UtilsWord","PokerCard","DDZRoomPosMgr","DDZRoomSet","LogicDDZGame","ShareDefine","DDZDefine","isFirstEnter","basePath","btn_ok","GetWndNode","tip_ok","node","getChildByName","razzNode","btn_ready","btn_weixin","btn_fzkl","btn_cancel","btn_go","btn_openCardStart","handCards","allCards","gameBtn","gameRobLandLord","gameRobScore","btn_tip","btn_pass","btn_outCard","btn_yaobuqi","gameMultiple","btn_openCard","boom_Ani","plane_Ani","liandui_Ani","dragon_Ani","GameEnd_Ani","ShutDow_Ani","bg_menu","img_jpq","img_dzp","lb_mypdgsj","lb_ddbrjb","giftNode","btn_talk","btn_cardDevice","labelRoomId","getComponent","Label","labeiWanfa","lb_jushu","lb_publicScore","lb_publicMultiple","roomInfo","lb_time","img_dck","ProgressBar","img_wifi","Sprite","RegEvent","Event_PosContinueGame","Event_DissolveRoom","Event_StartVoteDissolve","Event_PosLeave","Event_PosUpdate","Event_PosReadyChg","Event_GameGift","Event_ExitRoomSuccess","Event_OnRoomNotFindByReason","OnEvt_CopyTextNtf","Event_SetStart","Event_SetEnd","Event_RoomEnd","OnPack_AutoStart","Event_ChatMessage","Event_ShowHandCard","Event_OpCard","Event_ChangeStatus","Event_AddDouble","Event_OpenCard","Event_Hog","Event_OpenStartGame","Event_CardNumber","Event_SportsPointEnough","Event_SportsPointNotEnough","Event_SportsPointThresholdEnough","Event_SportsPointThresholdNotEnough","Event_CodeError","game","on","EVENT_HIDE","OnEventHide","bind","EVENT_SHOW","OnEventShow","Left","cardSpcedX","Node","EventType","TOUCH_START","OnTouchStart","TOUCH_MOVE","OnTouchMove","TOUCH_END","OnTouchEnd","TOUCH_CANCEL","OnTouchCancel","Animation","OnAniPlayFinished","i","OpenCard_Ani","InitData","AddCardPrefab","invitationNode","instantiate","addChild","OnShow","CheckUpdateNotice","active","roomID","GetEnterRoomID","SendPack","toUpperCase","event","ExitGame","error","IsShowChat","IsShowCardDevice","roomCfg","GetEnterRoom","GetRoomConfig","clubId","unionId","name","sys","isNative","OnEvent_BatteryLevel","CallToNative","OnEvent_SpeedTest","isChoose","AddHead","HideAll","unscheduleAllCallbacks","PlayMusic","ClearForbiddenTouch","handCardsSpacingX","Layout","spacingX","cardNodeWidth","data","width","state","GetRoomSetProperty","disslove","GetRoomProperty","roomState","xianShi","GetRoomConfigByProperty","string","WanFa","isCoinRoom","setID","current","UpdateScoreAndDouble","UpdateSelfScore","endSec","FormManager","ShowForm","RoomState_Init","setInfo","GetRoomSetInfo","UpdateCardNum","cardNumMap","posList","length","pos","isAuto","headScript","GetUICardComponentByPos","ShowAutoIcon","UpdatePlayerScore","ShowDiZhuPai","holeCards","landowner","uiPos","GetUIPosByDataPos","path","headNode","Showlandowner","DDZSetState_FaPai","InitGameStateCommon","DDZSetState_Hog","ShowBtnHog","opPos","isHaveHog","DDZSetState_AddDouble","ShowBtnMultiple","DDZSetState_Playing","SetCardData","opType","cardList","time","MaxTickTime","lastCircleEnd","isFirstOp","firstTurn","GetClientPos","ShowBtnOutCard","array","GetTipCard","ForbiddenTouch","isAutoPass","MinTickTime","ShowAllGameBtn","SortCardByMax","ShowOutCard","lastOpPos","SetSeat01OutCardPos","StartTickTime","DDZSetState_End","clientPos","clientPlayerInfo","GetPlayerInfoByPos","RefreshRoomShow","GetTuiGuangUrl","MaxTableCard","card","toString","MaxHandCard","MaxPlayer","outCardList","j","openCardList","scale","y","dataPos","len","posX","x","allDzCard","children","dzCard","ShowCard","posInfo","isAlreadyHog","posID","hog","quedingdizhu","HogCommon","imgBtnNoRob","imgBtnRob","isWangZhaHog","IsHaveWangZhaOrBoom","HogScore","hogScore","power","status","progress","YanCi","spriteFrame","unschedule","CallEverySecond","setEnd","pointList","stop","play","SoundManager","PlaySound","SoundPath","isPingJu","robCloseList","self","scheduleOnce","ShowSysMsg","msg","argDict","ownnerForce","room","IsClientIsOwner","SetWaitForConfirm","ConfirmOK","dissolveNoticeType","RoomState_End","CloseForm"],"mappings":"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","file":"UIDDZ_2DPlay.js","sourceRoot":"../../../../../../../assets/script/game/DDZ/ui","sourcesContent":["var app = require(\"ddz_app\");\r\ncc.Class({\r\n    extends: require(app.subGameName + \"_BasePlay\"),\r\n\r\n    properties: {\r\n        headPrefab:cc.Prefab,\r\n        cardPrefab:cc.Prefab,\r\n        giftPrefabs:[cc.Prefab],\r\n        icon_signal:[cc.SpriteFrame],\r\n\r\n        UIInvitation:cc.Prefab,\r\n     },\r\n\r\n    OnCreateInit: function () {\r\n        this.DDZRoomMgr = app.DDZRoomMgr();\r\n        this.DDZRoom = app.DDZRoom();\r\n        this.HeroManager = app[app.subGameName + \"_HeroManager\"]();\r\n        this.SceneManager = app[app.subGameName + \"_SceneManager\"]();\r\n        this.UtilsWord = app[app.subGameName + \"_UtilsWord\"]();\r\n        this.PokerCard = app[app.subGameName + \"_PokerCard\"]();\r\n        this.DDZRoomPosMgr = app.DDZRoomPosMgr();\r\n        this.DDZRoomSet = app.DDZRoomSet();\r\n        this.LogicDDZGame = app.LogicDDZGame();\r\n        this.ShareDefine = app[app.subGameName + \"_ShareDefine\"]();\r\n        this.DDZDefine = app.DDZDefine();\r\n        \r\n        //是否第一次进入\r\n        this.isFirstEnter = true;\r\n\r\n        this.basePath = 'texture/game/doudizhu/';\r\n\r\n        //UI\r\n        this.btn_ok = this.GetWndNode(\"gameBtnStartList/btn_ok\");\r\n        this.tip_ok = this.node.getChildByName(\"tip_ok\");\r\n        this.razzNode = this.node.getChildByName(\"razzNode\");\r\n        this.btn_ready = this.GetWndNode(\"gameBtnStartList/btn_ready\");\r\n        this.btn_weixin = this.GetWndNode(\"gameBtnStartList/btn_weixin\");\r\n        this.btn_fzkl = this.GetWndNode(\"btn_fzkl\");\r\n        this.btn_cancel = this.GetWndNode(\"gameBtnStartList/btn_weixin\");\r\n        this.btn_go = this.GetWndNode(\"gameBtnStartList/btn_go\");\r\n        this.btn_openCardStart = this.GetWndNode(\"gameBtnStartList/btn_openCardStart\");\r\n        this.handCards = this.GetWndNode(\"handCards\");\r\n        this.allCards = this.GetWndNode(\"allCards\");\r\n        this.gameBtn = this.GetWndNode(\"gameBtn\");\r\n        this.gameRobLandLord = this.GetWndNode(\"gameRobLandLord\");\r\n        this.gameRobScore = this.GetWndNode(\"gameRobScore\");\r\n        this.btn_tip = this.GetWndNode(\"gameBtn/btn_tip\");\r\n        this.btn_pass = this.GetWndNode(\"gameBtn/btn_pass\");\r\n        this.btn_outCard = this.GetWndNode(\"gameBtn/btn_outCard\");\r\n        this.btn_yaobuqi = this.GetWndNode(\"gameBtn/btn_yaobuqi\");\r\n        this.gameMultiple = this.GetWndNode(\"gameMultiple\");\r\n        this.btn_openCard = this.GetWndNode(\"btn_openCard\");\r\n        // this.btn_openSound = this.GetWndNode(\"gameBtnStartList/btn_go\");\r\n        // this.btn_openMusic = this.GetWndNode(\"gameBtnStartList/btn_go\");\r\n        this.boom_Ani = this.GetWndNode(\"boom_Ani\");\r\n        this.plane_Ani = this.GetWndNode(\"plane_Ani\");\r\n        this.liandui_Ani = this.GetWndNode(\"liandui_Ani\");\r\n        this.dragon_Ani = this.GetWndNode(\"dragon_Ani\");\r\n        this.GameEnd_Ani = this.GetWndNode(\"GameEnd_Ani\");\r\n        this.ShutDow_Ani = this.GetWndNode(\"ShutDow_Ani\");\r\n        this.bg_menu = this.GetWndNode(\"bg_menu\");\r\n        this.img_jpq = this.GetWndNode(\"img_jpq\");\r\n        this.img_dzp = this.GetWndNode(\"bg_dzp\");\r\n        this.lb_mypdgsj = this.GetWndNode(\"lb_mypdgsj\");\r\n        this.lb_ddbrjb = this.GetWndNode(\"lb_tsy02\");\r\n        this.giftNode = this.GetWndNode(\"giftNode\");\r\n        this.btn_talk = this.GetWndNode(\"btn_talk\");\r\n        this.btn_cardDevice = this.GetWndNode(\"btn_cardDevice\");\r\n\r\n        // this.img_bottom_input1 = this.GetWndNode(\"gameBtnStartList/btn_go\");\r\n        // this.img_bottom_input2 = this.GetWndNode(\"gameBtnStartList/btn_go\");\r\n\r\n        this.labelRoomId = this.GetWndNode(\"roomInfo/imgRoomIdDi/labelRoomId\").getComponent(cc.Label);\r\n        this.labeiWanfa = this.GetWndNode(\"img_bjl/labeiWanfa\").getComponent(cc.Label);\r\n        this.lb_jushu = this.GetWndNode(\"roomInfo/lb_jushu\").getComponent(cc.Label);\r\n        this.lb_publicScore = this.GetWndNode(\"bg_dzp/lb_publicScore\").getComponent(cc.Label);\r\n        this.lb_publicMultiple = this.GetWndNode(\"bg_dzp/lb_publicMultiple\").getComponent(cc.Label);\r\n        this.roomInfo = this.GetWndNode(\"roomInfo\");\r\n\r\n        this.lb_time = this.GetWndNode(\"roomInfo/imgTimeDi/lb_time\").getComponent(cc.Label);\r\n        this.img_dck = this.GetWndNode(\"roomInfo/imgTimeDi/img_dck\").getComponent(cc.ProgressBar);\r\n        this.img_wifi = this.GetWndNode(\"roomInfo/imgTimeDi/img_wifi\").getComponent(cc.Sprite);\r\n\r\n        //公共消息\r\n        this.RegEvent(\"DDZ_PosContinueGame\", this.Event_PosContinueGame);\r\n        this.RegEvent(\"DDZ_DissolveRoom\", this.Event_DissolveRoom);\r\n        this.RegEvent(\"DDZ_StartVoteDissolve\", this.Event_StartVoteDissolve);//发起房间结算投票\r\n        this.RegEvent(\"DDZ_PosLeave\", this.Event_PosLeave);\r\n        this.RegEvent(\"DDZ_PosUpdate\", this.Event_PosUpdate);\r\n        this.RegEvent(\"DDZ_PosReadyChg\", this.Event_PosReadyChg);\r\n        this.RegEvent('GameGift',this.Event_GameGift);\r\n        this.RegEvent('ExitRoomSuccess',this.Event_ExitRoomSuccess);\r\n        this.RegEvent(\"DDZ_OnRoomNotFindByReason\", this.Event_OnRoomNotFindByReason, this);\r\n\r\n        this.RegEvent(\"OnCopyTextNtf\", this.OnEvt_CopyTextNtf, this);\r\n\r\n        //游戏消息\r\n        this.RegEvent(\"DDZSetStart\", this.Event_SetStart);\r\n\t    this.RegEvent(\"DDZSetEnd\", this.Event_SetEnd);\r\n        this.RegEvent(\"RoomEnd\", this.Event_RoomEnd);\r\n        this.RegEvent(\"SPlayer_Trusteeship\", this.OnPack_AutoStart);\r\n        this.RegEvent(\"ChatMessage\", this.Event_ChatMessage);\r\n        this.RegEvent(\"HandCard\", this.Event_ShowHandCard);\r\n        this.RegEvent(\"OpCard\", this.Event_OpCard);\r\n        this.RegEvent(\"ChangeStatus\", this.Event_ChangeStatus);\r\n        this.RegEvent(\"AddDouble\", this.Event_AddDouble);\r\n        this.RegEvent(\"OpenCard\", this.Event_OpenCard);\r\n        this.RegEvent(\"Hog\", this.Event_Hog);\r\n        this.RegEvent(\"OpenStartGame\", this.Event_OpenStartGame);\r\n        this.RegEvent(\"CardNumber\", this.Event_CardNumber);\r\n        \r\n        //比赛分不足时通知\r\n        this.RegEvent(\"SportsPointEnough\", this.Event_SportsPointEnough);\r\n        this.RegEvent(\"SportsPointNotEnough\", this.Event_SportsPointNotEnough);\r\n        //比赛分门槛不足时通知\r\n        this.RegEvent(\"SportsPointThresholdEnough\", this.Event_SportsPointThresholdEnough);\r\n        this.RegEvent(\"SportsPointThresholdNotEnough\", this.Event_SportsPointThresholdNotEnough);\r\n\r\n        this.RegEvent('CodeError',this.Event_CodeError);\r\n        cc.game.on(cc.game.EVENT_HIDE,  this.OnEventHide.bind(this));\r\n        cc.game.on(cc.game.EVENT_SHOW,  this.OnEventShow.bind(this));\r\n\r\n        this.Left = [false,true,false];\r\n\r\n        this.cardSpcedX = 0;\r\n\r\n        this.handCards.on(cc.Node.EventType.TOUCH_START, this.OnTouchStart, this);\r\n\t\tthis.handCards.on(cc.Node.EventType.TOUCH_MOVE, this.OnTouchMove, this);\r\n\t\tthis.handCards.on(cc.Node.EventType.TOUCH_END, this.OnTouchEnd, this);\r\n        this.handCards.on(cc.Node.EventType.TOUCH_CANCEL, this.OnTouchCancel, this);\r\n\r\n        this.boom_Ani.getComponent(cc.Animation).on('finished', this.OnAniPlayFinished, this);\r\n        this.plane_Ani.getComponent(cc.Animation).on('finished', this.OnAniPlayFinished, this);\r\n        this.liandui_Ani.getComponent(cc.Animation).on('finished', this.OnAniPlayFinished, this);\r\n        this.dragon_Ani.getComponent(cc.Animation).on('finished', this.OnAniPlayFinished, this);\r\n        this.GameEnd_Ani.getComponent(cc.Animation).on('finished', this.OnAniPlayFinished, this);\r\n        this.ShutDow_Ani.getComponent(cc.Animation).on('finished', this.OnAniPlayFinished, this);\r\n        for (var i = 0; i < 3; i++) {\r\n            let OpenCard_Ani = this.GetWndNode(\"sp_seat0\"+i+\"/OpenCard_Ani\");\r\n            OpenCard_Ani.getComponent(cc.Animation).on('finished', this.OnAniPlayFinished, this);\r\n        }\r\n        \r\n        this.InitData();\r\n\r\n        this.AddCardPrefab();\r\n\r\n        this.invitationNode = cc.instantiate(this.UIInvitation);\r\n        this.node.addChild(this.invitationNode);\r\n    },\r\n\r\n    OnShow:function(){\r\n        this.CheckUpdateNotice();\r\n        this.node.getChildByName(\"tip_exit_node\").active=false;\r\n        //确保该玩家还在该房间内，否则强制退出房间\r\n        let roomID = this.DDZRoomMgr.GetEnterRoomID();\r\n        app[app.subGameName + \"_NetManager\"]().SendPack(app.subGameName+\".C\"+app.subGameName.toUpperCase()+\"GetRoomID\", {},function(event){\r\n            if (event.roomID <= 0 || event.roomID != roomID) {\r\n                app[app.subGameName + \"Client\"].ExitGame();\r\n            }\r\n        },function(error){\r\n            app[app.subGameName + \"Client\"].ExitGame();\r\n        });\r\n        this.btn_talk.active = this.IsShowChat();\r\n        this.btn_cardDevice.active = this.IsShowCardDevice();\r\n         //初始化邀请在线好友的数据\r\n        this.roomCfg = this.DDZRoomMgr.GetEnterRoom().GetRoomConfig();\r\n        if (this.roomCfg.clubId > 0 || this.roomCfg.unionId > 0) {\r\n            this.invitationNode.active = true;\r\n            this.invitationNode.getComponent(this.invitationNode.name).InitData(this.roomCfg.clubId, this.roomCfg.unionId, roomID);\r\n        }else{\r\n            this.invitationNode.active = false;\r\n        }\r\n        if (cc.sys.isNative) {\r\n            app[app.subGameName + \"Client\"].RegEvent(\"EvtBatteryLevel\", this.OnEvent_BatteryLevel, this);\r\n            app[app.subGameName + \"_NativeManager\"]().CallToNative(\"registerReceiver\", []);\r\n        }\r\n        app[app.subGameName + \"Client\"].RegEvent(\"EvtSpeedTest\", this.OnEvent_SpeedTest, this);\r\n        this.isChoose = false;\r\n        this.AddHead();\r\n        this.HideAll();\r\n        this.unscheduleAllCallbacks();\r\n        this.SceneManager.PlayMusic(\"back_1\");\r\n        this.InitData();\r\n        this.ClearForbiddenTouch();\r\n        //设置牌间距,便于选牌\r\n        let handCardsSpacingX = this.handCards.getComponent(cc.Layout).spacingX;\r\n        let cardNodeWidth = this.cardPrefab.data.width;\r\n        this.cardSpcedX = cardNodeWidth + handCardsSpacingX;\r\n\r\n        let state = this.DDZRoomSet.GetRoomSetProperty(\"state\");\r\n        let disslove = this.DDZRoom.GetRoomProperty(\"dissolve\");\r\n        let roomState = this.DDZRoom.GetRoomProperty(\"state\");\r\n        this.xianShi = this.DDZRoom.GetRoomConfigByProperty(\"xianShi\");\r\n        //显示房间信息\r\n        this.labeiWanfa.string = this.WanFa();\r\n        if(app[app.subGameName + \"_ShareDefine\"]().isCoinRoom){\r\n            this.roomInfo.active = false;\r\n        }else{\r\n            this.roomInfo.active = true;\r\n            this.labelRoomId.string = \"房号：\"+this.DDZRoom.GetRoomProperty(\"key\");\r\n            let setID = this.DDZRoom.GetRoomProperty(\"setID\");\r\n            let current = this.DDZRoom.GetRoomConfigByProperty(\"setCount\");\r\n            this.lb_jushu.string = \"局数：\" + setID + \"/\" + current;\r\n        }\r\n        //显示叫分和倍数\r\n        this.UpdateScoreAndDouble();\r\n\r\n        //更新金币和钻石\r\n        this.UpdateSelfScore();\r\n        \r\n        if(disslove.endSec != 0){\r\n            //如果有人发起解散消息\r\n            this.FormManager.ShowForm(app.subGameName + \"_UIMessage02\");\r\n        }\r\n\r\n        if(roomState != this.ShareDefine.RoomState_Init){\r\n            let setInfo = this.DDZRoomSet.GetRoomSetInfo();\r\n            //更新记牌器\r\n            this.UpdateCardNum(setInfo.cardNumMap);\r\n            //如果有玩家托管  显示托管图标\r\n            let posList = this.DDZRoom.GetRoomProperty(\"posList\");\r\n            for(let i = 0; i < posList.length; i++){\r\n                let data = posList[i];\r\n                let pos = data['pos'];\r\n                let isAuto = data['trusteeship'];\r\n                if(isAuto){\r\n                    let headScript = this.GetUICardComponentByPos(pos);\r\n                    headScript.ShowAutoIcon(isAuto);\r\n                }\r\n            }\r\n            //分数\r\n            // this.DDZRoomPosMgr.OnPoint(setInfo.posInfo, true);\r\n            this.UpdatePlayerScore();\r\n            //更新地主牌\r\n            this.ShowDiZhuPai(setInfo.holeCards);\r\n            this.landowner = setInfo.landowner;\r\n            if (this.landowner != -1) {\r\n                //已经确认地主了\r\n                let uiPos = this.DDZRoomPosMgr.GetUIPosByDataPos(this.landowner);\r\n                let path = \"sp_seat0\" + uiPos + \"/head\" + \"/UIDDZHead\" + uiPos;\r\n                let headNode = this.GetWndNode(path);\r\n                let headScript = headNode.getComponent(\"UIDDZHead\");\r\n                headScript.Showlandowner(true);\r\n            }\r\n            //发牌阶段\r\n            if(state == this.ShareDefine.DDZSetState_FaPai){\r\n                this.InitGameStateCommon(state);\r\n                this.gameMultiple.active = false;\r\n            }\r\n            else if(state == this.ShareDefine.DDZSetState_Hog){\r\n                //抢地主阶段\r\n                this.InitGameStateCommon(state);\r\n                this.gameMultiple.active = false;\r\n                this.ShowBtnHog(setInfo.opPos,setInfo.isHaveHog);\r\n            }\r\n            else if(state == this.ShareDefine.DDZSetState_AddDouble){\r\n                //加倍阶段\r\n                this.InitGameStateCommon(state);\r\n                this.ShowBtnMultiple();\r\n            }\r\n            else if(state == this.ShareDefine.DDZSetState_Playing){\r\n                this.InitGameStateCommon(state);\r\n                this.gameMultiple.active = false;\r\n                this.LogicDDZGame.SetCardData(setInfo.opType, setInfo.cardList);\r\n                //显示当前操作位和上家出的牌\r\n                let time = this.DDZDefine.MaxTickTime[this.xianShi];\r\n                this.lastCircleEnd = setInfo.isFirstOp;\r\n                this.firstTurn = setInfo.isFirstOp;\r\n                if(setInfo.opPos == this.DDZRoomPosMgr.GetClientPos()){\r\n                    if(setInfo.isFirstOp){\r\n                        this.ShowBtnOutCard();\r\n                    }\r\n                    else{\r\n                        if(setInfo.opType == 0){\r\n                            this.ShowBtnOutCard();\r\n                        }\r\n                        else{\r\n                            let array = this.LogicDDZGame.GetTipCard();\r\n                            this.ForbiddenTouch(array);\r\n                            if(!array.length){\r\n                                if (this.isAutoPass()) {\r\n                                    time = this.DDZDefine.MinTickTime;\r\n                                }else{\r\n                                    this.ShowAllGameBtn();\r\n                                    time = this.DDZDefine.MinTickTime;\r\n                                    this.lb_mypdgsj.active = true;\r\n                                }\r\n                            }\r\n                            else{\r\n                                if (array.length == 0 || (array.length == 1 && array[0].length == 0)) {\r\n                                    this.lb_mypdgsj.active = true;\r\n                                }\r\n                                this.ShowAllGameBtn();\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n                //由于获取提示牌有排序了上家出牌，这边需要再次排序，从大到小\r\n                this.LogicDDZGame.SortCardByMax(setInfo.cardList);\r\n                this.ShowOutCard(setInfo.lastOpPos, setInfo.cardList);\r\n                this.SetSeat01OutCardPos(setInfo.lastOpPos, setInfo.cardList.length);\r\n                this.StartTickTime(setInfo.opPos, time);\r\n            }\r\n            else if(state == this.ShareDefine.DDZSetState_End){\r\n                //如果玩家已经准备则不显示结算界面\r\n                let clientPos = this.DDZRoomPosMgr.GetClientPos();\r\n                let clientPlayerInfo = this.DDZRoomPosMgr.GetPlayerInfoByPos(clientPos);\r\n                if(clientPlayerInfo[\"gameReady\"]){\r\n                    this.RefreshRoomShow();\r\n                    return;\r\n                }\r\n                this.FormManager.ShowForm(\"game/DDZ/UIDDZ_2DResult\");\r\n            }\r\n        }\r\n        else{\r\n            this.RefreshRoomShow();\r\n        }\r\n\r\n        //获取用户推广Url\r\n        this.GetTuiGuangUrl();\r\n    },\r\n\r\n    AddCardPrefab:function(){\r\n        //发牌的牌墩\r\n        this.allCards.active = false;\r\n        for(let i = 0; i < this.DDZDefine.MaxTableCard; i++){\r\n            let card = cc.instantiate(this.cardPrefab);\r\n            this.allCards.addChild(card);\r\n            card.active = false;\r\n            card.name = \"card_\" + (i+1).toString();\r\n        }\r\n\r\n        //玩家手牌\r\n        this.handCards.active = false;\r\n        for(let i = 0; i < this.DDZDefine.MaxHandCard; i++){\r\n            let card = cc.instantiate(this.cardPrefab);\r\n            card.active = false;\r\n            card.name = \"card_\" + (i+1).toString();\r\n            this.handCards.addChild(card);\r\n        }\r\n\r\n        //玩家打出去的牌\r\n        for(let i = 0; i < this.DDZDefine.MaxPlayer; i++){\r\n            let outCardList = this.node.getChildByName(\"outCardList\"+i);\r\n            outCardList.active = false;\r\n            for(let j = 0; j < this.DDZDefine.MaxHandCard; j++){\r\n                let card = cc.instantiate(this.cardPrefab);\r\n                card.active = false;\r\n                card.name = \"card_\" + (i+1).toString();\r\n                outCardList.addChild(card);\r\n            }\r\n        }\r\n\r\n        //玩家明牌的牌\r\n        for(let i = 1; i < this.DDZDefine.MaxPlayer; i++){\r\n            let openCardList = this.node.getChildByName(\"openCardList\"+i);\r\n            openCardList.active = false;\r\n            for(let j = 0; j < this.DDZDefine.MaxHandCard; j++){\r\n                let card = cc.instantiate(this.cardPrefab);\r\n                card.active = false;\r\n                card.name = \"card_\" + (i+1).toString();\r\n                openCardList.addChild(card);\r\n            }\r\n        }\r\n\r\n        //地主牌\r\n        for (var i = 0; i < 3; i++) {\r\n            let card = cc.instantiate(this.cardPrefab);\r\n            card.active = false;\r\n            card.scale = 0.28;\r\n            card.y = 6;\r\n            card.name = \"dzcard_\" + (i+1).toString();\r\n            this.img_dzp.getChildByName(\"dzpNode\").addChild(card);\r\n        }\r\n    },\r\n\r\n    SetSeat01OutCardPos:function(dataPos, len){\r\n        let uiPos = this.DDZRoomPosMgr.GetUIPosByDataPos(dataPos);\r\n        if(uiPos != 1) return;\r\n\r\n        let node = this.node.getChildByName(\"outCardList1\");\r\n        let posX = 520 - 20 * len;\r\n        node.x = posX;\r\n    },\r\n\r\n    //显示地主牌\r\n    ShowDiZhuPai:function(allDzCard = null){\r\n        this.img_dzp.active = true;\r\n        for (let i = 0; i < this.img_dzp.getChildByName(\"dzpNode\").children.length; i++) {\r\n            let dzCard = this.img_dzp.getChildByName(\"dzpNode\").children[i];\r\n            if (allDzCard == null || allDzCard.length == 0) {\r\n                dzCard.getChildByName(\"poker_back\").active = true;\r\n                dzCard.active = true;\r\n            }\r\n            else{\r\n                this.ShowCard(allDzCard[i], dzCard, true, false);\r\n            }\r\n        }\r\n    },\r\n    //显示抢地主按钮\r\n    ShowBtnHog:function(opPos, isHaveHog = false){\r\n        this.gameBtn.active = false;\r\n        let setInfo = this.DDZRoomSet.GetRoomSetInfo();\r\n        let posInfo = setInfo.posInfo;\r\n        let isAlreadyHog = false;\r\n        for (let i = 0; i < posInfo.length; i++) {\r\n            if (posInfo[i].posID == this.DDZRoomPosMgr.GetClientPos() && \r\n                posInfo[i].hog >= 1) {\r\n                isAlreadyHog = true;\r\n                break;\r\n            }\r\n        }\r\n        if (opPos == this.DDZRoomPosMgr.GetClientPos()) {\r\n            let quedingdizhu = this.DDZRoom.GetRoomConfigByProperty(\"quedingdizhu\");\r\n            if (quedingdizhu == this.DDZDefine.HogCommon) {\r\n                this.gameRobLandLord.active = true;\r\n                if (isHaveHog) {\r\n                    //图片变成不抢 抢地主\r\n                    let imgBtnNoRob = this.gameRobLandLord.getChildByName(\"btn_noRob\").getChildByName(\"lb_btn_bjb\");\r\n                    imgBtnNoRob.getComponent(cc.Label).string = \"不 抢\";\r\n                    let imgBtnRob = this.gameRobLandLord.getChildByName(\"btn_rob\").getChildByName(\"lb_btn_jb\");\r\n                    imgBtnRob.getComponent(cc.Label).string = \"抢地主\";\r\n                }\r\n                else{\r\n                    //图片变成不叫 叫地主\r\n                    let imgBtnNoRob = this.gameRobLandLord.getChildByName(\"btn_noRob\").getChildByName(\"lb_btn_bjb\");\r\n                    imgBtnNoRob.getComponent(cc.Label).string = \"不 叫\";\r\n                    let imgBtnRob = this.gameRobLandLord.getChildByName(\"btn_rob\").getChildByName(\"lb_btn_jb\");\r\n                    imgBtnRob.getComponent(cc.Label).string = \"叫地主\";\r\n                }\r\n                if (this.isWangZhaHog() && this.LogicDDZGame.IsHaveWangZhaOrBoom() && !isAlreadyHog) {\r\n                    this.gameRobLandLord.getChildByName(\"btn_noRob\").active = false;\r\n                }else{\r\n                    this.gameRobLandLord.getChildByName(\"btn_noRob\").active = true;\r\n                }\r\n                this.gameRobScore.active = false;\r\n            } else if (quedingdizhu == this.DDZDefine.HogScore) {\r\n                this.gameRobLandLord.active = false;\r\n                this.gameRobScore.active = true;\r\n                //根据当前叫分来显示对应按钮\r\n                let hogScore = this.DDZRoomSet.GetRoomSetProperty(\"hogScore\");\r\n                if (hogScore == 0) {\r\n                    this.gameRobScore.getChildByName(\"btn_1\").active = true;\r\n                    this.gameRobScore.getChildByName(\"btn_2\").active = true;\r\n                    this.gameRobScore.getChildByName(\"btn_3\").active = true;\r\n                }\r\n                else if (hogScore == 1) {\r\n                    this.gameRobScore.getChildByName(\"btn_1\").active = false;\r\n                    this.gameRobScore.getChildByName(\"btn_2\").active = true;\r\n                    this.gameRobScore.getChildByName(\"btn_3\").active = true;\r\n                }\r\n                else if (hogScore == 2) {\r\n                    this.gameRobScore.getChildByName(\"btn_1\").active = false;\r\n                    this.gameRobScore.getChildByName(\"btn_2\").active = false;\r\n                    this.gameRobScore.getChildByName(\"btn_3\").active = true;\r\n                }\r\n                else if (hogScore == 3) {\r\n                    this.gameRobScore.getChildByName(\"btn_1\").active = false;\r\n                    this.gameRobScore.getChildByName(\"btn_2\").active = false;\r\n                    this.gameRobScore.getChildByName(\"btn_3\").active = false;\r\n                }\r\n                if (this.isWangZhaHog() && this.LogicDDZGame.IsHaveWangZhaOrBoom() && !isAlreadyHog) {\r\n                    this.gameRobScore.getChildByName(\"btn_noRobScore\").active = false;\r\n                }else{\r\n                    this.gameRobScore.getChildByName(\"btn_noRobScore\").active = true;\r\n                }\r\n            }\r\n        }else{\r\n            this.gameRobLandLord.active = false;\r\n            this.gameRobScore.active = false;\r\n        }\r\n        this.StartTickTime(opPos, 15);\r\n    },\r\n\r\n    UpdateSelfScore:function(){\r\n\r\n    },\r\n    OnEvent_BatteryLevel: function (event) {\r\n        let power = event['Level'];\r\n        let status = event['status'];\r\n        this.img_dck.progress = power/100;\r\n    },\r\n    OnEvent_SpeedTest: function (event) {\r\n        let YanCi = event['yanci'];\r\n        if (YanCi < 300) {\r\n            this.img_wifi.spriteFrame = this.icon_signal[3];\r\n        } else if (YanCi < 500) {\r\n            this.img_wifi.spriteFrame = this.icon_signal[2];\r\n        } else if (YanCi < 1000) {\r\n            this.img_wifi.spriteFrame = this.icon_signal[1];\r\n        } else {\r\n            this.img_wifi.spriteFrame = this.icon_signal[0];\r\n        }\r\n    },//一局结束\r\n    Event_SetEnd:function(event){\r\n        this.unschedule(this.CallEverySecond);\r\n        let setEnd = this.DDZRoomSet.GetRoomSetProperty(\"setEnd\");\r\n        //显示动画\r\n        this.GameEnd_Ani.active = true;\r\n        if (setEnd.landowner == this.DDZRoomPosMgr.GetClientPos()) {\r\n            if (setEnd.pointList[this.DDZRoomPosMgr.GetClientPos()] > 0) {\r\n                this.GameEnd_Ani.getComponent(cc.Animation).stop(\"nongminshengli\");\r\n                this.GameEnd_Ani.getComponent(cc.Animation).stop(\"nongminshibai\");\r\n                this.GameEnd_Ani.getComponent(cc.Animation).stop(\"dizhushibai\");\r\n                this.GameEnd_Ani.getComponent(cc.Animation).play(\"dizhushengli\");\r\n                this.SoundManager.PlaySound(\"MusicEx_Win\",this.DDZDefine.SoundPath + \"MusicEx_Win\");\r\n            }else{\r\n                this.GameEnd_Ani.getComponent(cc.Animation).stop(\"nongminshengli\");\r\n                this.GameEnd_Ani.getComponent(cc.Animation).stop(\"nongminshibai\");\r\n                this.GameEnd_Ani.getComponent(cc.Animation).stop(\"dizhushengli\");\r\n                this.GameEnd_Ani.getComponent(cc.Animation).play(\"dizhushibai\");\r\n                this.SoundManager.PlaySound(\"MusicEx_Lose\",this.DDZDefine.SoundPath + \"MusicEx_Lose\");\r\n            }\r\n        }else{\r\n           if (setEnd.pointList[this.DDZRoomPosMgr.GetClientPos()] > 0) {\r\n                this.GameEnd_Ani.getComponent(cc.Animation).stop(\"dizhushengli\");\r\n                this.GameEnd_Ani.getComponent(cc.Animation).stop(\"nongminshibai\");\r\n                this.GameEnd_Ani.getComponent(cc.Animation).stop(\"dizhushibai\");\r\n                this.GameEnd_Ani.getComponent(cc.Animation).play(\"nongminshengli\");\r\n                this.SoundManager.PlaySound(\"MusicEx_Win\",this.DDZDefine.SoundPath + \"MusicEx_Win\");\r\n            }else{\r\n                this.GameEnd_Ani.getComponent(cc.Animation).stop(\"nongminshengli\");\r\n                this.GameEnd_Ani.getComponent(cc.Animation).stop(\"dizhushibai\");\r\n                this.GameEnd_Ani.getComponent(cc.Animation).stop(\"dizhushengli\");\r\n                this.GameEnd_Ani.getComponent(cc.Animation).play(\"nongminshibai\");\r\n                this.SoundManager.PlaySound(\"MusicEx_Lose\",this.DDZDefine.SoundPath + \"MusicEx_Lose\");\r\n            }\r\n        }\r\n        //是否留局。三家全没叫地主\r\n        let isPingJu = false;\r\n        if (setEnd.pointList[0] == 0 &&\r\n            setEnd.pointList[1] == 0 &&\r\n            setEnd.pointList[2] == 0) {\r\n            isPingJu = true;\r\n        }\r\n        //判断是否被春天\r\n        for (let i = 0; i < setEnd.robCloseList.length; i++) {\r\n            if (setEnd.robCloseList[i] == 1 && !isPingJu) {\r\n                this.ShutDow_Ani.active = true;\r\n                this.ShutDow_Ani.getComponent(cc.Animation).stop(\"fanchuntian\");\r\n                this.ShutDow_Ani.getComponent(cc.Animation).play(\"chuntian\");\r\n                break;\r\n            }\r\n            else if (setEnd.robCloseList[i] == -1 && !isPingJu) {\r\n                this.ShutDow_Ani.active = true;\r\n                this.ShutDow_Ani.getComponent(cc.Animation).stop(\"chuntian\");\r\n                this.ShutDow_Ani.getComponent(cc.Animation).play(\"fanchuntian\");\r\n                break;\r\n            }\r\n        }\r\n        \r\n        this.UpdatePlayerScore();\r\n        //发送明牌消息\r\n        // let roomID = this.DDZRoom.GetRoomProperty(\"roomID\");\r\n        // this.DDZRoomMgr.SendOpenCard(roomID, 1, 1);\r\n\r\n        let self = this;\r\n        this.scheduleOnce(function(){\r\n            self.FormManager.ShowForm(\"game/DDZ/UIDDZ_2DResult\");\r\n        },2.0);\r\n    },\r\n\r\n    Event_OnRoomNotFindByReason:function(event){\r\n        let roomID = this.DDZRoom.GetRoomProperty(\"roomID\");\r\n        if (roomID != event.roomID) return;\r\n        this.ShowSysMsg(event.msg);\r\n        //弹出总结算\r\n        this.FormManager.ShowForm(\"game/DDZ/UIDDZ_2DRecord\");\r\n    },\r\n    //房间解散\r\n    Event_DissolveRoom:function(event){\r\n\r\n        let argDict = event;\r\n        let ownnerForce = argDict[\"ownnerForce\"];\r\n\r\n        //未开启房间游戏时才会触发\r\n        if(ownnerForce){\r\n            let room = this.DDZRoomMgr.GetEnterRoom();\r\n            //如果是房主主动接撒直接退出\r\n            if(room && room.IsClientIsOwner()){\r\n                // app[app.subGameName + \"_SceneManager\"]().LoadScene(\"ddzMainScene\");\r\n                app[app.subGameName + \"Client\"].ExitGame();\r\n            }\r\n            else{\r\n                this.SetWaitForConfirm('OwnnerForceRoom',this.ShareDefine.ConfirmOK);\r\n            }\r\n        }\r\n        else if (event.dissolveNoticeType == 1) {\r\n            this.SetWaitForConfirm('SportsPointDissolveRoom',this.ShareDefine.ConfirmOK,[event.msg]);\r\n        }else if(event.dissolveNoticeType == 3){\r\n            this.SetWaitForConfirm('MSG_BeDissolve',this.ShareDefine.ConfirmOK,[event.msg]);\r\n        }\r\n        else{\r\n            let state = this.DDZRoomMgr.GetEnterRoom().GetRoomProperty(\"state\");\r\n            //如果没有打完一局不会下发roomend,直接显示2次弹框\r\n            if(state != this.ShareDefine.RoomState_End){\r\n                this.SetWaitForConfirm('DissolveRoom',this.ShareDefine.ConfirmOK);\r\n                this.FormManager.CloseForm(app.subGameName + \"_UIMessage02\");\r\n            }\r\n            //如果有roomend数据显示 结果界面\r\n            else{\r\n                this.FormManager.CloseForm(app.subGameName + \"_UIMessage02\");\r\n                this.FormManager.ShowForm(\"game/DDZ/UIDDZ_2DRecord\");\r\n            }\r\n\r\n        }\r\n    },\r\n});"]}