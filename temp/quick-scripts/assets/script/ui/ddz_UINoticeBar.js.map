{"version":3,"sources":["ddz_UINoticeBar.js"],"names":["app","require","cc","Class","extends","subGameName","properties","msg","Node","OnCreateInit","NetManager","ddz_NetManager","speed","msgList","SendPack","GetNoticeMsg","bind","OnShow","argList","Array","prototype","slice","call","arguments","count","runMsg","stopAllActions","length","getComponent","Label","string","node","getChildByName","x","width","y","height","mWidth","moveX","time","self","seq","sequence","moveTo","v2","callFunc","runAction","serverPack","list","idx","data","push","content"],"mappings":";;;;;;AAAA;;;;AAIA,IAAIA,MAAMC,QAAQ,SAAR,CAAV;;AAEAC,GAAGC,KAAH,CAAS;AACRC,WAASH,QAAQD,IAAIK,WAAJ,GAAkB,WAA1B,CADD;;AAGRC,cAAY;AACXC,SAAIL,GAAGM;AADI,GAHJ;;AAORC,gBAAa,wBAAU;;AAEtB,SAAKC,UAAL,GAAkBV,IAAIW,cAAJ,EAAlB;;AAEA,SAAKC,KAAL,GAAa,EAAb;;AAEA,SAAKC,OAAL,GAAe,EAAf;;AAEA,SAAKH,UAAL,CAAgBI,QAAhB,CAAyB,oBAAzB,EAA+C,EAA/C,EAAmD,KAAKC,YAAL,CAAkBC,IAAlB,CAAuB,IAAvB,CAAnD;AACA,GAhBO;;AAkBRC,UAAO,kBAAU;;AAEhB,QAAIC,UAAUC,MAAMC,SAAN,CAAgBC,KAAhB,CAAsBC,IAAtB,CAA2BC,SAA3B,CAAd;;AAEA,SAAKC,KAAL,GAAa,CAAb;;AAEA,SAAKC,MAAL;AACA,GAzBO;;AA2BRA,UAAO,kBAAU;;AAEhB,SAAKlB,GAAL,CAASmB,cAAT;;AAEA,QAAG,CAAC,KAAKb,OAAL,CAAac,MAAjB,EAAyB;;AAEzB,QAAG,KAAKH,KAAL,IAAc,KAAKX,OAAL,CAAac,MAA9B,EAAqC;AACpC,WAAKH,KAAL,GAAa,CAAb;AACA;;AAED,SAAKjB,GAAL,CAASqB,YAAT,CAAsB1B,GAAG2B,KAAzB,EAAgCC,MAAhC,GAAyC,KAAKjB,OAAL,CAAa,KAAKW,KAAlB,CAAzC;;AAEA,QAAIO,OAAO,KAAKA,IAAL,CAAUC,cAAV,CAAyB,IAAzB,CAAX;;AAEA,SAAKzB,GAAL,CAAS0B,CAAT,GAAaF,KAAKG,KAAL,GAAW,CAAX,GAAeH,KAAKE,CAAjC;AACA,SAAK1B,GAAL,CAAS4B,CAAT,GAAaJ,KAAKK,MAAL,GAAY,CAAzB;;AAEA,QAAIC,SAAS,KAAK9B,GAAL,CAAS2B,KAAtB;;AAEA,QAAII,QAAQP,KAAKE,CAAL,GAASF,KAAKG,KAAL,GAAW,CAApB,GAAwBG,MAApC;;AAEA,QAAIE,OAAO,CAACR,KAAKG,KAAL,GAAaG,MAAd,IAAsB,KAAKzB,KAAtC;;AAEA,QAAI4B,OAAO,IAAX;;AAEA,QAAIC,MAAMvC,GAAGwC,QAAH,CAAYxC,GAAGyC,MAAH,CAAUJ,IAAV,EAAgBrC,GAAG0C,EAAH,CAAMN,KAAN,EAAY,KAAK/B,GAAL,CAAS4B,CAArB,CAAhB,CAAZ,EAAqDjC,GAAG2C,QAAH,CAAY,YAAU;AACpF,WAAKpB,MAAL;AACA,KAF8D,EAE5D,IAF4D,CAArD,CAAV;;AAIA,SAAKlB,GAAL,CAASuC,SAAT,CAAmBL,GAAnB;;AAEA,SAAKjB,KAAL;AACA,GA3DO;;AA6DRT,gBAAa,sBAASgC,UAAT,EAAoB;AAChC,QAAIC,OAAOD,UAAX;;AAEA,QAAG,CAACC,KAAKrB,MAAT,EAAiB;;AAEjB,SAAI,IAAIsB,MAAM,CAAd,EAAiBA,MAAMD,KAAKrB,MAA5B,EAAoCsB,KAApC,EAA0C;AACzC,UAAIC,OAAOF,KAAKC,GAAL,CAAX;AACA,WAAKpC,OAAL,CAAasC,IAAb,CAAkBD,KAAKE,OAAvB;AACA;;AAED,SAAK3B,MAAL;AACA;;AAxEO,CAAT","file":"ddz_UINoticeBar.js","sourceRoot":"../../../../../assets/script/ui","sourcesContent":["/*\r\n UIDice.js 摇色子界面\r\n */\r\n\r\nvar app = require(\"ddz_app\");\r\n\r\ncc.Class({\r\n\textends: require(app.subGameName + \"_BaseForm\"),\r\n\r\n\tproperties: {\r\n\t\tmsg:cc.Node,\r\n\t},\r\n\r\n\tOnCreateInit:function(){\r\n\r\n\t\tthis.NetManager = app.ddz_NetManager();\r\n\t\t\r\n\t\tthis.speed = 30;\r\n\r\n\t\tthis.msgList = [];\r\n\r\n\t\tthis.NetManager.SendPack(\"game.CSystemNotice\", {}, this.GetNoticeMsg.bind(this));\r\n\t},\r\n\r\n\tOnShow:function(){\r\n \r\n\t\tlet argList = Array.prototype.slice.call(arguments);\r\n\r\n\t\tthis.count = 0;\r\n\r\n\t\tthis.runMsg();\r\n\t},\r\n\r\n\trunMsg:function(){\r\n\r\n\t\tthis.msg.stopAllActions();\r\n\r\n\t\tif(!this.msgList.length) return;\r\n\r\n\t\tif(this.count >= this.msgList.length){\r\n\t\t\tthis.count = 0;\r\n\t\t}\r\n\r\n\t\tthis.msg.getComponent(cc.Label).string = this.msgList[this.count];\r\n\t\t\r\n\t\tlet node = this.node.getChildByName(\"bg\");\r\n\r\n\t\tthis.msg.x = node.width/2 + node.x;\r\n\t\tthis.msg.y = node.height/2;\r\n\r\n\t\tlet mWidth = this.msg.width;\r\n\r\n\t\tlet moveX = node.x - node.width/2 - mWidth;\r\n\r\n\t\tlet time = (node.width + mWidth)/this.speed;\r\n\r\n\t\tlet self = this;\r\n\r\n\t\tlet seq = cc.sequence(cc.moveTo(time, cc.v2(moveX,this.msg.y)),cc.callFunc(function(){\r\n\t\t\tthis.runMsg();\r\n\t\t}, this));\r\n\r\n\t\tthis.msg.runAction(seq);\r\n\r\n\t\tthis.count++;\r\n\t},\r\n\r\n\tGetNoticeMsg:function(serverPack){\r\n\t\tlet list = serverPack;\r\n\r\n\t\tif(!list.length) return;\r\n\r\n\t\tfor(let idx = 0; idx < list.length; idx++){\r\n\t\t\tlet data = list[idx];\r\n\t\t\tthis.msgList.push(data.content);\r\n\t\t}\r\n\r\n\t\tthis.runMsg();\r\n\t},\r\n\r\n});\r\n"]}