{"version":3,"sources":["ddz_UIRoomCopy.js"],"names":["app","require","cc","Class","extends","subGameName","properties","OnCreateInit","RegEvent","OnEvt_CopyTextNtf","OnEvt_DDShare","OnEvt_XLShare","SDKManager","ddz_SDKManager","OnShow","roomID","title","gamedesc","weChatAppShareUrl","event","detail","code","ShowSysMsg","msg","OnClick","btnName","btnNode","ShareWX","CloseForm","ShareDD","ShareXL","ErrLog","Share","CopyRoomKey","str","sys","isNative","argList","toString","promisefunc","resolve","reject","ddz_NativeManager","CallToNative","bluebird"],"mappings":";;;;;;AAAA,IAAIA,MAAMC,QAAQ,SAAR,CAAV;AACAC,GAAGC,KAAH,CAAS;AACLC,aAASH,QAAQD,IAAIK,WAAJ,GAAkB,WAA1B,CADJ;;AAGLC,gBAAY,EAHP;AAMLC,kBAAc,wBAAY;AACvB,aAAKC,QAAL,CAAc,eAAd,EAA+B,KAAKC,iBAApC;AACA,aAAKD,QAAL,CAAc,WAAd,EAA2B,KAAKE,aAAhC;AACA,aAAKF,QAAL,CAAc,WAAd,EAA2B,KAAKG,aAAhC;AACA,aAAKC,UAAL,GAAgBZ,IAAIa,cAAJ,EAAhB;AACF,KAXI;AAYLC,YAAQ,gBAAUC,MAAV,EAAiBC,KAAjB,EAAuBC,QAAvB,EAAgCC,iBAAhC,EAAmD;AACvD,aAAKH,MAAL,GAAYA,MAAZ;AACH,aAAKC,KAAL,GAAWA,KAAX;AACA,aAAKC,QAAL,GAAcA,QAAd;AACA,aAAKC,iBAAL,GAAuBA,iBAAvB;AACA,KAjBI;AAkBLT,uBAAkB,2BAASU,KAAT,EAAe;AAC7B,YAAG,KAAKA,MAAMC,MAAN,CAAaC,IAArB,EACI,KAAKC,UAAL,CAAgB,SAAOH,MAAMC,MAAN,CAAaG,GAApC,EADJ,KAGI,KAAKD,UAAL,CAAgB,QAAhB;AACP,KAvBI;AAwBLZ,mBAAc,uBAASS,KAAT,EAAe;AACzB;;;;;;;;;;;;AAYH,KArCI;AAsCLR,mBAAc,uBAASQ,KAAT,EAAe;AACzB;AACA;;;;;;;;;AASH,KAjDI;AAkDLK,aAAQ,iBAASC,OAAT,EAAkBC,OAAlB,EAA0B;AAC9B,YAAGD,WAAW,QAAd,EAAuB;AACnB,iBAAKE,OAAL;AACA,iBAAKC,SAAL;AACH,SAHD,MAGM,IAAGH,WAAW,QAAd,EAAuB;AACzB,iBAAKI,OAAL;AACA,iBAAKD,SAAL;AACH,SAHK,MAGA,IAAGH,WAAW,QAAd,EAAuB;AACzB,iBAAKK,OAAL;AACA,iBAAKF,SAAL;AACH,SAHK,MAGD;AACD,iBAAKG,MAAL,CAAY,sBAAZ,EAAoCN,OAApC;AACH;AACJ,KA/DI;AAgELE,aAAQ,mBAAU;AACjB,aAAKf,UAAL,CAAgBoB,KAAhB,CAAsB,KAAKhB,KAA3B,EAAkC,KAAKC,QAAvC,EAAiD,KAAKC,iBAAtD,EAAyE,GAAzE;AACA,KAlEI;AAmELW,aAAQ,mBAAU;AACd,aAAKjB,UAAL,CAAgBiB,OAAhB,CAAwB,KAAKb,KAA7B,EAAoC,KAAKC,QAAzC,EAAmD,KAAKC,iBAAxD;AACH,KArEI;AAsELY,aAAQ,mBAAU;AACd,aAAKlB,UAAL,CAAgBkB,OAAhB,CAAwB,KAAKd,KAA7B,EAAoC,KAAKC,QAAzC,EAAmD,KAAKC,iBAAxD;AACH,KAxEI;AAyELe,iBAAY,uBAAU;AAClB,YAAIC,MAAM,QAAM,KAAKnB,MAArB;AACA,YAAGb,GAAGiC,GAAH,CAAOC,QAAV,EAAmB;AACf,gBAAIC,UAAU,CAAC,EAAC,QAAO,KAAR,EAAc,SAAQH,IAAII,QAAJ,EAAtB,EAAD,CAAd;AACA,gBAAIC,cAAc,SAAdA,WAAc,CAASC,OAAT,EAAkBC,MAAlB,EAAyB;AACvCzC,oBAAI0C,iBAAJ,GAAwBC,YAAxB,CAAqC,UAArC,EAAiDN,OAAjD;AACH,aAFD;AAGA,mBAAO,IAAIrC,IAAI4C,QAAR,CAAiBL,WAAjB,CAAP;AACH;AACJ;AAlFI,CAAT","file":"ddz_UIRoomCopy.js","sourceRoot":"../../../../../assets/script/ui","sourcesContent":["var app = require(\"ddz_app\");\r\ncc.Class({\r\n    extends: require(app.subGameName + \"_BaseForm\"),\r\n\r\n    properties: {\r\n\t\t\r\n    },\r\n    OnCreateInit: function () {\r\n       this.RegEvent(\"OnCopyTextNtf\", this.OnEvt_CopyTextNtf);\r\n       this.RegEvent(\"OnDDShare\", this.OnEvt_DDShare);\r\n       this.RegEvent(\"OnXLShare\", this.OnEvt_XLShare);\r\n       this.SDKManager=app.ddz_SDKManager();\r\n    },\r\n    OnShow: function (roomID,title,gamedesc,weChatAppShareUrl) {\r\n        this.roomID=roomID;\r\n    \tthis.title=title;\r\n    \tthis.gamedesc=gamedesc;\r\n    \tthis.weChatAppShareUrl=weChatAppShareUrl;\r\n    },\r\n    OnEvt_CopyTextNtf:function(event){\r\n        if(0 == event.detail.code)\r\n            this.ShowSysMsg(\"已复制：\"+event.detail.msg);\r\n        else\r\n            this.ShowSysMsg(\"复制房号失败\");\r\n    },\r\n    OnEvt_DDShare:function(event){\r\n        /*if(0 == event.detail.ErrCode){\r\n            this.ShowSysMsg(\"钉钉分享成功\");\r\n        }else if(2 == event.detail.ErrCode){\r\n            this.ShowSysMsg(\"取消钉钉分享\");\r\n        }else{\r\n            if(event.detail.ErrStr=='Canceled By User.'){\r\n                this.ShowSysMsg(\"取消钉钉分享\");\r\n            }else{\r\n                this.ShowSysMsg(\"钉钉分享失败：\"+event.detail.ErrStr);\r\n            }\r\n            \r\n        }*/\r\n    },\r\n    OnEvt_XLShare:function(event){\r\n        //\"ErrCode\": 0, //安卓返回值 0成功 -2取消  -4发送失败  -5没有安装 iOS返回值：0成功 1用户取消 3发送错误  4未知错误\r\n        /*if(0 == event.detail.ErrCode){\r\n            this.ShowSysMsg(\"闲聊分享成功\");\r\n        }else if(-2 == event.detail.ErrCode || 1 == event.detail.ErrCode){\r\n            this.ShowSysMsg(\"取消闲聊分享\");\r\n        }else if(-4 == event.detail.ErrCode || 3 == event.detail.ErrCode){\r\n            this.ShowSysMsg(\"闲聊分享发送错误\");\r\n        }else{\r\n            this.ShowSysMsg(\"闲聊分享失败\");\r\n        }*/\r\n    },\r\n    OnClick:function(btnName, btnNode){\r\n        if(btnName == \"btn_wx\"){\r\n            this.ShareWX();\r\n            this.CloseForm();\r\n        }else if(btnName == \"btn_dd\"){\r\n            this.ShareDD();\r\n            this.CloseForm();\r\n        }else if(btnName == \"btn_xl\"){\r\n            this.ShareXL();\r\n            this.CloseForm();\r\n        }else{\r\n            this.ErrLog(\"OnClick(%s) not find\", btnName);\r\n        }\r\n    },\r\n    ShareWX:function(){\r\n    \tthis.SDKManager.Share(this.title, this.gamedesc, this.weChatAppShareUrl, \"0\");\r\n    },\r\n    ShareDD:function(){\r\n        this.SDKManager.ShareDD(this.title, this.gamedesc, this.weChatAppShareUrl);\r\n    },\r\n    ShareXL:function(){\r\n        this.SDKManager.ShareXL(this.title, this.gamedesc, this.weChatAppShareUrl);\r\n    },\r\n    CopyRoomKey:function(){\r\n        let str = \"房号：\"+this.roomID;\r\n        if(cc.sys.isNative){\r\n            let argList = [{\"Name\":\"msg\",\"Value\":str.toString()}];\r\n            let promisefunc = function(resolve, reject){\r\n                app.ddz_NativeManager().CallToNative(\"copyText\", argList);\r\n            };\r\n            return new app.bluebird(promisefunc);\r\n        }\r\n    },\r\n});\r\n"]}