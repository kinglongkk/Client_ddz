{"version":3,"sources":["ddz_UITop.js"],"names":["app","require","cc","Class","extends","subGameName","properties","lb_heroName","Label","lb_heroID","node_head","Node","rightTop","OnCreateInit","closeformPath","RegEvent","Event_HeroProperty","WeChatHeadImage1","getComponent","OnShow","formPath","isShowFangka","isShowQuanka","isShowLedou","getChildByName","active","ShowFastCount","ShowRoomCard","ShowClubCard","ShowHero_NameOrID","event","argDict","gold","ddz_HeroManager","GetHeroProperty","string","heroRoomCard","heroClubCard","heroName","width","node","length","substring","heroID","i18n","t","ComTool","GetPid","ShowHeroHead","OnClick","btnName","btnNode","ExitGame","ddz_FormManager","CloseForm","ShowForm"],"mappings":"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","file":"ddz_UITop.js","sourceRoot":"../../../../../assets/script/ui","sourcesContent":["var app = require(\"ddz_app\");\r\ncc.Class({\r\n    extends: require(app.subGameName + \"_BaseForm\"),\r\n\r\n    properties: {\r\n        lb_heroName:cc.Label,\r\n        lb_heroID:cc.Label,\r\n        node_head:cc.Node,\r\n        rightTop:cc.Node,\r\n    },\r\n    OnCreateInit: function () {\r\n        this.closeformPath = \"\";\r\n        this.RegEvent(\"HeroProperty\", this.Event_HeroProperty);\r\n        this.WeChatHeadImage1 = this.node_head.getComponent(app.subGameName + \"_WeChatHeadImage\");\r\n    },\r\n    OnShow: function (formPath, isShowFangka = false, isShowQuanka = false, isShowLedou = false) {\r\n        this.closeformPath = formPath;\r\n        if (isShowFangka) {\r\n            this.rightTop.getChildByName('fangka').active = true;\r\n        }else{\r\n            this.rightTop.getChildByName('fangka').active = false;\r\n        }\r\n        if (isShowQuanka) {\r\n            this.rightTop.getChildByName('quanka').active = true;\r\n        }else{\r\n            this.rightTop.getChildByName('quanka').active = false;\r\n        }\r\n        if (isShowLedou) {\r\n            this.rightTop.getChildByName('ledou').active = true;\r\n        }else{\r\n            this.rightTop.getChildByName('ledou').active = false;\r\n        }\r\n        this.ShowFastCount();\r\n        this.ShowRoomCard();\r\n        this.ShowClubCard();\r\n        this.ShowHero_NameOrID();\r\n    },\r\n\r\n    Event_HeroProperty:function (event) {\r\n        let argDict = event;\r\n        if(argDict[\"Property\"] == \"gold\"){\r\n            this.ShowFastCount();\r\n        }\r\n        else if(argDict[\"Property\"] == \"roomCard\"){\r\n            this.ShowRoomCard();\r\n        }else if(argDict[\"Property\"] == \"clubCard\"){\r\n            this.ShowClubCard();\r\n        }\r\n    },\r\n    ShowFastCount:function () {\r\n        let gold = app.ddz_HeroManager().GetHeroProperty('gold');\r\n        this.rightTop.getChildByName('ledou').getChildByName('label').getComponent(cc.Label).string=gold;\r\n    },\r\n    ShowRoomCard:function () {\r\n        let heroRoomCard = app.ddz_HeroManager().GetHeroProperty(\"roomCard\");\r\n        this.rightTop.getChildByName('fangka').getChildByName('label').getComponent(cc.Label).string=heroRoomCard;\r\n    },\r\n    ShowClubCard:function () {\r\n        let heroClubCard = app.ddz_HeroManager().GetHeroProperty(\"clubCard\");\r\n        this.rightTop.getChildByName('quanka').getChildByName('label').getComponent(cc.Label).string=heroClubCard;\r\n    },\r\n\r\n    ShowHero_NameOrID:function () {\r\n        let heroName = app.ddz_HeroManager().GetHeroProperty(\"name\");\r\n        this.lb_heroName.string = heroName;\r\n        let width = this.lb_heroName.node.width;\r\n        if(heroName.length > 9 && width > 200)\r\n            this.lb_heroName.string = this.lb_heroName.string.substring(0,9);\r\n        let heroID = app.ddz_HeroManager().GetHeroProperty(\"pid\");\r\n        this.lb_heroID.string = app.i18n.t(\"UIMain_PIDText\",{\"pid\":this.ComTool.GetPid(heroID)});\r\n        this.WeChatHeadImage1.ShowHeroHead(heroID);\r\n\r\n    },\r\n    OnClick:function(btnName, btnNode){\r\n        if('btn_close' == btnName){\r\n            if(this.closeformPath != \"\"){\r\n                if (this.closeformPath == app.subGameName + \"_UIMain\") {\r\n                    app[app.subGameName + \"Client\"].ExitGame();\r\n                } else {\r\n                    app.ddz_FormManager().CloseForm(this.closeformPath);\r\n                    this.CloseForm();\r\n                    app.ddz_FormManager().ShowForm(app.subGameName + \"_UIMain\");\r\n                }\r\n            }\r\n        }else if('btn_head' == btnName){\r\n            // this.FormManager.ShowForm(\"UIUserInfo\");\r\n        }else if('btn_addGold' == btnName){\r\n            // this.FormManager.ShowForm(\"UIStore\",'btn_table0');\r\n        }else if('btn_addRoomCard' == btnName){\r\n            // this.FormManager.ShowForm(\"UIStore\",'btn_table1');\r\n        }else if('btn_addQuanCard' == btnName){\r\n            // this.FormManager.ShowForm('ui/club/UIClubStore');\r\n        }\r\n        \r\n    }\r\n});\r\n"]}