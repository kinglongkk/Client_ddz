{"version":3,"sources":["UIDDZ_2DResult.js"],"names":["app","require","cc","Class","extends","subGameName","properties","btn_share","Node","btn_exit","btn_continue","btn_openStart","sp_winLose","win","SpriteFrame","lose","icon_fct","icon_ct","boy","girl","playerList","room_Id","Label","lb_jushu","end_Time","room_MaxScore","playBackCode","OnCreateInit","DDZRoomMgr","DDZRoom","DDZRoomPosMgr","SoundManager","HeroManager","DDZRoomSet","ComTool","SDKManager","DDZDefine","bigWinner","ShowGameResult","room","GetEnterRoom","ErrLog","isCoinRoom","active","isEnd","setEnd","GetRoomSetProperty","allPlayer","GetRoomAllPlayerInfo","key","GetRoomProperty","setId","time","isReconnect","pointList","posInfo","GetRoomSetInfo","landowner","baseMark","setID","startTime","i","length","push","point","sort","a","b","ShowResultNormal","string","current","GetRoomConfigByProperty","sec","Math","round","GetDateYearMonthDayHourMinuteString","GetMaxScore","dizhufengding","idx","pos","playerNum","player","path","toString","playerNode","GetWndNode","GetClientPos","getComponent","Sprite","spriteFrame","winNode","getChildByName","loseNode","sportsPoint","sportsPointList","beishu","number","doubleNum","doubleNumList","difen","icon_robClose","robClose","robCloseList","head","ShowHeroHead","pid","playerName","name","substring","id","GetPid","sex","OnShow","FormManager","CloseForm","juShu","GetRoomConfig","setCount","GetRoomWanfa","children","child","OnClick","btnName","btnNode","SendPack","toUpperCase","practiceId","OnSuccess","bind","OnEnterRoomFailed","roomID","SendContinueGame","ShowForm","SendOpenCardStart","ShareScreen","ExitGame","serverPack"],"mappings":"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","file":"UIDDZ_2DResult.js","sourceRoot":"../../../../../../../assets/script/game/DDZ/ui","sourcesContent":["var app = require(\"ddz_app\");\r\ncc.Class({\r\n    extends: require(app.subGameName + \"_BaseForm\"),\r\n\r\n    properties: {\r\n        btn_share:cc.Node,\r\n        btn_exit:cc.Node,\r\n        btn_continue:cc.Node,\r\n        btn_openStart:cc.Node,\r\n        sp_winLose:cc.Node,\r\n        win:cc.SpriteFrame,\r\n        lose:cc.SpriteFrame,\r\n        icon_fct:cc.SpriteFrame,\r\n        icon_ct:cc.SpriteFrame,\r\n        boy:cc.SpriteFrame,\r\n        girl:cc.SpriteFrame,\r\n        playerList:cc.Node,\r\n\r\n        room_Id:cc.Label,\r\n        lb_jushu:cc.Label,\r\n        end_Time:cc.Label,\r\n        room_MaxScore:cc.Label,\r\n        playBackCode:cc.Label,\r\n    },\r\n\r\n    OnCreateInit: function () {\r\n        this.DDZRoomMgr = app.DDZRoomMgr();\r\n        this.DDZRoom = app.DDZRoom();\r\n        this.DDZRoomPosMgr = app.DDZRoomPosMgr();\r\n        this.SoundManager = app[app.subGameName + \"_SoundManager\"]();\r\n        this.HeroManager = app[app.subGameName + \"_HeroManager\"]();\r\n        this.DDZRoomSet = app.DDZRoomSet();\r\n        this.ComTool = app[app.subGameName + \"_ComTool\"]();\r\n        this.SDKManager = app[app.subGameName + \"_SDKManager\"]();\r\n        this.DDZDefine = app.DDZDefine();\r\n\r\n        this.bigWinner = 0;\r\n    },\r\n\r\n    ShowGameResult:function(){\r\n        let room = this.DDZRoomMgr.GetEnterRoom();\r\n        if(!room){\r\n            this.ErrLog(\"Event_PosContinueGame not enter room\");\r\n            return\r\n        }\r\n        if(!app[app.subGameName + \"_ShareDefine\"]().isCoinRoom){\r\n            this.btn_exit.active = false;\r\n        }\r\n        else{\r\n            this.btn_exit.active = true;\r\n        }\r\n\r\n        //最后一局可直接退出\r\n        if(!this.isEnd){\r\n            this.btn_exit.active = false;\r\n        }else{\r\n            this.btn_exit.active = true;\r\n        }\r\n\r\n        let setEnd = this.DDZRoomSet.GetRoomSetProperty(\"setEnd\");\r\n        let allPlayer = this.DDZRoomPosMgr.GetRoomAllPlayerInfo();\r\n        let key = this.DDZRoomMgr.GetEnterRoom().GetRoomProperty(\"key\");\r\n        let setId = this.DDZRoomMgr.GetEnterRoom().GetRoomProperty(\"setID\");\r\n        let time = 0;\r\n        let isReconnect = false;\r\n        let pointList = [];\r\n        if(!setEnd){\r\n            setEnd = {};\r\n            setEnd.posInfo = this.DDZRoomSet.GetRoomSetInfo().posInfo;\r\n            setEnd.landowner = this.DDZRoomSet.GetRoomSetInfo().landowner;\r\n            setEnd.baseMark = this.DDZRoomSet.GetRoomSetInfo().baseMark;\r\n            setEnd.playBackCode = this.DDZRoomSet.GetRoomSetInfo().playBackCode;\r\n            setId = this.DDZRoomSet.GetRoomSetInfo().setID;\r\n            time = this.DDZRoomSet.GetRoomSetInfo().startTime;\r\n            isReconnect = true;\r\n            for(let i = 0; i < setEnd.posInfo.length; i++){\r\n                pointList.push(setEnd.posInfo[i].point);\r\n            }\r\n        }\r\n        else{\r\n            time = setEnd.startTime;\r\n            for(let i = 0; i < setEnd.pointList.length; i++){\r\n                pointList.push(setEnd.pointList[i]);\r\n            }\r\n        }\r\n\r\n        pointList.sort(function(a, b){\r\n            return b - a;\r\n        });\r\n\r\n        this.bigWinner = pointList[0];\r\n\r\n        this.ShowResultNormal(allPlayer, setEnd, isReconnect);\r\n\r\n        this.room_Id.string = \"房间号:\" + key;\r\n        let current = room.GetRoomConfigByProperty(\"setCount\");\r\n        this.lb_jushu.string = setId + \"/\" + current;\r\n        let sec = Math.round(time/1000);\r\n        this.end_Time.string = this.ComTool.GetDateYearMonthDayHourMinuteString(sec);\r\n        //地主封顶分数\r\n        this.room_MaxScore.string = \"地主封顶分数:\"+this.GetMaxScore();\r\n        if (setEnd.playBackCode && setEnd.playBackCode != 0) {\r\n            this.playBackCode.string = \"回放码:\"+setEnd.playBackCode;\r\n        }else{\r\n            this.playBackCode.string = \"\";\r\n        }\r\n        \r\n    },\r\n\r\n    GetMaxScore:function(){\r\n        let dizhufengding = this.DDZRoom.GetRoomConfigByProperty('dizhufengding');\r\n        if(dizhufengding == 0){\r\n            return '32分';\r\n        }\r\n        else if(dizhufengding == 1){\r\n            return '64分';\r\n        }\r\n        else if(dizhufengding == 2){\r\n            return '128分';\r\n        }else if(dizhufengding == 3){\r\n            return '不限制';\r\n        }\r\n    },\r\n\r\n    ShowResultNormal:function(allPlayer, setEnd, isReconnect){\r\n        let playerList = [];\r\n        for(let idx in allPlayer){\r\n            playerList.push(allPlayer[idx]);\r\n        }\r\n        //先排序一下\r\n        playerList.sort(function(a, b){\r\n            return a.pos - b.pos;\r\n        });\r\n\r\n        let playerNum = playerList.length;\r\n\r\n        for (let i = 0; i < playerList.length; i++) {\r\n            let player = playerList[i];\r\n\r\n            let path = \"playerList/player\" + (i+1).toString();\r\n            let playerNode = this.GetWndNode(path);\r\n            playerNode.active = true;\r\n            \r\n            // if(player.pid == this.DDZRoomMgr.GetEnterRoom().GetRoomProperty(\"ownerID\")){\r\n            //     playerNode.getChildByName(\"user_info\").getChildByName(\"fangzhu\").active = true;\r\n            // }\r\n            let point = 0;\r\n            if(isReconnect){\r\n                point = setEnd.posInfo[i].point;\r\n            }\r\n            else{\r\n                point = setEnd.pointList[i];\r\n            }\r\n            //显示胜利或失败图片和音效 \r\n            if(player.pos == this.DDZRoomPosMgr.GetClientPos()){\r\n                if(point > 0){\r\n                    // this.SoundManager.PlaySound(\"win\");\r\n                    this.sp_winLose.getComponent(cc.Sprite).spriteFrame = this.win;\r\n                    // this.SoundManager.PlaySound(\"sssResult_Win\");\r\n                }\r\n                else{\r\n                    // this.SoundManager.PlaySound(\"fail\");\r\n                    this.sp_winLose.getComponent(cc.Sprite).spriteFrame = this.lose;\r\n                    // this.SoundManager.PlaySound(\"sssResult_Lose\");\r\n                }\r\n            }\r\n\r\n            //玩家分数\r\n            let winNode = playerNode.getChildByName(\"lb_win_num\");\r\n            let loseNode = playerNode.getChildByName(\"lb_lose_num\");\r\n            winNode.active = false;\r\n            loseNode.active = false;\r\n\r\n            // //大赢家\r\n            // if(point == this.bigWinner){\r\n            //     playerNode.getChildByName(\"icon_win\").active = true;\r\n            // }\r\n            \r\n            //地主标识\r\n            if (setEnd.landowner == player.pos) {\r\n                playerNode.getChildByName(\"user_info\").getChildByName(\"icon_dzm\").active = true;\r\n            }else{\r\n                playerNode.getChildByName(\"user_info\").getChildByName(\"icon_dzm\").active = false;\r\n            }\r\n    \r\n            if(point > 0){\r\n                winNode.active = true;\r\n                winNode.getComponent(cc.Label).string = \"+\" + point;\r\n            }\r\n            else{\r\n                loseNode.active = true;\r\n                loseNode.getComponent(cc.Label).string = point;\r\n            }\r\n            //显示比赛分\r\n            if(isReconnect){\r\n                if (typeof(setEnd.posInfo[i].sportsPoint)!=\"undefined\") {\r\n                    if (setEnd.posInfo[i].sportsPoint > 0) {\r\n                        playerNode.getChildByName(\"lb_loseSp\").getComponent(cc.Label).string = \"\";\r\n                        playerNode.getChildByName(\"lb_winSp\").getComponent(cc.Label).string = \"+\"+setEnd.posInfo[i].sportsPoint;\r\n                    }else{\r\n                        playerNode.getChildByName(\"lb_winSp\").getComponent(cc.Label).string = \"\";\r\n                        playerNode.getChildByName(\"lb_loseSp\").getComponent(cc.Label).string = \"\"+setEnd.posInfo[i].sportsPoint;\r\n                    }\r\n                    playerNode.getChildByName(\"lb_sptitle\").active = true;\r\n                }else{\r\n                    playerNode.getChildByName(\"lb_sptitle\").active = false;\r\n                    playerNode.getChildByName(\"lb_loseSp\").getComponent(cc.Label).string = \"\";\r\n                    playerNode.getChildByName(\"lb_winSp\").getComponent(cc.Label).string = \"\";\r\n                }\r\n            }\r\n            else{\r\n                if (typeof(setEnd.sportsPointList)!=\"undefined\" && typeof(setEnd.sportsPointList[i])!=\"undefined\") {\r\n                    if (setEnd.sportsPointList[i] > 0) {\r\n                        playerNode.getChildByName(\"lb_loseSp\").getComponent(cc.Label).string = \"\";\r\n                        playerNode.getChildByName(\"lb_winSp\").getComponent(cc.Label).string = \"+\"+setEnd.sportsPointList[i];\r\n                    }else{\r\n                        playerNode.getChildByName(\"lb_winSp\").getComponent(cc.Label).string = \"\";\r\n                        playerNode.getChildByName(\"lb_loseSp\").getComponent(cc.Label).string = \"\"+setEnd.sportsPointList[i];\r\n                    }\r\n                    playerNode.getChildByName(\"lb_sptitle\").active = true;\r\n                }else{\r\n                    playerNode.getChildByName(\"lb_sptitle\").active = false;\r\n                    playerNode.getChildByName(\"lb_loseSp\").getComponent(cc.Label).string = \"\";\r\n                    playerNode.getChildByName(\"lb_winSp\").getComponent(cc.Label).string = \"\";\r\n                }\r\n            }\r\n            \r\n            //倍数\r\n            playerNode.getChildByName(\"lb_beiShu\").active = true;\r\n            let beishu = playerNode.getChildByName(\"lb_beiShu\").getComponent(cc.Label);\r\n\r\n            let number = 0;\r\n\r\n            if(isReconnect){\r\n                number = setEnd.posInfo[i].doubleNum;\r\n            }\r\n            else{\r\n                number = setEnd.doubleNumList[player.pos];\r\n            }\r\n            \r\n            number <= 0 ? beishu.string = 1 : beishu.string = number;\r\n\r\n            //底分\r\n            playerNode.getChildByName(\"lb_difen\").active = true;\r\n            let difen = playerNode.getChildByName(\"lb_difen\").getComponent(cc.Label);\r\n            difen.string = setEnd.baseMark;\r\n\r\n            //显示春天或者反春天\r\n            let icon_robClose = playerNode.getChildByName(\"icon_robClose\");\r\n            icon_robClose.active = true;\r\n\r\n            let robClose = 0;\r\n            if (isReconnect) {\r\n                robClose = setEnd.posInfo[i].robClose;\r\n            }\r\n            else{\r\n                robClose = setEnd.robCloseList[player.pos];\r\n            }\r\n            \r\n            if (robClose == -1) {\r\n                icon_robClose.getComponent(cc.Sprite).spriteFrame = this.icon_fct;\r\n            }else if (robClose == 1) {\r\n                icon_robClose.getComponent(cc.Sprite).spriteFrame = this.icon_ct;    \r\n            }else{\r\n                icon_robClose.active = false;\r\n            }\r\n            \r\n            let head = playerNode.getChildByName(\"user_info\").getChildByName(\"head_img\").getComponent(app.subGameName + \"_WeChatHeadImage\");\r\n            head.ShowHeroHead(player.pid);\r\n            //玩家名字\r\n            let playerName = \"\";\r\n            playerName = player.name;\r\n            if(playerName.length > 6){\r\n                playerName = playerName.substring(0, 6) + '...';\r\n            }\r\n            let name = playerNode.getChildByName(\"user_info\").getChildByName(\"lable_name\").getComponent(cc.Label);\r\n            name.string = playerName;\r\n\r\n            let id = playerNode.getChildByName(\"user_info\").getChildByName(\"label_id\").getComponent(cc.Label);\r\n            id.string = \"ID:\"+this.ComTool.GetPid(player[\"pid\"]);\r\n\r\n            //玩家性别\r\n            let sex = playerNode.getChildByName(\"user_info\").getChildByName(\"sex\");\r\n            if (player.sex == 0) {\r\n                sex.getComponent(cc.Sprite).spriteFrame = this.boy;\r\n            }else{\r\n                sex.getComponent(cc.Sprite).spriteFrame = this.girl;\r\n            }\r\n        }\r\n    },\r\n\r\n    OnShow:function(){\r\n        this.FormManager.CloseForm(\"UIChat\");\r\n        let juShu = this.DDZRoom.GetRoomConfig().setCount;\r\n        let setID = this.DDZRoomMgr.GetEnterRoom().GetRoomProperty(\"setID\");\r\n        if(setID >= juShu && !app[app.subGameName + \"_ShareDefine\"]().isCoinRoom){\r\n            this.isEnd = true;\r\n            // this.btn_continue.getChildByName(\"icon\").getComponent(cc.Label).string = \"总结算\";\r\n            this.btn_openStart.active = false;\r\n        }\r\n        else{\r\n            this.isEnd = false;\r\n            // this.btn_continue.getChildByName(\"icon\").getComponent(cc.Label).string = \"继续\";\r\n            if(this.DDZRoom.GetRoomWanfa(0)){\r\n                this.btn_openStart.active = false;\r\n            }else{\r\n                this.btn_openStart.active = true;\r\n            }\r\n        }\r\n        if (app[app.subGameName + \"_ShareDefine\"]().isCoinRoom) {\r\n            this.btn_openStart.active = false;\r\n        }\r\n        for(let i = 0; i < this.playerList.children.length; i++){\r\n            let child = this.playerList.children[i];\r\n            child.active = false;\r\n        }\r\n        this.ShowGameResult();\r\n    },\r\n\r\n    OnClick:function(btnName, btnNode){\r\n        if(btnName == \"btn_jixu\"){\r\n            if(!this.isEnd){\r\n                if(app[app.subGameName + \"_ShareDefine\"]().isCoinRoom){\r\n                    app[app.subGameName + \"_NetManager\"]().SendPack(app.subGameName + \".C\" + app.subGameName.toUpperCase() + \"GoldRoom\", {practiceId:app[app.subGameName + \"_ShareDefine\"]().practiceId}, this.OnSuccess.bind(this),this.OnEnterRoomFailed.bind(this));\r\n                }\r\n                else{\r\n                    let room = this.DDZRoomMgr.GetEnterRoom();\r\n                    if(!room){\r\n                        this.ErrLog(\"Click_btn_ready not enter room\");\r\n                        return\r\n                    }\r\n                    let roomID = room.GetRoomProperty(\"roomID\");\r\n                    app[app.subGameName + \"_GameManager\"]().SendContinueGame(roomID);\r\n                }\r\n            }\r\n            else{\r\n                this.FormManager.ShowForm(\"game/DDZ/UIDDZ_2DRecord\");\r\n            }\r\n            \r\n        }\r\n        else if(btnName == \"btn_openStart\"){\r\n            let room = this.DDZRoomMgr.GetEnterRoom();\r\n            let roomID = room.GetRoomProperty(\"roomID\");\r\n            this.DDZRoomMgr.SendOpenCardStart(roomID, true);\r\n        }\r\n        else if(btnName == \"btn_share\"){\r\n            this.SDKManager.ShareScreen();\r\n        }\r\n        else if(btnName == \"btn_out\"){\r\n            // app[app.subGameName + \"_FormManager\"]().AddDefaultFormName(\"UIPractice\");\r\n            app[app.subGameName + \"Client\"].ExitGame();\r\n        }\r\n    },\r\n\r\n    OnSuccess:function(serverPack){\r\n        let roomID = serverPack.roomID;\r\n        app[app.subGameName + \"_NetManager\"]().SendPack('ddz.CDDZGetRoomInfo', {\"roomID\":roomID});\r\n    },\r\n\r\n    OnEnterRoomFailed:function(serverPack){\r\n        app[app.subGameName + \"Client\"].ExitGame();\r\n    },\r\n});\r\n"]}