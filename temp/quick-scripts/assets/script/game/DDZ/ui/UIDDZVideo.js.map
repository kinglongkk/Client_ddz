{"version":3,"sources":["UIDDZVideo.js"],"names":["app","require","cc","Class","extends","subGameName","properties","handCards","Node","control_list","img_dzp","boom_Ani","plane_Ani","cardPrefab","Prefab","wanfa","Label","lb_publicScore","lb_publicMultiple","OnCreateInit","SysDataManager","IntegrateImage","GetTableDict","NetManager","WeChatManager","DDZDefine","ShareDefine","PokerCard","RegNetPack","OnPack_PlayBackData","getComponent","Animation","on","OnAniPlayFinished","InitCard","curTabId","curRoomID","OnShow","switchGameData","sys","localStorage","getItem","playBackCode","JSON","parse","backCode","console","log","setItem","GetPlayBackDataByCode","string","HideAll","jin1","jin2","playerList","playerCount","playkey","playBack","NextPlayTime","pause","fadeOutTime","dPos","minplay","clientPos","PlayBackList","Array","SendPack","OnPack_VideoData","bind","OnVideoFailed","serverPack","SetWndProperty","playBackNum","key","id","msg","length","PlayBackJson","i","eval","playbackList","Math","round","Date","getTime","schedule","Play","Str2Json","roomKey","setID","setAll","setCount","roomID","tabId","SetRoomInfo","isSelf","GetHeroID","pid","pos","ShowPlayerInfo","active","MaxHandCard","card","instantiate","name","toString","addChild","MaxPlayer","outCardList","node","getChildByName","j","openCardList","scale","playercount","SetPlayInfo","playnow","max","GetUIPosByDataPos","dataPos","uiPos","GetPlayerPos","SetSeat01OutCardPos","len","posX","x","heroID","head","GetWndNode","ShowHeroHead","sp_info","ShowNode","HideAllOutCard","HideAllOpenCard","HideAllHandCard","children","child","outCard","HidePokerBack","poker_back","SetWanFa","cfg","isClub","WanFa","ShowPosLostConnect","posID","isLostConnect","seat","scheduleOnce","ShowShowJieSan","PlayData","data","type","res","waitSecond","indexOf","createPos","PlaySetStart","setPosCard","UpdateScoreAndDouble","setInfo","hogScore","roomDouble","PlayChangeStatus","PlayOpCard","PlayEnd","HideControl","now","PlayAddDouble","PlayRobClose","setEnd","ExitGame","ShowPass","cardList","ShowOutCard","trusteeshipNode","isFlash","opCardType","player","ShowSelfCard","ShowOpenCardList","SetAniPos","play","setPosition","v2","y","state","DDZSetState_Hog","holeCards","cardNode","cardValue","ShowCard","DDZSetState_AddDouble","addDoubleList","isLandowner","landowner","Layout","spacingX","SortCardByMax","pass","outCardNodeList","value","pokers","sort","a","b","value_a","value_b","event","target","OnClose","OnClick","btnName","btnNode","OnClickPause","OnClickPlay","ShowSysMsg","self","sendPack","roomId","toUpperCase","playDataGame","GametTypeID2PinYin","gameId","error","ShowControl","action","fadeOut","runAction","fadeIn","OnUpdate","cardType","GetPokeCard","jsondata","json"],"mappings":";;;;;;AAAA,IAAIA,MAAMC,QAAQ,SAAR,CAAV;AACAC,GAAGC,KAAH,CAAS;AACLC,aAASH,QAAQD,IAAIK,WAAJ,GAAkB,WAA1B,CADJ;;AAGLC,gBAAY;AACRC,mBAAUL,GAAGM,IADL;AAERC,sBAAaP,GAAGM,IAFR;AAGRE,iBAAQR,GAAGM,IAHH;AAIRG,kBAAST,GAAGM,IAJJ;AAKRI,mBAAUV,GAAGM,IALL;AAMRK,oBAAWX,GAAGY,MANN;AAORC,eAAMb,GAAGc,KAPD;AAQRC,wBAAef,GAAGc,KARV;AASRE,2BAAkBhB,GAAGc;AATb,KAHP;;AAeLG,kBAAc,wBAAY;AACtB,aAAKC,cAAL,GAAsBpB,IAAIA,IAAIK,WAAJ,GAAkB,iBAAtB,GAAtB;AACA,aAAKgB,cAAL,GAAsB,KAAKD,cAAL,CAAoBE,YAApB,CAAiC,gBAAjC,CAAtB;AACA,aAAKC,UAAL,GAAkBvB,IAAIA,IAAIK,WAAJ,GAAkB,aAAtB,GAAlB;AACA,aAAKmB,aAAL,GAAqBxB,IAAIA,IAAIK,WAAJ,GAAkB,gBAAtB,GAArB;AACA,aAAKoB,SAAL,GAAiBzB,IAAIyB,SAAJ,EAAjB;AACA,aAAKC,WAAL,GAAmB1B,IAAIA,IAAIK,WAAJ,GAAkB,cAAtB,GAAnB;AACA,aAAKsB,SAAL,GAAiB3B,IAAIA,IAAIK,WAAJ,GAAkB,YAAtB,GAAjB;AACA,aAAKkB,UAAL,CAAgBK,UAAhB,CAA2B,sBAA3B,EAAmD,KAAKC,mBAAxD,EAA6E,IAA7E;AACA,aAAKlB,QAAL,CAAcmB,YAAd,CAA2B5B,GAAG6B,SAA9B,EAAyCC,EAAzC,CAA4C,UAA5C,EAAwD,KAAKC,iBAA7D,EAAgF,IAAhF;AACA,aAAKrB,SAAL,CAAekB,YAAf,CAA4B5B,GAAG6B,SAA/B,EAA0CC,EAA1C,CAA6C,UAA7C,EAAyD,KAAKC,iBAA9D,EAAiF,IAAjF;AACH,aAAKC,QAAL;AACG,aAAKC,QAAL,GAAgB,CAAhB;AACA,aAAKC,SAAL,GAAiB,CAAjB;AACH,KA7BI;;AA+BLC,YAAO,kBAAU;AACb,YAAIC,iBAAiBpC,GAAGqC,GAAH,CAAOC,YAAP,CAAoBC,OAApB,CAA4B,gBAA5B,CAArB;AACA,YAAIC,eAAeC,KAAKC,KAAL,CAAWN,cAAX,EAA2BO,QAA9C;AACAC,gBAAQC,GAAR,CAAY,sBAAsBL,YAAlC;AACAxC,WAAGqC,GAAH,CAAOC,YAAP,CAAoBQ,OAApB,CAA4B,gBAA5B,EAA8C,EAA9C;AACA,aAAKC,qBAAL,CAA2BP,YAA3B;AACH,KArCI;;AAuCLO,2BAAsB,+BAASP,YAAT,EAAsB;AACxC,aAAK3B,KAAL,CAAWmC,MAAX,GAAkB,EAAlB;AACA,aAAKC,OAAL;AACA,aAAKC,IAAL,GAAU,CAAC,CAAX;AACA,aAAKC,IAAL,GAAU,CAAC,CAAX;AACA,aAAKC,UAAL,GAAgB,KAAhB,CALwC,CAKhB;AACxB,aAAKC,WAAL,GAAiB,CAAjB,CANwC,CAMjB;AACvB,aAAKC,OAAL,GAAa,CAAb,CAPwC,CAOlB;AACtB,aAAKC,QAAL,GAAc,KAAd,CARwC,CAQlB;AACtB,aAAKC,YAAL,GAAkB,CAAlB,CATwC,CASjB;AACvB,aAAKC,KAAL,GAAW,KAAX,CAVwC,CAUjB;AACvB,aAAKC,WAAL,GAAiB,CAAjB,CAXwC,CAWjB;AACvB,aAAKC,IAAL,GAAU,CAAC,CAAX,CAZwC,CAYxB;AAChB,aAAKC,OAAL,GAAa,CAAb,CAbwC,CAavB;AACjB,aAAKC,SAAL,GAAiB,CAAjB;AACA,aAAKC,YAAL,GAAkB,IAAIC,KAAJ,EAAlB;AACAnB,gBAAQC,GAAR,CAAY,4BAAZ,EAAyCL,YAAzC;AACA,aAAKnB,UAAL,CAAgB2C,QAAhB,CAAyB,sBAAzB,EAAiD,EAAC,gBAAexB,YAAhB,EAA6B,qBAAoB,KAAjD,EAAjD,EAAyG,KAAKyB,gBAAL,CAAsBC,IAAtB,CAA2B,IAA3B,CAAzG,EAA2I,KAAKC,aAAL,CAAmBD,IAAnB,CAAwB,IAAxB,CAA3I;AACH,KAzDI;;AA2DLC,mBAAc,uBAASC,UAAT,EAAoB;AAC9B,aAAKC,cAAL,CAAoB,kBAApB,EAAwC,QAAxC,EAAiD,IAAjD;AACH,KA7DI;;AA+DL1C,yBAAoB,6BAASyC,UAAT,EAAoB;AACpC,YAAIE,cAAYF,WAAWE,WAA3B;AACA,YAAIC,MAAIH,WAAWI,EAAnB;AACA,aAAKV,YAAL,CAAkBS,GAAlB,IAAuBH,WAAWK,GAAlC;AACA,YAAG,KAAKX,YAAL,CAAkBY,MAAlB,IAA0BJ,WAA7B,EAAyC;AACrC,gBAAIK,eAAa,EAAjB;AACA,iBAAI,IAAIC,IAAE,CAAV,EAAYA,IAAEN,WAAd,EAA0BM,GAA1B,EAA8B;AAC1BD,gCAAc,KAAKb,YAAL,CAAkBc,CAAlB,CAAd;AACH;AACD,gBAAIrB,WAASsB,KAAK,MAAMF,YAAN,GAAqB,GAA1B,CAAb;AACA,iBAAKpB,QAAL,GAAcA,SAASuB,YAAvB;AACAlC,oBAAQC,GAAR,CAAY,uCAAZ,EAAoD,KAAKU,QAAzD;AACA,iBAAKC,YAAL,GAAkBuB,KAAKC,KAAL,CAAW,IAAIC,IAAJ,GAAWC,OAAX,KAAqB,IAAhC,IAAsC,CAAxD;AACA,iBAAKC,QAAL,CAAc,KAAKC,IAAnB,EAAwB,GAAxB;AACH;AACJ,KA9EI;;AAgFLnB,sBAAiB,0BAASG,UAAT,EAAoB;AACpC,aAAKhB,UAAL,GAAgB,KAAKiC,QAAL,CAAcjB,WAAWhB,UAAzB,CAAhB;AACA,aAAKO,IAAL,GAAUS,WAAWT,IAArB;AACA,aAAKN,WAAL,GAAiB,KAAKD,UAAL,CAAgBsB,MAAjC;AACA,YAAIY,UAAQlB,WAAWkB,OAAvB;AACA,YAAIC,QAAMnB,WAAWmB,KAArB;AACA,YAAIC,SAAOpB,WAAWqB,QAAtB;AACG,aAAKvD,SAAL,GAAiBkC,WAAWsB,MAA5B;AACA,aAAKzD,QAAL,GAAgBmC,WAAWuB,KAA3B;AACA,aAAKC,WAAL,CAAiB,KAAKvC,WAAtB,EAAkCiC,OAAlC,EAA0CC,KAA1C,EAAgDC,MAAhD;AACA;AACA,aAAKnC,WAAL,GAAmB,KAAKD,UAAL,CAAgBsB,MAAnC;AACA,aAAKmB,MAAL,GAAc,KAAd;AACA;AACA,aAAI,IAAIjB,IAAI,CAAZ,EAAeA,IAAI,KAAKxB,UAAL,CAAgBsB,MAAnC,EAA2CE,GAA3C,EAA+C;AAC3C,gBAAG9E,IAAIA,IAAIK,WAAJ,GAAkB,cAAtB,IAAwC2F,SAAxC,MAAuD,KAAK1C,UAAL,CAAgBwB,CAAhB,EAAmBmB,GAA7E,EAAiF;AAC7E,qBAAKlC,SAAL,GAAiB,KAAKT,UAAL,CAAgBwB,CAAhB,EAAmBoB,GAApC;AACA,qBAAKH,MAAL,GAAc,IAAd;AACA;AACH;AACJ;AACJ,aAAKI,cAAL,CAAoB,KAAK7C,UAAzB;AACH,KAtGO;;AAwGRpB,cAAS,oBAAU;AAClB;AACM,aAAK3B,SAAL,CAAe6F,MAAf,GAAwB,KAAxB;AACA,aAAI,IAAItB,KAAI,CAAZ,EAAeA,KAAI,KAAKrD,SAAL,CAAe4E,WAAlC,EAA+CvB,IAA/C,EAAmD;AAC/C,gBAAIwB,OAAOpG,GAAGqG,WAAH,CAAe,KAAK1F,UAApB,CAAX;AACAyF,iBAAKF,MAAL,GAAc,KAAd;AACAE,iBAAKE,IAAL,GAAY,UAAU,CAAC1B,KAAE,CAAH,EAAM2B,QAAN,EAAtB;AACA,iBAAKlG,SAAL,CAAemG,QAAf,CAAwBJ,IAAxB;AACH;;AAED;AACA,aAAI,IAAIxB,MAAI,CAAZ,EAAeA,MAAI,KAAKrD,SAAL,CAAekF,SAAlC,EAA6C7B,KAA7C,EAAiD;AAC7C,gBAAI8B,cAAc,KAAKC,IAAL,CAAUC,cAAV,CAAyB,gBAAchC,GAAvC,CAAlB;AACA8B,wBAAYR,MAAZ,GAAqB,KAArB;AACA,iBAAI,IAAIW,IAAI,CAAZ,EAAeA,IAAI,KAAKtF,SAAL,CAAe4E,WAAlC,EAA+CU,GAA/C,EAAmD;AAC/C,oBAAIT,QAAOpG,GAAGqG,WAAH,CAAe,KAAK1F,UAApB,CAAX;AACAyF,sBAAKF,MAAL,GAAc,KAAd;AACAE,sBAAKE,IAAL,GAAY,UAAU,CAAC1B,MAAE,CAAH,EAAM2B,QAAN,EAAtB;AACAG,4BAAYF,QAAZ,CAAqBJ,KAArB;AACH;AACJ;;AAED;AACA,aAAI,IAAIxB,MAAI,CAAZ,EAAeA,MAAI,KAAKrD,SAAL,CAAekF,SAAlC,EAA6C7B,KAA7C,EAAiD;AAC7C,gBAAIkC,eAAe,KAAKH,IAAL,CAAUC,cAAV,CAAyB,iBAAehC,GAAxC,CAAnB;AACAkC,yBAAaZ,MAAb,GAAsB,KAAtB;AACA,iBAAI,IAAIW,KAAI,CAAZ,EAAeA,KAAI,KAAKtF,SAAL,CAAe4E,WAAlC,EAA+CU,IAA/C,EAAmD;AAC/C,oBAAIT,SAAOpG,GAAGqG,WAAH,CAAe,KAAK1F,UAApB,CAAX;AACAyF,uBAAKF,MAAL,GAAc,KAAd;AACAE,uBAAKE,IAAL,GAAY,UAAU,CAAC1B,MAAE,CAAH,EAAM2B,QAAN,EAAtB;AACAO,6BAAaN,QAAb,CAAsBJ,MAAtB;AACH;AACJ;;AAED;AACA,aAAK,IAAIxB,IAAI,CAAb,EAAgBA,IAAI,CAApB,EAAuBA,GAAvB,EAA4B;AACxB,gBAAIwB,SAAOpG,GAAGqG,WAAH,CAAe,KAAK1F,UAApB,CAAX;AACAyF,mBAAKF,MAAL,GAAc,KAAd;AACAE,mBAAKW,KAAL,GAAa,IAAb;AACAX,mBAAKE,IAAL,GAAY,YAAY,CAAC1B,IAAE,CAAH,EAAM2B,QAAN,EAAxB;AACA,iBAAK/F,OAAL,CAAagG,QAAb,CAAsBJ,MAAtB;AACH;AACJ,KAlJI;;AAoJRR,iBAAY,qBAASoB,WAAT,EAAqB1B,OAArB,EAA6BC,KAA7B,EAAmCC,MAAnC,EAA0C;AACrD,aAAKnB,cAAL,CAAoB,4BAApB,EAAkD,MAAlD,EAAyD2C,cAAY,IAArE;AACA,aAAK3C,cAAL,CAAoB,2BAApB,EAAiD,MAAjD,EAAwD,QAAMkB,KAAN,GAAY,GAAZ,GAAgBC,MAAxE;AACA,aAAKnB,cAAL,CAAoB,gCAApB,EAAsD,MAAtD,EAA6D,SAAOiB,OAApE;AACG,KAxJI;;AA0JL2B,iBAAY,uBAAU;AAClB,YAAIC,UAAQ,KAAK5D,OAAL,GAAa,CAAzB;AACA,YAAI6D,MAAI,KAAK5D,QAAL,CAAcmB,MAAtB;AACA,YAAGwC,UAAQC,GAAX,EAAe;AACXD,sBAAQC,GAAR;AACH;AACD,YAAGD,UAAQ,CAAX,EAAa;AACTA,sBAAQ,CAAR;AACH;AACD;AACH,KApKI;;AAsKL;AACHE,uBAAkB,2BAASC,OAAT,EAAiB;AAClC,YAAIhE,cAAc,KAAKD,UAAL,CAAgBsB,MAAlC;AACA,YAAI4C,QAAQ,CAACD,WAAW,KAAKhE,WAAL,GAAmB,KAAKQ,SAAnC,CAAD,IAAkDR,WAA9D;AACA,eAAOiE,KAAP;AACG,KA3KI;;AA6KLC,kBAAa,sBAASF,OAAT,EAAiB;AAC1B,YAAIC,QAAQ,CAAC,CAAb;AACA,YAAG,KAAKzB,MAAR,EAAe;AACXyB,oBAAQ,KAAKF,iBAAL,CAAuBC,OAAvB,CAAR;AACH,SAFD,MAGI;AACAC,oBAASD,OAAT;AACH;;AAED,eAAOC,KAAP;AACH,KAvLI;;AAyLLE,yBAAoB,6BAASH,OAAT,EAAkBI,GAAlB,EAAsB;AACtC,YAAIH,QAAQ,KAAKC,YAAL,CAAkBF,OAAlB,CAAZ;;AAGA,YAAGC,SAAS,CAAZ,EAAe;;AAEf,YAAIX,OAAO,KAAKA,IAAL,CAAUC,cAAV,CAAyB,cAAzB,CAAX;AACA,YAAIc,OAAO,MAAM,KAAKD,GAAtB;AACAd,aAAKgB,CAAL,GAASD,IAAT;AACH,KAlMI;;AAoMRzB,kBApMQ,0BAoMO7C,UApMP,EAoMkB;AACzB,aAAI,IAAIwB,IAAI,CAAZ,EAAeA,IAAIxB,WAAWsB,MAA9B,EAAsCE,GAAtC,EAA0C;AAChC,gBAAI0C,QAAQ,KAAKC,YAAL,CAAkBnE,WAAWwB,CAAX,EAAcoB,GAAhC,CAAZ;AACA,gBAAI4B,SAASxE,WAAWwB,CAAX,EAAcmB,GAA3B;AACA,gBAAI8B,OAAO,KAAKC,UAAL,CAAgB,aAAWR,KAAX,GAAiB,OAAjC,CAAX;AACAO,iBAAK3B,MAAL,GAAc,IAAd;AACA;AACA2B,iBAAKjB,cAAL,CAAoB,UAApB,EAAgCA,cAAhC,CAA+C,eAA/C,EAAgEA,cAAhE,CAA+E,MAA/E,EAAuFA,cAAvF,CAAsG,UAAtG,EAAkHhF,YAAlH,CAA+H9B,IAAIK,WAAJ,GAAkB,kBAAjJ,EAAqK4H,YAArK,CAAkLH,MAAlL;AACA;AACT,gBAAII,UAAUH,KAAKjB,cAAL,CAAoB,UAApB,EAAgCA,cAAhC,CAA+C,SAA/C,CAAd;AACAoB,oBAAQpB,cAAR,CAAuB,SAAvB,EAAkChF,YAAlC,CAA+C,UAA/C,EAA2DoB,MAA3D,GAAoEI,WAAWwB,CAAX,EAAc0B,IAAlF;AACA;AACD,KAhNO;;;AAkNLrD,aAAQ,mBAAU;AACd,aAAKoB,cAAL,CAAoB,kBAApB,EAAwC,QAAxC,EAAiD,KAAjD;AACA;AACA,aAAI,IAAIO,IAAI,CAAZ,EAAgBA,IAAI,CAApB,EAAuBA,GAAvB,EAA2B;AACvB,gBAAIqD,WAAW,KAAKH,UAAL,CAAgB,aAAWlD,CAA3B,CAAf;AACA,gBAAGA,KAAK,CAAR,EAAU;AACNqD,yBAASrB,cAAT,CAAwB,MAAxB,EAAgCV,MAAhC,GAAuC,KAAvC;AACA+B,yBAASrB,cAAT,CAAwB,SAAxB,EAAmCV,MAAnC,GAA4C,KAA5C;AACH;AACD,iBAAK4B,UAAL,CAAgB,aAAWlD,CAAX,GAAa,SAA7B,EAAwCsB,MAAxC,GAAiD,KAAjD;AACA,gBAAI2B,OAAO,KAAKC,UAAL,CAAgB,aAAWlD,CAAX,GAAa,OAA7B,CAAX;AACA;AACAiD,iBAAKjB,cAAL,CAAoB,UAApB,EAAgCA,cAAhC,CAA+C,UAA/C,EAA2DV,MAA3D,GAAoE,KAApE;AACA;AACA2B,iBAAKjB,cAAL,CAAoB,UAApB,EAAgCA,cAAhC,CAA+C,QAA/C,EAAyDV,MAAzD,GAAkE,KAAlE;AACA+B,qBAASrB,cAAT,CAAwB,MAAxB,EAAgCV,MAAhC,GAAuC,KAAvC;AACA+B,qBAASrB,cAAT,CAAwB,MAAxB,EAAgCV,MAAhC,GAAuC,KAAvC;AACA2B,iBAAKjB,cAAL,CAAoB,UAApB,EAAgCA,cAAhC,CAA+C,aAA/C,EAA8DV,MAA9D,GAAuE,KAAvE;AACH;AACD,aAAKgC,cAAL;AACA,aAAKC,eAAL;AACA,aAAKC,eAAL;AACH,KAxOI;;AA0OLA,qBAAgB,2BAAU;AACtB,aAAK/H,SAAL,CAAe6F,MAAf,GAAwB,KAAxB;AACA,aAAI,IAAItB,IAAI,CAAZ,EAAeA,IAAI,KAAKvE,SAAL,CAAegI,QAAf,CAAwB3D,MAA3C,EAAmDE,GAAnD,EAAuD;AACnD,gBAAI0D,QAAQ,KAAKjI,SAAL,CAAegI,QAAf,CAAwBzD,CAAxB,CAAZ;AACA0D,kBAAMpC,MAAN,GAAe,KAAf;AACH;AACJ,KAhPI;;AAkPLgC,oBAAe,0BAAU;AACrB,aAAI,IAAItD,IAAI,CAAZ,EAAeA,IAAI,KAAKrD,SAAL,CAAekF,SAAlC,EAA6C7B,GAA7C,EAAiD;AAC7C,gBAAI2D,UAAU,KAAK5B,IAAL,CAAUC,cAAV,CAAyB,gBAAgBhC,CAAzC,CAAd;AACA2D,oBAAQrC,MAAR,GAAiB,KAAjB;AACH;AACJ,KAvPI;;AAyPLiC,qBAAgB,2BAAU;AACtB,aAAI,IAAIvD,IAAI,CAAZ,EAAeA,IAAI,KAAKrD,SAAL,CAAekF,SAAlC,EAA6C7B,GAA7C,EAAiD;AAC7C,gBAAIkC,eAAe,KAAKH,IAAL,CAAUC,cAAV,CAAyB,iBAAiBhC,CAA1C,CAAnB;AACAkC,yBAAaZ,MAAb,GAAsB,KAAtB;AACH;AACJ,KA9PI;;AAgQLsC,mBAAc,yBAAU;AACpB,aAAI,IAAI5D,IAAI,CAAZ,EAAeA,IAAI,KAAKrD,SAAL,CAAekF,SAAlC,EAA6C7B,GAA7C,EAAiD;AAC7C,gBAAI6D,aAAa,KAAKX,UAAL,CAAgB,aAAWlD,CAAX,GAAa,kBAA7B,CAAjB;AACA,gBAAG,CAAC6D,WAAWvC,MAAf,EAAsB;AAClBuC,2BAAWvC,MAAX,GAAoB,IAApB;AACH;AACJ;AACJ,KAvQI;;AA0QLwC,cAAS,kBAASC,GAAT,EAAaC,MAAb,EAAoB;AACzB,YAAI/H,QAAM,KAAKgI,KAAL,CAAWF,GAAX,CAAV;AACA,YAAGC,UAAQ,IAAX,EAAgB;AACZ,iBAAK/H,KAAL,CAAWmC,MAAX,GAAkB,SAAOnC,KAAzB;AACH,SAFD,MAEK;AACD,iBAAKA,KAAL,CAAWmC,MAAX,GAAkBnC,KAAlB;AACH;AACJ,KAjRI;AAkRLiI,wBAAmB,4BAASC,KAAT,EAAeC,aAAf,EAA6B;AAC5C,YAAI1B,QAAQ,KAAKC,YAAL,CAAkBwB,KAAlB,CAAZ;AACA,YAAIE,OAAO,KAAKnB,UAAL,CAAgB,aAAWR,KAAX,GAAiB,OAAjC,CAAX;AACA,YAAG0B,iBAAe,IAAlB,EAAuB;AACnBC,iBAAKrC,cAAL,CAAoB,UAApB,EAAgCA,cAAhC,CAA+C,WAA/C,EAA4DV,MAA5D,GAAmE,IAAnE;AACH,SAFD,MAEK;AACD,iBAAKgD,YAAL,CAAkB,YAAU;AAC1BD,qBAAKrC,cAAL,CAAoB,UAApB,EAAgCA,cAAhC,CAA+C,WAA/C,EAA4DV,MAA5D,GAAmE,KAAnE;AACD,aAFD,EAEE,CAFF;AAGH;AAEJ,KA7RI;AA8RLiD,oBAAe,wBAASJ,KAAT,EAAe;AAC1B,YAAIzB,QAAQ,KAAKC,YAAL,CAAkBwB,KAAlB,CAAZ;AACA,YAAIE,OAAO,KAAKnB,UAAL,CAAgB,aAAWR,KAAX,GAAiB,SAAjC,CAAX;AACA2B,aAAKrC,cAAL,CAAoB,QAApB,EAA8BV,MAA9B,GAAqC,IAArC;AACA,aAAKgD,YAAL,CAAkB,YAAU;AACtBD,iBAAKrC,cAAL,CAAoB,QAApB,EAA8BV,MAA9B,GAAqC,KAArC;AACL,SAFD,EAEE,CAFF;AAGH,KArSI;;AAuSRkD,YAvSQ,sBAuSE;AACH,YAAG,KAAK9F,OAAL,IAAgB,CAAC,CAApB,EAAsB;AAClB,iBAAKA,OAAL,GAAe,CAAf;AACH;AACP,YAAI+F,OAAK,KAAK9F,QAAL,CAAc,KAAKD,OAAnB,CAAT;AACA,YAAG,CAAC+F,IAAJ,EAAS;AACR,mBAAO,KAAP;AACA;AACK,aAAKpC,WAAL;AACNrE,gBAAQC,GAAR,CAAY,iBAAZ,EAA8BwG,IAA9B;AACA,YAAIC,OAAKD,KAAK/C,IAAd;AACA,YAAIiD,MAAIF,KAAKE,GAAb;AACA,YAAIC,aAAW,CAAf,CAZS,CAYQ;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACN,YAAGF,KAAKG,OAAL,CAAa,aAAb,KAA6B,CAAhC,EAAkC;AACxBD,yBAAW,CAAX;AACA,iBAAKd,QAAL,CAAca,IAAIZ,GAAlB,EAAsBY,IAAIX,MAA1B;AAEH,SAJP,MAIY,IAAGU,KAAKG,OAAL,CAAa,mBAAb,KAAmC,CAAtC,EAAwC;AAC1CD,yBAAW,CAAX;AACA,gBAAIE,YAAUH,IAAIG,SAAlB;AACA,iBAAKP,cAAL,CAAoBO,SAApB;AACH,SAJK,MAIA,IAAGJ,KAAKG,OAAL,CAAa,eAAb,KAA+B,CAAlC,EAAoC;AACtCD,yBAAW,CAAX;AACA,iBAAKtB,cAAL;AACA,iBAAKyB,YAAL,CAAkBJ,GAAlB,EAAuBF,KAAKO,UAA5B;AACA,iBAAKC,oBAAL,CAA0BN,IAAIO,OAAJ,CAAYC,QAAtC,EAAgDR,IAAIO,OAAJ,CAAYE,UAA5D;AACH,SALK,MAMD,IAAGV,KAAKG,OAAL,CAAa,mBAAb,KAAmC,CAAtC,EAAwC;AACzCD,yBAAW,CAAX;AACA,iBAAKtB,cAAL;AACA,iBAAK+B,gBAAL,CAAsBV,GAAtB;AACA,iBAAKM,oBAAL,CAA0B,IAA1B,EAAgCN,IAAIS,UAApC;AACH,SALI,MAKC,IAAGV,KAAKG,OAAL,CAAa,UAAb,KAA0B,CAA7B,EAA+B;AACjCD,yBAAW,CAAX;AACA,iBAAKK,oBAAL,CAA0BN,IAAIQ,QAA9B,EAAwCR,IAAIS,UAA5C;AACH,SAHK,MAID,IAAGV,KAAKG,OAAL,CAAa,aAAb,KAA6B,CAAhC,EAAkC;AACnCD,yBAAW,CAAX;AACA,iBAAKU,UAAL,CAAgBX,GAAhB,EAAqBF,KAAKO,UAA1B;AACA,iBAAKC,oBAAL,CAA0B,IAA1B,EAAgCN,IAAIS,UAApC;AACH,SAJI,MAKA,IAAGV,KAAKG,OAAL,CAAa,aAAb,KAA6B,CAAhC,EAAkC;AAC5CD,yBAAW,OAAX;AACA,iBAAKW,OAAL,CAAaZ,GAAb;AACM,SAHI,MAID;AACT3G,oBAAQC,GAAR,CAAY,oBAAZ,EAAiCyG,IAAjC;AACA1G,oBAAQC,GAAR,CAAY,yBAAZ,EAAsCwG,IAAtC;AACA,iBAAK5F,KAAL,IAAY,IAAZ;AACA;AACA;AACD,aAAKH,OAAL,IAAc,CAAd;AACA,aAAKE,YAAL,GAAkBuB,KAAKC,KAAL,CAAW,IAAIC,IAAJ,GAAWC,OAAX,KAAqB,IAAhC,IAAsCsE,UAAxD;AACG,KAnWI;;;AAqWRpE,UAAK,gBAAU;AACd,aAAK1B,WAAL,GAAiB,KAAKA,WAAL,GAAiB,GAAlC;AACA,YAAG,KAAKA,WAAL,IAAkB,CAAlB,IAAuB,KAAKA,WAAL,GAAiB,CAAC,CAA5C,EAA8C;AAC7C,iBAAK0G,WAAL;AACA;AACD,YAAIC,MAAItF,KAAKC,KAAL,CAAW,IAAIC,IAAJ,GAAWC,OAAX,KAAqB,IAAhC,CAAR;AACA,YAAG,KAAK1B,YAAL,IAAmB,CAAnB,IAAwB6G,MAAI,KAAK7G,YAApC,EAAiD;AAChD;AACA;AACD,YAAG,KAAKC,KAAL,IAAY,IAAf,EAAoB;AACnB;AACA;AACD,aAAK2F,QAAL;AACG,KAlXI;;AAoXLkB,mBAAc,uBAASf,GAAT,EAAa,CAE1B,CAtXI;;AAwXLgB,kBAAa,sBAAShB,GAAT,EAAa,CAEzB,CA1XI;;AA4XRY,aAAQ,iBAASZ,GAAT,EAAa;AACd,YAAIF,OAAKE,IAAIiB,MAAb;AACA1K,YAAIA,IAAIK,WAAJ,GAAkB,QAAtB,EAAgCsK,QAAhC;AACH,KA/XI;;AAiYLC,cAAS,kBAASrD,OAAT,EAAiB;AACtB,YAAIC,QAAQ,KAAKC,YAAL,CAAkBF,OAAlB,CAAZ;AACA,YAAIV,OAAO,KAAKmB,UAAL,CAAgB,aAAWR,KAAX,GAAiB,OAAjC,CAAX;AACAX,aAAKT,MAAL,GAAc,IAAd;AACH,KArYI;;AAuYRgE,cAvYQ,sBAuYGX,GAvYH,EAuYQK,UAvYR,EAuYmB;AACpB,YAAIP,OAAOE,GAAX;AACA,aAAK/B,mBAAL,CAAyB6B,KAAKrD,GAA9B,EAAmCqD,KAAKsB,QAAL,CAAcjG,MAAjD;AACA,aAAKkG,WAAL,CAAiBvB,KAAKrD,GAAtB,EAA2BqD,KAAKsB,QAAhC;AACA,aAAKnC,aAAL;AACA;AACA,YAAIlB,QAAQ,KAAKC,YAAL,CAAkB8B,KAAKrD,GAAvB,CAAZ;AACA,YAAI6E,kBAAkB,KAAK/C,UAAL,CAAgB,aAAWR,KAAX,GAAiB,4BAAjC,CAAtB;AACAuD,wBAAgB3E,MAAhB,GAAyBmD,KAAKyB,OAA9B;AACA,YAAG,CAACzB,KAAKsB,QAAL,CAAcjG,MAAf,IAAyB2E,KAAK0B,UAAL,IAAmB,CAA/C,EAAiD;AAC7C,iBAAKL,QAAL,CAAcrB,KAAKrD,GAAnB;AACH;AACD,YAAG4D,UAAH,EAAc;AACV,iBAAI,IAAIhF,IAAI,CAAZ,EAAeA,IAAI,KAAKxB,UAAL,CAAgBsB,MAAnC,EAA2CE,GAA3C,EAA+C;AAC3C,oBAAIoG,SAAS,KAAK5H,UAAL,CAAgBwB,CAAhB,CAAb;AACA,oBAAG,KAAKiB,MAAR,EAAe;AACX,wBAAGmF,OAAOhF,GAAP,IAAc,KAAKnC,SAAtB,EAAgC;AAC5B,6BAAKoH,YAAL,CAAkBrB,WAAWoB,OAAOhF,GAAlB,CAAlB;AACH,qBAFD,MAGI;AACA,6BAAKkF,gBAAL,CAAsBF,OAAOhF,GAA7B,EAAkC4D,WAAWoB,OAAOhF,GAAlB,CAAlC;AACH;AACJ,iBAPD,MAQI;AACA,wBAAGgF,OAAOhF,GAAP,IAAc,CAAjB,EAAmB;AACf,6BAAKiF,YAAL,CAAkBrB,WAAWoB,OAAOhF,GAAlB,CAAlB;AACH,qBAFD,MAGI;AACA,6BAAKkF,gBAAL,CAAsBF,OAAOhF,GAA7B,EAAkC4D,WAAWoB,OAAOhF,GAAlB,CAAlC;AACH;AACJ;AAEJ;;AAED;AACA,gBAAGqD,KAAK0B,UAAL,IAAmB,EAAtB,EAAyB;AACrB;AACA,qBAAKtK,QAAL,CAAcyF,MAAd,GAAuB,IAAvB;AACA,qBAAKiF,SAAL,CAAe9B,KAAKrD,GAApB;AACA,qBAAKvF,QAAL,CAAcmB,YAAd,CAA2B5B,GAAG6B,SAA9B,EAAyCuJ,IAAzC,CAA8C,QAA9C;AACH,aALD,MAMK,IAAG/B,KAAK0B,UAAL,IAAmB,EAAnB,IAAyB1B,KAAK0B,UAAL,IAAmB,EAA/C,EAAkD;AACnD,qBAAKrK,SAAL,CAAewF,MAAf,GAAwB,IAAxB;AACA,qBAAKxF,SAAL,CAAekB,YAAf,CAA4B5B,GAAG6B,SAA/B,EAA0CuJ,IAA1C,CAA+C,OAA/C;AACH;AACJ;AACJ,KArbI;;;AAubLD,eAAU,mBAAS9D,OAAT,EAAiB;AACvB,YAAIC,QAAQ,KAAKF,iBAAL,CAAuBC,OAAvB,CAAZ;AACA,YAAGC,SAAS,CAAZ,EAAc;AACV,iBAAK7G,QAAL,CAAc4K,WAAd,CAA0BrL,GAAGsL,EAAH,CAAM,GAAN,EAAW,EAAX,CAA1B;AACH,SAFD,MAGI;AACD,gBAAI5E,cAAc,KAAKC,IAAL,CAAUC,cAAV,CAAyB,gBAAcU,KAAvC,CAAlB;AACA,iBAAK7G,QAAL,CAAc4K,WAAd,CAA0BrL,GAAGsL,EAAH,CAAM5E,YAAYiB,CAAlB,EAAqBjB,YAAY6E,CAAjC,CAA1B;AACF;AACJ,KAhcI;;AAkcLtB,sBAAiB,0BAASV,GAAT,EAAa;AAC1B,YAAIA,IAAIiC,KAAJ,IAAa,KAAKhK,WAAL,CAAiBiK,eAAlC,EAAmD;AAC/C,gBAAIC,YAAYnC,IAAImC,SAApB;AACA,iBAAK,IAAI9G,IAAI,CAAb,EAAgBA,IAAI8G,UAAUhH,MAA9B,EAAsCE,GAAtC,EAA2C;AACvC,oBAAI+G,WAAW,KAAKnL,OAAL,CAAa6H,QAAb,CAAsBzD,CAAtB,CAAf;AACA,oBAAIgH,YAAYF,UAAU9G,CAAV,CAAhB;AACA,oBAAGgH,SAAH,EAAa;AACT,yBAAKC,QAAL,CAAcD,SAAd,EAAyBD,QAAzB;AACH,iBAFD,MAGI;AACAA,6BAASzF,MAAT,GAAkB,KAAlB;AACH;AACJ;AACD,iBAAK1F,OAAL,CAAa0F,MAAb,GAAsB,IAAtB;AACH,SAbD,MAcK,IAAIqD,IAAIiC,KAAJ,IAAa,KAAKhK,WAAL,CAAiBsK,qBAAlC,EAAyD;AAC1D,gBAAIC,gBAAgBxC,IAAIwC,aAAxB;AACA,iBAAI,IAAInH,MAAI,CAAZ,EAAeA,MAAImH,cAAcrH,MAAjC,EAAyCE,KAAzC,EAA6C;AACzC,oBAAIoH,cAAc,KAAlB;AACA,oBAAIzC,IAAI0C,SAAJ,IAAiBrH,GAArB,EAAwB;AACpBoH,kCAAc,IAAd;AACH;AACD,oBAAI1E,QAAQ,KAAKC,YAAL,CAAkB3C,GAAlB,CAAZ;AACA,oBAAIiD,OAAO,KAAKC,UAAL,CAAgB,aAAWR,KAAX,GAAiB,OAAjC,CAAX;AACA;AACAO,qBAAKjB,cAAL,CAAoB,UAApB,EAAgCA,cAAhC,CAA+C,UAA/C,EAA2DV,MAA3D,GAAoE8F,WAApE;AACA;AACA,oBAAID,cAAcnH,GAAd,KAAoB,CAAxB,EAA2B;AACvBiD,yBAAKjB,cAAL,CAAoB,UAApB,EAAgCA,cAAhC,CAA+C,QAA/C,EAAyDV,MAAzD,GAAkE,IAAlE;AACH,iBAFD,MAGI;AACA2B,yBAAKjB,cAAL,CAAoB,UAApB,EAAgCA,cAAhC,CAA+C,QAA/C,EAAyDV,MAAzD,GAAkE,KAAlE;AACH;AACJ;AACJ;AACJ,KAreI;;AAueRyD,kBAAa,sBAASJ,GAAT,EAAcK,UAAd,EAAyB;AAC/B,aAAI,IAAIhF,IAAI,CAAZ,EAAeA,IAAI,KAAKxB,UAAL,CAAgBsB,MAAnC,EAA2CE,GAA3C,EAA+C;AAC3C,gBAAIoG,SAAS,KAAK5H,UAAL,CAAgBwB,CAAhB,CAAb;AACA,gBAAI0C,QAAQ,KAAKC,YAAL,CAAkByD,OAAOhF,GAAzB,CAAZ;AACA,gBAAI2E,WAAWf,WAAWoB,OAAOhF,GAAlB,CAAf;AACA,gBAAGsB,SAAS,CAAZ,EAAc;AACV,oBAAGqD,SAASjG,MAAT,IAAmB,EAAtB,EAAyB;AACrB,yBAAKrE,SAAL,CAAeuB,YAAf,CAA4B5B,GAAGkM,MAA/B,EAAuCC,QAAvC,GAAkD,CAAC,EAAnD;AACH,iBAFD,MAGI;AACA,yBAAK9L,SAAL,CAAeuB,YAAf,CAA4B5B,GAAGkM,MAA/B,EAAuCC,QAAvC,GAAkD,CAAC,EAAnD;AACH;AACD,qBAAKlB,YAAL,CAAkBN,QAAlB;AACH,aARD,MASI;AACA,qBAAKO,gBAAL,CAAsBF,OAAOhF,GAA7B,EAAkC2E,QAAlC;AACA,qBAAK7C,UAAL,CAAgB,aAAWR,KAAX,GAAiB,OAAjC,EAA0CpB,MAA1C,GAAmD,IAAnD;AACA,qBAAK4B,UAAL,CAAgB,aAAWR,KAAX,GAAiB,UAAjC,EAA6CpB,MAA7C,GAAsD,IAAtD;AACA,qBAAK4B,UAAL,CAAgB,aAAWR,KAAX,GAAiB,UAAjC,EAA6C1F,YAA7C,CAA0D5B,GAAGc,KAA7D,EAAoEkC,MAApE,GAA6E2H,SAASjG,MAAT,GAAkB,GAA/F;AACH;AACJ;AACJ,KA5fI;;AA8fLuG,kBAAa,sBAASN,QAAT,EAAkB;AAC3B,aAAKyB,aAAL,CAAmBzB,QAAnB;AACA,aAAKtK,SAAL,CAAe6F,MAAf,GAAwB,IAAxB;AACA,aAAI,IAAItB,IAAI,CAAZ,EAAeA,IAAI,KAAKvE,SAAL,CAAegI,QAAf,CAAwB3D,MAA3C,EAAmDE,GAAnD,EAAuD;AACnD,gBAAI+G,WAAW,KAAKtL,SAAL,CAAegI,QAAf,CAAwBzD,CAAxB,CAAf;AACA,gBAAIgH,YAAYjB,SAAS/F,CAAT,CAAhB;AACA,gBAAGgH,SAAH,EAAa;AACT,qBAAKC,QAAL,CAAcD,SAAd,EAAyBD,QAAzB;AACH,aAFD,MAGI;AACAA,yBAASzF,MAAT,GAAkB,KAAlB;AACH;AACJ;AACJ,KA3gBI;;AA6gBL0E,iBAAY,qBAASvD,OAAT,EAAkBsD,QAAlB,EAA2B;AACnC,YAAIrD,QAAQ,KAAKC,YAAL,CAAkBF,OAAlB,CAAZ;AACA,YAAIgF,OAAO,KAAKvE,UAAL,CAAgB,aAAWR,KAAX,GAAiB,OAAjC,CAAX;AACA+E,aAAKnG,MAAL,GAAc,KAAd;AACA,YAAIoG,kBAAkB,KAAK3F,IAAL,CAAUC,cAAV,CAAyB,gBAAcU,KAAvC,CAAtB;AACAgF,wBAAgBpG,MAAhB,GAAyB,IAAzB;AACA,aAAI,IAAItB,IAAI,CAAZ,EAAeA,IAAI0H,gBAAgBjE,QAAhB,CAAyB3D,MAA5C,EAAoDE,GAApD,EAAwD;AACpD,gBAAI+G,WAAWW,gBAAgBjE,QAAhB,CAAyBzD,CAAzB,CAAf;AACA,gBAAI2H,QAAQ5B,SAAS/F,CAAT,CAAZ;AACA,gBAAG2H,KAAH,EAAS;AACL,qBAAKV,QAAL,CAAcU,KAAd,EAAqBZ,QAArB;AACH,aAFD,MAGI;AACAA,yBAASzF,MAAT,GAAkB,KAAlB;AACH;AACJ;AACJ,KA7hBI;;AA+hBLgF,sBAAiB,0BAAS7D,OAAT,EAAkBsD,QAAlB,EAA2B;AACxC,YAAIrD,QAAQ,KAAKC,YAAL,CAAkBF,OAAlB,CAAZ;AACA,YAAGC,SAAS,CAAZ,EAAe;AACf,aAAK8E,aAAL,CAAmBzB,QAAnB;AACA,YAAI7D,eAAe,KAAKH,IAAL,CAAUC,cAAV,CAAyB,iBAAiBU,KAA1C,CAAnB;AACAR,qBAAaZ,MAAb,GAAsB,IAAtB;AACA,aAAI,IAAItB,IAAI,CAAZ,EAAeA,IAAIkC,aAAauB,QAAb,CAAsB3D,MAAzC,EAAiDE,GAAjD,EAAqD;AACjD,gBAAI+G,WAAW7E,aAAauB,QAAb,CAAsBzD,CAAtB,CAAf;AACA,gBAAI2H,QAAQ5B,SAAS/F,CAAT,CAAZ;AACA,gBAAG2H,KAAH,EAAS;AACL,qBAAKV,QAAL,CAAcU,KAAd,EAAqBZ,QAArB;AACH,aAFD,MAGI;AACAA,yBAASzF,MAAT,GAAkB,KAAlB;AACH;AACJ;AACD,aAAK4B,UAAL,CAAgB,aAAWR,KAAX,GAAiB,UAAjC,EAA6C1F,YAA7C,CAA0D5B,GAAGc,KAA7D,EAAoEkC,MAApE,GAA6E2H,SAASjG,MAAT,GAAkB,GAA/F;AACH,KAhjBI;;AAkjBL0H,mBAAc,uBAASI,MAAT,EAAgB;AAC1BA,eAAOC,IAAP,CAAY,UAASC,CAAT,EAAYC,CAAZ,EAAc;AACtB;AACA,gBAAIC,UAAUF,IAAE,IAAhB;AACA,gBAAIG,UAAUF,IAAE,IAAhB;AACA,gBAAIC,WAAW,CAAf,EACIA,UAAU,EAAV;AACJ,gBAAIA,WAAW,CAAf,EACIA,UAAU,EAAV;AACJ,gBAAIC,WAAW,CAAf,EACIA,UAAU,EAAV;AACJ,gBAAIA,WAAW,CAAf,EACIA,UAAU,EAAV;AACJ,mBAAOA,UAAUD,OAAjB;AACH,SAbD;AAcH,KAjkBI;;AAmkBR7K,uBAAkB,2BAAS+K,KAAT,EAAe;AAC1B,YAAGA,MAAMC,MAAN,CAAazG,IAAb,IAAqB,OAAxB,EAAgC;AAC5B,iBAAK5F,SAAL,CAAewF,MAAf,GAAwB,KAAxB;AACH,SAFD,MAGK,IAAG4G,MAAMC,MAAN,CAAazG,IAAb,IAAqB,QAAxB,EAAiC;AAClC,iBAAK7F,QAAL,CAAcyF,MAAd,GAAuB,KAAvB;AACH;AACJ,KA1kBI;;AA4kBL8G,aAAQ,mBAAU,CAEjB,CA9kBI;;AAglBLC,aAAQ,iBAASC,OAAT,EAAkBC,OAAlB,EAA0B;AACjC,aAAKzJ,WAAL,GAAiB,CAAjB;AACG,YAAGwJ,WAAW,YAAd,EAA2B;AACvBpN,gBAAIA,IAAIK,WAAJ,GAAkB,QAAtB,EAAgCsK,QAAhC;AACH,SAFD,MAEM,IAAIyC,WAAW,SAAf,EAA0B;AAC5BpN,gBAAIA,IAAIK,WAAJ,GAAkB,QAAtB,EAAgCsK,QAAhC;AACH,SAFK,MAGD,IAAGyC,WAAS,UAAZ,EAAuB;AAC3B,iBAAKE,YAAL;AACG,gBAAG,KAAKxJ,OAAL,IAAc,KAAKN,OAAtB,EAA8B;AAC1B;AACH;AACD,iBAAKA,OAAL,GAAa,KAAKA,OAAL,GAAa,CAA1B,CALwB,CAKM;AAC9B,iBAAK8F,QAAL;AACH,SAPI,MAOC,IAAG8D,WAAS,UAAZ,EAAuB;AAC5B,iBAAKG,WAAL;AACA,SAFK,MAEA,IAAGH,WAAS,WAAZ,EAAwB;AAC7B,iBAAKE,YAAL;AACA,SAFK,MAEA,IAAGF,WAAS,aAAZ,EAA0B;AAC/B,iBAAKE,YAAL;AACA,iBAAKhE,QAAL;AACA,SAHK,MAGA,IAAG8D,WAAS,UAAZ,EAAuB;AACzB,gBAAI,KAAKjL,QAAL,IAAiB,CAArB,EAAwB;AACpBnC,oBAAIA,IAAIK,WAAJ,GAAgB,mBAApB,IAA2CmN,UAA3C,CAAsD,UAAtD;AACA;AACH;AACD,iBAAKrL,QAAL;AACA,gBAAIsL,OAAO,IAAX;AACA,gBAAIC,WAAW,EAAf;AACAA,qBAASC,MAAT,GAAkB,KAAKvL,SAAvB;AACAsL,qBAAS7H,KAAT,GAAiB,KAAK1D,QAAtB;AACAnC,gBAAIA,IAAIK,WAAJ,GAAgB,aAApB,IAAqC6D,QAArC,CAA8ClE,IAAIK,WAAJ,GAAgB,IAAhB,GAAqBL,IAAIK,WAAJ,CAAgBuN,WAAhB,EAArB,GAAmD,iBAAjG,EAAoHF,QAApH,EAA6H,UAASpJ,UAAT,EAAoB;AAC7I,oBAAIuJ,eAAa7N,IAAIA,IAAIK,WAAJ,GAAgB,cAApB,IAAsCyN,kBAAtC,CAAyDxJ,WAAWyJ,MAApE,CAAjB;AACA,oBAAIF,gBAAgB7N,IAAIK,WAAxB,EAAqC;AACjCL,wBAAIA,IAAIK,WAAJ,GAAgB,mBAApB,IAA2CmN,UAA3C,CAAsD,cAAtD;AACA;AACH;AACDC,qBAAKxK,qBAAL,CAA2BqB,WAAW5B,YAAtC;AACH,aAPD,EAQA,UAASsL,KAAT,EAAe;AACXP,qBAAKtL,QAAL;AACAnC,oBAAIA,IAAIK,WAAJ,GAAgB,mBAApB,IAA2CmN,UAA3C,CAAsD,sBAAtD;AACH,aAXD;AAYH,SAtBK,MAsBA,IAAGJ,WAAS,UAAZ,EAAuB;AACzB,iBAAKjL,QAAL;AACA,gBAAIsL,QAAO,IAAX;AACA,gBAAIC,YAAW,EAAf;AACAA,sBAASC,MAAT,GAAkB,KAAKvL,SAAvB;AACAsL,sBAAS7H,KAAT,GAAiB,KAAK1D,QAAtB;AACAnC,gBAAIA,IAAIK,WAAJ,GAAgB,aAApB,IAAqC6D,QAArC,CAA8ClE,IAAIK,WAAJ,GAAgB,IAAhB,GAAqBL,IAAIK,WAAJ,CAAgBuN,WAAhB,EAArB,GAAmD,iBAAjG,EAAoHF,SAApH,EAA6H,UAASpJ,UAAT,EAAoB;AAC7I,oBAAIuJ,eAAa7N,IAAIA,IAAIK,WAAJ,GAAgB,cAApB,IAAsCyN,kBAAtC,CAAyDxJ,WAAWyJ,MAApE,CAAjB;AACA,oBAAIF,gBAAgB7N,IAAIK,WAAxB,EAAqC;AACjCL,wBAAIA,IAAIK,WAAJ,GAAgB,mBAApB,IAA2CmN,UAA3C,CAAsD,cAAtD;AACA;AACH;AACDC,sBAAKxK,qBAAL,CAA2BqB,WAAW5B,YAAtC;AACH,aAPD,EAQA,UAASsL,KAAT,EAAe;AACXP,sBAAKtL,QAAL;AACAnC,oBAAIA,IAAIK,WAAJ,GAAgB,mBAApB,IAA2CmN,UAA3C,CAAsD,uBAAtD;AACH,aAXD;AAYH,SAlBK,MAmBF;AACA,iBAAKS,WAAL;AACH;AACJ,KAjpBI;;AAmpBLX,kBAAa,wBAAU;AACtB,aAAK3J,KAAL,GAAW,IAAX;AACG,aAAKlD,YAAL,CAAkBqG,cAAlB,CAAiC,UAAjC,EAA6CV,MAA7C,GAAoD,IAApD;AACA,aAAK3F,YAAL,CAAkBqG,cAAlB,CAAiC,WAAjC,EAA8CV,MAA9C,GAAqD,KAArD;AACH,KAvpBI;;AAypBLmH,iBAAY,uBAAU;AACrB,aAAK5J,KAAL,GAAW,KAAX;AACG,aAAKlD,YAAL,CAAkBqG,cAAlB,CAAiC,UAAjC,EAA6CV,MAA7C,GAAoD,KAApD;AACA,aAAK3F,YAAL,CAAkBqG,cAAlB,CAAiC,WAAjC,EAA8CV,MAA9C,GAAqD,IAArD;AACH,KA7pBI;;AA+pBLkE,iBAAY,uBAAU;AACrB,YAAI4D,SAAShO,GAAGiO,OAAH,CAAW,GAAX,CAAb;AACA,aAAK1N,YAAL,CAAkB2N,SAAlB,CAA4BF,MAA5B;AACA,KAlqBI;;AAoqBLD,iBAAY,uBAAU;AACrB,YAAIC,SAAShO,GAAGmO,MAAH,CAAU,GAAV,CAAb;AACA,aAAK5N,YAAL,CAAkB2N,SAAlB,CAA4BF,MAA5B;AACA,KAvqBI;;AAyqBLnE,0BAAqB,8BAASE,QAAT,EAAmBC,UAAnB,EAA8B;AAC/C,YAAID,YAAY,IAAhB,EAAsB;AAClB,iBAAKhJ,cAAL,CAAoBiC,MAApB,GAA6B+G,QAA7B;AACH;AACD,YAAIC,cAAc,IAAlB,EAAwB;AACpB,iBAAKhJ,iBAAL,CAAuBgC,MAAvB,GAAgCgH,UAAhC;AACH;AACJ,KAhrBI;;AAkrBR;AACAoE,cAAS,oBAAU,CAEf,CArrBI;;AAurBL;AACAvC,cAAS,kBAASwC,QAAT,EAAmB1C,QAAnB,EAA4B;AACjC,aAAKlK,SAAL,CAAe6M,WAAf,CAA2BD,QAA3B,EAAqC1C,QAArC;AACAA,iBAASzF,MAAT,GAAkB,IAAlB;AACAyF,iBAAS/E,cAAT,CAAwB,YAAxB,EAAsCV,MAAtC,GAA+C,KAA/C;AACH,KA5rBI;;AA8rBRb,cAAS,kBAASkJ,QAAT,EAAkB;AACpB,YAAGA,aAAW,EAAd,EAAiB;AACb,mBAAO,KAAP;AACH;AACD,YAAIC,OAAO/L,KAAKC,KAAL,CAAW6L,QAAX,CAAX;AACA,eAAOC,IAAP;AACH;;AApsBI,CAAT","file":"UIDDZVideo.js","sourceRoot":"../../../../../../../assets/script/game/DDZ/ui","sourcesContent":["var app = require(\"ddz_app\");\r\ncc.Class({\r\n    extends: require(app.subGameName + \"_BaseForm\"),\r\n\r\n    properties: {\r\n        handCards:cc.Node,\r\n        control_list:cc.Node,\r\n        img_dzp:cc.Node,\r\n        boom_Ani:cc.Node,\r\n        plane_Ani:cc.Node,\r\n        cardPrefab:cc.Prefab,\r\n        wanfa:cc.Label,\r\n        lb_publicScore:cc.Label,\r\n        lb_publicMultiple:cc.Label,\r\n    },\r\n\r\n    OnCreateInit: function () {\r\n        this.SysDataManager = app[app.subGameName + \"_SysDataManager\"]();\r\n        this.IntegrateImage = this.SysDataManager.GetTableDict(\"IntegrateImage\");\r\n        this.NetManager = app[app.subGameName + \"_NetManager\"]();\r\n        this.WeChatManager = app[app.subGameName + \"_WeChatManager\"]();\r\n        this.DDZDefine = app.DDZDefine();\r\n        this.ShareDefine = app[app.subGameName + \"_ShareDefine\"]();\r\n        this.PokerCard = app[app.subGameName + \"_PokerCard\"]();\r\n        this.NetManager.RegNetPack(\"SPlayer_PlayBackData\", this.OnPack_PlayBackData, this);\r\n        this.boom_Ani.getComponent(cc.Animation).on('finished', this.OnAniPlayFinished, this);\r\n        this.plane_Ani.getComponent(cc.Animation).on('finished', this.OnAniPlayFinished, this);\r\n    \tthis.InitCard();\r\n        this.curTabId = 0;\r\n        this.curRoomID = 0;\r\n    },\r\n\r\n    OnShow:function(){\r\n        let switchGameData = cc.sys.localStorage.getItem(\"switchGameData\");\r\n        let playBackCode = JSON.parse(switchGameData).backCode;\r\n        console.log(\"playBackCode === \" + playBackCode);\r\n        cc.sys.localStorage.setItem(\"switchGameData\", \"\");\r\n        this.GetPlayBackDataByCode(playBackCode);\r\n    },\r\n\r\n    GetPlayBackDataByCode:function(playBackCode){\r\n        this.wanfa.string=\"\";\r\n        this.HideAll();\r\n        this.jin1=-1;\r\n        this.jin2=-1;\r\n        this.playerList=false;  //玩家列表\r\n        this.playerCount=0;    //玩家个数\r\n        this.playkey=0;       //回放帧\r\n        this.playBack=false;  //回放日志\r\n        this.NextPlayTime=0;   //下帧播放时间\r\n        this.pause=false;      //暂停\r\n        this.fadeOutTime=5;    //淡出时间\r\n        this.dPos=-1;   //庄家\r\n        this.minplay=0;  //快退最多能退到的帧数\r\n        this.clientPos = 0;\r\n        this.PlayBackList=new Array();\r\n        console.log(\"UIPokerVideo playBackCode：\",playBackCode);\r\n        this.NetManager.SendPack(\"game.CPlayerPlayBack\", {\"playBackCode\":playBackCode,\"chekcPlayBackCode\":false},this.OnPack_VideoData.bind(this), this.OnVideoFailed.bind(this));\r\n    },\r\n\r\n    OnVideoFailed:function(serverPack){\r\n        this.SetWndProperty(\"UIMessageNoExist\", \"active\",true);\r\n    },\r\n\r\n    OnPack_PlayBackData:function(serverPack){\r\n        let playBackNum=serverPack.playBackNum;\r\n        let key=serverPack.id;\r\n        this.PlayBackList[key]=serverPack.msg;\r\n        if(this.PlayBackList.length==playBackNum){\r\n            let PlayBackJson='';\r\n            for(let i=0;i<playBackNum;i++){\r\n                PlayBackJson+=this.PlayBackList[i];\r\n            }\r\n            let playBack=eval('(' + PlayBackJson + ')');\r\n            this.playBack=playBack.playbackList;\r\n            console.log(\"OnPack_PlayBackData mt this.playBack:\",this.playBack);\r\n            this.NextPlayTime=Math.round(new Date().getTime()/1000)-1;\r\n            this.schedule(this.Play,0.5);\r\n        }\r\n    },\r\n\r\n    OnPack_VideoData:function(serverPack){\r\n    \tthis.playerList=this.Str2Json(serverPack.playerList);\r\n    \tthis.dPos=serverPack.dPos;\r\n    \tthis.playerCount=this.playerList.length;\r\n    \tlet roomKey=serverPack.roomKey;\r\n    \tlet setID=serverPack.setID;\r\n    \tlet setAll=serverPack.setCount;\r\n        this.curRoomID = serverPack.roomID;\r\n        this.curTabId = serverPack.tabId;\r\n        this.SetRoomInfo(this.playerCount,roomKey,setID,setAll);\r\n        //获取对局人数\r\n        this.playerCount = this.playerList.length;\r\n        this.isSelf = false;\r\n        //先找出玩家自己的位置\r\n        for(let i = 0; i < this.playerList.length; i++){\r\n            if(app[app.subGameName + \"_HeroManager\"]().GetHeroID() == this.playerList[i].pid){\r\n                this.clientPos = this.playerList[i].pos;\r\n                this.isSelf = true;\r\n                break;\r\n            }\r\n        }\r\n    \tthis.ShowPlayerInfo(this.playerList);\r\n\t},\r\n\t\r\n\tInitCard:function(){\r\n\t\t//玩家手牌\r\n        this.handCards.active = false;\r\n        for(let i = 0; i < this.DDZDefine.MaxHandCard; i++){\r\n            let card = cc.instantiate(this.cardPrefab);\r\n            card.active = false;\r\n            card.name = \"card_\" + (i+1).toString();\r\n            this.handCards.addChild(card);\r\n        }\r\n\r\n        //玩家打出去的牌\r\n        for(let i = 0; i < this.DDZDefine.MaxPlayer; i++){\r\n            let outCardList = this.node.getChildByName(\"outCardList\"+i);\r\n            outCardList.active = false;\r\n            for(let j = 0; j < this.DDZDefine.MaxHandCard; j++){\r\n                let card = cc.instantiate(this.cardPrefab);\r\n                card.active = false;\r\n                card.name = \"card_\" + (i+1).toString();\r\n                outCardList.addChild(card);\r\n            }\r\n        }\r\n\r\n        //玩家明牌的牌\r\n        for(let i = 1; i < this.DDZDefine.MaxPlayer; i++){\r\n            let openCardList = this.node.getChildByName(\"openCardList\"+i);\r\n            openCardList.active = false;\r\n            for(let j = 0; j < this.DDZDefine.MaxHandCard; j++){\r\n                let card = cc.instantiate(this.cardPrefab);\r\n                card.active = false;\r\n                card.name = \"card_\" + (i+1).toString();\r\n                openCardList.addChild(card);\r\n            }\r\n        }\r\n\r\n        //地主牌\r\n        for (var i = 0; i < 3; i++) {\r\n            let card = cc.instantiate(this.cardPrefab);\r\n            card.active = false;\r\n            card.scale = 0.39;\r\n            card.name = \"dzcard_\" + (i+1).toString();\r\n            this.img_dzp.addChild(card);\r\n        }\r\n    },\r\n    \r\n\tSetRoomInfo:function(playercount,roomKey,setID,setAll){\r\n\t\tthis.SetWndProperty(\"room_data/label_player_num\", \"text\",playercount+\"人场\");\r\n\t\tthis.SetWndProperty(\"room_data/label_player_ju\", \"text\",\"局数：\"+setID+\"/\"+setAll);\r\n\t\tthis.SetWndProperty(\"room_data/label_player_roomkey\", \"text\",\"房间号：\"+roomKey);\r\n    },\r\n    \r\n    SetPlayInfo:function(){\r\n        let playnow=this.playkey+1;\r\n        let max=this.playBack.length;\r\n        if(playnow>max){\r\n            playnow=max;\r\n        }\r\n        if(playnow<0){\r\n            playnow=0;\r\n        }\r\n        // this.SetWndProperty(\"playinfo\", \"text\",playnow+\"/\"+max);\r\n    },\r\n\r\n    //服务端位置转客户端位置\r\n\tGetUIPosByDataPos:function(dataPos){\r\n\t\tlet playerCount = this.playerList.length;\r\n\t\tlet uiPos = (dataPos + (this.playerCount - this.clientPos)) % playerCount;\r\n\t\treturn uiPos;\r\n    },\r\n\r\n    GetPlayerPos:function(dataPos){\r\n        let uiPos = -1;\r\n        if(this.isSelf){\r\n            uiPos = this.GetUIPosByDataPos(dataPos);\r\n        }\r\n        else{\r\n            uiPos =  dataPos;\r\n        }\r\n\r\n        return uiPos;\r\n    },\r\n    \r\n    SetSeat01OutCardPos:function(dataPos, len){\r\n        let uiPos = this.GetPlayerPos(dataPos);\r\n        \r\n        \r\n        if(uiPos != 1) return;\r\n\r\n        let node = this.node.getChildByName(\"outCardList1\");\r\n        let posX = 525 - 25 * len;\r\n        node.x = posX;\r\n    },\r\n\r\n\tShowPlayerInfo(playerList){\r\n\t\tfor(let i = 0; i < playerList.length; i++){\r\n            let uiPos = this.GetPlayerPos(playerList[i].pos);\r\n            let heroID = playerList[i].pid;\r\n            let head = this.GetWndNode(\"sp_seat0\"+uiPos+\"/head\");\r\n            head.active = true;\r\n            //显示用户头像\r\n            head.getChildByName(\"touxiang\").getChildByName(\"btn_headkuang\").getChildByName(\"mask\").getChildByName(\"btn_head\").getComponent(app.subGameName + \"_WeChatHeadImage\").ShowHeroHead(heroID)\r\n            //显示用户名字\r\n\t\t\tlet sp_info = head.getChildByName('touxiang').getChildByName('sp_info');\r\n\t\t\tsp_info.getChildByName('lb_name').getComponent(\"cc.Label\").string = playerList[i].name;\r\n\t\t}\r\n\t},\r\n\t\r\n    HideAll:function(){\r\n        this.SetWndProperty(\"UIMessageNoExist\", \"active\",false);\r\n        // this.SetWndProperty(\"playinfo\", \"text\",'');\r\n        for(let i = 0 ; i < 3; i++){\r\n            let ShowNode = this.GetWndNode(\"sp_seat0\"+i);\r\n            if(i != 0){\r\n                ShowNode.getChildByName('card').active=false;\r\n                ShowNode.getChildByName('cardNum').active = false;\r\n            }\r\n            this.GetWndNode(\"sp_seat0\"+i+\"/jiesan\").active = false;\r\n            let head = this.GetWndNode(\"sp_seat0\"+i+\"/head\");\r\n            //显示地主\r\n            head.getChildByName(\"touxiang\").getChildByName(\"icon_dzm\").active = false;\r\n            //显示是否加倍\r\n            head.getChildByName(\"touxiang\").getChildByName(\"img_jb\").active = false;\r\n            ShowNode.getChildByName('pass').active=false;\r\n            ShowNode.getChildByName('head').active=false;\r\n            head.getChildByName(\"touxiang\").getChildByName(\"trusteeship\").active = false;\r\n        }\r\n        this.HideAllOutCard();\r\n        this.HideAllOpenCard();\r\n        this.HideAllHandCard();\r\n    },\r\n\r\n    HideAllHandCard:function(){\r\n        this.handCards.active = false;\r\n        for(let i = 0; i < this.handCards.children.length; i++){\r\n            let child = this.handCards.children[i];\r\n            child.active = false;\r\n        }\r\n    },\r\n\r\n    HideAllOutCard:function(){\r\n        for(let i = 0; i < this.DDZDefine.MaxPlayer; i++){\r\n            let outCard = this.node.getChildByName(\"outCardList\" + i);\r\n            outCard.active = false;\r\n        }\r\n    },\r\n\r\n    HideAllOpenCard:function(){\r\n        for(let i = 1; i < this.DDZDefine.MaxPlayer; i++){\r\n            let openCardList = this.node.getChildByName(\"openCardList\" + i);\r\n            openCardList.active = false;\r\n        }\r\n    },\r\n\r\n    HidePokerBack:function(){\r\n        for(let i = 1; i < this.DDZDefine.MaxPlayer; i++){\r\n            let poker_back = this.GetWndNode(\"sp_seat0\"+i+\"/card/poker_back\");\r\n            if(!poker_back.active){\r\n                poker_back.active = true;\r\n            }\r\n        }\r\n    },\r\n\r\n\r\n    SetWanFa:function(cfg,isClub){\r\n        let wanfa=this.WanFa(cfg);\r\n        if(isClub==true){\r\n            this.wanfa.string=\"亲友圈,\"+wanfa;\r\n        }else{\r\n            this.wanfa.string=wanfa;\r\n        }\r\n    },\r\n    ShowPosLostConnect:function(posID,isLostConnect){\r\n        let uiPos = this.GetPlayerPos(posID);\r\n        let seat = this.GetWndNode(\"sp_seat0\"+uiPos+\"/head\");\r\n        if(isLostConnect==true){\r\n            seat.getChildByName('touxiang').getChildByName('sp_lixian').active=true;\r\n        }else{\r\n            this.scheduleOnce(function(){\r\n              seat.getChildByName('touxiang').getChildByName('sp_lixian').active=false;\r\n            },2);\r\n        }\r\n        \r\n    },\r\n    ShowShowJieSan:function(posID){\r\n        let uiPos = this.GetPlayerPos(posID);\r\n        let seat = this.GetWndNode(\"sp_seat0\"+uiPos+\"/jiesan\");\r\n        seat.getChildByName('jiesan').active=true;\r\n        this.scheduleOnce(function(){\r\n              seat.getChildByName('jiesan').active=false;\r\n        },2);\r\n    },\r\n\r\n\tPlayData(){\r\n        if(this.playkey == -1){\r\n            this.playkey = 0;\r\n        }\r\n\t\tlet data=this.playBack[this.playkey];\r\n\t\tif(!data){\r\n\t\t\treturn false;\r\n\t\t}\r\n        this.SetPlayInfo();\r\n\t\tconsole.log(\"PlayForce data:\",data);\r\n\t\tlet type=data.name;\r\n\t\tlet res=data.res;\r\n\t\tlet waitSecond=0;//本帧播放时间\r\n        // if(data[\"setPosCard\"]){\r\n        //     for(let i=0;i<data[\"setPosCard\"].length;i++){\r\n        //         let posID=data[\"setPosCard\"][i].posID;\r\n        //         let isLostConnect=data[\"setPosCard\"][i].isLostConnect;\r\n        //         this.ShowPosLostConnect(posID,isLostConnect);\r\n        //     }\r\n        // }\r\n\t\tif(type.indexOf(\"SDDZ_Config\")>=0){\r\n            waitSecond=0;\r\n            this.SetWanFa(res.cfg,res.isClub);\r\n\r\n        }else if(type.indexOf(\"StartVoteDissolve\")>=0){\r\n            waitSecond=2;\r\n            let createPos=res.createPos;\r\n            this.ShowShowJieSan(createPos);\r\n        }else if(type.indexOf(\"SDDZ_SetStart\")>=0){\r\n            waitSecond=1;\r\n            this.HideAllOutCard();\r\n            this.PlaySetStart(res, data.setPosCard);\r\n            this.UpdateScoreAndDouble(res.setInfo.hogScore, res.setInfo.roomDouble);\r\n        }\r\n        else if(type.indexOf(\"SDDZ_ChangeStatus\")>=0){\r\n            waitSecond=1;\r\n            this.HideAllOutCard();\r\n            this.PlayChangeStatus(res);\r\n            this.UpdateScoreAndDouble(null, res.roomDouble);\r\n        }else if(type.indexOf(\"SDDZ_Hog\")>=0){\r\n            waitSecond=1;\r\n            this.UpdateScoreAndDouble(res.hogScore, res.roomDouble);\r\n        }\r\n        else if(type.indexOf(\"SDDZ_OpCard\")>=0){\r\n            waitSecond=1;\r\n            this.PlayOpCard(res, data.setPosCard);\r\n            this.UpdateScoreAndDouble(null, res.roomDouble);\r\n        }\r\n        else if(type.indexOf(\"SDDZ_SetEnd\")>=0){\r\n\t\t\twaitSecond=4000000;\r\n\t\t\tthis.PlayEnd(res);\r\n        }\r\n        else{\r\n\t\t\tconsole.log(\"Play type no play:\",type);\r\n\t\t\tconsole.log(\"Play type no play data:\",data);\r\n\t\t\tthis.pause==true;\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.playkey+=1;\r\n\t\tthis.NextPlayTime=Math.round(new Date().getTime()/1000)+waitSecond;\r\n    },\r\n    \r\n\tPlay:function(){\r\n\t\tthis.fadeOutTime=this.fadeOutTime-0.5;\r\n\t\tif(this.fadeOutTime<=0 && this.fadeOutTime>-2){\r\n\t\t\tthis.HideControl();\r\n\t\t}\r\n\t\tlet now=Math.round(new Date().getTime()/1000);\r\n\t\tif(this.NextPlayTime==0 || now<this.NextPlayTime){\r\n\t\t\treturn\r\n\t\t}\r\n\t\tif(this.pause==true){\r\n\t\t\treturn\r\n\t\t}\r\n\t\tthis.PlayData();\r\n    },\r\n    \r\n    PlayAddDouble:function(res){\r\n\r\n    },\r\n\r\n    PlayRobClose:function(res){\r\n\r\n    },\r\n\t\r\n\tPlayEnd:function(res){\r\n        let data=res.setEnd;\r\n        app[app.subGameName + \"Client\"].ExitGame();\r\n    },\r\n\r\n    ShowPass:function(dataPos){\r\n        let uiPos = this.GetPlayerPos(dataPos);\r\n        let node = this.GetWndNode(\"sp_seat0\"+uiPos+\"/pass\");\r\n        node.active = true;\r\n    },\r\n    \r\n\tPlayOpCard(res, setPosCard){\r\n        let data = res;\r\n        this.SetSeat01OutCardPos(data.pos, data.cardList.length);\r\n        this.ShowOutCard(data.pos, data.cardList);\r\n        this.HidePokerBack();\r\n        //显示托管图标\r\n        let uiPos = this.GetPlayerPos(data.pos);\r\n        let trusteeshipNode = this.GetWndNode(\"sp_seat0\"+uiPos+\"/head/touxiang/trusteeship\");\r\n        trusteeshipNode.active = data.isFlash;\r\n        if(!data.cardList.length && data.opCardType == 1){\r\n            this.ShowPass(data.pos);\r\n        }\r\n        if(setPosCard){\r\n            for(let i = 0; i < this.playerList.length; i++){\r\n                let player = this.playerList[i];\r\n                if(this.isSelf){\r\n                    if(player.pos == this.clientPos){\r\n                        this.ShowSelfCard(setPosCard[player.pos]);\r\n                    }\r\n                    else{\r\n                        this.ShowOpenCardList(player.pos, setPosCard[player.pos]);\r\n                    }\r\n                }\r\n                else{\r\n                    if(player.pos == 0){\r\n                        this.ShowSelfCard(setPosCard[player.pos]);\r\n                    }\r\n                    else{\r\n                        this.ShowOpenCardList(player.pos, setPosCard[player.pos]);\r\n                    }\r\n                }\r\n                \r\n            }\r\n\r\n            //显示动画特效\r\n            if(data.opCardType == 11){\r\n                //炸弹\r\n                this.boom_Ani.active = true;\r\n                this.SetAniPos(data.pos);\r\n                this.boom_Ani.getComponent(cc.Animation).play(\"zhadan\");\r\n            }\r\n            else if(data.opCardType == 12 || data.opCardType == 13){\r\n                this.plane_Ani.active = true;\r\n                this.plane_Ani.getComponent(cc.Animation).play(\"feiji\");\r\n            }\r\n        }\r\n    },\r\n    \r\n    SetAniPos:function(dataPos){\r\n        let uiPos = this.GetUIPosByDataPos(dataPos);\r\n        if(uiPos == 1){\r\n            this.boom_Ani.setPosition(cc.v2(232, 64));\r\n        }\r\n        else{\r\n           let outCardList = this.node.getChildByName(\"outCardList\"+uiPos);\r\n           this.boom_Ani.setPosition(cc.v2(outCardList.x, outCardList.y));\r\n        }\r\n    },\r\n\r\n    PlayChangeStatus:function(res){\r\n        if (res.state == this.ShareDefine.DDZSetState_Hog) {\r\n            let holeCards = res.holeCards;\r\n            for (let i = 0; i < holeCards.length; i++) {\r\n                let cardNode = this.img_dzp.children[i];\r\n                let cardValue = holeCards[i];\r\n                if(cardValue){\r\n                    this.ShowCard(cardValue, cardNode);\r\n                }\r\n                else{\r\n                    cardNode.active = false;\r\n                }\r\n            }\r\n            this.img_dzp.active = true;\r\n        }\r\n        else if (res.state == this.ShareDefine.DDZSetState_AddDouble) {\r\n            let addDoubleList = res.addDoubleList;\r\n            for(let i = 0; i < addDoubleList.length; i++){\r\n                let isLandowner = false;\r\n                if (res.landowner == i) {\r\n                    isLandowner = true;\r\n                }\r\n                let uiPos = this.GetPlayerPos(i);\r\n                let head = this.GetWndNode(\"sp_seat0\"+uiPos+\"/head\");\r\n                //显示地主\r\n                head.getChildByName(\"touxiang\").getChildByName(\"icon_dzm\").active = isLandowner;\r\n                //显示是否加倍\r\n                if (addDoubleList[i] == 1) {\r\n                    head.getChildByName(\"touxiang\").getChildByName(\"img_jb\").active = true;\r\n                }\r\n                else{\r\n                    head.getChildByName(\"touxiang\").getChildByName(\"img_jb\").active = false;\r\n                }\r\n            }\r\n        }\r\n    },\r\n    \r\n\tPlaySetStart:function(res, setPosCard){\r\n        for(let i = 0; i < this.playerList.length; i++){\r\n            let player = this.playerList[i];\r\n            let uiPos = this.GetPlayerPos(player.pos);\r\n            let cardList = setPosCard[player.pos];\r\n            if(uiPos == 0){\r\n                if(cardList.length == 24){\r\n                    this.handCards.getComponent(cc.Layout).spacingX = -95;\r\n                }\r\n                else{\r\n                    this.handCards.getComponent(cc.Layout).spacingX = -90;\r\n                }\r\n                this.ShowSelfCard(cardList);\r\n            }\r\n            else{\r\n                this.ShowOpenCardList(player.pos, cardList);\r\n                this.GetWndNode(\"sp_seat0\"+uiPos+\"/card\").active = true;\r\n                this.GetWndNode(\"sp_seat0\"+uiPos+\"/cardNum\").active = true;\r\n                this.GetWndNode(\"sp_seat0\"+uiPos+\"/cardNum\").getComponent(cc.Label).string = cardList.length + '张';\r\n            }\r\n        }\r\n    },\r\n\r\n    ShowSelfCard:function(cardList){\r\n        this.SortCardByMax(cardList);\r\n        this.handCards.active = true;\r\n        for(let i = 0; i < this.handCards.children.length; i++){\r\n            let cardNode = this.handCards.children[i];\r\n            let cardValue = cardList[i];\r\n            if(cardValue){\r\n                this.ShowCard(cardValue, cardNode);\r\n            }\r\n            else{\r\n                cardNode.active = false;\r\n            }\r\n        }\r\n    },\r\n\r\n    ShowOutCard:function(dataPos, cardList){\r\n        let uiPos = this.GetPlayerPos(dataPos);\r\n        let pass = this.GetWndNode(\"sp_seat0\"+uiPos+\"/pass\");\r\n        pass.active = false;\r\n        let outCardNodeList = this.node.getChildByName(\"outCardList\"+uiPos);\r\n        outCardNodeList.active = true;\r\n        for(let i = 0; i < outCardNodeList.children.length; i++){\r\n            let cardNode = outCardNodeList.children[i];\r\n            let value = cardList[i];\r\n            if(value){\r\n                this.ShowCard(value, cardNode);\r\n            }\r\n            else{\r\n                cardNode.active = false;\r\n            }\r\n        }\r\n    },\r\n    \r\n    ShowOpenCardList:function(dataPos, cardList){\r\n        let uiPos = this.GetPlayerPos(dataPos);\r\n        if(uiPos == 0) return;\r\n        this.SortCardByMax(cardList);\r\n        let openCardList = this.node.getChildByName(\"openCardList\" + uiPos);\r\n        openCardList.active = true;\r\n        for(let i = 0; i < openCardList.children.length; i++){\r\n            let cardNode = openCardList.children[i];\r\n            let value = cardList[i];\r\n            if(value){\r\n                this.ShowCard(value, cardNode);\r\n            }\r\n            else{\r\n                cardNode.active = false;\r\n            }\r\n        }\r\n        this.GetWndNode(\"sp_seat0\"+uiPos+\"/cardNum\").getComponent(cc.Label).string = cardList.length + '张';\r\n    },\r\n\r\n    SortCardByMax:function(pokers){\r\n        pokers.sort(function(a, b){\r\n            //大小王值最大\r\n            let value_a = a&0x0F;\r\n            let value_b = b&0x0F;\r\n            if (value_a == 1) \r\n                value_a = 16;\r\n            if (value_a == 2) \r\n                value_a = 17;\r\n            if (value_b == 1) \r\n                value_b = 16;\r\n            if (value_b == 2) \r\n                value_b = 17;\r\n            return value_b - value_a;\r\n        });\r\n    },\r\n\t\r\n\tOnAniPlayFinished:function(event){\r\n        if(event.target.name == 'feiji'){\r\n            this.plane_Ani.active = false;\r\n        }\r\n        else if(event.target.name == 'zhadan'){\r\n            this.boom_Ani.active = false;\r\n        }\r\n    },\r\n    \r\n    OnClose:function(){\r\n        \r\n    },\r\n\r\n    OnClick:function(btnName, btnNode){\r\n    \tthis.fadeOutTime=5;\r\n        if(btnName == \"btn_return\"){\r\n            app[app.subGameName + \"Client\"].ExitGame();\r\n        }else if (btnName == \"btnSure\") {\r\n            app[app.subGameName + \"Client\"].ExitGame();\r\n        }\r\n        else if(btnName==\"btn_back\"){\r\n        \tthis.OnClickPause();\r\n            if(this.minplay>=this.playkey){\r\n                return;\r\n            }\r\n            this.playkey=this.playkey-2;  //扣一针,播放完一帧帧数会加一，所有要回到上一帧，帧数要-2\r\n            this.PlayData();\r\n        }else if(btnName==\"btn_play\"){\r\n        \tthis.OnClickPlay();\r\n        }else if(btnName==\"btn_pause\"){\r\n        \tthis.OnClickPause();\r\n        }else if(btnName==\"btn_forward\"){\r\n        \tthis.OnClickPause();\r\n        \tthis.PlayData();\r\n        }else if(btnName==\"btn_last\"){\r\n            if (this.curTabId <= 1) {\r\n                app[app.subGameName+\"_SysNotifyManager\"]().ShowSysMsg('当前已经是第一局');\r\n                return;\r\n            }\r\n            this.curTabId--;\r\n            let self = this;\r\n            let sendPack = {};\r\n            sendPack.roomId = this.curRoomID;\r\n            sendPack.tabId = this.curTabId;\r\n            app[app.subGameName+\"_NetManager\"]().SendPack(app.subGameName+\".C\"+app.subGameName.toUpperCase()+\"GetPlayBackCode\", sendPack,function(serverPack){\r\n                let playDataGame=app[app.subGameName+\"_ShareDefine\"]().GametTypeID2PinYin[serverPack.gameId];\r\n                if (playDataGame != app.subGameName) {\r\n                    app[app.subGameName+\"_SysNotifyManager\"]().ShowSysMsg('获取回放数据不是该游戏的');\r\n                    return;\r\n                }\r\n                self.GetPlayBackDataByCode(serverPack.playBackCode);\r\n            },\r\n            function(error){\r\n                self.curTabId++;\r\n                app[app.subGameName+\"_SysNotifyManager\"]().ShowSysMsg('获取回放数据失败,检查是否已经是否第一局');\r\n            });\r\n        }else if(btnName==\"btn_next\"){\r\n            this.curTabId++;\r\n            let self = this;\r\n            let sendPack = {};\r\n            sendPack.roomId = this.curRoomID;\r\n            sendPack.tabId = this.curTabId;\r\n            app[app.subGameName+\"_NetManager\"]().SendPack(app.subGameName+\".C\"+app.subGameName.toUpperCase()+\"GetPlayBackCode\", sendPack,function(serverPack){\r\n                let playDataGame=app[app.subGameName+\"_ShareDefine\"]().GametTypeID2PinYin[serverPack.gameId];\r\n                if (playDataGame != app.subGameName) {\r\n                    app[app.subGameName+\"_SysNotifyManager\"]().ShowSysMsg('获取回放数据不是该游戏的');\r\n                    return;\r\n                }\r\n                self.GetPlayBackDataByCode(serverPack.playBackCode);\r\n            },\r\n            function(error){\r\n                self.curTabId--;\r\n                app[app.subGameName+\"_SysNotifyManager\"]().ShowSysMsg('获取回放数据失败,检查是否已经是否最后一局');\r\n            });\r\n        }\r\n        else{\r\n            this.ShowControl();\r\n        }\r\n    },\r\n\r\n    OnClickPause:function(){\r\n    \tthis.pause=true;\r\n        this.control_list.getChildByName('btn_play').active=true;\r\n        this.control_list.getChildByName('btn_pause').active=false;\r\n    },\r\n\r\n    OnClickPlay:function(){\r\n    \tthis.pause=false;\r\n        this.control_list.getChildByName('btn_play').active=false;\r\n        this.control_list.getChildByName('btn_pause').active=true;\r\n    },\r\n\r\n    HideControl:function(){\r\n    \tvar action = cc.fadeOut(2.0);\r\n    \tthis.control_list.runAction(action);\r\n    },\r\n\r\n    ShowControl:function(){\r\n    \tvar action = cc.fadeIn(0.5);\r\n    \tthis.control_list.runAction(action);\r\n    },\r\n\r\n    UpdateScoreAndDouble:function(hogScore, roomDouble){\r\n        if (hogScore != null) {\r\n            this.lb_publicScore.string = hogScore;\r\n        }\r\n        if (roomDouble != null) {\r\n            this.lb_publicMultiple.string = roomDouble;\r\n        }\r\n    },\r\n\r\n\t//---------计时器，开局发牌逻辑--------------\r\n\tOnUpdate:function(){\r\n\t\t\r\n    },\r\n    \r\n    //显示poker牌\r\n    ShowCard:function(cardType, cardNode){\r\n        this.PokerCard.GetPokeCard(cardType, cardNode);\r\n        cardNode.active = true;\r\n        cardNode.getChildByName(\"poker_back\").active = false;\r\n    },\r\n\r\n\tStr2Json:function(jsondata){\r\n        if(jsondata===\"\"){\r\n            return false;\r\n        }\r\n        var json = JSON.parse(jsondata);\r\n        return json;\r\n    },\r\n\r\n    \r\n});"]}