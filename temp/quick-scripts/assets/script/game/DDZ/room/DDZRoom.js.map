{"version":3,"sources":["DDZRoom.js"],"names":["app","require","DDZRoom","BaseClass","extend","Init","JS_Name","ComTool","subGameName","ShareDefine","HeroManager","DDZRoomPosMgr","DDZRoomSet","OnReload","Log","dataInfo","roomConfig","roomRecord","OnInitRoomData","serverPack","RoomStateStringDict","prizeType","isCoinRoom","cfg","roomPosInfoList","console","log","OnInitRoomPosData","setInfo","OnInitRoomSetData","isGetGR","OnPosLeave","pos","UpdateOwnerID","ownerID","OnPosContinueGame","OnSetStart","RoomState_Playing","GetRoomSet","OnSetEnd","setEnd","OnRoomEnd","roomEnd","RoomState_End","OnStartVoteDissolve","createPos","endSec","posAgreeList","index","push","dissolveInfo","OnPosDealVote","agreeDissolve","ErrLog","length","RoomRecord","OnSportsPointChange","toUpperCase","OnDissolve","dissolve","OnPlaying","opPos","state","OnSetPlaying","GetRoomRecord","GetRoomDataInfo","GetRoomProperty","property","hasOwnProperty","GetRoomConfig","GetRoomConfigByProperty","setID","GetRoomPosMgr","IsClientIsCreater","heroID","GetHeroID","IsClientIsOwner","SetGameRecord","bget","GetGameRecord","GetClientPlayerSetPos","GetClientPos","setPos","GetSetPosByPos","GetClientPlayerInfo","playerInfo","GetPlayerInfoByPos","GetRoomWanfa","wanfa","indexOf","ClearDissolve","g_DDZRoom","exports","GetModel"],"mappings":";;;;;;AAAA;;;;;;;;;;;;;AAaA,IAAIA,MAAMC,QAAQ,SAAR,CAAV;;AAEA;;;AAGA,IAAIC,UAAUF,IAAIG,SAAJ,CAAcC,MAAd,CAAqB;;AAElC;;;AAGAC,OAAK,gBAAU;;AAEd,OAAKC,OAAL,GAAe,SAAf;;AAEA,OAAKC,OAAL,GAAeP,IAAIA,IAAIQ,WAAJ,GAAkB,UAAtB,GAAf;AACA,OAAKC,WAAL,GAAmBT,IAAIA,IAAIQ,WAAJ,GAAkB,cAAtB,GAAnB;AACA,OAAKE,WAAL,GAAmBV,IAAIA,IAAIQ,WAAJ,GAAkB,cAAtB,GAAnB;;AAEA,OAAKG,aAAL,GAAqBX,IAAIW,aAAJ,EAArB;AACA,OAAKC,UAAL,GAAkBZ,IAAIY,UAAJ,EAAlB;;AAEA,OAAKC,QAAL;;AAEA,OAAKC,GAAL,CAAS,MAAT;AAEA,EApBiC;;AAsBlCD,WAAS,oBAAU;;AAElB,OAAKE,QAAL,GAAgB,EAAhB;;AAEA,OAAKC,UAAL,GAAkB,EAAlB;;AAEM,OAAKC,UAAL,GAAkB,EAAlB;AAEN,EA9BiC;;AAgClC;AACA;AACAC,iBAAe,wBAASC,UAAT,EAAoB;;AAElCA,aAAW,OAAX,IAAsB,KAAKV,WAAL,CAAiBW,mBAAjB,CAAqCD,WAAW,OAAX,CAArC,CAAtB;;AAEA,MAAGA,WAAWE,SAAX,IAAwB,MAA3B,EAAkC;AACjCrB,OAAIA,IAAIQ,WAAJ,GAAkB,cAAtB,IAAwCc,UAAxC,GAAqD,IAArD;AACA,GAFD,MAGK,IAAGH,WAAWE,SAAX,IAAwB,UAA3B,EAAsC;AAC1CrB,OAAIA,IAAIQ,WAAJ,GAAkB,cAAtB,IAAwCc,UAAxC,GAAqD,KAArD;AACA;;AAED,MAAIC,MAAMJ,WAAW,KAAX,CAAV;AACA,OAAKH,UAAL,GAAkBO,GAAlB;;AAEA,MAAIC,kBAAkBL,WAAW,SAAX,KAAuB,EAA7C;AACAM,UAAQC,GAAR,CAAY,iBAAZ,EAA+BF,eAA/B;AACA,OAAKb,aAAL,CAAmBgB,iBAAnB,CAAqCH,eAArC;;AAEA,MAAII,UAAUT,WAAW,KAAX,CAAd;AACA,OAAKP,UAAL,CAAgBiB,iBAAhB,CAAkCD,OAAlC;;AAEA;AACA,OAAKb,QAAL,GAAgBI,UAAhB;;AAEA,OAAKW,OAAL,GAAe,KAAf;AACA,OAAKhB,GAAL,CAAS,aAAT,EAAwB,KAAKE,UAA7B;AACA,OAAKF,GAAL,CAAS,WAAT,EAAsB,KAAKC,QAA3B;AACA,EA7DiC;;AA+DlC;AACAgB,aAAW,oBAASC,GAAT,EAAa;AACvB,OAAKrB,aAAL,CAAmBoB,UAAnB,CAA8BC,GAA9B;AACA,EAlEiC;AAmElCC,gBAAc,uBAASC,OAAT,EAAiB;AAC9B,OAAKnB,QAAL,CAAc,SAAd,IAAyBmB,OAAzB;AACA,EArEiC;AAsElC;AACAC,oBAAkB,2BAASH,GAAT,EAAa;AAC9B,OAAKrB,aAAL,CAAmBwB,iBAAnB,CAAqCH,GAArC;AACA,EAzEiC;;AA2ElC;AACAI,aAAW,oBAASR,OAAT,EAAiB;AAC3B,OAAKb,QAAL,CAAc,OAAd,IAAyB,KAAKN,WAAL,CAAiB4B,iBAA1C;AACA,OAAKtB,QAAL,CAAc,OAAd,IAAyBa,QAAQ,OAAR,CAAzB;AACA,OAAKU,UAAL,GAAkBF,UAAlB,CAA6BR,OAA7B;AACA,EAhFiC;;AAkFlC;AACAW,WAAS,kBAASC,MAAT,EAAgB;AACxB,OAAK5B,UAAL,CAAgB2B,QAAhB,CAAyBC,MAAzB;AACA,OAAK7B,aAAL,CAAmB4B,QAAnB,CAA4BC,MAA5B;AACA,EAtFiC;;AAwFlC;AACAC,YAAU,mBAASC,OAAT,EAAiB;AAC1B,OAAK3B,QAAL,CAAc,OAAd,IAAyB,KAAKN,WAAL,CAAiBkC,aAA1C;AACA,OAAK5B,QAAL,CAAc,SAAd,IAA2B2B,OAA3B;AACA,EA5FiC;;AA8FlC;AACAE,sBAAoB,6BAASC,SAAT,EAAoBC,MAApB,EAA2B;AAC9C,MAAIC,eAAe,EAAnB;;AAEA,OAAI,IAAIC,QAAM,CAAd,EAAiBA,QAAM,EAAvB,EAA2BA,OAA3B,EAAmC;AAClCvB,WAAQC,GAAR,CAAY,eAAamB,SAAb,GAAuB,SAAvB,GAAiCG,KAA7C;AACA,OAAGA,SAASH,SAAZ,EAAsB;AACrBE,iBAAaE,IAAb,CAAkB,CAAlB;AACA,IAFD,MAGI;AACHF,iBAAaE,IAAb,CAAkB,CAAlB;AACA;AACD;AACD,MAAIC,eAAe,EAAC,UAASJ,MAAV,EAAiB,aAAYD,SAA7B,EAAwC,gBAAeE,YAAvD,EAAnB;AACA,OAAKhC,QAAL,CAAc,UAAd,IAA4BmC,YAA5B;AACA,SAAOA,YAAP;AACA,EA9GiC;;AAgHlC;AACAC,gBAAc,uBAASnB,GAAT,EAAcoB,aAAd,EAA4B;;AAEzC,MAAIF,eAAe,KAAKnC,QAAL,CAAc,UAAd,CAAnB;AACA,MAAIgC,eAAeG,aAAa,cAAb,CAAnB;AACA,MAAG,CAACH,YAAJ,EAAiB;AAChB,QAAKM,MAAL,CAAY,sCAAZ,EAAoD,KAAKtC,QAAzD;AACA;AACA;;AAED,MAAGiB,OAAOe,aAAaO,MAAvB,EAA8B;AAC7B,QAAKD,MAAL,CAAY,uBAAZ,EAAqCrB,GAArC,EAA0CoB,aAA1C,EAAyDL,YAAzD;AACA;AACA;;AAED,MAAGK,aAAH,EAAiB;AAChBL,gBAAaf,GAAb,IAAoB,CAApB;AACA,GAFD,MAGI;AACHe,gBAAaf,GAAb,IAAoB,CAApB;AACA;AACD,SAAOkB,YAAP;AACA,EAtIiC;AAuIlC;AACGK,aAAW,oBAAUpC,UAAV,EAAsB;AACnC,OAAKF,UAAL,GAAkB,EAAlB;AACA,OAAKA,UAAL,GAAkBE,UAAlB;AACA,EA3IiC;AA4I/BqC,sBAAoB,6BAASrC,UAAT,EAAoB;AAC1C,OAAKnB,IAAIQ,WAAJ,CAAgBiD,WAAhB,KAA8B,YAAnC,EAAiDD,mBAAjD,CAAqErC,UAArE;AACA,EA9IiC;AA+IlC;AACAuC,aAAW,oBAASC,QAAT,EAAkB;AAC5B,OAAK5C,QAAL,CAAc,UAAd,IAA4B4C,QAA5B;AACA,EAlJiC;;AAoJlCC,YAAU,mBAASzC,UAAT,EAAoB;AAC7B;AACA,MAAI0C,QAAQ1C,WAAW0C,KAAvB;AACA,MAAIC,QAAQ3C,WAAW2C,KAAvB;AACA,OAAKlD,UAAL,CAAgBmD,YAAhB,CAA6BF,KAA7B,EAAoCC,KAApC;AACA,EAzJiC;;AA2JlC;AACA;AACAE,gBAAc,yBAAY;AACzB,SAAO,KAAK/C,UAAZ;AACA,EA/JiC;;AAiKlC;AACAgD,kBAAgB,2BAAY;AAC3B,SAAO,KAAKlD,QAAZ;AACG,EApK8B;AAqKlC;AACAmD,kBAAgB,yBAASC,QAAT,EAAkB;AACjC,MAAG,CAAC,KAAKpD,QAAL,CAAcqD,cAAd,CAA6BD,QAA7B,CAAJ,EAA2C;AAC1C,QAAKd,MAAL,CAAY,6BAAZ,EAA2Cc,QAA3C;AACA;AACA;AACD,SAAO,KAAKpD,QAAL,CAAcoD,QAAd,CAAP;AACA,EA5KiC;;AA8KlC;AACAE,gBAAc,yBAAU;AACvB,SAAO,KAAKrD,UAAZ;AACA,EAjLiC;;AAmLlC;AACAsD,0BAAwB,iCAASH,QAAT,EAAkB;AACzC,MAAG,CAAC,KAAKnD,UAAL,CAAgBoD,cAAhB,CAA+BD,QAA/B,CAAJ,EAA6C;AAC5C,QAAKd,MAAL,CAAY,qCAAZ,EAAmDc,QAAnD;AACA;AACA;AACD,SAAO,KAAKnD,UAAL,CAAgBmD,QAAhB,CAAP;AACA,EA1LiC;;AA4LlC7B,aAAW,sBAAU;AACpB,MAAIiC,QAAQ,KAAKxD,QAAL,CAAc,OAAd,CAAZ;AACA,MAAG,CAACwD,KAAJ,EAAU;AACT,QAAKlB,MAAL,CAAY,sBAAZ;AACA;AACA;AACD,SAAO,KAAKzC,UAAZ;AACA,EAnMiC;;AAqMlC4D,gBAAc,yBAAU;AACvB,SAAO,KAAK7D,aAAZ;AACA,EAvMiC;AAwMlC;AACG8D,oBAAkB,6BAAU;AACxB,MAAIC,SAAS,KAAKhE,WAAL,CAAiBiE,SAAjB,EAAb;AACA,MAAGD,UAAU,KAAK3D,QAAL,CAAc,SAAd,CAAb,EAAsC;AAClC,UAAO,IAAP;AACH;AACD,SAAO,KAAP;AACH,EA/M8B;AAgNlC;AACA6D,kBAAgB,2BAAU;AACzB,MAAIF,SAAS,KAAKhE,WAAL,CAAiBiE,SAAjB,EAAb;AACA,MAAGD,UAAU,KAAK3D,QAAL,CAAc,SAAd,CAAb,EAAsC;AACrC,UAAO,IAAP;AACA;AACD,SAAO,KAAP;AACA,EAvNiC;;AAyNlC8D,gBAAc,uBAASC,IAAT,EAAc;AAC3B,OAAKhD,OAAL,GAAegD,IAAf;AACA,EA3NiC;;AA6NlCC,gBAAc,yBAAU;AACvB,SAAO,KAAKjD,OAAZ;AACA,EA/NiC;;AAiOlC;AACAkD,wBAAsB,iCAAU;;AAE/B,MAAIhD,MAAM,KAAKrB,aAAL,CAAmBsE,YAAnB,EAAV;AACA,MAAGjD,MAAM,CAAT,EAAW;AACV,QAAKqB,MAAL,CAAY,sCAAZ;AACA;AACA;AACD,MAAI6B,SAAS,KAAKtE,UAAL,CAAgBuE,cAAhB,CAA+BnD,GAA/B,CAAb;AACA,MAAG,CAACkD,MAAJ,EAAW;AACV,QAAK7B,MAAL,CAAY,2CAAZ,EAAyDrB,GAAzD;AACA;AACA;AACD,SAAOkD,MAAP;AACA,EA/OiC;;AAiPlC;AACGE,sBAAoB,+BAAU;AAChC,MAAIpD,MAAM,KAAKrB,aAAL,CAAmBsE,YAAnB,EAAV;AACA,MAAGjD,MAAM,CAAT,EAAW;AACV,QAAKqB,MAAL,CAAY,oCAAZ;AACA;AACA;AACD,MAAIgC,aAAa,KAAK1E,aAAL,CAAmB2E,kBAAnB,CAAsCtD,GAAtC,CAAjB;AACA,MAAG,CAACqD,UAAJ,EAAe;AACd,QAAKhC,MAAL,CAAY,6CAAZ,EAA2DrB,GAA3D;AACA;AACA;AACD,SAAOqD,UAAP;AACA,EA9PiC;;AAgQlCE,eAAa,sBAASC,KAAT,EAAe;AAC3B,MAAG,KAAKxE,UAAL,CAAgB,aAAhB,EAA+ByE,OAA/B,CAAuCD,KAAvC,KAAiD,CAAC,CAArD,EAAuD;AACtD,UAAO,IAAP;AACA;AACD,SAAO,KAAP;AACA,EArQiC;;AAuQlCE,gBAAc,yBAAU;AACvB,OAAK3E,QAAL,CAAc,UAAd,IAA0B,EAA1B;AACA;AAzQiC,CAArB,CAAd;;AA6QA,IAAI4E,YAAY,IAAhB;;AAEA;;;AAGAC,QAAQC,QAAR,GAAmB,YAAU;AAC5B,KAAG,CAACF,SAAJ,EACCA,YAAY,IAAIzF,OAAJ,EAAZ;AACD,QAAOyF,SAAP;AACA,CAJD","file":"DDZRoom.js","sourceRoot":"../../../../../../../assets/script/game/DDZ/room","sourcesContent":["/*\r\n *  ----------------------------------------------------------------------------------------------------\r\n *  @copyright: Copyright (c) 2004, 2010 Xiamen DDM Network Technology Co.,Ltd., All rights reserved.\r\n *  ----------------------------------------------------------------------------------------------------\r\n *  @package SSSRoom.js\r\n *  @todo: 十三水房间\r\n *\r\n *  @version 1.0\r\n *\r\n *  修改时间 修改人 修改内容\r\n *  -------------------------------------------------------------------------------\r\n *\r\n */\r\nvar app = require(\"ddz_app\");\r\n\r\n/**\r\n * 类构造\r\n */\r\nvar DDZRoom = app.BaseClass.extend({\r\n\r\n\t/**\r\n\t * 初始化\r\n\t */\r\n\tInit:function(){\r\n\r\n\t\tthis.JS_Name = \"DDZRoom\";\r\n\r\n\t\tthis.ComTool = app[app.subGameName + \"_ComTool\"]();\r\n\t\tthis.ShareDefine = app[app.subGameName + \"_ShareDefine\"]();\r\n\t\tthis.HeroManager = app[app.subGameName + \"_HeroManager\"]();\r\n\r\n\t\tthis.DDZRoomPosMgr = app.DDZRoomPosMgr();\r\n\t\tthis.DDZRoomSet = app.DDZRoomSet();\r\n\r\n\t\tthis.OnReload();\r\n\r\n\t\tthis.Log(\"Init\");\r\n\r\n\t},\r\n\r\n\tOnReload:function(){\r\n\r\n\t\tthis.dataInfo = {};\r\n\r\n\t\tthis.roomConfig = {};\r\n\r\n        this.roomRecord = {};\r\n\r\n\t},\r\n\r\n\t//-----------------------回调函数-----------------------------\r\n\t//登录初始化房间数据\r\n\tOnInitRoomData:function(serverPack){\r\n\r\n\t\tserverPack[\"state\"] = this.ShareDefine.RoomStateStringDict[serverPack[\"state\"]];\r\n\r\n\t\tif(serverPack.prizeType == 'Gold'){\r\n\t\t\tapp[app.subGameName + \"_ShareDefine\"]().isCoinRoom = true;\r\n\t\t}\r\n\t\telse if(serverPack.prizeType == 'RoomCard'){\r\n\t\t\tapp[app.subGameName + \"_ShareDefine\"]().isCoinRoom = false;\r\n\t\t}\r\n\r\n\t\tlet cfg = serverPack[\"cfg\"];\r\n\t\tthis.roomConfig = cfg;\r\n\r\n\t\tlet roomPosInfoList = serverPack[\"posList\"]||[];\r\n\t\tconsole.log('roomPosInfoList', roomPosInfoList);\r\n\t\tthis.DDZRoomPosMgr.OnInitRoomPosData(roomPosInfoList);\r\n\r\n\t\tlet setInfo = serverPack[\"set\"];\r\n\t\tthis.DDZRoomSet.OnInitRoomSetData(setInfo);\r\n\r\n\t\t//其余信息存放到dataInfo\r\n\t\tthis.dataInfo = serverPack;\r\n\r\n\t\tthis.isGetGR = false;\r\n\t\tthis.Log(\"roomConfig:\", this.roomConfig);\r\n\t\tthis.Log(\"dataInfo:\", this.dataInfo);\r\n\t},\r\n\r\n\t//位置离开\r\n\tOnPosLeave:function(pos){\r\n\t\tthis.DDZRoomPosMgr.OnPosLeave(pos);\r\n\t},\r\n\tUpdateOwnerID:function(ownerID){\r\n\t\tthis.dataInfo['ownerID']=ownerID;\r\n\t},\r\n\t//继续游戏\r\n\tOnPosContinueGame:function(pos){\r\n\t\tthis.DDZRoomPosMgr.OnPosContinueGame(pos);\r\n\t},\r\n\r\n\t//set开始\r\n\tOnSetStart:function(setInfo){\r\n\t\tthis.dataInfo[\"state\"] = this.ShareDefine.RoomState_Playing;\r\n\t\tthis.dataInfo[\"setID\"] = setInfo[\"setID\"];\r\n\t\tthis.GetRoomSet().OnSetStart(setInfo);\r\n\t},\r\n\r\n\t//set结束\r\n\tOnSetEnd:function(setEnd){\r\n\t\tthis.DDZRoomSet.OnSetEnd(setEnd);\r\n\t\tthis.DDZRoomPosMgr.OnSetEnd(setEnd);\r\n\t},\r\n\r\n\t//房间结束\r\n\tOnRoomEnd:function(roomEnd){\r\n\t\tthis.dataInfo[\"state\"] = this.ShareDefine.RoomState_End;\r\n\t\tthis.dataInfo[\"roomEnd\"] = roomEnd;\r\n\t},\r\n\r\n\t//开始解散房间\r\n\tOnStartVoteDissolve:function(createPos, endSec){\r\n\t\tlet posAgreeList = [];\r\n\r\n\t\tfor(let index=0; index<10; index++){\r\n\t\t\tconsole.log(\"createPos:\"+createPos+\",index:\"+index);\r\n\t\t\tif(index == createPos){\r\n\t\t\t\tposAgreeList.push(1);\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tposAgreeList.push(0);\r\n\t\t\t}\r\n\t\t}\r\n\t\tlet dissolveInfo = {\"endSec\":endSec,\"createPos\":createPos, \"posAgreeList\":posAgreeList};\r\n\t\tthis.dataInfo[\"dissolve\"] = dissolveInfo;\r\n\t\treturn dissolveInfo;\r\n\t},\r\n\r\n\t//位置同意拒绝更新\r\n\tOnPosDealVote:function(pos, agreeDissolve){\r\n\r\n\t\tlet dissolveInfo = this.dataInfo[\"dissolve\"];\r\n\t\tlet posAgreeList = dissolveInfo[\"posAgreeList\"];\r\n\t\tif(!posAgreeList){\r\n\t\t\tthis.ErrLog(\"OnPosDealVote not find posAgreeList:\", this.dataInfo);\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\tif(pos >= posAgreeList.length){\r\n\t\t\tthis.ErrLog(\"OnPosDealVote(%s,%s):\", pos, agreeDissolve, posAgreeList);\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\tif(agreeDissolve){\r\n\t\t\tposAgreeList[pos] = 1;\r\n\t\t}\r\n\t\telse{\r\n\t\t\tposAgreeList[pos] = 2;\r\n\t\t}\r\n\t\treturn dissolveInfo\r\n\t},\r\n\t//更新房间内的对局记录信息\r\n    RoomRecord:function (serverPack) {\r\n\t\tthis.roomRecord = {};\r\n\t\tthis.roomRecord = serverPack;\r\n\t},\r\n    OnSportsPointChange:function(serverPack){\r\n\t\tthis[app.subGameName.toUpperCase()+\"RoomPosMgr\"].OnSportsPointChange(serverPack);\r\n\t},\r\n\t//---------------------设置函数---------------------\r\n\tOnDissolve:function(dissolve){\r\n\t\tthis.dataInfo[\"dissolve\"] = dissolve;\r\n\t},\r\n\r\n\tOnPlaying:function(serverPack){\r\n\t\t//改变玩家出牌位置\r\n\t\tlet opPos = serverPack.opPos;\r\n\t\tlet state = serverPack.state;\r\n\t\tthis.DDZRoomSet.OnSetPlaying(opPos, state);\r\n\t},\r\n\t\r\n\t//---------------------获取函数---------------------\r\n\t//获取对局记录信息\r\n\tGetRoomRecord:function () {\r\n\t\treturn this.roomRecord;\r\n\t},\r\n\t\r\n\t//获取房间信息\r\n\tGetRoomDataInfo:function () {\r\n\t\treturn this.dataInfo;\r\n    },\r\n\t//获取创建房间信息b\r\n\tGetRoomProperty:function(property){\r\n\t\tif(!this.dataInfo.hasOwnProperty(property)){\r\n\t\t\tthis.ErrLog(\"GetRoomProperty not find:%s\", property);\r\n\t\t\treturn\r\n\t\t}\r\n\t\treturn this.dataInfo[property];\r\n\t},\r\n\r\n\t//获取房间配置信息\r\n\tGetRoomConfig:function(){\r\n\t\treturn this.roomConfig\r\n\t},\r\n\r\n\t//获取房间配置信息\r\n\tGetRoomConfigByProperty:function(property){\r\n\t\tif(!this.roomConfig.hasOwnProperty(property)){\r\n\t\t\tthis.ErrLog(\"GetRoomConfigByProperty not find:%s\", property);\r\n\t\t\treturn\r\n\t\t}\r\n\t\treturn this.roomConfig[property];\r\n\t},\r\n\r\n\tGetRoomSet:function(){\r\n\t\tlet setID = this.dataInfo[\"setID\"];\r\n\t\tif(!setID){\r\n\t\t\tthis.ErrLog(\"GetSet not start set\");\r\n\t\t\treturn\r\n\t\t}\r\n\t\treturn this.DDZRoomSet;\r\n\t},\r\n\r\n\tGetRoomPosMgr:function(){\r\n\t\treturn this.DDZRoomPosMgr;\r\n\t},\r\n\t//客户端玩家是否是开房人\r\n    IsClientIsCreater:function(){\r\n        let heroID = this.HeroManager.GetHeroID();\r\n        if(heroID == this.dataInfo[\"ownerID\"]){\r\n            return true\r\n        }\r\n        return false\r\n    },\r\n\t//客户端玩家是否是房主\r\n\tIsClientIsOwner:function(){\r\n\t\tlet heroID = this.HeroManager.GetHeroID();\r\n\t\tif(heroID == this.dataInfo[\"ownerID\"]){\r\n\t\t\treturn true\r\n\t\t}\r\n\t\treturn false\r\n\t},\r\n\r\n\tSetGameRecord:function(bget){\r\n\t\tthis.isGetGR = bget;\r\n\t},\r\n\r\n\tGetGameRecord:function(){\r\n\t\treturn this.isGetGR;\r\n\t},\r\n\r\n\t//获取玩家setPos对象\r\n\tGetClientPlayerSetPos:function(){\r\n\r\n\t\tlet pos = this.DDZRoomPosMgr.GetClientPos();\r\n\t\tif(pos < 0){\r\n\t\t\tthis.ErrLog(\"GetClientPlayerSetPos not enter room\");\r\n\t\t\treturn\r\n\t\t}\r\n\t\tlet setPos = this.DDZRoomSet.GetSetPosByPos(pos);\r\n\t\tif(!setPos){\r\n\t\t\tthis.ErrLog(\"GetClientPlayerSetPos(%s) not find setPos\", pos);\r\n\t\t\treturn\r\n\t\t}\r\n\t\treturn setPos\r\n\t},\r\n\r\n\t//获取客户端玩家信息\r\n    GetClientPlayerInfo:function(){\r\n\t\tlet pos = this.DDZRoomPosMgr.GetClientPos();\r\n\t\tif(pos < 0){\r\n\t\t\tthis.ErrLog(\"GetClientPlayerInfo not enter room\");\r\n\t\t\treturn\r\n\t\t}\r\n\t\tlet playerInfo = this.DDZRoomPosMgr.GetPlayerInfoByPos(pos);\r\n\t\tif(!playerInfo){\r\n\t\t\tthis.ErrLog(\"GetClientPlayerInfo(%s) not find playerInfo\", pos);\r\n\t\t\treturn\r\n\t\t}\r\n\t\treturn playerInfo\r\n\t},\r\n\r\n\tGetRoomWanfa:function(wanfa){\r\n\t\tif(this.roomConfig[\"kexuanwanfa\"].indexOf(wanfa) != -1){\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn false;\r\n\t},\r\n\r\n\tClearDissolve:function(){\r\n\t\tthis.dataInfo['dissolve']='';\r\n\t},\r\n})\r\n\r\n\r\nvar g_DDZRoom = null;\r\n\r\n/**\r\n * 绑定模块外部方法\r\n */\r\nexports.GetModel = function(){\r\n\tif(!g_DDZRoom)\r\n\t\tg_DDZRoom = new DDZRoom();\r\n\treturn g_DDZRoom;\r\n}\r\n"]}