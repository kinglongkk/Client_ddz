{"version":3,"sources":["ddz_PokerCard.js"],"names":["app","require","ddz_PokerCard","BaseClass","extend","Init","JS_Name","subGameName","pokerList","newPokerList","is3DShow","LocalDataManager","GetConfigProperty","LOGIC_MASK_COLOR","LOGIC_MASK_VALUE","LOGIC_MASK_XIAOWANG","LOGIC_MASK_DAWANG","NNConst_BeiShu","LoadAllPokerRes","RefreshIs3DShow","SubCardValue","poker","temp","length","substring","GetPokeCardBack","curPokerList","i","_name","GetPokeCard","cardNode","isShowIcon1","isShowLandowner","hideBg","isRazz","isPartnerCard","type","type_2","type_3","type_4","num","cardColor","cardValue","isRed","GetCardColor","GetCardValue","getChildByName","active","numNode","toString","getComponent","cc","Sprite","spriteFrame","y","x","GetSGPokerTypeStr","cards","cardType","bSpecialNum","data","typeStr","isBigCard","beiShu","useRedColor","curValue","GetSGValue","value0","value1","value2","needValue","GetZJHPokerTypeStr","cardValues","ErrLog","sort","NormalPokerSort","IsZhaDanByZJH","IsTongHuaByZJH","IsShunZiByZJH","IsDuiZiByZJH","GetNNPokerTypeStr","curDataType","roomMrg","DDZRoomMgr","room","GetEnterRoom","parseInt","selectIndex","specialCards","selectDataList","roomCfg","GetRoomConfig","fanbeiguize","teshupaixing","selectType1","selectType2","selectType3","self","loader","loadResDir","SpriteFrame","err","assets","error","push","a","b","aValue","bValue","NNPokerSort","pokers","sortList","fristIndex","secondIndex","threeIndex","CheckNiu","SortNiu","fristValue","secondValue","threeValue","allValue","curValue1","curValue2","curValue3","CheckNiuEx","tempSorts","sortFunAIsMin","tempList","valueA","valueB","color","card0","card1","card2","color0","color1","color2","g_ddz_PokerCard","exports","GetModel"],"mappings":"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","file":"ddz_PokerCard.js","sourceRoot":"../../../../../../../assets/script/game/DDZ/room","sourcesContent":["var app = require(\"ddz_app\");\r\n\r\nvar ddz_PokerCard = app.BaseClass.extend({\r\n\r\n    /**\r\n     * 构造函数\r\n     */\r\n    Init:function(){\r\n        this.JS_Name = app.subGameName + \"_PokerCard\";\r\n\r\n        this.pokerList = [];\r\n        this.newPokerList = [];\r\n\r\n        this.is3DShow = app.LocalDataManager().GetConfigProperty(\"SysSetting\", app.subGameName + \"_is3DShow\");\r\n\r\n        this.LOGIC_MASK_COLOR = 0xF0;\r\n        this.LOGIC_MASK_VALUE = 0x0F;\r\n\r\n        this.LOGIC_MASK_XIAOWANG = 16;\r\n        this.LOGIC_MASK_DAWANG = 17;\r\n        this.NNConst_BeiShu = [[0,1,1,1,1,1,1,2,2,3,4,5,6,8],[0,1,1,1,1,1,1,1,2,2,3,5,6,8]];//牌型倍数\r\n        this.LoadAllPokerRes();\r\n    },\r\n\r\n    RefreshIs3DShow:function(){\r\n        this.is3DShow = app.LocalDataManager().GetConfigProperty(\"SysSetting\", app.subGameName + \"_is3DShow\");\r\n    },\r\n\r\n    SubCardValue:function(poker){\r\n        let temp = \"\";\r\n        if(poker.length > 4){\r\n            temp = poker;\r\n            temp = temp.substring(0, temp.length - 1);\r\n        }\r\n        else{\r\n            temp = poker;\r\n        }\r\n\r\n        return temp;\r\n    },\r\n    GetPokeCardBack:function(){\r\n        //不同扑克牌选择不同list\r\n        let curPokerList = this.pokerList;\r\n        if (this.is3DShow == 0) {\r\n            curPokerList = this.newPokerList;\r\n        }\r\n        for(let i=0;i<curPokerList.length;i++){\r\n            if(curPokerList[i]._name == \"poker_back1\"){\r\n                return curPokerList[i];\r\n            }\r\n        }\r\n        return null;\r\n    },\r\n\r\n    GetPokeCard:function(poker, cardNode,isShowIcon1=true,isShowLandowner=false,hideBg = false,isRazz = false, isPartnerCard = false){\r\n        if(0 == poker)\r\n            return;\r\n        let type = \"\";\r\n        let type_2 = \"\";\r\n        let type_3 = \"\";\r\n        let type_4 = \"\";\r\n        let num = \"\";\r\n        let cardColor = -1;\r\n        let cardValue = -1;\r\n        let isRed = true;\r\n        \r\n        cardColor = this.GetCardColor(poker);\r\n        cardValue = this.GetCardValue(poker);\r\n\r\n        cardNode.getChildByName(\"bg_poker\").active = true;\r\n        \r\n        if(cardColor != 64){\r\n            let numNode = cardNode.getChildByName(\"num\");\r\n            // if(0.5 == cardNode.anchorX && 0.5 == cardNode.anchorY){\r\n            //     numNode.x = -35;\r\n            //     numNode.y = 55;\r\n            // }\r\n            \r\n            if(1 == cardValue)//服务端发过来的可能是1\r\n                cardValue = 14;\r\n            if(15 == cardValue)//跑得快服务端发过来15转为2\r\n                cardValue = 2;\r\n            \r\n            if (cardColor == 0){\r\n                type = 'bg_diamond1_1';\r\n                type_2 = 'bg_diamond1_2';\r\n                type_3 = 'icon_dzp';\r\n                type_4 = 'icon_hb';\r\n                isRed = true;\r\n            }\r\n            else if (cardColor == 16) {\r\n                type = 'bg_club1_1';\r\n                type_2 = 'bg_club1_2';\r\n                type_3 = 'icon_dzp';\r\n                type_4 = 'icon_hb';\r\n                isRed = false;\r\n            }\r\n            else if (cardColor == 32) {\r\n                type = 'bg_heart1_1';\r\n                type_2 = 'bg_heart1_2';\r\n                type_3 = 'icon_dzp';\r\n                type_4 = 'icon_hb';\r\n                isRed = true;\r\n            }\r\n            else if (cardColor == 48) {\r\n                type = 'bg_spade1_1';\r\n                type_2 = 'bg_spade1_2';\r\n                type_3 = 'icon_dzp';\r\n                type_4 = 'icon_hb';\r\n                isRed = false;\r\n            }\r\n\r\n            // if(cardValue == 11){\r\n            //     type = type + \"_11\";\r\n            // }\r\n            // else if(cardValue == 12){\r\n            //     type = type + \"_12\";\r\n            // }\r\n            // else if(cardValue == 13){\r\n            //     type = type + \"_13\";\r\n            // }\r\n            \r\n            if(isRed){\r\n                num = \"red_\" + cardValue.toString();\r\n            }\r\n            else{\r\n                num = \"black_\" + cardValue.toString();\r\n            }\r\n            //如果是癞子牌\r\n            if (isRazz) {\r\n                type = 'bg_lz1_1';\r\n                type_2 = 'bg_lz1_2';\r\n                type_3 = 'icon_dzp';\r\n                type_4 = 'icon_hb';\r\n                num = \"yellow_\" + cardValue.toString();\r\n            }\r\n        }\r\n        else{\r\n            let numNode = cardNode.getChildByName(\"num\");\r\n            numNode.active=true;\r\n            // numNode.x = -44;\r\n            // numNode.y = 37;\r\n            //大王\r\n            if(cardValue == this.LOGIC_MASK_DAWANG){\r\n                type = \"icon_big_king\";\r\n                type_2 = \"icon_big_king_01\";\r\n                type_3 = 'icon_dzp';\r\n                type_4 = 'icon_hb';\r\n                num = \"\";\r\n            }\r\n            //小王\r\n            else if(cardValue == this.LOGIC_MASK_XIAOWANG){\r\n                type = \"icon_small_king\";\r\n                type_2 = \"icon_small_king_01\";\r\n                type_3 = 'icon_dzp';\r\n                type_4 = 'icon_hb';\r\n                num = \"\";\r\n            }\r\n        }\r\n        cardNode.getChildByName(\"num\").getComponent(cc.Sprite).spriteFrame ='';\r\n        //不同扑克牌选择不同list\r\n        let curPokerList = this.pokerList;\r\n        if (this.is3DShow == 0) {\r\n            curPokerList = this.newPokerList;\r\n        }\r\n        for(let i=0;i<curPokerList.length;i++){\r\n            if(curPokerList[i]._name == type){\r\n                if(isShowIcon1==false && (type == \"icon_big_king\" || type == \"icon_small_king\")){\r\n                    //大小王不在最后一根，不显示icon\r\n                    cardNode.getChildByName(\"icon\").getComponent(cc.Sprite).spriteFrame = '';\r\n                }else{\r\n                    cardNode.getChildByName(\"icon\").getComponent(cc.Sprite).spriteFrame = curPokerList[i];\r\n                }\r\n                cardNode.getChildByName(\"icon\").active = true;\r\n            }\r\n            else if(curPokerList[i]._name == type_2){\r\n                if(isShowIcon1==true || type == \"icon_big_king\" || type == \"icon_small_king\"){ //大小王必须显示icon_1\r\n                    cardNode.getChildByName(\"icon_1\").getComponent(cc.Sprite).spriteFrame = curPokerList[i];\r\n                }else{\r\n                    cardNode.getChildByName(\"icon_1\").getComponent(cc.Sprite).spriteFrame = '';\r\n                }\r\n                cardNode.getChildByName(\"icon_1\").active = true;\r\n            }\r\n            else if (curPokerList[i]._name == type_3 && cardNode.getChildByName(\"icon_2\")) {\r\n                if (isShowLandowner) {\r\n                    cardNode.getChildByName(\"icon_2\").getComponent(cc.Sprite).spriteFrame = curPokerList[i];\r\n                    cardNode.getChildByName(\"icon_2\").active = true;\r\n                }else{\r\n                    cardNode.getChildByName(\"icon_2\").active = false;\r\n                }\r\n            }\r\n            else if (curPokerList[i]._name == type_4 && cardNode.getChildByName(\"icon_3\")) {\r\n                if (isPartnerCard && !isRazz) {\r\n                    cardNode.getChildByName(\"icon_3\").getComponent(cc.Sprite).spriteFrame = curPokerList[i];\r\n                    cardNode.getChildByName(\"icon_3\").active = true;\r\n                }else{\r\n                    cardNode.getChildByName(\"icon_3\").active = false;\r\n                }\r\n            }\r\n            else if(curPokerList[i]._name == num){\r\n                if (this.is3DShow == 0) {\r\n                    cardNode.getChildByName(\"num\").y = 54;\r\n                    cardNode.getChildByName(\"num\").x = -35;\r\n                }else{\r\n                    cardNode.getChildByName(\"num\").y = 64;\r\n                    cardNode.getChildByName(\"num\").x = -41;\r\n                }\r\n                cardNode.getChildByName(\"num\").getComponent(cc.Sprite).spriteFrame = curPokerList[i];\r\n                cardNode.getChildByName(\"num\").active = true;\r\n            }\r\n        }\r\n        if(hideBg)\r\n            cardNode.getChildByName(\"poker_back\").active = false;\r\n    },\r\n    GetSGPokerTypeStr:function(cards,cardType,bSpecialNum = false){//specialNum 8点倍数\r\n        if(3 != cards.length)\r\n            return;\r\n        let data = {};\r\n        data.typeStr = '';\r\n        data.isBigCard = false;\r\n        data.beiShu = 0;\r\n        data.useRedColor = true;\r\n        if(0 == cardType){\r\n            let curValue = this.GetSGValue(cards);\r\n            data.typeStr = curValue.toString();\r\n            data.typeStr += '点';\r\n            if(curValue < 8)\r\n                data.beiShu = 1;\r\n            else if(8 == curValue && !bSpecialNum)\r\n                data.beiShu = 2;\r\n            else\r\n                data.beiShu = 3;\r\n\r\n            data.useRedColor = false;\r\n        }\r\n        else if(101 == cardType || \r\n            102 == cardType){\r\n            if(101 == cardType)\r\n                data.typeStr = '单公';\r\n            else\r\n                data.typeStr = '双公';\r\n\r\n            let curValue = this.GetSGValue(cards);\r\n            if(curValue < 8)\r\n                data.beiShu = 1;\r\n            else if(8 == curValue && !bSpecialNum)\r\n                data.beiShu = 2;\r\n            else\r\n                data.beiShu = 3;\r\n            // curValue += 97;//to a\r\n            // data.typeStr += String.fromCharCode(curValue);\r\n            // data.typeStr += '电';\r\n            data.typeStr += curValue.toString();\r\n            data.typeStr += '点';\r\n            data.useRedColor = false;\r\n        }\r\n        else if(103 == cardType){\r\n            data.typeStr = '混三功';\r\n            data.beiShu = 5;\r\n            data.isBigCard = true;\r\n        }\r\n        else if(104 == cardType){\r\n            data.typeStr = '小三功';\r\n            data.beiShu = 7;\r\n            data.isBigCard = true;\r\n        }\r\n        else if(105 == cardType){\r\n            data.typeStr = '大三功';\r\n            data.beiShu = 9;\r\n            data.isBigCard = true;\r\n        }\r\n        else if(106 == cardType){\r\n            data.typeStr = '至尊';\r\n            data.beiShu = 9;\r\n            data.isBigCard = true;\r\n        }\r\n        return data;\r\n    },\r\n    GetSGValue:function(cards){\r\n        let value0 = this.GetCardValue(cards[0]);\r\n        let value1 = this.GetCardValue(cards[1]);\r\n        let value2 = this.GetCardValue(cards[2]);\r\n        if(value0 >= 10)\r\n            value0 = 10;\r\n        if(value1 >= 10)\r\n            value1 = 10;\r\n        if(value2 >= 10)\r\n            value2 = 10;\r\n        let needValue = value0 + value1 + value2;\r\n        needValue = needValue % 10;\r\n        return needValue;\r\n    },\r\n    GetZJHPokerTypeStr:function(cardValues,cardType = -1){//cardValues客户端自己算\r\n        let data = {};\r\n        data.typeStr = '';\r\n        data.isBigCard = false;\r\n        data.beiShu = 0;\r\n        if(-1 != cardType){\r\n            if(0 == cardType)\r\n                data.typeStr = '散排';\r\n            else if(101 == cardType)//对子\r\n                data.typeStr = '对子';\r\n            else if(102 == cardType)//顺子\r\n                data.typeStr = '顺子';\r\n            else if(103 == cardType)//金华\r\n                data.typeStr = '金花';\r\n            else if(104 == cardType){//顺金\r\n                data.typeStr = '顺金';\r\n                data.isBigCard = true;\r\n            }\r\n            else if(105 == cardType){//豹子\r\n                data.typeStr = '豹子';\r\n                data.isBigCard = true;\r\n            }\r\n            else if(106 == cardType)//特殊\r\n                data.typeStr = '散排';\r\n            return data;\r\n        }\r\n\r\n        if(!cardValues || 3 != cardValues.length){\r\n            this.ErrLog('GetZJHPokerTypeStr Error');\r\n            return;\r\n        }\r\n        cardValues.sort(this.NormalPokerSort);\r\n        if(this.IsZhaDanByZJH(cardValues)){\r\n            data.typeStr = '豹子';\r\n            data.isBigCard = true;\r\n        }\r\n        else if(this.IsTongHuaByZJH(cardValues)){\r\n            if(this.IsShunZiByZJH(cardValues)){\r\n                data.typeStr = '顺金';\r\n                data.isBigCard = true;\r\n            }\r\n            else\r\n                data.typeStr = '金花';\r\n        }\r\n        else if(this.IsShunZiByZJH(cardValues))\r\n            data.typeStr = '顺子';\r\n        else if(this.IsDuiZiByZJH(cardValues))\r\n            data.typeStr = '对子';\r\n        else\r\n            data.typeStr = '散排';\r\n\r\n        return data;\r\n    },\r\n    GetNNPokerTypeStr:function(curDataType){\r\n        let roomMrg = app.DDZRoomMgr();\r\n        let room = roomMrg.GetEnterRoom();\r\n        \r\n        curDataType = parseInt(curDataType);\r\n        let data = {};\r\n        data.typeStr = '';\r\n        data.isBigCard = false;\r\n        data.beiShu = 0;\r\n        //倍数要按房间配置的\r\n        let selectIndex = 0;//没房间配置默认选择0\r\n        let specialCards = [];\r\n        let selectDataList = [];\r\n        if(room){\r\n            let roomCfg = room.GetRoomConfig();\r\n            selectIndex = roomCfg.fanbeiguize;\r\n            specialCards = roomCfg.teshupaixing;//特殊牌有没有选倍数\r\n        }\r\n        selectDataList = this.NNConst_BeiShu[selectIndex];\r\n\r\n        let selectType1 = false;//五花牛\r\n        let selectType2 = false;//炸弹牛\r\n        let selectType3 = false;//五小牛\r\n        for(let i=0;i<specialCards.length;i++){\r\n            if(0 == specialCards[i])\r\n                selectType1 = true;\r\n            else if(1 == specialCards[i])\r\n                selectType2 = true;\r\n            else if(2 == specialCards[i])\r\n                selectType3 = true;\r\n        }\r\n\r\n        if(0 == curDataType){//没牛\r\n            data.typeStr = '无马';\r\n        }\r\n        else if(curDataType >= 1 && curDataType < 10){//牛1到牛9\r\n            data.beiShu = selectDataList[curDataType];\r\n            if(data.beiShu < 2)\r\n                data.typeStr = '牛';\r\n            else\r\n                data.typeStr = '羊';\r\n            switch(curDataType){\r\n                case 1:\r\n                    data.typeStr += '一';\r\n                    break;\r\n                case 2:\r\n                    data.typeStr += '二';\r\n                    break;\r\n                case 3:\r\n                    data.typeStr += '三';\r\n                    break;\r\n                case 4:\r\n                    data.typeStr += '四';\r\n                    break;\r\n                case 5:\r\n                    data.typeStr += '五';\r\n                    break;\r\n                case 6:\r\n                    data.typeStr += '六';\r\n                    break;\r\n                case 7:\r\n                {\r\n                    if(data.beiShu < 2)\r\n                        data.typeStr += '七';\r\n                    else\r\n                        data.typeStr += '柒';\r\n                }\r\n                    break;\r\n                case 8:\r\n                    data.typeStr += '八';\r\n                    break;\r\n                case 9:\r\n                    data.typeStr += '九';\r\n                    break;\r\n            }\r\n        }\r\n        else if(10 == curDataType){\r\n            data.typeStr = '羊羊';\r\n            data.isBigCard = true;\r\n            data.beiShu = selectDataList[curDataType];\r\n        }\r\n        else if(101 == curDataType){\r\n            data.typeStr = '';\r\n            data.isBigCard = true;\r\n        }\r\n        else if(102 == curDataType){\r\n            data.typeStr = '';\r\n            data.isBigCard = true;\r\n        }   \r\n        else if(103 == curDataType){\r\n            data.typeStr = '伍花羊';\r\n            data.isBigCard = true;\r\n            if(selectType1){\r\n                data.beiShu = selectDataList[11];\r\n            }\r\n        }\r\n        else if(104 == curDataType){\r\n            data.typeStr = '炸弹羊';\r\n            data.isBigCard = true;\r\n            if(selectType2){\r\n                data.beiShu = selectDataList[12];\r\n            }\r\n        }\r\n        else if(105 == curDataType){\r\n            data.typeStr = '伍小羊';\r\n            data.isBigCard = true;\r\n            if(selectType3){\r\n                data.beiShu = selectDataList[13];\r\n            }\r\n        }\r\n\r\n        return data;\r\n    },\r\n    LoadAllPokerRes:function(){\r\n        let self = this;\r\n        if(0 == this.pokerList.length){\r\n            cc.loader.loadResDir(\"texture/new_poker\",cc.SpriteFrame, function(err, assets){\r\n                if(err){\r\n                    cc.error(err);\r\n                    return;\r\n                }\r\n                for(let i=0;i<assets.length;i++){\r\n                    self.pokerList.push(assets[i]);\r\n                }\r\n            });\r\n        }\r\n        \r\n        if(0 == this.newPokerList.length){\r\n            cc.loader.loadResDir(\"texture/2DPoker\",cc.SpriteFrame, function(err, assets){\r\n                if(err){\r\n                    cc.error(err);\r\n                    return;\r\n                }\r\n                for(let i=0;i<assets.length;i++){\r\n                    self.newPokerList.push(assets[i]);\r\n                }\r\n            });\r\n        }\r\n\r\n    },\r\n    NormalPokerSort:function(a,b){\r\n        let aValue = a & 0x0F; \r\n        let bValue = b & 0x0F; \r\n        return aValue - bValue;\r\n    },\r\n    NNPokerSort:function(pokers){\r\n        if(0 == pokers.length)\r\n            return [];\r\n        let sortList = [];\r\n        let fristIndex = 0;\r\n        let secondIndex = 1;\r\n        let threeIndex = 2;\r\n        while(true){\r\n            if(this.CheckNiu(pokers[fristIndex],pokers[secondIndex],pokers[threeIndex])){\r\n                sortList.push(pokers[fristIndex]);\r\n                sortList.push(pokers[secondIndex]);\r\n                sortList.push(pokers[threeIndex]);\r\n                for(let i=0;i<pokers.length;i++){\r\n                    if(i == fristIndex || i == secondIndex || i == threeIndex)\r\n                        continue;\r\n                    sortList.push(pokers[i]);\r\n                }\r\n                sortList = this.SortNiu(sortList);\r\n                break;\r\n            }\r\n            else{\r\n                threeIndex++;\r\n                if(threeIndex >= pokers.length){\r\n                    secondIndex++;\r\n                    if(secondIndex >= pokers.length - 1){\r\n                        fristIndex++;\r\n                        secondIndex = fristIndex + 1;\r\n                        if(fristIndex >= pokers.length - 2){\r\n                            //结束了\r\n                            return pokers;\r\n                        }\r\n                    }\r\n                    threeIndex = secondIndex + 1;\r\n                }\r\n            }\r\n        }\r\n        return sortList;\r\n    },\r\n    CheckNiu:function(fristValue,secondValue,threeValue){//传3张检测\r\n        let allValue = 0;\r\n        let curValue1 = this.GetCardValue(fristValue);\r\n        let curValue2 = this.GetCardValue(secondValue);\r\n        let curValue3 = this.GetCardValue(threeValue);\r\n        if(curValue1 > 10){\r\n            if(14 == curValue1)\r\n                allValue += 1;\r\n            else\r\n                allValue += 10;\r\n        }\r\n        else\r\n            allValue += curValue1;\r\n\r\n        if(curValue2 > 10){\r\n            if(14 == curValue1)\r\n                allValue += 1;\r\n            else\r\n                allValue += 10;\r\n        }\r\n        else\r\n            allValue += curValue2;\r\n\r\n        if(curValue3 > 10){\r\n            if(14 == curValue1)\r\n                allValue += 1;\r\n            else\r\n                allValue += 10;\r\n        }\r\n        else\r\n            allValue += curValue3;\r\n\r\n        if(0 == allValue%10)\r\n            return true;\r\n\r\n        return false;\r\n    },\r\n    CheckNiuEx:function(pokers){\r\n        let fristIndex = 0;\r\n        let secondIndex = 1;\r\n        let threeIndex = 2;\r\n        while(true){\r\n            if(this.CheckNiu(pokers[fristIndex],pokers[secondIndex],pokers[threeIndex])){\r\n                return true;\r\n            }\r\n            else{\r\n                threeIndex++;\r\n                if(threeIndex >= pokers.length){\r\n                    secondIndex++;\r\n                    if(secondIndex >= pokers.length - 1){\r\n                        fristIndex++;\r\n                        secondIndex = fristIndex + 1;\r\n                        if(fristIndex >= pokers.length - 2){\r\n                            //结束了\r\n                            return false;\r\n                        }\r\n                    }\r\n                    threeIndex = secondIndex + 1;\r\n                }\r\n            }\r\n        }\r\n    },\r\n    SortNiu:function(pokers){//特殊牌形排序下\r\n        let tempSorts = [];\r\n        tempSorts.push(pokers[0]);\r\n        tempSorts.push(pokers[1]);\r\n        tempSorts.push(pokers[2]);\r\n        tempSorts.sort(this.sortFunAIsMin);\r\n\r\n        let tempList = [];\r\n        tempList.push(pokers[3]);\r\n        tempList.push(pokers[4]);\r\n        tempList.sort(this.sortFunAIsMin);\r\n        for(let i=0;i<tempList.length;i++)\r\n            tempSorts.push(tempList[i]);\r\n        \r\n        return tempSorts;\r\n    },\r\n    sortFunAIsMin:function(a,b){\r\n        let valueA = a & 0x0F;\r\n        let valueB = b & 0x0F;\r\n        if(14 == valueA)\r\n            return valueB - valueA;\r\n        else\r\n            return valueB - valueA;\r\n    },\r\n    //获取牌值\r\n    GetCardValue:function(poker) {\r\n        //大小王值最大\r\n        if (poker == 65 || poker == 145 || poker == 225)\r\n            return this.LOGIC_MASK_XIAOWANG;\r\n        if (poker == 66 || poker == 146 || poker == 226)\r\n            return this.LOGIC_MASK_DAWANG;\r\n        return poker&this.LOGIC_MASK_VALUE;\r\n    },\r\n\r\n    //获取花色\r\n    GetCardColor:function(poker) {\r\n        let color = poker&this.LOGIC_MASK_COLOR;\r\n        while(color >= 80){\r\n            color -= 80;\r\n        }\r\n        return color;\r\n    },\r\n    //牌型检测\r\n    IsDuiZiByZJH:function(pokers){\r\n        let card0 = this.GetCardValue(pokers[0]);\r\n        let card1 = this.GetCardValue(pokers[1]);\r\n        let card2 = this.GetCardValue(pokers[2]);\r\n        if(card0 == card1 || card1 == card2)\r\n            return true;\r\n        else\r\n            return false;\r\n    },\r\n    IsShunZiByZJH:function(pokers){\r\n        let card0 = this.GetCardValue(pokers[0]);\r\n        let card1 = this.GetCardValue(pokers[1]);\r\n        let card2 = this.GetCardValue(pokers[2]);\r\n        if(2 == card0 && 3 == card1 && 14 == card2)\r\n            return true;\r\n        else if(card0+1 == card1 && card1+1 == card2)\r\n            return true;\r\n        else\r\n            return false;\r\n    },\r\n    IsTongHuaByZJH:function(pokers){\r\n        let color0 = this.GetCardColor(pokers[0]);\r\n        let color1 = this.GetCardColor(pokers[1]);\r\n        let color2 = this.GetCardColor(pokers[2]);\r\n        if(color0 == color1 && color1 == color2)\r\n            return true;\r\n        else\r\n            return false;\r\n    },\r\n    IsZhaDanByZJH:function(pokers){\r\n        let card0 = this.GetCardValue(pokers[0]);\r\n        let card1 = this.GetCardValue(pokers[1]);\r\n        let card2 = this.GetCardValue(pokers[2]);\r\n        if(card0 == card1 && card1 == card2)\r\n            return true;\r\n        else\r\n            return false;\r\n    },\r\n});\r\n\r\nvar g_ddz_PokerCard = null;\r\n\r\n/**\r\n * 绑定模块外部方法\r\n */\r\nexports.GetModel = function(){\r\n    if(!g_ddz_PokerCard){\r\n        g_ddz_PokerCard = new ddz_PokerCard();\r\n    }\r\n    return g_ddz_PokerCard;\r\n}"]}