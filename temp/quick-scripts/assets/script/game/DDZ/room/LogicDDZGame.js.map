{"version":3,"sources":["LogicDDZGame.js"],"names":["app","require","LogicDDZGame","BaseClass","extend","Init","JS_Name","ComTool","subGameName","WeChatManager","PokerCard","DDZRoomSet","DDZRoom","DDZDefine","handCardList","selectCardList","lastCardType","latCardList","Log","pokerType","LOGIC_MASK_COLOR","LOGIC_MASK_VALUE","LOGIC_MASK_XIAOWANG","LOGIC_MASK_DAWANG","DDZ_CARD_TYPE_NOMARL","DDZ_CARD_TYPE_BUCHU","DDZ_CARD_TYPE_SINGLECARD","DDZ_CARD_TYPE_DUIZI","DDZ_CARD_TYPE_3BUDAI","DDZ_CARD_TYPE_3DAI1","DDZ_CARD_TYPE_3DAI2","DDZ_CARD_TYPE_SHUNZI","DDZ_CARD_TYPE_LIANDUI","DDZ_CARD_TYPE_4DAI1","DDZ_CARD_TYPE_4DAI21","DDZ_CARD_TYPE_4DAI2","DDZ_CARD_TYPE_4DAI4","DDZ_CARD_TYPE_FEIJI0","DDZ_CARD_TYPE_FEIJI1","DDZ_CARD_TYPE_FEIJI2","DDZ_CARD_TYPE_ZHADAN","InitHandCard","lastCardList","handCard","GetHandCard","i","length","card","push","SortCardByMax","TransformValueToC","ClearSelectCard","OnEvent","pokers","poker","count","j","TransformValueToS","self","sort","a","b","GetCardValue","SortCardByMinEx","SortCardByMin","aValue","bValue","OutPokerCard","cardList","value","pos","indexOf","splice","pos1","cardPos","console","log","GetSelectCard","ChangeSelectCard","SetCardSelected","cardIdx","cardType","DeleteCardSelected","SetCardData","opCardType","ClearCardData","GetLastCardType","CheckOnlyBoom","list","item","sameCard","GetSameValue","CheckOneCard","isSelectCard","lastCardValue","myCardValue","CheckDuizi","bDui","duizi","CheckShunzi","lastValue","nowValue","CheckLastThree","tag","lastCard","CheckSanDaiSiDai","handPokers","sandai","GetRoomConfigByProperty","sidai","tempArrA","tempArrB","samePoker","RegularCard","daiCardList","GetDaiPaiList","guipai","CheckTagIsDuizi","IsZhadan","temp","zhadan","cardValue_1","cardValue_2","CheckZhaDan","IsLianShun","isHasArr","toString","GetDaiNum","daiNum","CheckFeiJi","santiao","bInList","CheckPokerInListEx","realPlaneA","GetRealPlane","realPlane","daiPaiList","isHasZhadan","isHasDuiZi","CheckLianDui","CheckPokerInList","CheckDragon","IsHaveBoom","wangzhaList","IsHaveWangZhaOrBoom","IsDismantleBoom","GetCardType","bCheck","GetAllCardTypeBySpc","allCardType","razzSanDaiSiDaiList","razzSanDaiSiDaiObj","razzFeiJiList","razzFeiJiObj","GetTipCardSlCard","array","GetOneCardTip","GetDuiziTip","GetShunziTip","GetSanDaiTip","GetSiDaiTip","GetZhaDan","GetFeiJiTip","GetLianDuiTip","apply","GetZhaDanTip","SortByLength","GetTipCard","setInfo","GetRoomSetInfo","opType","GetOneCard","GetDuizi","GetShunzi","GetSanDai","GetSiDai","GetFeiJi","GetLianDui","CheckSelected","cardValue","zhadans","GetZhaDanEx","arrLen","wangzha","PushTipCard","len","reverse","chai","sameValue","duizis","bInListEx","shunzi","santiaos","GetOtherCard","lists","tp","needCard1","needCard2","temps","needDuizi","needPokersCount","cards","bInListExEx","tempList","k","curPokersCount","tagCard","tagValue","tagList","duiziNum","pos2","sameList","index","sameValueList","tagCardValue","pokerValue","GetSameColor","sameColorList","pokerColor","GetCardColor","tagCardColor","realPoker","CheckSameValue","aCards","bCards","bRet","g_LogicDDZGame","exports","GetModel"],"mappings":";;;;;;;;AAAA,IAAIA,MAAMC,QAAQ,SAAR,CAAV;;AAGA,IAAIC,eAAeF,IAAIG,SAAJ,CAAcC,MAAd,CAAqB;AACpCC,UAAK,gBAAU;AACX,aAAKC,OAAL,GAAe,cAAf;;AAEA,aAAKC,OAAL,GAAeP,IAAIA,IAAIQ,WAAJ,GAAkB,UAAtB,GAAf;AACA,aAAKC,aAAL,GAAqBT,IAAIA,IAAIQ,WAAJ,GAAkB,gBAAtB,GAArB;AACA,aAAKE,SAAL,GAAiBV,IAAIA,IAAIQ,WAAJ,GAAkB,YAAtB,GAAjB;AACA,aAAKG,UAAL,GAAkBX,IAAIW,UAAJ,EAAlB;AACA,aAAKC,OAAL,GAAeZ,IAAIY,OAAJ,EAAf;AACA,aAAKC,SAAL,GAAiBb,IAAIa,SAAJ,EAAjB;;AAEA;AACA,aAAKC,YAAL,GAAoB,EAApB;AACA;AACA,aAAKC,cAAL,GAAsB,EAAtB;AACA;AACA,aAAKC,YAAL,GAAoB,CAApB;AACA;AACA,aAAKC,WAAL,GAAmB,EAAnB;;AAEA,aAAKC,GAAL,CAAS,MAAT;;AAEA,aAAKC,SAAL,GAAiB,CACb,IADa,EACR,IADQ,EACH,IADG,EACE,IADF,EACO,IADP,EACY,IADZ,EACiB,IADjB,EACsB,IADtB,EAC2B,IAD3B,EACgC,IADhC,EACqC,IADrC,EAC0C,IAD1C,EAC+C,IAD/C,EACuD;AACpE,YAFa,EAER,IAFQ,EAEH,IAFG,EAEE,IAFF,EAEO,IAFP,EAEY,IAFZ,EAEiB,IAFjB,EAEsB,IAFtB,EAE2B,IAF3B,EAEgC,IAFhC,EAEqC,IAFrC,EAE0C,IAF1C,EAE+C,IAF/C,EAEuD;AACpE,YAHa,EAGR,IAHQ,EAGH,IAHG,EAGE,IAHF,EAGO,IAHP,EAGY,IAHZ,EAGiB,IAHjB,EAGsB,IAHtB,EAG2B,IAH3B,EAGgC,IAHhC,EAGqC,IAHrC,EAG0C,IAH1C,EAG+C,IAH/C,EAGuD;AACpE,YAJa,EAIR,IAJQ,EAIH,IAJG,EAIE,IAJF,EAIO,IAJP,EAIY,IAJZ,EAIiB,IAJjB,EAIsB,IAJtB,EAI2B,IAJ3B,EAIgC,IAJhC,EAIqC,IAJrC,EAI0C,IAJ1C,EAI+C,IAJ/C,CAAjB,CArBW,CAyB+D;;AAE1E,aAAKC,gBAAL,GAAwB,IAAxB;AACA,aAAKC,gBAAL,GAAwB,IAAxB;AACA,aAAKC,mBAAL,GAA2B,EAA3B;AACA,aAAKC,iBAAL,GAAyB,EAAzB;;AAEA;AACA,aAAKC,oBAAL,GAA4B,CAA5B,CAjCW,CAiC+B;AAC1C,aAAKC,mBAAL,GAA2B,CAA3B,CAlCW,CAkC+B;AAC1C,aAAKC,wBAAL,GAAgC,CAAhC,CAnCW,CAmC6B;AACxC,aAAKC,mBAAL,GAA2B,CAA3B,CApCW,CAoC4B;AACvC,aAAKC,oBAAL,GAA4B,CAA5B,CArCW,CAqCiC;AAC5C,aAAKC,mBAAL,GAA2B,CAA3B,CAtCW,CAsC6B;AACxC,aAAKC,mBAAL,GAA2B,CAA3B,CAvCW,CAuC6B;AACxC,aAAKC,oBAAL,GAA4B,CAA5B,CAxCW,CAwCiC;AAC5C,aAAKC,qBAAL,GAA6B,CAA7B,CAzCW,CAyCiC;AAC5C,aAAKC,mBAAL,GAA2B,CAA3B,CA1CW,CA0C4B;AACvC,aAAKC,oBAAL,GAA4B,EAA5B,CA3CW,CA2CiC;AAC5C,aAAKC,mBAAL,GAA2B,EAA3B,CA5CW,CA4CqC;AAChD,aAAKC,mBAAL,GAA2B,EAA3B,CA7CW,CA6CiC;AAC5C,aAAKC,oBAAL,GAA4B,EAA5B,CA9CW,CA8CiC;AAC5C,aAAKC,oBAAL,GAA4B,EAA5B,CA/CW,CA+CiC;AAC5C,aAAKC,oBAAL,GAA4B,EAA5B,CAhDW,CAgDiC;AAC5C,aAAKC,oBAAL,GAA4B,EAA5B,CAjDW,CAiDiC;AAC/C,KAnDmC;;AAqDpCC,kBAAa,wBAAU;AACnB,aAAK3B,YAAL,GAAoB,EAApB;AACA,aAAKC,cAAL,GAAsB,EAAtB;AACA,aAAKC,YAAL,GAAoB,KAAKQ,oBAAzB;AACA,aAAKkB,YAAL,GAAoB,EAApB;;AAEA,YAAIC,WAAW,KAAKhC,UAAL,CAAgBiC,WAAhB,EAAf;AACA,aAAI,IAAIC,IAAI,CAAZ,EAAeA,IAAIF,SAASG,MAA5B,EAAoCD,GAApC,EAAwC;AACpC,gBAAIE,OAAOJ,SAASE,CAAT,CAAX;AACA,iBAAK/B,YAAL,CAAkBkC,IAAlB,CAAuBD,IAAvB;AACH;;AAED,aAAKE,aAAL,CAAmB,KAAKnC,YAAxB;AACA,aAAKoC,iBAAL,CAAuB,KAAKpC,YAA5B;AACH,KAnEmC;;AAqEpC;AACAqC,qBAAgB,2BAAU;AACtB,aAAKV,YAAL;AACAzC,YAAIA,IAAIQ,WAAJ,GAAkB,QAAtB,EAAgC4C,OAAhC,CAAwC,UAAxC;AACH,KAzEmC;;AA4EpC;AACAF,uBAAkB,2BAASG,MAAT,EAAgB;AAC9B,aAAI,IAAIR,IAAI,CAAZ,EAAeA,IAAIQ,OAAOP,MAA1B,EAAkCD,GAAlC,EAAsC;AAClC,gBAAIS,QAAQD,OAAOR,CAAP,CAAZ;AACA,gBAAIU,QAAQ,CAAZ;AACA,iBAAI,IAAIC,IAAIX,CAAZ,EAAeW,IAAIH,OAAOP,MAA1B,EAAkCU,GAAlC,EAAsC;AAClC,oBAAGF,SAASD,OAAOG,CAAP,CAAZ,EAAsB;AAClBD;AACH;AACD,oBAAGA,SAAS,CAAZ,EAAc;AACVF,2BAAOG,CAAP,IAAYH,OAAOG,CAAP,IAAU,GAAtB;AACA;AACH;AACJ;AACJ;AACJ,KA3FmC;;AA6FpC;AACAC,uBAAkB,2BAASJ,MAAT,EAAgB;AAC9B,aAAI,IAAIR,IAAI,CAAZ,EAAeA,IAAIQ,OAAOP,MAA1B,EAAkCD,GAAlC,EAAsC;AAClC,gBAAGQ,OAAOR,CAAP,IAAY,GAAf,EAAmB;AACfQ,uBAAOR,CAAP,IAAYQ,OAAOR,CAAP,IAAY,GAAxB;AACH;AACJ;AACJ,KApGmC;;AAsGpCI,mBAAc,uBAASI,MAAT,EAAgB;AAC1B,YAAIK,OAAO,IAAX;AACAL,eAAOM,IAAP,CAAY,UAASC,CAAT,EAAYC,CAAZ,EAAc;AACtB;AACA,mBAAOH,KAAKI,YAAL,CAAkBD,CAAlB,IAAuBH,KAAKI,YAAL,CAAkBF,CAAlB,CAA9B;AACH,SAHD;AAIH,KA5GmC;;AA8GpCG,qBAAgB,yBAASV,MAAT,EAAgB;AAC5B,YAAIK,OAAO,IAAX;AACAL,eAAOM,IAAP,CAAY,UAASC,CAAT,EAAYC,CAAZ,EAAc;AACtB;AACA,mBAAOH,KAAKI,YAAL,CAAkBF,CAAlB,IAAuBF,KAAKI,YAAL,CAAkBD,CAAlB,CAA9B;AACH,SAHD;AAIH,KApHmC;;AAsHpCG,mBAAc,uBAASX,MAAT,EAAgB;AAC1B,YAAIK,OAAO,IAAX;AACAL,eAAOM,IAAP,CAAY,UAASC,CAAT,EAAYC,CAAZ,EAAc;AACtB,gBAAII,SAASL,EAAE,CAAF,CAAb;AACA,gBAAIM,SAASL,EAAE,CAAF,CAAb;AACA;AACA,mBAAOH,KAAKI,YAAL,CAAkBG,MAAlB,IAA4BP,KAAKI,YAAL,CAAkBI,MAAlB,CAAnC;AACH,SALD;AAMH,KA9HmC;;AAgIpCC,kBAAa,sBAASC,QAAT,EAAkB;AAC3B,YAAG,CAACA,SAAStB,MAAb,EAAoB;AAChB;AACH;AACD;AACA,aAAI,IAAID,IAAI,CAAZ,EAAeA,IAAIuB,SAAStB,MAA5B,EAAoCD,GAApC,EAAwC;AACpC,gBAAIwB,QAAQD,SAASvB,CAAT,CAAZ;AACA,gBAAIyB,MAAM,KAAKxD,YAAL,CAAkByD,OAAlB,CAA0BF,QAAM,GAAhC,CAAV;AACA,gBAAGC,OAAO,CAAC,CAAX,EAAa;AACT,qBAAKxD,YAAL,CAAkB0D,MAAlB,CAAyBF,GAAzB,EAA6B,CAA7B;AACH,aAFD,MAGI;AACA,oBAAIG,OAAO,KAAK3D,YAAL,CAAkByD,OAAlB,CAA0BF,KAA1B,CAAX;AACA,oBAAGI,QAAQ,CAAC,CAAZ,EAAc;AACV,yBAAK3D,YAAL,CAAkB0D,MAAlB,CAAyBC,IAAzB,EAA8B,CAA9B;AACH;AACJ;;AAED,gBAAIC,UAAU,KAAK3D,cAAL,CAAoBwD,OAApB,CAA4BF,KAA5B,CAAd;AACA,gBAAGK,WAAW,CAAC,CAAf,EAAiB;AACb,qBAAK3D,cAAL,CAAoByD,MAApB,CAA2BE,OAA3B,EAAmC,CAAnC;AACH;AACJ;AACDC,gBAAQC,GAAR,CAAY,uBAAqB,KAAK7D,cAAtC;AACAf,YAAIA,IAAIQ,WAAJ,GAAkB,QAAtB,EAAgC4C,OAAhC,CAAwC,UAAxC;AACH,KAzJmC;;AA2JpCR,iBAAY,uBAAU;AAClB,eAAO,KAAK9B,YAAZ;AACH,KA7JmC;;AA+JpC+D,mBAAc,yBAAU;AACpB,eAAO,KAAK9D,cAAZ;AACH,KAjKmC;;AAmKpC+D,sBAAiB,0BAASV,QAAT,EAAkB;AAC/B,aAAKrD,cAAL,GAAsB,EAAtB;AACA,aAAKA,cAAL,GAAsBqD,QAAtB;AACH,KAtKmC;;AAwKpCW,qBAAgB,yBAASC,OAAT,EAAiB;AAC7B,YAAIC,WAAW,KAAKnE,YAAL,CAAkBkE,UAAS,CAA3B,CAAf;AACA,aAAKjE,cAAL,CAAoBiC,IAApB,CAAyBiC,QAAzB;AACAN,gBAAQC,GAAR,CAAY,uBAAqB,KAAK7D,cAAtC;AACH,KA5KmC;;AA8KpCmE,wBAAmB,4BAASF,OAAT,EAAiB;AAChC,YAAIC,WAAW,KAAKnE,YAAL,CAAkBkE,UAAS,CAA3B,CAAf;AACA,YAAIV,MAAM,KAAKvD,cAAL,CAAoBwD,OAApB,CAA4BU,QAA5B,CAAV;AACA,YAAIX,OAAO,CAAC,CAAZ,EAAc;AACV,iBAAKvD,cAAL,CAAoByD,MAApB,CAA2BF,GAA3B,EAAgC,CAAhC;AACH;AACDK,gBAAQC,GAAR,CAAY,0BAAwB,KAAK7D,cAAzC;AACH,KArLmC;;AAuLpCoE,eAvLoC,uBAuLxBC,UAvLwB,EAuLZhB,QAvLY,EAuLH;AAC7B,YAAGgB,cAAc,KAAK3D,mBAAnB,IAA0C,CAAC2C,SAAStB,MAAvD,EAA8D;AAC1D;AACH;;AAED,YAAG,KAAK9B,YAAL,IAAqB,KAAKQ,oBAA1B,IAAkD4D,cAAc,KAAK5C,oBAAxE,EAA6F;AACzF,iBAAKxB,YAAL,GAAoBoE,UAApB;AACH;;AAEDT,gBAAQC,GAAR,CAAY,wBAAsB,KAAK5D,YAAvC;AACA,aAAK0B,YAAL,GAAoB0B,QAApB;AACH,KAlMmC;;;AAoMpCiB,mBAAc,yBAAU;AACpB,aAAKrE,YAAL,GAAoB,KAAKQ,oBAAzB;AACA,aAAKkB,YAAL,GAAoB,EAApB;AACH,KAvMmC;;AAyMpC4C,qBAAgB,2BAAU;AACtB,eAAO,KAAKtE,YAAZ;AACH,KA3MmC;;AA6MpC;AACAuE,mBAAc,uBAASC,IAAT,EAAc;AACxB,aAAI,IAAI3C,IAAI,CAAZ,EAAeA,IAAI2C,KAAK1C,MAAxB,EAAgCD,GAAhC,EAAoC;AAChC,gBAAI4C,OAAOD,KAAK3C,CAAL,CAAX;AACA,gBAAI6C,WAAW,KAAKC,YAAL,CAAkBF,IAAlB,EAAwBA,KAAK,CAAL,CAAxB,CAAf;AACA,gBAAGC,SAAS5C,MAAT,IAAmB2C,KAAK3C,MAA3B,EACI,OAAO,KAAP;AACP;AACD,eAAO,IAAP;AACH,KAtNmC;;AAwNpC8C,kBAAa,wBAA6B;AAAA,YAApBC,YAAoB,uEAAL,IAAK;;AACtC,YAAIxC,SAAS,EAAb;AACA,YAAGwC,gBAAc,KAAjB,EAAuB;AACnBxC,qBAAS,KAAKvC,YAAd;AACH,SAFD,MAEK;AACDuC,qBAAS,KAAKtC,cAAd;AACH;AACD,YAAGsC,OAAOP,MAAP,IAAiB,CAApB,EAAuB,OAAO,KAAP;AACvB,YAAIgD,gBAAgB,CAApB;AACA,YAAIC,cAAc,CAAlB;;AAEAD,wBAAgB,KAAKhC,YAAL,CAAkB,KAAKpB,YAAL,CAAkB,CAAlB,CAAlB,CAAhB;AACAqD,sBAAc,KAAKjC,YAAL,CAAkBT,OAAO,CAAP,CAAlB,CAAd;;AAEA,YAAGyC,iBAAiBA,iBAAiB,CAArC,EAAuC;AACnC,gBAAG,KAAKpD,YAAL,CAAkBI,MAAlB,IAA4BO,OAAOP,MAAtC,EAA8C,OAAO,KAAP;AAC9C,gBAAGiD,cAAcD,aAAjB,EAA+B;AAC3B,uBAAO,IAAP;AACH;AACD,mBAAO,KAAP;AACH;;AAED,eAAO,IAAP;AACH,KA/OmC;;AAiPpCE,gBAAW,sBAA6B;AAAA,YAApBH,YAAoB,uEAAL,IAAK;;AACpC,YAAIxC,SAAS,EAAb;AACA,YAAGwC,gBAAc,KAAjB,EAAuB;AACnBxC,qBAAS,KAAKvC,YAAd;AACH,SAFD,MAEK;AACDuC,qBAAS,KAAKtC,cAAd;AACH;AACD,YAAGsC,OAAOP,MAAP,IAAiB,CAApB,EAAuB,OAAO,KAAP;;AAEvB,YAAIgD,gBAAgB,CAApB;AACA,YAAIC,cAAc,CAAlB;AACA,YAAIE,OAAO,KAAX;;AAEAH,wBAAgB,KAAKhC,YAAL,CAAkB,KAAKpB,YAAL,CAAkB,CAAlB,CAAlB,CAAhB;;AAEA,aAAI,IAAIG,IAAI,CAAZ,EAAeA,IAAIQ,OAAOP,MAA1B,EAAkCD,GAAlC,EAAsC;AAClC,gBAAIS,QAAQD,OAAOR,CAAP,CAAZ;AACA,gBAAIqD,QAAQ,KAAKP,YAAL,CAAkBtC,MAAlB,EAA0BC,KAA1B,CAAZ;AACA,gBAAG4C,MAAMpD,MAAN,IAAgB,CAAnB,EAAqB;AACjBiD,8BAAc,KAAKjC,YAAL,CAAkBR,KAAlB,CAAd;AACA2C,uBAAO,IAAP;AACA;AACH;AACJ;;AAED,YAAGH,iBAAiBA,iBAAiB,CAArC,EAAuC;AACnC,gBAAG,KAAKpD,YAAL,CAAkBI,MAAlB,IAA4BO,OAAOP,MAAtC,EAA8C,OAAO,KAAP;;AAE9C,gBAAGiD,cAAcD,aAAjB,EAA+B;AAC3B,uBAAO,IAAP;AACH;AACD,mBAAO,KAAP;AACH;;AAED,YAAGG,IAAH,EACI,OAAO,IAAP;AACJ,eAAO,KAAP;AACH,KAtRmC;;AAwRpCE,iBAAY,uBAA6B;AAAA,YAApBN,YAAoB,uEAAL,IAAK;;AACrC,YAAIxC,SAAS,EAAb;AACA,YAAGwC,gBAAc,KAAjB,EAAuB;AACnBxC,qBAAS,KAAKvC,YAAd;AACH,SAFD,MAEK;AACDuC,qBAAS,KAAKtC,cAAd;AACH;AACD,YAAGsC,OAAOP,MAAP,GAAgB,CAAnB,EAAsB,OAAO,KAAP;;AAEtB,YAAIgD,gBAAgB,CAApB;AACA,YAAIC,cAAc,CAAlB;;AAEA,aAAK9C,aAAL,CAAmB,KAAKP,YAAxB;AACA,aAAKO,aAAL,CAAmBI,MAAnB;;AAEA,YAAI+C,YAAY,CAAhB;AACA,aAAI,IAAIvD,IAAI,CAAZ,EAAeA,IAAIQ,OAAOP,MAA1B,EAAkCD,GAAlC,EAAsC;AAClC,gBAAIS,QAAQD,OAAOR,CAAP,CAAZ;AACA,gBAAIwD,WAAW,KAAKvC,YAAL,CAAkBR,KAAlB,CAAf;;AAEA,gBAAG+C,YAAY,EAAf,EAAkB;AACd,uBAAO,KAAP;AACH;;AAED,gBAAGD,aAAa,CAAhB,EAAkB;AACd,oBAAGA,YAAYC,QAAZ,IAAwB,CAA3B,EACI,OAAO,KAAP;AACP;;AAEDD,wBAAYC,QAAZ;AACH;;AAEDP,wBAAgB,KAAKhC,YAAL,CAAkB,KAAKpB,YAAL,CAAkB,CAAlB,CAAlB,CAAhB;AACAqD,sBAAc,KAAKjC,YAAL,CAAkBT,OAAO,CAAP,CAAlB,CAAd;;AAEA,YAAGyC,iBAAiBA,iBAAiB,CAArC,EAAuC;AACnC,gBAAG,KAAKpD,YAAL,CAAkBI,MAAlB,IAA4BO,OAAOP,MAAtC,EAA8C,OAAO,KAAP;;AAE9C,gBAAGiD,cAAcD,aAAjB,EAA+B;AAC3B,uBAAO,IAAP;AACH;AACD,mBAAO,KAAP;AACH;;AAED,eAAO,IAAP;AACH,KArUmC;;AAuUpC;AACAQ,oBAAe,wBAASC,GAAT,EAAcC,QAAd,EAAuB;AAClC;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAO,KAAP;AACH,KA3VmC;;AA6VpCC,sBAAiB,0BAASF,GAAT,EAAkC;AAAA,YAApBV,YAAoB,uEAAL,IAAK;;AAC/C,YAAIxC,SAAS,EAAb;AACA,YAAGwC,gBAAc,KAAjB,EAAuB;AACnBxC,qBAAS,KAAKvC,YAAd;AACH,SAFD,MAEK;AACDuC,qBAAS,KAAKtC,cAAd;AACH;AACD,YAAI2F,aAAa,KAAK5F,YAAtB;AACA,YAAGuC,OAAOP,MAAP,GAAgB,CAAnB,EAAsB,OAAO,KAAP;AACtB;AACA,YAAI6D,SAAO,KAAK/F,OAAL,CAAagG,uBAAb,CAAqC,QAArC,CAAX;AACA,YAAID,OAAOpC,OAAP,CAAe,CAAf,IAAoB,CAApB,IAAyBgC,OAAO,KAAK1E,mBAAzC,EAA8D;AAC1D;AACA,mBAAO,KAAP;AACH;AACD,YAAI8E,OAAOpC,OAAP,CAAe,CAAf,IAAoB,CAApB,IAAyBgC,OAAO,KAAKzE,mBAAzC,EAA8D;AAC1D;AACA,mBAAO,KAAP;AACH;AACD,YAAI+E,QAAM,KAAKjG,OAAL,CAAagG,uBAAb,CAAqC,OAArC,CAAV;AACA,YAAIC,MAAMtC,OAAN,CAAc,CAAd,IAAmB,CAAnB,IAAwBgC,OAAO,KAAKpE,mBAAxC,EAA6D;AACzD;AACA,mBAAO,KAAP;AACH;AACD,YAAI0E,MAAMtC,OAAN,CAAc,CAAd,IAAmB,CAAnB,IAAwBgC,OAAO,KAAKnE,mBAAxC,EAA6D;AACzD;AACA,mBAAO,KAAP;AACH;AACD,YAAIyE,MAAMtC,OAAN,CAAc,CAAd,IAAmB,CAAnB,IAAwBgC,OAAO,KAAKtE,mBAAxC,EAA6D;AACzD;AACA,mBAAO,KAAP;AACH;AACD,YAAI4E,MAAMtC,OAAN,CAAc,CAAd,IAAmB,CAAnB,IAAwBgC,OAAO,KAAKrE,oBAAxC,EAA8D;AAC1D;AACA,mBAAO,KAAP;AACH;AACD,YAAI4D,gBAAgB,CAApB;AACA,YAAIC,cAAc,CAAlB;AACA,YAAIe,WAAW,EAAf;AACA,YAAIC,WAAW,EAAf;;AAEA,aAAI,IAAIlE,IAAE,CAAV,EAAaA,IAAI,KAAKH,YAAL,CAAkBI,MAAnC,EAA2CD,GAA3C,EAA+C;AAC3C,gBAAIS,QAAQ,KAAKZ,YAAL,CAAkBG,CAAlB,CAAZ;AACA,gBAAImE,YAAY,KAAKrB,YAAL,CAAkB,KAAKjD,YAAvB,EAAqCY,KAArC,CAAhB;AACA,gBAAGiD,OAAO,KAAK3E,oBAAZ,IAAoC2E,OAAO,KAAKzE,mBAAnD,EAAuE;AACnE,oBAAGkF,UAAUlE,MAAV,IAAoB,CAAvB,EAAyB;AACrB,yBAAKmE,WAAL,CAAiBH,QAAjB,EAA2BE,SAA3B,EAAsC,CAAtC;AACA;AACA;AACH;AACJ,aAND,MAOK,IAAGT,OAAO,KAAKpE,mBAAZ,IAAmCoE,OAAO,KAAKnE,mBAAlD,EAAsE;AACvE,oBAAG4E,UAAUlE,MAAV,IAAoB,CAAvB,EAAyB;AACrB,yBAAKmE,WAAL,CAAiBH,QAAjB,EAA2BE,SAA3B,EAAsC,CAAtC;AACA;AACA;AACH;AACJ;AACJ;;AAED,aAAI,IAAInE,KAAE,CAAV,EAAaA,KAAIQ,OAAOP,MAAxB,EAAgCD,IAAhC,EAAoC;AAChC,gBAAIS,SAAQD,OAAOR,EAAP,CAAZ;AACA,gBAAImE,aAAY,KAAKrB,YAAL,CAAkBtC,MAAlB,EAA0BC,MAA1B,CAAhB;AACA,gBAAGiD,OAAO,KAAK3E,oBAAZ,IAAoC2E,OAAO,KAAKzE,mBAAnD,EAAuE;AACnE,oBAAGkF,WAAUlE,MAAV,IAAoB,CAAvB,EAAyB;AACrB,yBAAKmE,WAAL,CAAiBF,QAAjB,EAA2BC,UAA3B,EAAsC,CAAtC;AACA;AACA;AACH;AACJ,aAND,MAOK,IAAGT,OAAO,KAAKpE,mBAAZ,IAAmCoE,OAAO,KAAKnE,mBAAlD,EAAsE;AACvE,oBAAG4E,WAAUlE,MAAV,IAAoB,CAAvB,EAAyB;AACrB,yBAAKmE,WAAL,CAAiBF,QAAjB,EAA2BC,UAA3B,EAAsC,CAAtC;AACA;AACA;AACH;AACJ;AACJ;AACD,YAAGF,SAAShE,MAAZ,EAAmB;AACfgD,4BAAgB,KAAKhC,YAAL,CAAkBgD,SAAS,CAAT,EAAY,CAAZ,CAAlB,CAAhB;AACH;;AAED,YAAGC,SAASjE,MAAZ,EAAmB;AACfiD,0BAAc,KAAKjC,YAAL,CAAkBiD,SAAS,CAAT,EAAY,CAAZ,CAAlB,CAAd;AACH;;AAED,YAAIG,cAAc,KAAKC,aAAL,CAAmB9D,MAAnB,EAA2B0D,QAA3B,CAAlB;;AAEA;AACA,YAAIK,SAAS,CAAb;AACA,aAAK,IAAIvE,MAAI,CAAb,EAAgBA,MAAIqE,YAAYpE,MAAhC,EAAwCD,KAAxC,EAA6C;AACzC,gBAAI,KAAKiB,YAAL,CAAkBoD,YAAYrE,GAAZ,CAAlB,KAAqC,KAAKvB,mBAA1C,IACA,KAAKwC,YAAL,CAAkBoD,YAAYrE,GAAZ,CAAlB,KAAqC,KAAKtB,iBAD9C,EACiE;AAC7D6F;AACH;AACJ;AACD,YAAIA,UAAU,CAAd,EAAiB;AACb,mBAAO,KAAP;AACH;;AAED,YAAGtB,iBAAiBA,iBAAiB,CAArC,EAAuC;AACnC,gBAAG,KAAKpD,YAAL,CAAkBI,MAAlB,IAA4BO,OAAOP,MAAtC,EACI,OAAO,KAAP;AACJ,gBAAGyD,OAAO,KAAKzE,mBAAZ,IAAmC,CAAC,KAAKuF,eAAL,CAAqBH,WAArB,CAAvC,EAAyE;AACrE,uBAAO,KAAP;AACH;AACD,gBAAGX,OAAO,KAAKrE,oBAAZ,IAAoC,CAAC,KAAKmF,eAAL,CAAqBH,WAArB,CAAxC,EAA0E;AACtE,uBAAO,KAAP;AACH;AACD,gBAAGX,OAAO,KAAKnE,mBAAZ,IAAmC,CAAC,KAAKiF,eAAL,CAAqBH,WAArB,CAAvC,EAAyE;AACrE,uBAAO,KAAP;AACH;AACD,gBAAGnB,cAAcD,aAAjB,EAA+B;AAC3B,uBAAO,IAAP;AACH;AACD,mBAAO,KAAP;AACH;AACD,YAAGiB,SAASjE,MAAZ,EAAmB;AACf,gBAAGyD,OAAO,KAAK3E,oBAAf,EAAoC;AAChC,oBAAGyB,OAAOP,MAAP,IAAiB,CAApB,EAAsB;AAClB,2BAAO,IAAP;AACH;AACJ,aAJD,MAKK,IAAGyD,OAAO,KAAK1E,mBAAf,EAAmC;AACpC,oBAAGwB,OAAOP,MAAP,IAAiB,CAApB,EAAsB;AAClB,2BAAO,IAAP;AACH;AACJ,aAJI,MAKA,IAAGyD,OAAO,KAAKzE,mBAAf,EAAmC;AACpC,oBAAGuB,OAAOP,MAAP,IAAiB,CAAjB,IAAsB,KAAKuE,eAAL,CAAqBH,WAArB,CAAzB,EAA2D;AACvD,2BAAO,IAAP;AACH;AACJ,aAJI,MAKA,IAAGX,OAAO,KAAKtE,mBAAf,EAAmC;AACpC,oBAAGoB,OAAOP,MAAP,IAAiB,CAApB,EAAsB;AAClB,2BAAO,IAAP;AACH;AACJ,aAJI,MAKA,IAAGyD,OAAO,KAAKrE,oBAAf,EAAoC;AACrC,oBAAGmB,OAAOP,MAAP,IAAiB,CAAjB,IAAsB,KAAKuE,eAAL,CAAqBH,WAArB,CAAzB,EAA2D;AACvD,2BAAO,IAAP;AACH;AACJ,aAJI,MAKA,IAAGX,OAAO,KAAKpE,mBAAf,EAAmC;AACpC,oBAAGkB,OAAOP,MAAP,IAAiB,CAApB,EAAsB;AAClB,2BAAO,IAAP;AACH;AACJ,aAJI,MAKA,IAAGyD,OAAO,KAAKnE,mBAAf,EAAmC;AACpC,oBAAGiB,OAAOP,MAAP,IAAiB,CAAjB,IAAsB,KAAKuE,eAAL,CAAqBH,WAArB,CAAzB,EAA2D;AACvD,2BAAO,IAAP;AACH;AACJ;AACJ;AACD,eAAO,KAAP;AACH,KAxfmC;;AA0fpCI,cAAS,kBAASjE,MAAT,EAAgB;AACrB,YAAIkE,OAAO,EAAX;AACA,aAAI,IAAI1E,IAAE,CAAV,EAAaA,IAAIQ,OAAOP,MAAxB,EAAgCD,GAAhC,EAAoC;AAChC,gBAAIS,QAAQD,OAAOR,CAAP,CAAZ;AACA,gBAAI2E,SAAS,KAAK7B,YAAL,CAAkBtC,MAAlB,EAA0BC,KAA1B,CAAb;AACA,gBAAGkE,OAAO1E,MAAP,IAAiB,CAApB,EAAsB;AAClByE,uBAAOC,MAAP;AACA;AACH;AACJ;AACD;AACA,YAAInE,OAAOP,MAAP,IAAiB,CAArB,EAAwB;AACpB,gBAAI2E,cAAc,KAAK3D,YAAL,CAAkBT,OAAO,CAAP,CAAlB,CAAlB;AACA,gBAAIqE,cAAc,KAAK5D,YAAL,CAAkBT,OAAO,CAAP,CAAlB,CAAlB;AACA,gBAAIoE,eAAe,EAAf,IAAqBC,eAAe,EAAxC,EACI,OAAO,IAAP;AACJ,gBAAIA,eAAe,EAAf,IAAqBD,eAAe,EAAxC,EACI,OAAO,IAAP;AACP;AACD,YAAGpE,OAAOP,MAAV,EAAiB;AACb,gBAAGO,OAAOP,MAAP,GAAgByE,KAAKzE,MAArB,IAA+B,CAAlC,EAAoC;AAChC,uBAAO,IAAP;AACH;AACJ;AACD,eAAO,KAAP;AACH,KAnhBmC;;AAqhBpC6E,iBAAY,uBAA6B;AAAA,YAApB9B,YAAoB,uEAAL,IAAK;;AACrC,YAAIxC,SAAS,EAAb;AACA,YAAGwC,gBAAc,KAAjB,EAAuB;AACnBxC,qBAAS,KAAKvC,YAAd;AACH,SAFD,MAEK;AACDuC,qBAAS,KAAKtC,cAAd;AACH;;AAED,YAAI+E,gBAAgB,CAApB;AACA,YAAIC,cAAc,CAAlB;;AAEA,YAAG,KAAKuB,QAAL,CAAc,KAAK5E,YAAnB,CAAH,EAAoC;AAChCoD,4BAAgB,KAAKhC,YAAL,CAAkB,KAAKpB,YAAL,CAAkB,CAAlB,CAAlB,CAAhB;AACH;;AAED,YAAG,KAAK4E,QAAL,CAAcjE,MAAd,CAAH,EAAyB;AACrB,gBAAGyC,iBAAiB,CAApB,EAAuB,OAAO,IAAP;AACvBC,0BAAc,KAAKjC,YAAL,CAAkBT,OAAO,CAAP,CAAlB,CAAd;AACH,SAHD,MAII;AACA,mBAAO,KAAP;AACH;;AAED;AACA,YAAI0C,eAAe,EAAf,IAAqBA,eAAe,EAAxC,EAA4C;AACxC,mBAAO,IAAP;AACH;;AAED;AACA,YAAGA,cAAcD,aAAjB,EAA+B;AAC3B,gBAAGzC,OAAOP,MAAP,IAAiB,KAAKJ,YAAL,CAAkBI,MAAtC,EAA6C;AACzC,uBAAO,IAAP;AACH;AACJ,SAJD,MAKK,IAAGiD,eAAeD,aAAlB,EAAgC;AACjC,gBAAGzC,OAAOP,MAAP,GAAgB,KAAKJ,YAAL,CAAkBI,MAArC,EAA4C;AACxC,uBAAO,IAAP;AACH;AACJ;;AAED,eAAO,KAAP;AACH,KA9jBmC;;AAgkBpC8E,gBAAW,oBAASvE,MAAT,EAAgB;AACvB,YAAGA,OAAOP,MAAP,GAAgB,CAAnB,EAAsB,OAAO,KAAP;;AAEtB,aAAKkB,aAAL,CAAmBX,MAAnB;;AAEA,YAAI+C,YAAY,CAAhB;AACA,aAAI,IAAIvD,IAAI,CAAZ,EAAeA,IAAIQ,OAAOP,MAA1B,EAAkCD,GAAlC,EAAsC;AAClC,gBAAI4C,OAAOpC,OAAOR,CAAP,CAAX;AACA,gBAAIwD,WAAW,KAAKvC,YAAL,CAAkB2B,KAAK,CAAL,CAAlB,CAAf;;AAEA,gBAAGY,YAAY,EAAf,EAAkB;AACd,uBAAO,KAAP;AACH;;AAED,gBAAGD,aAAa,CAAhB,EAAkB;AACd,oBAAIA,YAAU,CAAX,IAAiBC,QAApB,EACI,OAAO,KAAP;AACP;;AAEDD,wBAAYC,QAAZ;AACH;;AAED,eAAO,IAAP;AACH,KAvlBmC;;AAylBpC;AACAY,iBAAY,qBAAS5D,MAAT,EAAiBmC,IAAjB,EAAuBe,GAAvB,EAA2B;AACnC,YAAIgB,OAAO,EAAX;AACA,aAAI,IAAI1E,IAAI,CAAZ,EAAeA,IAAI2C,KAAK1C,MAAxB,EAAgCD,GAAhC,EAAoC;AAChC,gBAAG0E,KAAKzE,MAAL,IAAeyD,GAAlB,EAAuB;AACvBgB,iBAAKvE,IAAL,CAAUwC,KAAK3C,CAAL,CAAV;AACH;AACD;AACA,YAAIgF,WAAW,KAAf;AACA,aAAK,IAAIhF,MAAI,CAAb,EAAgBA,MAAIQ,OAAOP,MAA3B,EAAmCD,KAAnC,EAAwC;AACpC;AACA,gBAAIQ,OAAOR,GAAP,EAAUc,IAAV,GAAiBmE,QAAjB,MAA+BP,KAAK5D,IAAL,GAAYmE,QAAZ,EAAnC,EAA2D;AACvDD,2BAAW,IAAX;AACA;AACH;AACJ;AACD,YAAI,CAACA,QAAL,EAAe;AACXxE,mBAAOA,OAAOP,MAAd,IAAwByE,IAAxB;AACH;AACJ,KA5mBmC;;AA8mBpCQ,eAAU,qBAAU;AAChB,eAAO,KAAKC,MAAZ;AACH,KAhnBmC;;AAknBpCC,gBAAW,oBAAS1B,GAAT,EAAiC;AAAA,YAApBV,YAAoB,uEAAL,IAAK;;AACxC,YAAIxC,SAAS,EAAb;AACA,YAAGwC,gBAAc,KAAjB,EAAuB;AACnBxC,qBAAS,KAAKvC,YAAd;AACH,SAFD,MAEK;AACDuC,qBAAS,KAAKtC,cAAd;AACH;AACD,YAAI2F,aAAa,KAAK5F,YAAtB;AACA,YAAGuC,OAAOP,MAAP,GAAgB,CAAnB,EAAsB,OAAO,KAAP;AACtB;AACA,YAAI6D,SAAO,KAAK/F,OAAL,CAAagG,uBAAb,CAAqC,QAArC,CAAX;AACA,YAAID,OAAOpC,OAAP,CAAe,CAAf,IAAoB,CAApB,IAAyBgC,OAAO,KAAKjE,oBAAzC,EAA+D;AAC3D;AACA,mBAAO,KAAP;AACH;AACD,YAAIqE,OAAOpC,OAAP,CAAe,CAAf,IAAoB,CAApB,IAAyBgC,OAAO,KAAKhE,oBAAzC,EAA+D;AAC3D;AACA,mBAAO,KAAP;AACH;AACD,YAAIuD,gBAAgB,CAApB;AACA,YAAIC,cAAc,CAAlB;AACA,YAAIe,WAAW,EAAf;AACA,YAAIC,WAAW,EAAf;;AAEA,aAAI,IAAIlE,IAAI,CAAZ,EAAeA,IAAI,KAAKH,YAAL,CAAkBI,MAArC,EAA6CD,GAA7C,EAAiD;AAC7C,gBAAIS,QAAQ,KAAKZ,YAAL,CAAkBG,CAAlB,CAAZ;AACA,gBAAIqF,UAAU,KAAKvC,YAAL,CAAkB,KAAKjD,YAAvB,EAAqCY,KAArC,CAAd;AACA,gBAAI6E,UAAU,KAAKC,kBAAL,CAAwBtB,QAAxB,EAAkCxD,KAAlC,CAAd;AACA,gBAAG4E,QAAQpF,MAAR,IAAkB,CAAlB,IAAuB,CAACqF,OAA3B,EAAmC;AAC/B,qBAAKlB,WAAL,CAAiBH,QAAjB,EAA2BoB,OAA3B,EAAoC,CAApC;AACH;AACJ;;AAED,aAAI,IAAIrF,MAAE,CAAV,EAAaA,MAAIQ,OAAOP,MAAxB,EAAgCD,KAAhC,EAAoC;AAChC,gBAAIS,UAAQD,OAAOR,GAAP,CAAZ;AACA,gBAAIqF,WAAU,KAAKvC,YAAL,CAAkBtC,MAAlB,EAA0BC,OAA1B,CAAd;AACA,gBAAI6E,WAAU,KAAKC,kBAAL,CAAwBrB,QAAxB,EAAkCzD,OAAlC,CAAd;AACA,gBAAG4E,SAAQpF,MAAR,IAAkB,CAAlB,IAAuB,CAACqF,QAAxB,IAAmC,KAAKrE,YAAL,CAAkBR,OAAlB,KAA4B,EAAlE,EAAqE;AACjE,qBAAK2D,WAAL,CAAiBF,QAAjB,EAA2BmB,QAA3B,EAAoC,CAApC;AACH;AACJ;;AAED,YAAGpB,SAAShE,MAAZ,EAAmB;AACf,gBAAIuF,aAAa,KAAKC,YAAL,CAAkBxB,QAAlB,CAAjB;AACAhB,4BAAgB,KAAKhC,YAAL,CAAkBuE,WAAW,CAAX,EAAc,CAAd,CAAlB,CAAhB;AACH;;AAED,YAAGtB,SAASjE,MAAT,GAAkB,CAArB,EAAwB,OAAO,KAAP;;AAExB,aAAKkB,aAAL,CAAmB+C,QAAnB;;AAEA,YAAIwB,YAAY,KAAKD,YAAL,CAAkBvB,QAAlB,CAAhB;;AAEA,YAAG,CAACwB,UAAUzF,MAAd,EAAsB,OAAO,KAAP;;AAEtBiD,sBAAc,KAAKjC,YAAL,CAAkByE,UAAU,CAAV,EAAa,CAAb,CAAlB,CAAd;;AAEA,YAAIlE,QAAShB,OAAOP,MAAP,GAAgByF,UAAUzF,MAAV,GAAmB,CAAhD;AACA,aAAKkF,MAAL,GAAc3D,KAAd;AACA,YAAImE,aAAa,KAAKrB,aAAL,CAAmB9D,MAAnB,EAA2BkF,SAA3B,CAAjB;AACA;AACA,YAAInB,SAAS,CAAb;AACA,aAAK,IAAIvE,MAAI,CAAb,EAAgBA,MAAI2F,WAAW1F,MAA/B,EAAuCD,KAAvC,EAA4C;AACxC,gBAAI,KAAKiB,YAAL,CAAkB0E,WAAW3F,GAAX,CAAlB,KAAoC,KAAKvB,mBAAzC,IACA,KAAKwC,YAAL,CAAkB0E,WAAW3F,GAAX,CAAlB,KAAoC,KAAKtB,iBAD7C,EACgE;AAC5D6F;AACH;AACJ;AACD,YAAIA,UAAU,CAAd,EAAiB;AACb,mBAAO,KAAP;AACH;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAGb,OAAO,KAAKlE,oBAAf,EAAoC;AAChC,gBAAGgC,SAAS,CAAZ,EAAc;AACV,oBAAGyB,iBAAiBA,iBAAiB,CAArC,EAAuC;AACnC,wBAAGC,cAAcD,aAAjB,EAA+B;AAC3B,+BAAO,IAAP;AACH;AACD,2BAAO,KAAP;AACH;AACD,uBAAO,IAAP;AACH;AACJ,SAVD,MAWK,IAAGS,OAAO,KAAKjE,oBAAf,EAAoC;AACrC,gBAAG+B,SAASkE,UAAUzF,MAAtB,EAA6B;AACzB,oBAAGgD,iBAAiBA,iBAAiB,CAArC,EAAuC;AACnC,wBAAGC,cAAcD,aAAjB,EAA+B;AAC3B,+BAAO,IAAP;AACH;AACD,2BAAO,KAAP;AACH;AACD,uBAAO,IAAP;AACH;AACD;AACA;AACA;AACA;AACA;AACH,SAfI,MAgBA,IAAGS,OAAO,KAAKhE,oBAAf,EAAoC;AACrC,gBAAGgG,UAAUzF,MAAV,IAAkB,CAAlB,IAAuBuB,SAAO,CAAjC,EAAmC;AAC/B;AACA,oBAAIoE,cAAc,KAAlB;AACA,qBAAI,IAAI5F,MAAE,CAAV,EAAaA,MAAIQ,OAAOP,MAAxB,EAAgCD,KAAhC,EAAoC;AAChC,wBAAIS,UAAQD,OAAOR,GAAP,CAAZ;AACA,wBAAI2E,SAAS,KAAK7B,YAAL,CAAkBtC,MAAlB,EAA0BC,OAA1B,CAAb;AACA,wBAAGkE,OAAO1E,MAAP,IAAiB,CAApB,EAAsB;AAClB2F,sCAAc,IAAd;AACA;AACH;AACJ;AACD,oBAAIA,WAAJ,EAAiB;AACb,2BAAO,IAAP;AACH;AACJ,aAdD,MAcM,IAAGF,UAAUzF,MAAV,IAAkB,CAAlB,IAAuBuB,SAAO,CAAjC,EAAmC;AACrC;AACA,oBAAIoE,eAAc,KAAlB;AACA,oBAAIC,aAAa,KAAjB;AACA,qBAAI,IAAI7F,MAAE,CAAV,EAAaA,MAAIQ,OAAOP,MAAxB,EAAgCD,KAAhC,EAAoC;AAChC,wBAAIS,UAAQD,OAAOR,GAAP,CAAZ;AACA,wBAAI2E,UAAS,KAAK7B,YAAL,CAAkBtC,MAAlB,EAA0BC,OAA1B,CAAb;AACA,wBAAGkE,QAAO1E,MAAP,IAAiB,CAApB,EAAsB;AAClB2F,uCAAc,IAAd;AACA;AACH,qBAHD,MAGM,IAAIjB,QAAO1E,MAAP,IAAiB,CAArB,EAAwB;AAC1B;AACA4F,qCAAa,IAAb;AACH;AACJ;AACD,oBAAID,gBAAeC,UAAnB,EAA+B;AAC3B,2BAAO,IAAP;AACH;AACJ,aAlBK,MAmBD,IAAGrE,SAASkE,UAAUzF,MAAV,GAAmB,CAA5B,IAAiC,KAAKuE,eAAL,CAAqBmB,UAArB,CAApC,EAAqE;AACtE,oBAAG1C,iBAAiBA,iBAAiB,CAArC,EAAuC;AACnC,wBAAGC,cAAcD,aAAjB,EAA+B;AAC3B,+BAAO,IAAP;AACH;AACD,2BAAO,KAAP;AACH;AACD,uBAAO,IAAP;AACH;AACD;AACA;AACA;AACA;AACA;AACH;AACD,eAAO,KAAP;AACH,KA9wBmC;;AAgxBpC6C,kBAAa,wBAA6B;AAAA,YAApB9C,YAAoB,uEAAL,IAAK;;AACtC,YAAIxC,SAAS,EAAb;AACA,YAAGwC,gBAAc,KAAjB,EAAuB;AACnBxC,qBAAS,KAAKvC,YAAd;AACH,SAFD,MAEK;AACDuC,qBAAS,KAAKtC,cAAd;AACH;AACD,YAAGsC,OAAOP,MAAP,GAAgB,CAAnB,EAAsB,OAAO,KAAP;AACtB,YAAGO,OAAOP,MAAP,GAAc,CAAd,IAAmB,CAAtB,EAAyB,OAAO,KAAP;;AAEzB,YAAIgD,gBAAgB,CAApB;AACA,YAAIC,cAAc,CAAlB;AACA,YAAIe,WAAW,EAAf;AACA,YAAIC,WAAW,EAAf;;AAEA,aAAI,IAAIlE,IAAI,CAAZ,EAAeA,IAAI,KAAKH,YAAL,CAAkBI,MAArC,EAA6CD,GAA7C,EAAiD;AAC7C,gBAAIS,QAAQ,KAAKZ,YAAL,CAAkBG,CAAlB,CAAZ;AACA,gBAAIqD,QAAQ,KAAKP,YAAL,CAAkB,KAAKjD,YAAvB,EAAqCY,KAArC,CAAZ;AACA,gBAAI6E,UAAU,KAAKS,gBAAL,CAAsB9B,QAAtB,EAAgCxD,KAAhC,CAAd;AACA,gBAAG4C,MAAMpD,MAAN,IAAgB,CAAhB,IAAqB,CAACqF,OAAzB,EAAiC;AAC7BrB,yBAASA,SAAShE,MAAlB,IAA4BoD,KAA5B;AACH;AACJ;;AAED,aAAI,IAAIrD,MAAI,CAAZ,EAAeA,MAAIQ,OAAOP,MAA1B,EAAkCD,KAAlC,EAAsC;AAClC,gBAAIS,UAAQD,OAAOR,GAAP,CAAZ;AACA,gBAAIqD,SAAQ,KAAKP,YAAL,CAAkBtC,MAAlB,EAA0BC,OAA1B,CAAZ;AACA,gBAAI6E,YAAU,KAAKS,gBAAL,CAAsB7B,QAAtB,EAAgCzD,OAAhC,CAAd;AACA,gBAAG4C,OAAMpD,MAAN,IAAgB,CAAhB,IAAqB,CAACqF,SAAzB,EAAiC;AAC7BpB,yBAASA,SAASjE,MAAlB,IAA4BoD,MAA5B;AACH;AACJ;;AAED,YAAGa,SAASjE,MAAT,GAAkB,CAAlB,IAAuBO,OAAOP,MAAjC,EAAyC,OAAO,KAAP;;AAEzC,YAAG,KAAK8E,UAAL,CAAgBd,QAAhB,CAAH,EAA6B;AACzBhB,4BAAgB,KAAKhC,YAAL,CAAkBgD,SAAS,CAAT,EAAY,CAAZ,CAAlB,CAAhB;AACH;;AAED,YAAG,KAAKc,UAAL,CAAgBb,QAAhB,CAAH,EAA6B;AACzBhB,0BAAc,KAAKjC,YAAL,CAAkBiD,SAAS,CAAT,EAAY,CAAZ,CAAlB,CAAd;AACH,SAFD,MAGI;AACA,mBAAO,KAAP;AACH;;AAED,YAAGjB,iBAAiBA,iBAAiB,CAArC,EAAuC;AACnC,gBAAIzC,OAAOP,MAAP,GAAgB,KAAKJ,YAAL,CAAkBI,MAAnC,IAA8C,CAAjD,EAAmD;AAC/C,oBAAGiD,cAAcD,aAAjB,EAA+B;AAC3B,2BAAO,IAAP;AACH;AACJ;AACD,mBAAO,KAAP;AACH;AACD,eAAO,IAAP;AACH,KAv0BmC;;AAy0BpC;AACA+C,iBAAY,uBAAU;AAClB,YAAIxF,SAAS,KAAKX,YAAlB;AACA,YAAGW,OAAOP,MAAP,IAAiB,EAApB,EAAwB,OAAO,KAAP;;AAExB,aAAKiB,eAAL,CAAqBV,MAArB;;AAEA,YAAI+C,YAAY,CAAhB;AACA,aAAI,IAAIvD,IAAI,CAAZ,EAAeA,IAAIQ,OAAOP,MAA1B,EAAkCD,GAAlC,EAAsC;AAClC,gBAAIS,QAAQD,OAAOR,CAAP,CAAZ;AACA,gBAAIwD,WAAW,KAAKvC,YAAL,CAAkBR,KAAlB,CAAf;AACA,gBAAG+C,YAAYD,SAAf,EAA0B,OAAO,KAAP;;AAE1B,gBAAGC,YAAY,EAAf,EAAmB,OAAO,KAAP;;AAEnB,gBAAGD,aAAa,CAAhB,EAAkB;AACd,oBAAGC,WAAWD,SAAX,IAAwB,CAA3B,EACI,OAAO,KAAP;AACP;;AAEDA,wBAAYC,QAAZ;AACH;;AAED,eAAO,IAAP;AACH,KAj2BmC;AAk2BpCyC,gBAAW,sBAA8B;AAAA,YAArBjD,YAAqB,uEAAN,KAAM;;AACrC,YAAIxC,SAAS,EAAb;AACA,YAAGwC,gBAAc,KAAjB,EAAuB;AACnBxC,qBAAS,KAAKvC,YAAd;AACH,SAFD,MAEK;AACDuC,qBAAS,KAAKtC,cAAd;AACH;AACD;AACA,YAAIgI,cAAc,EAAlB;AACA,aAAI,IAAIlG,IAAI,CAAZ,EAAeA,IAAIQ,OAAOP,MAA1B,EAAkCD,GAAlC,EAAsC;AAClC,gBAAIS,QAAQD,OAAOR,CAAP,CAAZ;AACA,gBAAI2E,SAAS,KAAK7B,YAAL,CAAkBtC,MAAlB,EAA0BC,KAA1B,CAAb;AACA,gBAAGkE,OAAO1E,MAAP,IAAiB,CAApB,EAAsB;AAClB,uBAAO,IAAP;AACH;AACD,gBAAI,KAAKgB,YAAL,CAAkBT,OAAOR,CAAP,CAAlB,KAAgC,EAAhC,IACA,KAAKiB,YAAL,CAAkBT,OAAOR,CAAP,CAAlB,KAAgC,EADpC,EACwC;AACpCkG,4BAAY/F,IAAZ,CAAiBK,OAAOR,CAAP,CAAjB;AACH;AACJ;AACD,YAAIkG,YAAYjG,MAAZ,IAAsB,CAA1B,EAA6B;AACzB,mBAAO,IAAP;AACH;AACD,eAAO,KAAP;AACH,KA13BmC;;AA43BpCkG,yBAAoB,+BAA8B;AAAA,YAArBnD,YAAqB,uEAAN,KAAM;;AAC9C,YAAIxC,SAAS,EAAb;AACA,YAAGwC,gBAAc,KAAjB,EAAuB;AACnBxC,qBAAS,KAAKvC,YAAd;AACH,SAFD,MAEK;AACDuC,qBAAS,KAAKtC,cAAd;AACH;AACD;AACA,YAAIgI,cAAc,EAAlB;AACA,aAAI,IAAIlG,IAAI,CAAZ,EAAeA,IAAIQ,OAAOP,MAA1B,EAAkCD,GAAlC,EAAsC;AAClC,gBAAIS,QAAQD,OAAOR,CAAP,CAAZ;AACA,gBAAI2E,SAAS,KAAK7B,YAAL,CAAkBtC,MAAlB,EAA0BC,KAA1B,CAAb;AACA,gBAAI,KAAKQ,YAAL,CAAkBT,OAAOR,CAAP,CAAlB,KAAgC,EAAhC,IACA,KAAKiB,YAAL,CAAkBT,OAAOR,CAAP,CAAlB,KAAgC,EADpC,EACwC;AACpCkG,4BAAY/F,IAAZ,CAAiBK,OAAOR,CAAP,CAAjB;AACH;AACD,gBAAI,KAAKiB,YAAL,CAAkBT,OAAOR,CAAP,CAAlB,KAAgC,EAApC,EAAwC;AACpC;AACH;AACD,gBAAG2E,OAAO1E,MAAP,IAAiB,CAApB,EAAsB;AAClB,uBAAO,IAAP;AACH;AACJ;AACD,YAAIiG,YAAYjG,MAAZ,IAAsB,CAA1B,EAA6B;AACzB,mBAAO,IAAP;AACH;AACD,eAAO,KAAP;AACH,KAv5BmC;;AAy5BpCmG,qBAAgB,2BAAU;AACtB,YAAI5F,SAAS,KAAKvC,YAAlB;AACA,YAAG,KAAK6G,WAAL,EAAH,EAAsB;AAClB,mBAAO,KAAP;AACH;AACD,aAAI,IAAI9E,IAAI,CAAZ,EAAeA,IAAIQ,OAAOP,MAA1B,EAAkCD,GAAlC,EAAsC;AAClC,gBAAIS,QAAQD,OAAOR,CAAP,CAAZ;AACA,gBAAG,KAAK9B,cAAL,CAAoBwD,OAApB,CAA4BjB,KAA5B,KAAsC,CAAC,CAA1C,EAA4C;AACxC,oBAAIkE,SAAS,KAAK7B,YAAL,CAAkBtC,MAAlB,EAA0BC,KAA1B,CAAb;AACA,oBAAGkE,OAAO1E,MAAP,IAAiB,CAApB,EAAsB;AAClB,2BAAO,IAAP;AACH;AACJ;AACJ;;AAED,eAAO,KAAP;AACH,KAz6BmC;;AA26BpCoG,iBAAY,uBAA6B;AAAA,YAApBrD,YAAoB,uEAAL,IAAK;;AACrC;AACA;AACA,aAAKmC,MAAL,GAAc,CAAd;;AAEA,YAAGnC,gBAAgB,CAAC,KAAK9E,cAAL,CAAoB+B,MAAxC,EAA+C;AAC3C,mBAAO,CAAP;AACH;;AAED,YAAIqG,SAAS,KAAb;;AAEA,YAAG,KAAKxB,WAAL,CAAiB9B,YAAjB,CAAH,EAAkC;AAC9B,mBAAO,KAAKrD,oBAAZ;AACH;;AAED,YAAG,KAAKxB,YAAL,IAAqB,CAAxB,EAA0B;AACtB,gBAAG,KAAK4E,YAAL,CAAkBC,YAAlB,CAAH,EAAmC;AAC/B,uBAAO,KAAKnE,wBAAZ;AACH,aAFD,MAGK,IAAG,KAAKsE,UAAL,CAAgBH,YAAhB,CAAH,EAAiC;AAClC,uBAAO,KAAKlE,mBAAZ;AACH,aAFI,MAGA,IAAG,KAAKwE,WAAL,CAAiBN,YAAjB,CAAH,EAAkC;AACnC,uBAAO,KAAK9D,oBAAZ;AACH,aAFI,MAGA,IAAG,KAAK0E,gBAAL,CAAsB,KAAKxE,mBAA3B,EAAgD4D,YAAhD,CAAH,EAAiE;AAClE,uBAAO,KAAK5D,mBAAZ;AACH,aAFI,MAGA,IAAG,KAAKwE,gBAAL,CAAsB,KAAKvE,oBAA3B,EAAiD2D,YAAjD,CAAH,EAAkE;AACnE,uBAAO,KAAK3D,oBAAZ;AACH,aAFI,MAGA,IAAG,KAAKuE,gBAAL,CAAsB,KAAKrE,mBAA3B,EAAgDyD,YAAhD,CAAH,EAAiE;AAClE,uBAAO,KAAKzD,mBAAZ;AACH,aAFI,MAGA,IAAG,KAAKqE,gBAAL,CAAsB,KAAKtE,mBAA3B,EAAgD0D,YAAhD,CAAH,EAAiE;AAClE,uBAAO,KAAK1D,mBAAZ;AACH,aAFI,MAGA,IAAG,KAAKsE,gBAAL,CAAsB,KAAK3E,mBAA3B,EAAgD+D,YAAhD,CAAH,EAAiE;AAClE,uBAAO,KAAK/D,mBAAZ;AACH,aAFI,MAGA,IAAG,KAAK2E,gBAAL,CAAsB,KAAK5E,mBAA3B,EAAgDgE,YAAhD,CAAH,EAAiE;AAClE,uBAAO,KAAKhE,mBAAZ;AACH,aAFI,MAGA,IAAG,KAAK4E,gBAAL,CAAsB,KAAK7E,oBAA3B,EAAiDiE,YAAjD,CAAH,EAAkE;AACnE,uBAAO,KAAKjE,oBAAZ;AACH,aAFI,MAGA,IAAI,KAAKqG,UAAL,CAAgB,KAAK5F,oBAArB,EAA2CwD,YAA3C,CAAJ,EAA8D;AAC/D,uBAAO,KAAKxD,oBAAZ;AACH,aAFI,MAGA,IAAG,KAAK4F,UAAL,CAAgB,KAAK3F,oBAArB,EAA2CuD,YAA3C,CAAH,EAA4D;AAC7D,uBAAO,KAAKvD,oBAAZ;AACH,aAFI,MAGA,IAAG,KAAK2F,UAAL,CAAgB,KAAK1F,oBAArB,EAA2CsD,YAA3C,CAAH,EAA4D;AAC7D,uBAAO,KAAKtD,oBAAZ;AACH,aAFI,MAGA,IAAG,KAAKoG,YAAL,CAAkB9C,YAAlB,CAAH,EAAmC;AACpC,uBAAO,KAAK7D,qBAAZ;AACH,aAFI,MAGD;AACA,uBAAO,CAAP;AACH;AACJ,SA9CD,MA+CK,IAAG,KAAKhB,YAAL,IAAqB,KAAKU,wBAA7B,EAAsD;AACvD,gBAAG,KAAKkE,YAAL,CAAkBC,YAAlB,CAAH,EAAmC;AAC/BsD,yBAAS,IAAT;AACH;AACJ,SAJI,MAKA,IAAG,KAAKnI,YAAL,IAAqB,KAAKW,mBAA7B,EAAiD;AAClD,gBAAG,KAAKqE,UAAL,CAAgBH,YAAhB,CAAH,EAAiC;AAC7BsD,yBAAS,IAAT;AACH;AACJ,SAJI,MAKA,IAAG,KAAKnI,YAAL,IAAqB,KAAKe,oBAA7B,EAAkD;AACnD,gBAAG,KAAKoE,WAAL,CAAiBN,YAAjB,CAAH,EAAkC;AAC9BsD,yBAAS,IAAT;AACH;AACJ,SAJI,MAKA,IAAI,KAAKnI,YAAL,IAAqB,KAAKY,oBAA3B,IACC,KAAKZ,YAAL,IAAqB,KAAKa,mBAD3B,IAEC,KAAKb,YAAL,IAAqB,KAAKc,mBAF3B,IAGC,KAAKd,YAAL,IAAqB,KAAKiB,mBAH3B,IAIC,KAAKjB,YAAL,IAAqB,KAAKkB,oBAJ3B,IAKC,KAAKlB,YAAL,IAAqB,KAAKmB,mBAL3B,IAMC,KAAKnB,YAAL,IAAqB,KAAKoB,mBAN9B,EAMmD;AAChD,gBAAG,KAAKqE,gBAAL,CAAsB,KAAKzF,YAA3B,EAAyC6E,YAAzC,CAAH,EAA0D;AACtDsD,yBAAS,IAAT;AACH;AACR,SAVI,MAWA,IAAI,KAAKnI,YAAL,IAAqB,KAAKqB,oBAA9B,EAAoD;AACrD,gBAAG,KAAK4F,UAAL,CAAgB,KAAK5F,oBAArB,EAA2CwD,YAA3C,CAAH,EAA4D;AACxDsD,yBAAS,IAAT;AACH;AACJ,SAJI,MAKA,IAAI,KAAKnI,YAAL,IAAqB,KAAKsB,oBAA9B,EAAoD;AACrD,gBAAG,KAAK2F,UAAL,CAAgB,KAAK3F,oBAArB,EAA2CuD,YAA3C,CAAH,EAA4D;AACxDsD,yBAAS,IAAT;AACH;AACJ,SAJI,MAKA,IAAG,KAAKnI,YAAL,IAAqB,KAAKuB,oBAA7B,EAAkD;AACnD,gBAAG,KAAK0F,UAAL,CAAgB,KAAK1F,oBAArB,EAA2CsD,YAA3C,CAAH,EAA4D;AACxDsD,yBAAS,IAAT;AACH;AACJ,SAJI,MAKA,IAAG,KAAKnI,YAAL,IAAqB,KAAKgB,qBAA7B,EAAmD;AACpD,gBAAG,KAAK2G,YAAL,CAAkB9C,YAAlB,CAAH,EAAmC;AAC/BsD,yBAAS,IAAT;AACH;AACJ;;AAED,YAAGA,MAAH,EAAU;AACN,mBAAO,KAAKnI,YAAZ;AACH;;AAED,eAAO,CAAP;AACH,KA7hCmC;AA8hCpC;AACAoI,yBAAoB,+BAAU;AAC1B,YAAG,CAAC,KAAKrI,cAAL,CAAoB+B,MAAxB,EAA+B;AAC3B,mBAAO,EAAP;AACH;AACD,YAAIuG,cAAc,EAAlB;AACA,YAAG,KAAKrI,YAAL,IAAqB,CAAxB,EAA0B;AACtB,gBAAIsI,sBAAsB,KAAK7C,gBAAL,CAAsB,KAAKrE,mBAA3B,CAA1B;AACA,gBAAIkH,mBAAJ,EAAyB;AACrB,oBAAIC,qBAAqB,EAAC,gBAAe,KAAKxI,cAArB,EAAqC,YAAW,KAAKqB,mBAArD,EAAzB;AACAiH,4BAAYrG,IAAZ,CAAiBuG,kBAAjB;AACH;AACD,gBAAIC,gBAAgB,KAAKvB,UAAL,CAAgB,KAAK3F,oBAArB,CAApB;AACA,gBAAIkH,aAAJ,EAAmB;AACf,oBAAIC,eAAe,EAAC,gBAAe,KAAK1I,cAArB,EAAqC,YAAW,KAAKuB,oBAArD,EAAnB;AACA+G,4BAAYrG,IAAZ,CAAiByG,YAAjB;AACH;AACD,mBAAOJ,WAAP;AACH;AACD,eAAOA,WAAP;AACH,KAljCmC;AAmjCpC;AACI;AACJK,sBAAiB,4BAAU;AACvB,YAAIC,QAAQ,EAAZ;AACA,YAAG,KAAK3I,YAAL,IAAqB,KAAKU,wBAA7B,EAAsD;AAClDiI,oBAAQ,KAAKC,aAAL,CAAmB,IAAnB,CAAR;AACH,SAFD,MAGK,IAAG,KAAK5I,YAAL,IAAqB,KAAKW,mBAA7B,EAAiD;AAClDgI,oBAAQ,KAAKE,WAAL,CAAiB,IAAjB,CAAR;AACH,SAFI,MAGA,IAAG,KAAK7I,YAAL,IAAqB,KAAKe,oBAA7B,EAAkD;AACnD4H,oBAAQ,KAAKG,YAAL,CAAkB,IAAlB,CAAR;AACH,SAFI,MAGA,IAAG,KAAK9I,YAAL,IAAqB,KAAKY,oBAA1B,IACA,KAAKZ,YAAL,IAAqB,KAAKa,mBAD1B,IAEA,KAAKb,YAAL,IAAqB,KAAKc,mBAF7B,EAEiD;AAClD6H,oBAAQ,KAAKI,YAAL,CAAkB,KAAK/I,YAAvB,EAAqC,IAArC,CAAR;AACH,SAJI,MAKA,IAAG,KAAKA,YAAL,IAAqB,KAAKmB,mBAA1B,IACA,KAAKnB,YAAL,IAAqB,KAAKoB,mBAD1B,IAEA,KAAKpB,YAAL,IAAqB,KAAKiB,mBAF1B,IAGA,KAAKjB,YAAL,IAAqB,KAAKkB,oBAH7B,EAGkD;AACnDyH,oBAAQ,KAAKK,WAAL,CAAiB,KAAKhJ,YAAtB,EAAoC,IAApC,CAAR;AACH,SALI,MAMA,IAAG,KAAKA,YAAL,IAAqB,KAAKwB,oBAA7B,EAAkD;AACnDmH,oBAAQ,KAAKM,SAAL,CAAe,IAAf,CAAR;AACH,SAFI,MAGA,IAAG,KAAKjJ,YAAL,IAAqB,KAAKqB,oBAA7B,EAAkD;AACnDsH,oBAAQ,KAAKO,WAAL,CAAiB,KAAK7H,oBAAtB,EAA4C,IAA5C,CAAR;AACH,SAFI,MAGA,IAAG,KAAKrB,YAAL,IAAqB,KAAKsB,oBAA7B,EAAkD;AACnDqH,oBAAQ,KAAKO,WAAL,CAAiB,KAAK5H,oBAAtB,EAA4C,IAA5C,CAAR;AACH,SAFI,MAGA,IAAG,KAAKtB,YAAL,IAAqB,KAAKuB,oBAA7B,EAAkD;AACnDoH,oBAAQ,KAAKO,WAAL,CAAiB,KAAK3H,oBAAtB,EAA4C,IAA5C,CAAR;AACH,SAFI,MAGA,IAAG,KAAKvB,YAAL,IAAqB,KAAKgB,qBAA7B,EAAmD;AACpD2H,oBAAQ,KAAKQ,aAAL,CAAmB,IAAnB,CAAR;AACH,SAFI,MAGA,IAAG,KAAKnJ,YAAL,IAAmB,CAAtB,EAAwB;AACzB;AACA2I,kBAAM3G,IAAN,CAAWoH,KAAX,CAAiBT,KAAjB,EAAwB,KAAKC,aAAL,CAAmB,IAAnB,CAAxB;AACAD,kBAAM3G,IAAN,CAAWoH,KAAX,CAAiBT,KAAjB,EAAwB,KAAKE,WAAL,CAAiB,IAAjB,CAAxB;AACAF,kBAAM3G,IAAN,CAAWoH,KAAX,CAAiBT,KAAjB,EAAwB,KAAKG,YAAL,CAAkB,IAAlB,CAAxB;AACAH,kBAAM3G,IAAN,CAAWoH,KAAX,CAAiBT,KAAjB,EAAwB,KAAKI,YAAL,CAAkB,KAAKnI,oBAAvB,EAA4C,IAA5C,CAAxB;AACA+H,kBAAM3G,IAAN,CAAWoH,KAAX,CAAiBT,KAAjB,EAAwB,KAAKI,YAAL,CAAkB,KAAKlI,mBAAvB,EAA2C,IAA3C,CAAxB;AACA8H,kBAAM3G,IAAN,CAAWoH,KAAX,CAAiBT,KAAjB,EAAwB,KAAKI,YAAL,CAAkB,KAAKjI,mBAAvB,EAA2C,IAA3C,CAAxB;AACA6H,kBAAM3G,IAAN,CAAWoH,KAAX,CAAiBT,KAAjB,EAAwB,KAAKK,WAAL,CAAiB,KAAK7H,mBAAtB,EAA0C,IAA1C,CAAxB;AACAwH,kBAAM3G,IAAN,CAAWoH,KAAX,CAAiBT,KAAjB,EAAwB,KAAKK,WAAL,CAAiB,KAAK5H,mBAAtB,EAA0C,IAA1C,CAAxB;AACAuH,kBAAM3G,IAAN,CAAWoH,KAAX,CAAiBT,KAAjB,EAAwB,KAAKK,WAAL,CAAiB,KAAK/H,mBAAtB,EAA0C,IAA1C,CAAxB;AACA0H,kBAAM3G,IAAN,CAAWoH,KAAX,CAAiBT,KAAjB,EAAwB,KAAKK,WAAL,CAAiB,KAAK9H,oBAAtB,EAA2C,IAA3C,CAAxB;AACAyH,kBAAM3G,IAAN,CAAWoH,KAAX,CAAiBT,KAAjB,EAAwB,KAAKO,WAAL,CAAiB,KAAK7H,oBAAtB,EAA2C,IAA3C,CAAxB;AACAsH,kBAAM3G,IAAN,CAAWoH,KAAX,CAAiBT,KAAjB,EAAwB,KAAKO,WAAL,CAAiB,KAAK5H,oBAAtB,EAA2C,IAA3C,CAAxB;AACAqH,kBAAM3G,IAAN,CAAWoH,KAAX,CAAiBT,KAAjB,EAAwB,KAAKO,WAAL,CAAiB,KAAK3H,oBAAtB,EAA2C,IAA3C,CAAxB;AACAoH,kBAAM3G,IAAN,CAAWoH,KAAX,CAAiBT,KAAjB,EAAwB,KAAKQ,aAAL,CAAmB,IAAnB,CAAxB;AACAR,kBAAM3G,IAAN,CAAWoH,KAAX,CAAiBT,KAAjB,EAAwB,KAAKU,YAAL,CAAkB,IAAlB,CAAxB;AACH;AACD,YAAGV,MAAM7G,MAAN,GAAa,CAAhB,EAAkB;AACb6G,kBAAMhG,IAAN,CAAW,KAAK2G,YAAhB;AACJ;AACD,eAAOX,KAAP;AACH,KAhnCmC;AAinCpCW,kBAAa,sBAAS1G,CAAT,EAAWC,CAAX,EAAa;AACtB,YAAGD,EAAEd,MAAF,GAASe,EAAEf,MAAd,EAAqB;AACjB,mBAAO,CAAC,CAAR;AACH;AACD,eAAO,CAAP;AACH,KAtnCmC;AAunCpCyH,gBAAW,sBAAU;AACjB,YAAIZ,QAAQ,EAAZ;AACA,YAAI,KAAK3I,YAAL,IAAqB,KAAKQ,oBAA9B,EAAoD;AAChD,gBAAIgJ,UAAU,KAAK7J,UAAL,CAAgB8J,cAAhB,EAAd;AACA,iBAAKtF,WAAL,CAAiBqF,QAAQE,MAAzB,EAAiCF,QAAQpG,QAAzC;AACA,iBAAKpD,YAAL,GAAoBwJ,QAAQE,MAA5B;AACA,iBAAKhI,YAAL,GAAoB8H,QAAQpG,QAA5B;AACH;AACD,YAAG,KAAKpD,YAAL,IAAqB,KAAKU,wBAA7B,EAAsD;AAClDiI,oBAAQ,KAAKgB,UAAL,EAAR;AACH,SAFD,MAGK,IAAG,KAAK3J,YAAL,IAAqB,KAAKW,mBAA7B,EAAiD;AAClDgI,oBAAQ,KAAKiB,QAAL,EAAR;AACH,SAFI,MAGA,IAAG,KAAK5J,YAAL,IAAqB,KAAKe,oBAA7B,EAAkD;AACnD4H,oBAAQ,KAAKkB,SAAL,EAAR;AACH,SAFI,MAGA,IAAG,KAAK7J,YAAL,IAAqB,KAAKY,oBAA1B,IACA,KAAKZ,YAAL,IAAqB,KAAKa,mBAD1B,IAEA,KAAKb,YAAL,IAAqB,KAAKc,mBAF7B,EAEiD;AAClD6H,oBAAQ,KAAKmB,SAAL,EAAR;AACH,SAJI,MAKA,IAAG,KAAK9J,YAAL,IAAqB,KAAKmB,mBAA1B,IACA,KAAKnB,YAAL,IAAqB,KAAKoB,mBAD1B,IAEA,KAAKpB,YAAL,IAAqB,KAAKiB,mBAF1B,IAGA,KAAKjB,YAAL,IAAqB,KAAKkB,oBAH7B,EAGkD;AACnDyH,oBAAQ,KAAKoB,QAAL,EAAR;AACH,SALI,MAMA,IAAG,KAAK/J,YAAL,IAAqB,KAAKwB,oBAA7B,EAAkD;AACnDmH,oBAAQ,KAAKM,SAAL,EAAR;AACH,SAFI,MAGA,IAAG,KAAKjJ,YAAL,IAAqB,KAAKqB,oBAA7B,EAAkD;AACnDsH,oBAAQ,KAAKqB,QAAL,CAAc,KAAK3I,oBAAnB,CAAR;AACH,SAFI,MAGA,IAAG,KAAKrB,YAAL,IAAqB,KAAKsB,oBAA7B,EAAkD;AACnDqH,oBAAQ,KAAKqB,QAAL,CAAc,KAAK1I,oBAAnB,CAAR;AACH,SAFI,MAGA,IAAG,KAAKtB,YAAL,IAAqB,KAAKuB,oBAA7B,EAAkD;AACnDoH,oBAAQ,KAAKqB,QAAL,CAAc,KAAKzI,oBAAnB,CAAR;AACH,SAFI,MAGA,IAAG,KAAKvB,YAAL,IAAqB,KAAKgB,qBAA7B,EAAmD;AACpD2H,oBAAQ,KAAKsB,UAAL,EAAR;AACH;AACD,eAAOtB,KAAP;AACH,KAnqCmC;;AAqqCpCuB,mBAAc,uBAASC,SAAT,EAAmB;AAC7B,YAAI,CAAC,CAAD,IAAM,KAAKpK,cAAL,CAAoBwD,OAApB,CAA4B4G,SAA5B,CAAV,EAAiD;AAC7C,mBAAO,KAAP;AACH;AACD,eAAO,IAAP;AACH,KA1qCmC;;AA4qCpC;AACA;AACAlB,eAAU,qBAA4B;AAAA,YAAnBpE,YAAmB,uEAAN,KAAM;;AAClC,YAAIxC,SAAS,EAAb;AACA,YAAGwC,gBAAc,KAAjB,EAAuB;AACnBxC,qBAAS,KAAKvC,YAAd;AACH,SAFD,MAEK;AACDuC,qBAAS,KAAKtC,cAAd;AACH;AACD,YAAIqK,UAAU,EAAd;;AAEA,YAAItF,gBAAgB,CAApB;AACAA,wBAAgB,KAAKhC,YAAL,CAAkB,KAAKpB,YAAL,CAAkB,CAAlB,CAAlB,CAAhB;;AAEA;AACA,YAAIqG,cAAc,EAAlB;AACA,aAAK,IAAIlG,IAAIQ,OAAOP,MAAP,GAAgB,CAA7B,EAAgCD,KAAK,CAArC,EAAwCA,GAAxC,EAA6C;AACzC,gBAAI,KAAKiB,YAAL,CAAkBT,OAAOR,CAAP,CAAlB,KAAgC,EAAhC,IACA,KAAKiB,YAAL,CAAkBT,OAAOR,CAAP,CAAlB,KAAgC,EADpC,EACwC;AACpCkG,4BAAY/F,IAAZ,CAAiBK,OAAOR,CAAP,CAAjB;AACH;AACJ;;AAED,YAAIkG,YAAYjG,MAAZ,IAAsB,CAA1B,EAA6B;AACzBsI,oBAAQ,CAAR,IAAarC,WAAb;AACH;;AAED,aAAI,IAAIlG,MAAIQ,OAAOP,MAAP,GAAgB,CAA5B,EAA+BD,OAAK,CAApC,EAAuCA,KAAvC,EAA2C;AACvC,gBAAIS,QAAQD,OAAOR,GAAP,CAAZ;AACA,gBAAI2E,SAAS,KAAK7B,YAAL,CAAkBtC,MAAlB,EAA0BC,KAA1B,CAAb;AACA,gBAAI6E,UAAU,KAAKC,kBAAL,CAAwBgD,OAAxB,EAAiC9H,KAAjC,CAAd;AACA,gBAAGkE,OAAO1E,MAAP,GAAgB,CAAhB,IAAqB,CAACqF,OAAzB,EAAiC;AAC7BiD,wBAAQA,QAAQtI,MAAhB,IAA0B0E,MAA1B;AACH,aAFD,MAGK,IAAGA,OAAO1E,MAAP,IAAiB,CAAjB,IAAsB,CAACqF,OAAvB,IAAkC,KAAKrE,YAAL,CAAkB0D,OAAO,CAAP,CAAlB,IAA+B1B,aAApE,EAAkF;AACnFsF,wBAAQA,QAAQtI,MAAhB,IAA0B0E,MAA1B;AACH;AACJ;;AAED,eAAO4D,OAAP;AACH,KAptCmC;;AAstCpCf,kBAAa,wBAA4B;AAAA,YAAnBxE,YAAmB,uEAAN,KAAM;;AACrC,YAAIxC,SAAS,EAAb;AACA,YAAGwC,gBAAc,KAAjB,EAAuB;AACnBxC,qBAAS,KAAKvC,YAAd;AACH,SAFD,MAEK;AACDuC,qBAAS,KAAKtC,cAAd;AACH;AACD,YAAIqK,UAAU,EAAd;;AAEA;AACA,YAAIrC,cAAc,EAAlB;AACA,aAAK,IAAIlG,IAAIQ,OAAOP,MAAP,GAAgB,CAA7B,EAAgCD,KAAK,CAArC,EAAwCA,GAAxC,EAA6C;AACzC,gBAAI,KAAKiB,YAAL,CAAkBT,OAAOR,CAAP,CAAlB,KAAgC,EAAhC,IACA,KAAKiB,YAAL,CAAkBT,OAAOR,CAAP,CAAlB,KAAgC,EADpC,EACwC;AACpCkG,4BAAY/F,IAAZ,CAAiBK,OAAOR,CAAP,CAAjB;AACH;AACJ;;AAED,YAAIkG,YAAYjG,MAAZ,IAAsB,CAA1B,EAA6B;AACzBsI,oBAAQ,CAAR,IAAarC,WAAb;AACH;;AAED,aAAI,IAAIlG,OAAIQ,OAAOP,MAAP,GAAgB,CAA5B,EAA+BD,QAAK,CAApC,EAAuCA,MAAvC,EAA2C;AACvC,gBAAIS,QAAQD,OAAOR,IAAP,CAAZ;AACA,gBAAI2E,SAAS,KAAK7B,YAAL,CAAkBtC,MAAlB,EAA0BC,KAA1B,CAAb;AACA,gBAAI6E,UAAU,KAAKC,kBAAL,CAAwBgD,OAAxB,EAAiC9H,KAAjC,CAAd;AACA,gBAAGkE,OAAO1E,MAAP,GAAgB,CAAhB,IAAqB,CAACqF,OAAzB,EAAiC;AAC7BiD,wBAAQA,QAAQtI,MAAhB,IAA0B0E,MAA1B;AACH,aAFD,MAGK,IAAGA,OAAO1E,MAAP,IAAiB,CAAjB,IAAsB,CAACqF,OAA1B,EAAkC;AACnCiD,wBAAQA,QAAQtI,MAAhB,IAA0B0E,MAA1B;AACH;AACJ;;AAED,eAAO4D,OAAP;AACH,KAzvCmC;;AA2vCpCC,iBAAY,qBAAS1B,KAAT,EAAe;AACvB,YAAItG,SAAS,KAAKvC,YAAlB;AACA,YAAIsK,UAAU,EAAd;AACA,YAAIE,SAAS3B,MAAM7G,MAAnB,CAHuB,CAGG;;AAE1B;AACA,YAAIiG,cAAc,EAAlB;AACA,aAAK,IAAIlG,IAAIQ,OAAOP,MAAP,GAAgB,CAA7B,EAAgCD,KAAK,CAArC,EAAwCA,GAAxC,EAA6C;AACzC,gBAAI,KAAKiB,YAAL,CAAkBT,OAAOR,CAAP,CAAlB,KAAgC,EAAhC,IACA,KAAKiB,YAAL,CAAkBT,OAAOR,CAAP,CAAlB,KAAgC,EADpC,EACwC;AACpCkG,4BAAY/F,IAAZ,CAAiBK,OAAOR,CAAP,CAAjB;AACH;AACJ;;AAED,YAAIkG,YAAYjG,MAAZ,IAAsB,CAA1B,EAA6B;AACzBsI,oBAAQ,CAAR,IAAarC,WAAb;AACH;;AAED,aAAI,IAAIlG,OAAE,CAAV,EAAaA,OAAIQ,OAAOP,MAAxB,EAAgCD,MAAhC,EAAoC;AAChC,gBAAIS,QAAQD,OAAOR,IAAP,CAAZ;AACA,gBAAI2E,SAAS,KAAK7B,YAAL,CAAkBtC,MAAlB,EAA0BC,KAA1B,CAAb;AACA,gBAAI6E,UAAU,KAAKC,kBAAL,CAAwBgD,OAAxB,EAAiC9H,KAAjC,CAAd;AACA,gBAAGkE,OAAO1E,MAAP,IAAiB,CAAjB,IAAsB,CAACqF,OAA1B,EAAkC;AAC9BiD,wBAAQA,QAAQtI,MAAhB,IAA0B0E,MAA1B;AACH;AACJ;AACD,YAAI+D,UAAU,EAAd;AACA,aAAI,IAAI1I,OAAIuI,QAAQtI,MAAR,GAAiB,CAA7B,EAAgCD,QAAK,CAArC,EAAwCA,MAAxC,EAA4C;AACxC,gBAAI4C,OAAO2F,QAAQvI,IAAR,CAAX;AACA;AACA,gBAAI4C,KAAK3C,MAAL,IAAe,CAAnB,EAAsB;AAClByI,0BAAU9F,IAAV;AACH,aAFD,MAEO;AACHkE,sBAAM3G,IAAN,CAAWyC,IAAX;AACH;AACJ;AACD,YAAI8F,QAAQzI,MAAR,GAAiB,CAArB,EAAwB;AACpB6G,kBAAM3G,IAAN,CAAWuI,OAAX;AACH;AACJ,KAlyCmC;;AAoyCpCC,iBAAY,qBAASnI,MAAT,EAAiB2D,SAAjB,EAA4ByE,GAA5B,EAAgC;AACxC,YAAIlE,OAAO,EAAX;AACAP,kBAAU0E,OAAV;AACA,aAAI,IAAI7I,IAAI,CAAZ,EAAeA,IAAI4I,GAAnB,EAAwB5I,GAAxB,EAA4B;AACxB0E,iBAAKvE,IAAL,CAAUgE,UAAUnE,CAAV,CAAV;AACH;;AAEDQ,eAAOL,IAAP,CAAYuE,IAAZ;AACH,KA5yCmC;;AA8yCpCqC,mBAAc,yBAA4B;AAAA,YAAnB/D,YAAmB,uEAAN,KAAM;;AACtC,YAAIxC,SAAS,EAAb;AACA,YAAGwC,gBAAc,KAAjB,EAAuB;AACnBxC,qBAAS,KAAKvC,YAAd;AACH,SAFD,MAEK;AACDuC,qBAAS,KAAKtC,cAAd;AACH;AACD,YAAI4I,QAAQ,EAAZ;AACA,YAAIgC,OAAO,EAAX;;AAEA,aAAI,IAAI9I,IAAIQ,OAAOP,MAAP,GAAgB,CAA5B,EAA+BD,KAAK,CAApC,EAAuCA,GAAvC,EAA2C;AACvC,gBAAIS,QAAQD,OAAOR,CAAP,CAAZ;AACA,gBAAIsI,YAAY,KAAKrH,YAAL,CAAkBR,KAAlB,CAAhB;AACA,gBAAIsI,YAAY,KAAKjG,YAAL,CAAkBtC,MAAlB,EAA0BC,KAA1B,CAAhB;AACA,gBAAI6E,UAAU,KAAKC,kBAAL,CAAwBuD,IAAxB,EAA8BrI,KAA9B,CAAd;AACA,gBAAGsI,UAAU9I,MAAV,IAAoB,CAAvB,EAAyB;AACrB,qBAAK0I,WAAL,CAAiB7B,KAAjB,EAAwBiC,SAAxB,EAAmC,CAAnC;AACH,aAFD,MAGK,IAAGA,UAAU9I,MAAV,GAAmB,CAAnB,IAAwB,CAACqF,OAA5B,EAAoC;AACrC,qBAAKqD,WAAL,CAAiBG,IAAjB,EAAuBC,SAAvB,EAAkC,CAAlC;AACH;AACJ;AACDjC,cAAM3G,IAAN,CAAWoH,KAAX,CAAiBT,KAAjB,EAAwBgC,IAAxB;AACA,eAAOhC,KAAP;AACH,KAt0CmC;;AAw0CpCgB,gBAAW,sBAA4B;AAAA,YAAnB9E,YAAmB,uEAAN,KAAM;;AACnC,YAAIxC,SAAS,EAAb;AACA,YAAGwC,gBAAc,KAAjB,EAAuB;AACnBxC,qBAAS,KAAKvC,YAAd;AACH,SAFD,MAEK;AACDuC,qBAAS,KAAKtC,cAAd;AACH;AACD,YAAI4I,QAAQ,EAAZ;AACA,YAAIgC,OAAO,EAAX;;AAEA,YAAI7F,gBAAgB,KAAKhC,YAAL,CAAkB,KAAKpB,YAAL,CAAkB,CAAlB,CAAlB,CAApB;;AAEA,aAAI,IAAIG,IAAIQ,OAAOP,MAAP,GAAgB,CAA5B,EAA+BD,KAAK,CAApC,EAAuCA,GAAvC,EAA2C;AACvC,gBAAIS,QAAQD,OAAOR,CAAP,CAAZ;AACA,gBAAIsI,YAAY,KAAKrH,YAAL,CAAkBR,KAAlB,CAAhB;AACA,gBAAG6H,aAAarF,aAAhB,EAA+B;AAC/B,gBAAI8F,YAAY,KAAKjG,YAAL,CAAkBtC,MAAlB,EAA0BC,KAA1B,CAAhB;AACA,gBAAI6E,UAAU,KAAKC,kBAAL,CAAwBuD,IAAxB,EAA8BrI,KAA9B,CAAd;AACA,gBAAGsI,UAAU9I,MAAV,IAAoB,CAAvB,EAAyB;AACrB,qBAAK0I,WAAL,CAAiB7B,KAAjB,EAAwBiC,SAAxB,EAAmC,CAAnC;AACH,aAFD,MAGK,IAAGA,UAAU9I,MAAV,GAAmB,CAAnB,IAAwB,CAACqF,OAA5B,EAAoC;AACrC,qBAAKqD,WAAL,CAAiBG,IAAjB,EAAuBC,SAAvB,EAAkC,CAAlC;AACH;AACJ;AACDjC,cAAM3G,IAAN,CAAWoH,KAAX,CAAiBT,KAAjB,EAAwBgC,IAAxB;AACA,aAAKN,WAAL,CAAiB1B,KAAjB;AACA,eAAOA,KAAP;AACH,KAp2CmC;;AAs2CpCE,iBAAY,uBAA4B;AAAA,YAAnBhE,YAAmB,uEAAN,KAAM;;AACpC,YAAIxC,SAAS,EAAb;AACA,YAAGwC,gBAAc,KAAjB,EAAuB;AACnBxC,qBAAS,KAAKvC,YAAd;AACH,SAFD,MAEK;AACDuC,qBAAS,KAAKtC,cAAd;AACH;AACD,YAAI8K,SAAS,EAAb;AACA,YAAIF,OAAO,EAAX;AACA,aAAI,IAAI9I,IAAIQ,OAAOP,MAAP,GAAgB,CAA5B,EAA+BD,KAAK,CAApC,EAAuCA,GAAvC,EAA2C;AACvC,gBAAIS,QAAQD,OAAOR,CAAP,CAAZ;AACA,gBAAIsI,YAAY,KAAKrH,YAAL,CAAkBR,KAAlB,CAAhB;AACA,gBAAI4C,QAAQ,KAAKP,YAAL,CAAkBtC,MAAlB,EAA0BC,KAA1B,CAAZ;AACA,gBAAI6E,UAAU,KAAKC,kBAAL,CAAwByD,MAAxB,EAAgCvI,KAAhC,CAAd;AACA,gBAAIwI,YAAY,KAAK1D,kBAAL,CAAwBuD,IAAxB,EAA8BrI,KAA9B,CAAhB;AACA,gBAAG4C,MAAMpD,MAAN,IAAgB,CAAhB,IAAqB,CAACqF,OAAzB,EAAiC;AAC7B,qBAAKqD,WAAL,CAAiBK,MAAjB,EAAyB3F,KAAzB,EAAgC,CAAhC;AACH,aAFD,MAGK,IAAGA,MAAMpD,MAAN,GAAe,CAAf,IAAoB,CAACgJ,SAAxB,EAAkC;AACnC,qBAAKN,WAAL,CAAiBG,IAAjB,EAAuBzF,KAAvB,EAA8B,CAA9B;AACH;AACJ;AACD2F,eAAO7I,IAAP,CAAYoH,KAAZ,CAAkByB,MAAlB,EAA0BF,IAA1B;AACA,eAAOE,MAAP;AACH,KA93CmC;;AAg4CpCjB,cAAS,oBAA4B;AAAA,YAAnB/E,YAAmB,uEAAN,KAAM;;AACjC,YAAIxC,SAAS,EAAb;AACA,YAAGwC,gBAAc,KAAjB,EAAuB;AACnBxC,qBAAS,KAAKvC,YAAd;AACH,SAFD,MAEK;AACDuC,qBAAS,KAAKtC,cAAd;AACH;AACD,YAAI8K,SAAS,EAAb;AACA,YAAIF,OAAO,EAAX;AACA,YAAGtI,OAAOP,MAAP,GAAgB,KAAKJ,YAAL,CAAkBI,MAArC,EAA6C,OAAO,EAAP;;AAE7C,YAAIgD,gBAAgB,KAAKhC,YAAL,CAAkB,KAAKpB,YAAL,CAAkB,CAAlB,CAAlB,CAApB;;AAEA,aAAI,IAAIG,IAAIQ,OAAOP,MAAP,GAAgB,CAA5B,EAA+BD,KAAK,CAApC,EAAuCA,GAAvC,EAA2C;AACvC,gBAAIS,QAAQD,OAAOR,CAAP,CAAZ;AACA,gBAAIsI,YAAY,KAAKrH,YAAL,CAAkBR,KAAlB,CAAhB;AACA,gBAAG6H,aAAarF,aAAhB,EAA+B;AAC/B,gBAAII,QAAQ,KAAKP,YAAL,CAAkBtC,MAAlB,EAA0BC,KAA1B,CAAZ;AACA,gBAAI6E,UAAU,KAAKC,kBAAL,CAAwByD,MAAxB,EAAgCvI,KAAhC,CAAd;AACA,gBAAIwI,YAAY,KAAK1D,kBAAL,CAAwBuD,IAAxB,EAA8BrI,KAA9B,CAAhB;AACA,gBAAG4C,MAAMpD,MAAN,IAAgB,CAAhB,IAAqB,CAACqF,OAAzB,EAAiC;AAC7B,qBAAKqD,WAAL,CAAiBK,MAAjB,EAAyB3F,KAAzB,EAAgC,CAAhC;AACH,aAFD,MAGK,IAAGA,MAAMpD,MAAN,GAAe,CAAf,IAAoB,CAACgJ,SAAxB,EAAkC;AACnC,qBAAKN,WAAL,CAAiBG,IAAjB,EAAuBzF,KAAvB,EAA8B,CAA9B;AACH;AACJ;AACD2F,eAAO7I,IAAP,CAAYoH,KAAZ,CAAkByB,MAAlB,EAA0BF,IAA1B;AACA,aAAKN,WAAL,CAAiBQ,MAAjB;AACA,eAAOA,MAAP;AACH,KA95CmC;;AAg6CpC/B,kBAAa,wBAA8B;AAAA,YAArBjE,YAAqB,uEAAN,KAAM;;AACvC,YAAIxC,SAAS,EAAb;AACA,YAAGwC,gBAAc,KAAjB,EAAuB;AACnBxC,qBAAS,KAAKvC,YAAd;AACH,SAFD,MAEK;AACDuC,qBAAS,KAAKtC,cAAd;AACH;AACD,aAAKkC,aAAL,CAAmBI,MAAnB;AACA,YAAIsG,QAAQ,EAAZ;AACA,aAAI,IAAI9G,IAAIQ,OAAOP,MAAP,GAAgB,CAA5B,EAA+BD,KAAK,CAApC,EAAuCA,GAAvC,EAA2C;AACvC,gBAAIuD,YAAY,CAAhB;AACA,gBAAI2F,SAAS,EAAb;AACAA,mBAAO/I,IAAP,CAAYK,OAAOR,CAAP,CAAZ;AACA,iBAAI,IAAIW,IAAIX,CAAZ,EAAeW,KAAK,CAApB,EAAuBA,GAAvB,EAA2B;AACvB,oBAAIF,QAAQD,OAAOG,CAAP,CAAZ;AACA,oBAAI6C,WAAW,KAAKvC,YAAL,CAAkBR,KAAlB,CAAf;AACA,oBAAG+C,YAAYD,SAAf,EAA0B;AAC1B,oBAAGC,YAAY,EAAf,EAAkB;AACd;AACH;AACD,oBAAGD,aAAa,CAAhB,EAAkB;AACd,wBAAGC,WAAWD,SAAX,IAAwB,CAA3B,EAA6B;AACzB;AACH;AACD2F,2BAAO/I,IAAP,CAAYM,KAAZ;AACH;AACD8C,4BAAYC,QAAZ;AACA,oBAAG0F,OAAOjJ,MAAP,IAAe,CAAlB,EAAoB;AAChB6G,0BAAMA,MAAM7G,MAAZ,IAAsBiJ,MAAtB;AACH;AACJ;AACJ;AACD,eAAOpC,KAAP;AACH,KAj8CmC;;AAm8CpCkB,eAAU,qBAA4B;AAAA,YAAnBhF,YAAmB,uEAAN,KAAM;;AAClC,YAAIxC,SAAS,EAAb;AACA,YAAGwC,gBAAc,KAAjB,EAAuB;AACnBxC,qBAAS,KAAKvC,YAAd;AACH,SAFD,MAEK;AACDuC,qBAAS,KAAKtC,cAAd;AACA,iBAAKgD,eAAL,CAAqBV,MAArB;AACH;AACD,YAAIsG,QAAQ,EAAZ;AACA;AACA,aAAK5F,eAAL,CAAqB,KAAKrB,YAA1B;AACA,YAAIoD,gBAAgB,KAAKhC,YAAL,CAAkB,KAAKpB,YAAL,CAAkB,CAAlB,CAAlB,CAApB;;AAEA,aAAI,IAAIG,IAAIQ,OAAOP,MAAP,GAAgB,CAA5B,EAA+BD,KAAK,CAApC,EAAuCA,GAAvC,EAA2C;AACvC,gBAAIuD,YAAY,CAAhB;AACA,gBAAI2F,SAAS,EAAb;AACAA,mBAAO/I,IAAP,CAAYK,OAAOR,CAAP,CAAZ;AACA,iBAAI,IAAIW,IAAIX,CAAZ,EAAeW,KAAK,CAApB,EAAuBA,GAAvB,EAA2B;AACvB,oBAAIF,QAAQD,OAAOG,CAAP,CAAZ;AACA,oBAAI6C,WAAW,KAAKvC,YAAL,CAAkBR,KAAlB,CAAf;;AAEA,oBAAG+C,YAAYD,SAAf,EAA0B;;AAE1B,oBAAGC,YAAYP,aAAf,EAA6B;AACzB;AACH;AACD,oBAAGO,YAAY,EAAf,EAAkB;AACd;AACH;AACD,oBAAGD,aAAa,CAAhB,EAAkB;AACd,wBAAGC,WAAWD,SAAX,IAAwB,CAA3B,EACI;AACJ2F,2BAAO/I,IAAP,CAAYM,KAAZ;AACH;;AAED,oBAAGyI,OAAOjJ,MAAP,IAAiB,KAAKJ,YAAL,CAAkBI,MAAtC,EAA6C;AACzC6G,0BAAMA,MAAM7G,MAAZ,IAAsBiJ,MAAtB;AACA;AACH;AACD3F,4BAAYC,QAAZ;AACH;AACJ;AACD,aAAKgF,WAAL,CAAiB1B,KAAjB;AACA,eAAOA,KAAP;AACH,KA/+CmC;AAg/CpCI,kBAAa,sBAAS/I,YAAT,EAAyC;AAAA,YAAnB6E,YAAmB,uEAAN,KAAM;;AAClD,YAAIxC,SAAS,EAAb;AACA,YAAGwC,gBAAc,KAAjB,EAAuB;AACnBxC,qBAAS,KAAKvC,YAAd;AACH,SAFD,MAEK;AACDuC,qBAAS,KAAKtC,cAAd;AACH;AACD,YAAIiL,WAAW,EAAf;AACA,YAAIL,OAAO,EAAX;;AAEA,aAAI,IAAI9I,IAAI,CAAZ,EAAeA,IAAIQ,OAAOP,MAA1B,EAAkCD,GAAlC,EAAsC;AAClC,gBAAIS,QAAQD,OAAOR,CAAP,CAAZ;AACA,gBAAIsI,YAAY,KAAKrH,YAAL,CAAkBR,KAAlB,CAAhB;AACA,gBAAI4E,UAAU,KAAKvC,YAAL,CAAkBtC,MAAlB,EAA0BC,KAA1B,CAAd;AACA,gBAAI6E,UAAU,KAAKC,kBAAL,CAAwB4D,QAAxB,EAAkC1I,KAAlC,CAAd;AACA,gBAAIwI,YAAY,KAAK1D,kBAAL,CAAwBuD,IAAxB,EAA8BrI,KAA9B,CAAhB;AACA,gBAAG4E,QAAQpF,MAAR,IAAkB,CAAlB,IAAuB,CAACqF,OAA3B,EAAmC;AAC/B,qBAAKqD,WAAL,CAAiBQ,QAAjB,EAA2B9D,OAA3B,EAAoC,CAApC;AACH,aAFD,MAGK,IAAGA,QAAQpF,MAAR,GAAiB,CAAjB,IAAsB,CAACgJ,SAA1B,EAAoC;AACrC,qBAAKN,WAAL,CAAiBG,IAAjB,EAAuBzD,OAAvB,EAAgC,CAAhC;AACH;AACJ;;AAED,aAAKlE,aAAL,CAAmBgI,QAAnB;AACA,aAAKhI,aAAL,CAAmB2H,IAAnB;;AAEAK,iBAAShJ,IAAT,CAAcoH,KAAd,CAAoB4B,QAApB,EAA8BL,IAA9B;AACA;AACA,YAAIhF,SAAO,KAAK/F,OAAL,CAAagG,uBAAb,CAAqC,QAArC,CAAX;AACA,YAAG5F,gBAAgB,KAAKY,oBAAxB,EAA6C;AACzC,iBAAKqK,YAAL,CAAkBD,QAAlB,EAA4B,CAA5B,EAA+B,KAA/B,EAAsC,IAAtC;AACH,SAFD,MAEM,IAAGhL,gBAAgB,KAAKa,mBAAxB,EAA4C;AAC9C,gBAAI8E,OAAOpC,OAAP,CAAe,CAAf,KAAqB,CAAzB,EAA2B;AACvB;AACA,qBAAK0H,YAAL,CAAkBD,QAAlB,EAA4B,CAA5B,EAA+B,KAA/B,EAAsC,IAAtC;AACH;AACJ,SALK,MAMD,IAAGhL,gBAAgB,KAAKc,mBAAxB,EAA4C;AAC7C,gBAAI6E,OAAOpC,OAAP,CAAe,CAAf,KAAqB,CAAzB,EAA2B;AACvB;AACA,qBAAK0H,YAAL,CAAkBD,QAAlB,EAA4B,CAA5B,EAA+B,IAA/B,EAAqC,IAArC;AACH;AACJ;AACD,eAAOA,QAAP;AACH,KA7hDmC;AA8hDpClB,eAAU,qBAA4B;AAAA,YAAnBjF,YAAmB,uEAAN,KAAM;;AAClC,YAAIxC,SAAS,EAAb;AACA,YAAGwC,gBAAc,KAAjB,EAAuB;AACnBxC,qBAAS,KAAKvC,YAAd;AACH,SAFD,MAEK;AACDuC,qBAAS,KAAKtC,cAAd;AACH;AACD,YAAIiL,WAAW,EAAf;AACA,YAAIL,OAAO,EAAX;AACA;;AAEA,YAAI7F,gBAAgB,CAApB;;AAEA,aAAI,IAAIjD,IAAI,CAAZ,EAAeA,IAAI,KAAKH,YAAL,CAAkBI,MAArC,EAA6CD,GAA7C,EAAiD;AAC7C,gBAAIS,QAAQ,KAAKZ,YAAL,CAAkBG,CAAlB,CAAZ;AACA,gBAAIqF,UAAU,KAAKvC,YAAL,CAAkB,KAAKjD,YAAvB,EAAqCY,KAArC,CAAd;AACA,gBAAG4E,QAAQpF,MAAR,IAAkB,CAArB,EAAuB;AACnBgD,gCAAgB,KAAKhC,YAAL,CAAkBoE,QAAQ,CAAR,CAAlB,CAAhB;AACA;AACH;AACJ;;AAED,aAAI,IAAIrF,OAAI,CAAZ,EAAeA,OAAIQ,OAAOP,MAA1B,EAAkCD,MAAlC,EAAsC;AAClC,gBAAIS,UAAQD,OAAOR,IAAP,CAAZ;AACA,gBAAIsI,YAAY,KAAKrH,YAAL,CAAkBR,OAAlB,CAAhB;AACA,gBAAG6H,aAAarF,aAAhB,EAA+B;AAC/B,gBAAIoC,YAAU,KAAKvC,YAAL,CAAkBtC,MAAlB,EAA0BC,OAA1B,CAAd;AACA,gBAAI6E,UAAU,KAAKC,kBAAL,CAAwB4D,QAAxB,EAAkC1I,OAAlC,CAAd;AACA,gBAAIwI,YAAY,KAAK1D,kBAAL,CAAwBuD,IAAxB,EAA8BrI,OAA9B,CAAhB;AACA,gBAAG4E,UAAQpF,MAAR,IAAkB,CAAlB,IAAuB,CAACqF,OAA3B,EAAmC;AAC/B,qBAAKqD,WAAL,CAAiBQ,QAAjB,EAA2B9D,SAA3B,EAAoC,CAApC;AACH,aAFD,MAGK,IAAGA,UAAQpF,MAAR,GAAiB,CAAjB,IAAsB,CAACgJ,SAA1B,EAAoC;AACrC,qBAAKN,WAAL,CAAiBG,IAAjB,EAAuBzD,SAAvB,EAAgC,CAAhC;AACH;AACJ;;AAED,aAAKlE,aAAL,CAAmBgI,QAAnB;AACA,aAAKhI,aAAL,CAAmB2H,IAAnB;;AAEAK,iBAAShJ,IAAT,CAAcoH,KAAd,CAAoB4B,QAApB,EAA8BL,IAA9B;AACA;AACA,YAAIhF,SAAO,KAAK/F,OAAL,CAAagG,uBAAb,CAAqC,QAArC,CAAX;AACA,YAAG,KAAK5F,YAAL,IAAqB,KAAKY,oBAA7B,EAAkD;AAC9C,iBAAKqK,YAAL,CAAkBD,QAAlB,EAA4B,CAA5B,EAA+B,KAA/B;AACH,SAFD,MAEM,IAAG,KAAKhL,YAAL,IAAqB,KAAKa,mBAA7B,EAAiD;AACnD,gBAAI8E,OAAOpC,OAAP,CAAe,CAAf,KAAqB,CAAzB,EAA2B;AACvB;AACA,qBAAK0H,YAAL,CAAkBD,QAAlB,EAA4B,CAA5B,EAA+B,KAA/B;AACH;AACJ,SALK,MAMD,IAAG,KAAKhL,YAAL,IAAqB,KAAKc,mBAA7B,EAAiD;AAClD,gBAAI6E,OAAOpC,OAAP,CAAe,CAAf,KAAqB,CAAzB,EAA2B;AACvB;AACA,qBAAK0H,YAAL,CAAkBD,QAAlB,EAA4B,CAA5B,EAA+B,IAA/B;AACH;AACJ;AACD,aAAKX,WAAL,CAAiBW,QAAjB;AACA,eAAOA,QAAP;AACH,KAzlDmC;;AA2lDpChC,iBAAY,qBAAShJ,YAAT,EAAyC;AAAA,YAAnB6E,YAAmB,uEAAN,KAAM;;AACjD,YAAIxC,SAAS,EAAb;AACA,YAAGwC,gBAAc,KAAjB,EAAuB;AACnBxC,qBAAS,KAAKvC,YAAd;AACH,SAFD,MAEK;AACDuC,qBAAS,KAAKtC,cAAd;AACH;AACD,YAAIqK,UAAU,EAAd;AACA,YAAIO,OAAO,EAAX;;AAEA,aAAI,IAAI9I,IAAI,CAAZ,EAAeA,IAAIQ,OAAOP,MAA1B,EAAkCD,GAAlC,EAAsC;AAClC,gBAAIS,QAAQD,OAAOR,CAAP,CAAZ;AACA,gBAAIsI,YAAY,KAAKrH,YAAL,CAAkBR,KAAlB,CAAhB;AACA,gBAAIkE,SAAS,KAAK7B,YAAL,CAAkBtC,MAAlB,EAA0BC,KAA1B,CAAb;AACA,gBAAI6E,UAAU,KAAKC,kBAAL,CAAwBgD,OAAxB,EAAiC9H,KAAjC,CAAd;AACA,gBAAIwI,YAAY,KAAK1D,kBAAL,CAAwBuD,IAAxB,EAA8BrI,KAA9B,CAAhB;AACA,gBAAGkE,OAAO1E,MAAP,IAAiB,CAAjB,IAAsB,CAACqF,OAA1B,EAAkC;AAC9B,qBAAKqD,WAAL,CAAiBJ,OAAjB,EAA0B5D,MAA1B,EAAkC,CAAlC;AACH,aAFD,MAGK,IAAGA,OAAO1E,MAAP,GAAgB,CAAhB,IAAqB,CAACgJ,SAAzB,EAAmC;AACpC,qBAAKN,WAAL,CAAiBG,IAAjB,EAAuBnE,MAAvB,EAA+B,CAA/B;AACH;AACJ;;AAED4D,gBAAQpI,IAAR,CAAaoH,KAAb,CAAmBgB,OAAnB,EAA4BO,IAA5B;AACA;AACA,YAAI9E,QAAM,KAAKjG,OAAL,CAAagG,uBAAb,CAAqC,OAArC,CAAV;AACA,YAAG5F,gBAAgB,KAAKmB,mBAAxB,EAA4C;AACxC,gBAAI0E,MAAMtC,OAAN,CAAc,CAAd,KAAoB,CAAxB,EAA0B;AACtB;AACA,qBAAK0H,YAAL,CAAkBb,OAAlB,EAA2B,CAA3B,EAA8B,KAA9B,EAAqCvF,YAArC;AACH;AACJ,SALD,MAMK,IAAG7E,gBAAgB,KAAKoB,mBAAxB,EAA4C;AAC7C,gBAAIyE,MAAMtC,OAAN,CAAc,CAAd,KAAoB,CAAxB,EAA0B;AACtB;AACA,qBAAK0H,YAAL,CAAkBb,OAAlB,EAA2B,CAA3B,EAA8B,IAA9B,EAAoCvF,YAApC;AACH;AACJ,SALI,MAKC,IAAG7E,gBAAgB,KAAKiB,mBAAxB,EAA4C;AAC9C,gBAAI4E,MAAMtC,OAAN,CAAc,CAAd,KAAoB,CAAxB,EAA0B;AACtB;AACA,qBAAK0H,YAAL,CAAkBb,OAAlB,EAA2B,CAA3B,EAA8B,KAA9B,EAAqCvF,YAArC;AACH;AACJ,SALK,MAKA,IAAG7E,gBAAgB,KAAKkB,oBAAxB,EAA6C;AAC/C,gBAAI2E,MAAMtC,OAAN,CAAc,CAAd,KAAoB,CAAxB,EAA0B;AACtB;AACA,qBAAK0H,YAAL,CAAkBb,OAAlB,EAA2B,CAA3B,EAA8B,IAA9B,EAAoCvF,YAApC;AACH;AACJ;AACD,eAAOuF,OAAP;AACH,KA7oDmC;;AA+oDpCL,cAAS,oBAA4B;AAAA,YAAnBlF,YAAmB,uEAAN,KAAM;;AACjC,YAAIxC,SAAS,EAAb;AACA,YAAGwC,gBAAc,KAAjB,EAAuB;AACnBxC,qBAAS,KAAKvC,YAAd;AACH,SAFD,MAEK;AACDuC,qBAAS,KAAKtC,cAAd;AACH;AACD,YAAIqK,UAAU,EAAd;AACA,YAAIO,OAAO,EAAX;AACA;;AAEA,YAAI7F,gBAAgB,CAApB;;AAEA,aAAI,IAAIjD,IAAI,CAAZ,EAAeA,IAAI,KAAKH,YAAL,CAAkBI,MAArC,EAA6CD,GAA7C,EAAiD;AAC7C,gBAAIS,QAAQ,KAAKZ,YAAL,CAAkBG,CAAlB,CAAZ;AACA,gBAAI2E,SAAS,KAAK7B,YAAL,CAAkB,KAAKjD,YAAvB,EAAqCY,KAArC,CAAb;AACA,gBAAGkE,OAAO1E,MAAP,IAAiB,CAApB,EAAsB;AAClBgD,gCAAgB,KAAKhC,YAAL,CAAkB0D,OAAO,CAAP,CAAlB,CAAhB;AACA;AACH;AACJ;;AAED,aAAI,IAAI3E,OAAI,CAAZ,EAAeA,OAAIQ,OAAOP,MAA1B,EAAkCD,MAAlC,EAAsC;AAClC,gBAAIS,UAAQD,OAAOR,IAAP,CAAZ;AACA,gBAAIsI,YAAY,KAAKrH,YAAL,CAAkBR,OAAlB,CAAhB;AACA,gBAAG6H,aAAarF,aAAhB,EAA+B;AAC/B,gBAAI0B,WAAS,KAAK7B,YAAL,CAAkBtC,MAAlB,EAA0BC,OAA1B,CAAb;AACA,gBAAI6E,UAAU,KAAKC,kBAAL,CAAwBgD,OAAxB,EAAiC9H,OAAjC,CAAd;AACA,gBAAIwI,YAAY,KAAK1D,kBAAL,CAAwBuD,IAAxB,EAA8BrI,OAA9B,CAAhB;AACA,gBAAGkE,SAAO1E,MAAP,IAAiB,CAAjB,IAAsB,CAACqF,OAA1B,EAAkC;AAC9B,qBAAKqD,WAAL,CAAiBJ,OAAjB,EAA0B5D,QAA1B,EAAkC,CAAlC;AACH,aAFD,MAGK,IAAGA,SAAO1E,MAAP,GAAgB,CAAhB,IAAqB,CAACgJ,SAAzB,EAAmC;AACpC,qBAAKN,WAAL,CAAiBG,IAAjB,EAAuBnE,QAAvB,EAA+B,CAA/B;AACH;AACJ;;AAED4D,gBAAQpI,IAAR,CAAaoH,KAAb,CAAmBgB,OAAnB,EAA4BO,IAA5B;AACA;AACA,YAAI9E,QAAM,KAAKjG,OAAL,CAAagG,uBAAb,CAAqC,OAArC,CAAV;AACA,YAAG,KAAK5F,YAAL,IAAqB,KAAKmB,mBAA7B,EAAiD;AAC7C,gBAAI0E,MAAMtC,OAAN,CAAc,CAAd,KAAoB,CAAxB,EAA0B;AACtB;AACA,qBAAK0H,YAAL,CAAkBb,OAAlB,EAA2B,CAA3B,EAA8B,KAA9B;AACH;AACJ,SALD,MAMK,IAAG,KAAKpK,YAAL,IAAqB,KAAKoB,mBAA7B,EAAiD;AAClD,gBAAIyE,MAAMtC,OAAN,CAAc,CAAd,KAAoB,CAAxB,EAA0B;AACtB;AACA,qBAAK0H,YAAL,CAAkBb,OAAlB,EAA2B,CAA3B,EAA8B,IAA9B;AACH;AACJ,SALI,MAKC,IAAG,KAAKpK,YAAL,IAAqB,KAAKiB,mBAA7B,EAAiD;AACnD,gBAAI4E,MAAMtC,OAAN,CAAc,CAAd,KAAoB,CAAxB,EAA0B;AACtB;AACA,qBAAK0H,YAAL,CAAkBb,OAAlB,EAA2B,CAA3B,EAA8B,KAA9B;AACH;AACJ,SALK,MAKA,IAAG,KAAKpK,YAAL,IAAqB,KAAKkB,oBAA7B,EAAkD;AACpD,gBAAI2E,MAAMtC,OAAN,CAAc,CAAd,KAAoB,CAAxB,EAA0B;AACtB;AACA,qBAAK0H,YAAL,CAAkBb,OAAlB,EAA2B,CAA3B,EAA8B,IAA9B;AACH;AACJ;;AAED,aAAKC,WAAL,CAAiBD,OAAjB;AACA,eAAOA,OAAP;AACH,KAhtDmC;;AAktDpC;AACA9C,kBAAa,sBAAS4D,KAAT,EAAe;AACxB,YAAI9F,YAAY,CAAhB;AACA,YAAImC,YAAY,EAAhB;AACA,aAAI,IAAI1F,IAAI,CAAZ,EAAeA,IAAIqJ,MAAMpJ,MAAzB,EAAiCD,GAAjC,EAAqC;AACjC,gBAAI4C,OAAOyG,MAAMrJ,CAAN,CAAX;AACA,gBAAIwD,WAAW,KAAKvC,YAAL,CAAkB2B,KAAK,CAAL,CAAlB,CAAf;;AAEA,gBAAGW,aAAa,CAAhB,EAAkB;AACd,oBAAIA,YAAU,CAAX,IAAiBC,QAApB,EAA6B;AACzB,wBAAGkC,UAAUzF,MAAV,IAAoB,CAAvB,EAAyB;AACrB;AACH;AACDyF,8BAAU/D,MAAV,CAAiB,CAAjB,EAAoB+D,UAAUzF,MAA9B;AACAyF,8BAAUA,UAAUzF,MAApB,IAA8B2C,IAA9B;AACH,iBAND,MAOI;AACA8C,8BAAUA,UAAUzF,MAApB,IAA8B2C,IAA9B;AACH;AACJ,aAXD,MAYI;AACA8C,0BAAUA,UAAUzF,MAApB,IAA8B2C,IAA9B;AACH;;AAEDW,wBAAYC,QAAZ;AACH;AACD,eAAOkC,SAAP;AACH,KA7uDmC;;AA+uDpC2B,iBAAY,qBAAS3D,GAAT,EAAgC;AAAA,YAAnBV,YAAmB,uEAAN,KAAM;;AACxC,YAAIxC,SAAS,EAAb;AACA,YAAGwC,gBAAc,KAAjB,EAAuB;AACnBxC,qBAAS,KAAKvC,YAAd;AACH,SAFD,MAEK;AACDuC,qBAAS,KAAKtC,cAAd;AACH;AACD;;AAEA;AACA,YAAI4F,SAAO,KAAK/F,OAAL,CAAagG,uBAAb,CAAqC,QAArC,CAAX;AACA,YAAID,OAAOpC,OAAP,CAAe,CAAf,IAAoB,CAApB,IAAyBgC,OAAO,KAAKjE,oBAAzC,EAA+D;AAC3D;AACA,mBAAO,EAAP;AACH;AACD,YAAIqE,OAAOpC,OAAP,CAAe,CAAf,IAAoB,CAApB,IAAyBgC,OAAO,KAAKhE,oBAAzC,EAA+D;AAC3D;AACA,mBAAO,EAAP;AACH;AACD,YAAIwE,WAAW,EAAf;;AAEA,aAAI,IAAIlE,IAAE,CAAV,EAAaA,IAAIQ,OAAOP,MAAxB,EAAgCD,GAAhC,EAAoC;AAChC,gBAAIS,QAAQD,OAAOR,CAAP,CAAZ;AACA,gBAAIqF,UAAU,KAAKvC,YAAL,CAAkBtC,MAAlB,EAA0BC,KAA1B,CAAd;AACA,gBAAI6E,UAAU,KAAKS,gBAAL,CAAsB7B,QAAtB,EAAgCzD,KAAhC,CAAd;AACA,gBAAG4E,QAAQpF,MAAR,IAAkB,CAAlB,IAAuB,CAACqF,OAAxB,IAAmC,KAAKrE,YAAL,CAAkBR,KAAlB,KAA4B,EAAlE,EAAqE;AACjE,qBAAK2D,WAAL,CAAiBF,QAAjB,EAA2BmB,OAA3B,EAAoC,CAApC;AACH;AACJ;;AAED;AACA,YAAGnB,SAASjE,MAAT,GAAkB,CAArB,EAAuB;AACnB;AACA;AACA;AACA,mBAAO,EAAP;AACH;;AAED,aAAKkB,aAAL,CAAmB+C,QAAnB;;AAEA;AACA,YAAIQ,OAAO,EAAX;AACA,YAAInB,YAAY,CAAhB;AACA,aAAI,IAAIvD,OAAI,CAAZ,EAAeA,OAAIkE,SAASjE,MAA5B,EAAoCD,MAApC,EAAwC;AACpC,gBAAI4C,OAAOsB,SAASlE,IAAT,CAAX;AACA,gBAAIwD,WAAW,KAAKvC,YAAL,CAAkB2B,KAAK,CAAL,CAAlB,CAAf;;AAEA,gBAAGW,aAAa,CAAhB,EAAkB;AACd,oBAAIA,YAAU,CAAX,IAAiBC,QAApB,EAA6B;AACzBkB,yBAAK/C,MAAL,CAAY,CAAZ,EAAe+C,KAAKzE,MAApB;AACAyE,yBAAKA,KAAKzE,MAAV,IAAoB2C,IAApB;AACH,iBAHD,MAII;AACA8B,yBAAKA,KAAKzE,MAAV,IAAoB2C,IAApB;AACH;AACJ,aARD,MASI;AACA8B,qBAAKA,KAAKzE,MAAV,IAAoB2C,IAApB;AACH;;AAEDW,wBAAYC,QAAZ;AACH;AACD;AACA,YAAIkC,YAAY,EAAhB;AACA,YAAGhB,KAAKzE,MAAR,EAAe;AACX,gBAAIqJ,KAAK,EAAT;AACA,iBAAI,IAAItJ,OAAI,CAAZ,EAAeA,OAAI0E,KAAKzE,MAAxB,EAAgCD,MAAhC,EAAoC;AAChC,oBAAI4C,QAAO8B,KAAK1E,IAAL,CAAX;AACA,qBAAI,IAAIW,IAAI,CAAZ,EAAeA,IAAIiC,MAAK3C,MAAxB,EAAgCU,GAAhC,EAAoC;AAChC2I,uBAAGnJ,IAAH,CAAQyC,MAAKjC,CAAL,CAAR;AACH;AACJ;;AAED+E,sBAAUA,UAAUzF,MAApB,IAA8BqJ,EAA9B;AACH;AACD,YAAG5D,UAAUzF,MAAb,EAAoB;AAChB,gBAAGyD,OAAO,KAAKjE,oBAAf,EAAoC;AAChC,oBAAI8J,YAAY7D,UAAU,CAAV,EAAazF,MAAb,GAAuByF,UAAU,CAAV,EAAazF,MAAb,GAAoB,CAArB,GAAwB,CAA9D;AACA,qBAAKmJ,YAAL,CAAkB1D,SAAlB,EAA6BA,UAAU,CAAV,EAAazF,MAAb,GAAoB,CAArB,GAAwB,CAApD,EAAsD,KAAtD,EAA4D+C,YAA5D;AACA,oBAAI,CAAC0C,UAAUzF,MAAf,EAAuB;AACnB,2BAAO,EAAP;AACH;AACD;AACA,oBAAIyF,UAAU,CAAV,EAAazF,MAAb,IAAuBsJ,SAAvB,IAAoC/I,UAAU,KAAKvC,YAAvD,EAAqE;AACjE,2BAAO,EAAP;AACH;AACJ,aAVD,MAWK,IAAGyF,OAAO,KAAKhE,oBAAf,EAAoC;AACrC,oBAAI8J,YAAY9D,UAAU,CAAV,EAAazF,MAAb,GAAuByF,UAAU,CAAV,EAAazF,MAAb,GAAoB,CAArB,GAAwB,CAA9D;AACA,qBAAKmJ,YAAL,CAAkB1D,SAAlB,EAA6BA,UAAU,CAAV,EAAazF,MAAb,GAAoB,CAArB,GAAwB,CAApD,EAAsD,IAAtD,EAA2D+C,YAA3D;AACA,oBAAI,CAAC0C,UAAUzF,MAAf,EAAuB;AACnB,2BAAO,EAAP;AACH;AACD;AACA,oBAAIyF,UAAU,CAAV,EAAazF,MAAb,IAAuBuJ,SAAvB,IAAoChJ,UAAU,KAAKvC,YAAvD,EAAqE;AACjE,2BAAO,EAAP;AACH;AACJ;AACJ;AACD,eAAOyH,SAAP;AACH,KAn1DmC;;AAq1DpCyC,cAAS,kBAASzE,GAAT,EAAgC;AAAA,YAAnBV,YAAmB,uEAAN,KAAM;;AACrC,YAAIxC,SAAS,EAAb;AACA,YAAGwC,gBAAc,KAAjB,EAAuB;AACnBxC,qBAAS,KAAKvC,YAAd;AACH,SAFD,MAEK;AACDuC,qBAAS,KAAKtC,cAAd;AACH;AACD;;AAEA;AACA,YAAI4F,SAAO,KAAK/F,OAAL,CAAagG,uBAAb,CAAqC,QAArC,CAAX;AACA,YAAID,OAAOpC,OAAP,CAAe,CAAf,IAAoB,CAApB,IAAyBgC,OAAO,KAAKjE,oBAAzC,EAA+D;AAC3D;AACA,mBAAO,EAAP;AACH;AACD,YAAIqE,OAAOpC,OAAP,CAAe,CAAf,IAAoB,CAApB,IAAyBgC,OAAO,KAAKhE,oBAAzC,EAA+D;AAC3D;AACA,mBAAO,EAAP;AACH;AACD,YAAIuD,gBAAgB,CAApB;AACA,YAAIgB,WAAW,EAAf;AACA,YAAIC,WAAW,EAAf;;AAEA,aAAI,IAAIlE,IAAI,CAAZ,EAAeA,IAAI,KAAKH,YAAL,CAAkBI,MAArC,EAA6CD,GAA7C,EAAiD;AAC7C,gBAAIS,QAAQ,KAAKZ,YAAL,CAAkBG,CAAlB,CAAZ;AACA,gBAAIqF,UAAU,KAAKvC,YAAL,CAAkB,KAAKjD,YAAvB,EAAqCY,KAArC,CAAd;AACA,gBAAI6E,UAAU,KAAKS,gBAAL,CAAsB9B,QAAtB,EAAgCxD,KAAhC,CAAd;AACA,gBAAG4E,QAAQpF,MAAR,IAAkB,CAAlB,IAAuB,CAACqF,OAA3B,EAAmC;AAC/B;AACA,qBAAKlB,WAAL,CAAiBH,QAAjB,EAA2BoB,OAA3B,EAAoC,CAApC;AACH;AACJ;;AAED,aAAKlE,aAAL,CAAmB8C,QAAnB;AACA,YAAIuB,aAAa,EAAjB;AACA,YAAGvB,SAAShE,MAAZ,EAAmB;AACfuF,yBAAa,KAAKC,YAAL,CAAkBxB,QAAlB,CAAb;AACA,gBAAIV,aAAa,KAAK1D,YAAL,CAAkBI,MAAlB,GAA2BuF,WAAWvF,MAAX,GAAoB,CAAhE;AACA,gBAAGuF,WAAWvF,MAAX,IAAmB,CAAnB,IAAwBsD,cAAW,CAAtC,EAAwC;AACpC;AACA,qBAAI,IAAIvD,OAAE,CAAV,EAAaA,OAAI,KAAKH,YAAL,CAAkBI,MAAnC,EAA2CD,MAA3C,EAA+C;AAC3C,wBAAIS,UAAQ,KAAKZ,YAAL,CAAkBG,IAAlB,CAAZ;AACA,wBAAI2E,SAAS,KAAK7B,YAAL,CAAkB,KAAKjD,YAAvB,EAAqCY,OAArC,CAAb;AACA,wBAAGkE,OAAO1E,MAAP,IAAiB,CAApB,EAAsB;AAClB,6BAAK,IAAIU,IAAI,CAAb,EAAgBA,IAAI6E,WAAWvF,MAA/B,EAAuCU,GAAvC,EAA4C;AACxC,gCAAIkC,WAAW,KAAKC,YAAL,CAAkB0C,WAAW7E,CAAX,CAAlB,EAAiCF,OAAjC,CAAf;AACA,gCAAIoC,SAAS5C,MAAT,IAAmB,CAAvB,EAA0B;AACtBuF,2CAAW7D,MAAX,CAAkBhB,CAAlB,EAAoB,CAApB;AACH;AACJ;AACD;AACH;AACJ;AACJ,aAfD,MAeM,IAAG6E,WAAWvF,MAAX,IAAmB,CAAnB,IAAwBsD,cAAW,CAAtC,EAAwC;AAC1C;AACA,oBAAIqC,cAAc,KAAlB;AACA,oBAAIC,aAAa,KAAjB;AACA,qBAAI,IAAI7F,OAAE,CAAV,EAAaA,OAAIQ,OAAOP,MAAxB,EAAgCD,MAAhC,EAAoC;AAChC,wBAAIS,UAAQD,OAAOR,IAAP,CAAZ;AACA,wBAAI2E,WAAS,KAAK7B,YAAL,CAAkBtC,MAAlB,EAA0BC,OAA1B,CAAb;AACA,wBAAGkE,SAAO1E,MAAP,IAAiB,CAApB,EAAsB;AAClB,6BAAK,IAAIU,KAAI,CAAb,EAAgBA,KAAI6E,WAAWvF,MAA/B,EAAuCU,IAAvC,EAA4C;AACxC,gCAAIkC,YAAW,KAAKC,YAAL,CAAkB0C,WAAW7E,EAAX,CAAlB,EAAiCF,OAAjC,CAAf;AACA,gCAAIoC,UAAS5C,MAAT,IAAmB,CAAvB,EAA0B;AACtBuF,2CAAW7D,MAAX,CAAkBhB,EAAlB,EAAoB,CAApB;AACH;AACJ;AACD;AACH;AACJ;AACJ;AACDsC,4BAAgB,KAAKhC,YAAL,CAAkBuE,WAAW,CAAX,EAAc,CAAd,CAAlB,CAAhB;AACH;;AAED,aAAI,IAAIxF,OAAE,CAAV,EAAaA,OAAIQ,OAAOP,MAAxB,EAAgCD,MAAhC,EAAoC;AAChC,gBAAIS,WAAQD,OAAOR,IAAP,CAAZ;AACA,gBAAIqF,YAAU,KAAKvC,YAAL,CAAkBtC,MAAlB,EAA0BC,QAA1B,CAAd;AACA,gBAAI6E,YAAU,KAAKS,gBAAL,CAAsB7B,QAAtB,EAAgCzD,QAAhC,CAAd;AACA,gBAAG4E,UAAQpF,MAAR,IAAkB,CAAlB,IAAuB,CAACqF,SAAxB,IAAmC,KAAKrE,YAAL,CAAkBR,QAAlB,KAA4B,EAAlE,EAAqE;AACjE;AACA,qBAAK2D,WAAL,CAAiBF,QAAjB,EAA2BmB,SAA3B,EAAoC,CAApC;AACH;AACJ;;AAED;AACA,YAAGnB,SAASjE,MAAT,GAAkB,CAArB,EAAuB;AACnB,gBAAI0E,WAAS,EAAb;AACA,iBAAK6D,WAAL,CAAiB7D,QAAjB;AACA,mBAAOA,QAAP;AACH;;AAED,aAAKxD,aAAL,CAAmB+C,QAAnB;;AAEA;AACA,YAAIQ,OAAO,EAAX;AACA,YAAInB,YAAY,CAAhB;AACA,aAAI,IAAIvD,OAAI,CAAZ,EAAeA,OAAIkE,SAASjE,MAA5B,EAAoCD,MAApC,EAAwC;AACpC,gBAAG,KAAKiB,YAAL,CAAkBiD,SAASlE,IAAT,EAAY,CAAZ,CAAlB,KAAqCiD,aAAxC,EAAuD;AACvD,gBAAGyB,KAAKzE,MAAL,IAAeuF,WAAWvF,MAA7B,EAAqC;;AAErC,gBAAI2C,OAAOsB,SAASlE,IAAT,CAAX;AACA,gBAAIwD,WAAW,KAAKvC,YAAL,CAAkB2B,KAAK,CAAL,CAAlB,CAAf;;AAEA,gBAAGW,aAAa,CAAhB,EAAkB;AACd,oBAAIA,YAAU,CAAX,IAAiBC,QAApB,EAA6B;AACzBkB,yBAAK/C,MAAL,CAAY,CAAZ,EAAe+C,KAAKzE,MAApB;AACAyE,yBAAKA,KAAKzE,MAAV,IAAoB2C,IAApB;AACH,iBAHD,MAII;AACA8B,yBAAKA,KAAKzE,MAAV,IAAoB2C,IAApB;AACH;AACJ,aARD,MASI;AACA8B,qBAAKA,KAAKzE,MAAV,IAAoB2C,IAApB;AACH;;AAEDW,wBAAYC,QAAZ;AACH;AACD;AACA,YAAGkB,KAAKzE,MAAL,GAAcuF,WAAWvF,MAA5B,EAAmC;AAC/B,gBAAI0E,WAAS,EAAb;AACA,iBAAK6D,WAAL,CAAiB7D,QAAjB;AACA,mBAAOA,QAAP;AACH;AACD;AACA,YAAIe,YAAY,EAAhB;AACA,YAAGhB,KAAKzE,MAAR,EAAe;AACX,gBAAIqJ,KAAK,EAAT;AACA,iBAAI,IAAItJ,OAAI,CAAZ,EAAeA,OAAI0E,KAAKzE,MAAxB,EAAgCD,MAAhC,EAAoC;AAChC,oBAAI4C,SAAO8B,KAAK1E,IAAL,CAAX;AACA,qBAAI,IAAIW,MAAI,CAAZ,EAAeA,MAAIiC,OAAK3C,MAAxB,EAAgCU,KAAhC,EAAoC;AAChC2I,uBAAGnJ,IAAH,CAAQyC,OAAKjC,GAAL,CAAR;AACH;AACJ;;AAED+E,sBAAUA,UAAUzF,MAApB,IAA8BqJ,EAA9B;AACH;AACD,YAAG5D,UAAUzF,MAAb,EAAoB;AAChB,gBAAGyD,OAAO,KAAKjE,oBAAf,EAAoC;AAChC,qBAAK2J,YAAL,CAAkB1D,SAAlB,EAA6B,KAAK7F,YAAL,CAAkBI,MAAlB,GAA2ByF,UAAU,CAAV,EAAazF,MAArE,EAA6E,KAA7E;AACH,aAFD,MAGK,IAAGyD,OAAO,KAAKhE,oBAAf,EAAoC;AACrC,qBAAK0J,YAAL,CAAkB1D,SAAlB,EAA6B,KAAK7F,YAAL,CAAkBI,MAAlB,GAA2ByF,UAAU,CAAV,EAAazF,MAArE,EAA6E,IAA7E;AACH;AACJ;;AAED,aAAKuI,WAAL,CAAiB9C,SAAjB;AACA,eAAOA,SAAP;AACH,KAz+DmC;AA0+DpC4B,mBAAc,yBAA4B;AAAA,YAAnBtE,YAAmB,uEAAN,KAAM;;AACtC,YAAIxC,SAAS,EAAb;AACA,YAAGwC,gBAAc,KAAjB,EAAuB;AACnBxC,qBAAS,KAAKvC,YAAd;AACH,SAFD,MAEK;AACDuC,qBAAS,KAAKtC,cAAd;AACH;AACD;;AAEA,YAAIgG,WAAW,EAAf;;AAGA,aAAI,IAAIlE,IAAIQ,OAAOP,MAAP,GAAgB,CAA5B,EAA+BD,KAAK,CAApC,EAAuCA,GAAvC,EAA2C;AACvC,gBAAIS,QAAQD,OAAOR,CAAP,CAAZ;AACA,gBAAIqD,QAAQ,KAAKP,YAAL,CAAkBtC,MAAlB,EAA0BC,KAA1B,CAAZ;AACA,gBAAI6E,UAAU,KAAKC,kBAAL,CAAwBrB,QAAxB,EAAkCzD,KAAlC,CAAd;AACA,gBAAG4C,MAAMpD,MAAN,IAAgB,CAAhB,IAAqB,CAACqF,OAAzB,EAAiC;AAC7B,qBAAKqD,WAAL,CAAiBzE,QAAjB,EAA2Bb,KAA3B,EAAkC,CAAlC;AACH;AACJ;;AAED,aAAKlC,aAAL,CAAmB+C,QAAnB;;AAEA,YAAIuF,QAAQ,EAAZ;AACA,aAAI,IAAIzJ,OAAI,CAAZ,EAAeA,OAAIkE,SAASjE,MAA5B,EAAoCD,MAApC,EAAwC;AACpC,gBAAIsJ,KAAK,EAAT;AACAA,eAAGnJ,IAAH,CAAQoH,KAAR,CAAc+B,EAAd,EAAkBpF,SAASlE,IAAT,CAAlB;AACA,gBAAIuD,YAAY,CAAhB;AACAA,wBAAY,KAAKtC,YAAL,CAAkBiD,SAASlE,IAAT,EAAY,CAAZ,CAAlB,CAAZ;AACA,iBAAI,IAAIW,IAAIX,OAAE,CAAd,EAAiBW,IAAIuD,SAASjE,MAA9B,EAAsCU,GAAtC,EAA0C;AACtC,oBAAIiC,OAAOsB,SAASvD,CAAT,CAAX;AACA,oBAAI6C,WAAW,KAAKvC,YAAL,CAAkB2B,KAAK,CAAL,CAAlB,CAAf;;AAEA,oBAAGY,YAAY,EAAf,EAAkB;AACd;AACH;;AAED,oBAAID,YAAU,CAAX,IAAiBC,QAApB,EAA6B;AACzB;AACH;AACD8F,mBAAGnJ,IAAH,CAAQoH,KAAR,CAAc+B,EAAd,EAAkB1G,IAAlB;AACAW,4BAAYC,QAAZ;AACA,oBAAG8F,GAAGrJ,MAAH,IAAa,CAAhB,EAAkB;AACdwJ,0BAAMA,MAAMxJ,MAAZ,IAAsBqJ,EAAtB;AACH;AACJ;AACJ;AACD,eAAOG,KAAP;AACH,KA1hEmC;;AA4hEpCrB,gBAAW,sBAA4B;AAAA,YAAnBpF,YAAmB,uEAAN,KAAM;;AACnC,YAAIxC,SAAS,EAAb;AACA,YAAGwC,gBAAc,KAAjB,EAAuB;AACnBxC,qBAAS,KAAKvC,YAAd;AACH,SAFD,MAEK;AACDuC,qBAAS,KAAKtC,cAAd;AACH;AACD;;AAEA,YAAI+E,gBAAgB,CAApB;AACA,YAAIgB,WAAW,EAAf;AACA,YAAIC,WAAW,EAAf;;AAEA,aAAKhD,eAAL,CAAqB,KAAKrB,YAA1B;AACAoD,wBAAgB,KAAKhC,YAAL,CAAkB,KAAKpB,YAAL,CAAkB,CAAlB,CAAlB,CAAhB;AACAoE,mBAAW,KAAKpE,YAAhB;;AAEA,aAAI,IAAIG,IAAIQ,OAAOP,MAAP,GAAgB,CAA5B,EAA+BD,KAAK,CAApC,EAAuCA,GAAvC,EAA2C;AACvC,gBAAIS,QAAQD,OAAOR,CAAP,CAAZ;AACA,gBAAIqD,QAAQ,KAAKP,YAAL,CAAkBtC,MAAlB,EAA0BC,KAA1B,CAAZ;AACA,gBAAI6E,UAAU,KAAKC,kBAAL,CAAwBrB,QAAxB,EAAkCzD,KAAlC,CAAd;AACA,gBAAG4C,MAAMpD,MAAN,IAAgB,CAAhB,IAAqB,CAACqF,OAAzB,EAAiC;AAC7B,qBAAKqD,WAAL,CAAiBzE,QAAjB,EAA2Bb,KAA3B,EAAkC,CAAlC;AACH;AACJ;;AAED,aAAKlC,aAAL,CAAmB+C,QAAnB;;AAEA,YAAIuF,QAAQ,EAAZ;AACA,aAAI,IAAIzJ,OAAI,CAAZ,EAAeA,OAAIkE,SAASjE,MAA5B,EAAoCD,MAApC,EAAwC;AACpC,gBAAIsJ,KAAK,EAAT;AACA,gBAAG,KAAKrI,YAAL,CAAkBiD,SAASlE,IAAT,EAAY,CAAZ,CAAlB,KAAqCiD,aAAxC,EAAuD;AACvDqG,eAAGnJ,IAAH,CAAQoH,KAAR,CAAc+B,EAAd,EAAkBpF,SAASlE,IAAT,CAAlB;AACA,gBAAIuD,YAAY,CAAhB;AACAA,wBAAY,KAAKtC,YAAL,CAAkBiD,SAASlE,IAAT,EAAY,CAAZ,CAAlB,CAAZ;AACA,iBAAI,IAAIW,IAAIX,OAAE,CAAd,EAAiBW,IAAIuD,SAASjE,MAA9B,EAAsCU,GAAtC,EAA0C;AACtC,oBAAIiC,OAAOsB,SAASvD,CAAT,CAAX;AACA,oBAAI6C,WAAW,KAAKvC,YAAL,CAAkB2B,KAAK,CAAL,CAAlB,CAAf;;AAEA,oBAAGY,YAAY,EAAf,EAAkB;AACd;AACH;;AAED,oBAAID,YAAU,CAAX,IAAiBC,QAApB,EAA6B;AACzB;AACH;;AAED8F,mBAAGnJ,IAAH,CAAQoH,KAAR,CAAc+B,EAAd,EAAkB1G,IAAlB;AACAW,4BAAYC,QAAZ;;AAEA,oBAAG8F,GAAGrJ,MAAH,IAAagE,SAAShE,MAAzB,EAAgC;AAC5BwJ,0BAAMA,MAAMxJ,MAAZ,IAAsBqJ,EAAtB;AACA;AACH;AACJ;AACJ;;AAED,aAAKd,WAAL,CAAiBiB,KAAjB;AACA,eAAOA,KAAP;AACH,KAvlEmC;;AAylEpCL,kBAAa,sBAASzG,IAAT,EAAee,GAAf,EAA0D;AAAA,YAAtCgG,SAAsC,uEAA1B,KAA0B;AAAA,YAAnB1G,YAAmB,uEAAN,KAAM;;AACnE,YAAIxC,SAAS,EAAb;AACA,YAAGwC,gBAAc,KAAjB,EAAuB;AACnBxC,qBAAS,KAAKvC,YAAd;AACH,SAFD,MAEK;AACDuC,qBAAS,KAAKtC,cAAd;AACH;AACD,YAAG,CAACyE,KAAK1C,MAAT,EAAiB;AACjB,YAAI0J,kBAAkB,CAAtB;AACA,aAAK,IAAI3J,IAAI,CAAb,EAAgBA,IAAI2C,KAAK1C,MAAzB,EAAiCD,GAAjC,EAAsC;AAClC2J,8BAAkBhH,KAAK3C,CAAL,EAAQC,MAAR,GAAiByD,GAAnC;AACH;;AAED,YAAIgB,OAAO,EAAX;AACA,YAAIoE,OAAO,EAAX;AACA,aAAI,IAAI9I,OAAIQ,OAAOP,MAAP,GAAe,CAA3B,EAA8BD,QAAK,CAAnC,EAAsCA,MAAtC,EAA0C;AACtC,gBAAIS,QAAQD,OAAOR,IAAP,CAAZ;AACA,gBAAI4J,QAAQ,KAAK9G,YAAL,CAAkBtC,MAAlB,EAA0BC,KAA1B,CAAZ;AACA,gBAAI6E,UAAU,KAAKC,kBAAL,CAAwBb,IAAxB,EAA8BjE,KAA9B,CAAd;AACA,gBAAIwI,YAAY,KAAK1D,kBAAL,CAAwBuD,IAAxB,EAA8BrI,KAA9B,CAAhB;AACA,gBAAIoJ,cAAc,KAAKtE,kBAAL,CAAwB5C,IAAxB,EAA8BlC,KAA9B,CAAlB;AACA,gBAAGmJ,MAAM3J,MAAN,IAAgB,CAAhB,IAAqB,CAACqF,OAAzB,EAAiC;AAAC;AAC9B,qBAAKqD,WAAL,CAAiBjE,IAAjB,EAAuBkF,KAAvB,EAA8B,CAA9B;AACH,aAFD,MAGK,IAAGA,MAAM3J,MAAN,IAAgB,CAAhB,IAAqB,CAACgJ,SAAzB,EAAmC;AAAC;AACrC,qBAAKN,WAAL,CAAiBG,IAAjB,EAAuBc,KAAvB,EAA8B,CAA9B;AACH;AACJ;;AAED;AACA;AACA,YAAIE,WAAW,EAAf;AACAA,mBAAWnH,IAAX;AACA;AACA,aAAI,IAAI3C,OAAI,CAAZ,EAAeA,OAAI8J,SAAS7J,MAA5B,EAAoCD,MAApC,EAAwC;AACpC,gBAAI4C,OAAOkH,SAAS9J,IAAT,CAAX;AACA,gBAAI4I,MAAMhG,KAAK3C,MAAf;AACA,gBAAI,CAACyJ,SAAL,EAAgB;AACZ,qBAAI,IAAI/I,IAAI,CAAZ,EAAeA,IAAI+D,KAAKzE,MAAxB,EAAgCU,GAAhC,EAAoC;AAChC,wBAAGgC,KAAK3C,IAAL,EAAQC,MAAR,GAAiB2I,GAAjB,IAAwBlF,GAA3B,EAA+B;AAC3B;AACH;AACD,wBAAI4F,KAAK5E,KAAK/D,CAAL,CAAT;AACA,yBAAI,IAAIoJ,IAAI,CAAZ,EAAeA,IAAIT,GAAGrJ,MAAtB,EAA8B8J,GAA9B,EAAkC;AAC9B,4BAAGpH,KAAK3C,IAAL,EAAQC,MAAR,GAAiB2I,GAAjB,IAAwBlF,GAA3B,EAA+B;AAC3B;AACH;AACD,4BAAGd,KAAKlB,OAAL,CAAa4H,GAAGS,CAAH,CAAb,KAAuB,CAAC,CAA3B,EAA6B;AACzB;AACApH,iCAAK3C,IAAL,EAAQG,IAAR,CAAamJ,GAAGS,CAAH,CAAb;AACH;AACJ;AACJ;AACJ,aAhBD,MAiBK,IAAIL,SAAJ,EAAe;AAChB;AACA,qBAAI,IAAI/I,MAAI,CAAZ,EAAeA,MAAImI,KAAK7I,MAAxB,EAAgCU,KAAhC,EAAoC;AAChC,wBAAGgC,KAAK3C,IAAL,EAAQC,MAAR,GAAiB2I,GAAjB,IAAwBlF,GAA3B,EAA+B;AAC3B;AACH;AACD,wBAAI4F,MAAKR,KAAKnI,GAAL,CAAT;AACA,yBAAI,IAAIoJ,KAAI,CAAZ,EAAeA,KAAIT,IAAGrJ,MAAtB,EAA8B8J,IAA9B,EAAkC;AAC9B,4BAAGpH,KAAK3C,IAAL,EAAQC,MAAR,GAAiB2I,GAAjB,IAAwBlF,GAA3B,EAA+B;AAC3B;AACH;AACD,4BAAGd,KAAKlB,OAAL,CAAa4H,IAAGS,EAAH,CAAb,KAAuB,CAAC,CAA3B,EAA6B;AACzB;AACApH,iCAAK3C,IAAL,EAAQG,IAAR,CAAamJ,IAAGS,EAAH,CAAb;AACH;AACJ;AACJ;AACJ;AACD;AACA,gBAAIL,aAAaZ,KAAK7I,MAAL,IAAe,CAAhC,EAAkC;AAC9B0C,qBAAKhB,MAAL,CAAY,CAAZ,EAAcgB,KAAK1C,MAAnB;AACA;AACH;AACD;AACA,gBAAIsE,SAAS,CAAb;AACA,iBAAK,IAAIvE,OAAI,CAAb,EAAgBA,OAAI2C,KAAK1C,MAAzB,EAAiCD,MAAjC,EAAsC;AAClC,oBAAI,QAAO2C,KAAK3C,IAAL,CAAP,KAAmB,QAAvB,EAAiC;AAC7B,yBAAK,IAAIW,MAAI,CAAb,EAAgBA,MAAIgC,KAAK3C,IAAL,EAAQC,MAA5B,EAAoCU,KAApC,EAAyC;AACrC,4BAAI,KAAKM,YAAL,CAAkB0B,KAAK3C,IAAL,EAAQW,GAAR,CAAlB,KAAiC,KAAKlC,mBAAtC,IACA,KAAKwC,YAAL,CAAkB0B,KAAK3C,IAAL,EAAQW,GAAR,CAAlB,KAAiC,KAAKjC,iBAD1C,EAC6D;AACzD6F;AACH;AACJ;AACJ,iBAPD,MAOK;AACD,wBAAI,KAAKtD,YAAL,CAAkB0B,KAAK3C,IAAL,CAAlB,KAA8B,KAAKvB,mBAAnC,IACA,KAAKwC,YAAL,CAAkB0B,KAAK3C,IAAL,CAAlB,KAA8B,KAAKtB,iBADvC,EAC0D;AACtD6F;AACH;AACJ;AAEJ;AACD,gBAAIA,UAAU,CAAd,EAAiB;AACb5B,qBAAKhB,MAAL,CAAY,CAAZ,EAAcgB,KAAK1C,MAAnB;AACA;AACH;AACJ;AACD;AACA,YAAI+J,iBAAiB,CAArB;AACA,aAAK,IAAIhK,OAAI,CAAb,EAAgBA,OAAI2C,KAAK1C,MAAzB,EAAiCD,MAAjC,EAAsC;AAClCgK,6BAAiBrH,KAAK3C,IAAL,EAAQC,MAAzB;AACH;AACD,YAAI+J,iBAAiBL,eAArB,EAAsC;AAClC,gBAAI,CAACD,SAAL,EAAgB;AACZ,qBAAK,IAAI1J,OAAI,CAAb,EAAgBA,OAAI2C,KAAK1C,MAAzB,EAAiCD,MAAjC,EAAsC;AAClC,wBAAI2C,KAAK3C,IAAL,EAAQC,MAAR,IAAkB0J,eAAtB,EAAuC;AACvC,yBAAK,IAAIhJ,MAAI,CAAb,EAAgBA,MAAIH,OAAOP,MAA3B,EAAmCU,KAAnC,EAAwC;AACpC,4BAAIgC,KAAK3C,IAAL,EAAQ0B,OAAR,CAAgBlB,OAAOG,GAAP,CAAhB,KAA8B,CAAC,CAAnC,EAAsC;AAClC;AACAgC,iCAAK3C,IAAL,EAAQG,IAAR,CAAaK,OAAOG,GAAP,CAAb;AACA,gCAAIgC,KAAK3C,IAAL,EAAQC,MAAR,IAAkB0J,eAAtB,EAAuC;AACnC;AACH;AACJ;AACJ;AACJ;AACJ,aAbD,MAaK;AACD;AACAhH,qBAAKhB,MAAL,CAAY,CAAZ,EAAcgB,KAAK1C,MAAnB;AACH;AACJ;AACJ,KArtEmC;;AAutExC;AACI8F,sBAAiB,0BAASpD,IAAT,EAAesH,OAAf,EAAwB;AACrC,YAAItH,KAAK1C,MAAL,IAAe,CAAnB,EAAsB,OAAO,KAAP;;AAEtB,YAAIqF,UAAU,KAAd;AACA,aAAK,IAAItF,IAAI,CAAb,EAAgBA,IAAI2C,KAAK1C,MAAzB,EAAiCD,GAAjC,EAAsC;AAClC,gBAAI4C,OAAOD,KAAK3C,CAAL,CAAX;AACA,gBAAIyB,MAAMmB,KAAKlB,OAAL,CAAauI,OAAb,CAAV;;AAEA,gBAAIxI,OAAO,CAAX,EAAa;AACT,uBAAO,IAAP;AACH;AACJ;AACD,eAAO6D,OAAP;AACH,KAruEmC;;AAuuEpCC,wBAAmB,4BAAS5C,IAAT,EAAesH,OAAf,EAAuB;AACtC,YAAItH,KAAK1C,MAAL,IAAe,CAAnB,EAAsB,OAAO,KAAP;;AAEtB,YAAIqF,UAAU,KAAd;AACA,aAAK,IAAItF,IAAI,CAAb,EAAgBA,IAAI2C,KAAK1C,MAAzB,EAAiCD,GAAjC,EAAsC;AAClC,gBAAI4C,OAAOD,KAAK3C,CAAL,CAAX;AACA,gBAAIkK,WAAW,KAAKjJ,YAAL,CAAkBgJ,OAAlB,CAAf;AACA,iBAAK,IAAItJ,IAAI,CAAb,EAAgBA,IAAIiC,KAAK3C,MAAzB,EAAiCU,GAAjC,EAAsC;AAClC,oBAAI2H,YAAY,KAAKrH,YAAL,CAAkB2B,KAAKjC,CAAL,CAAlB,CAAhB;AACA,oBAAG2H,aAAa4B,QAAhB,EAAyB;AACrB,2BAAO,IAAP;AACH;AACJ;AACJ;AACD,eAAO5E,OAAP;AACH,KAtvEmC;;AAwvEpC;AACAd,qBAAgB,yBAAS2F,OAAT,EAAiB;AAC7B,YAAIA,QAAQlK,MAAR,GAAiB,CAArB,EAAwB,OAAO,KAAP;AACxB,YAAIkK,QAAQlK,MAAR,GAAe,CAAf,IAAoB,CAAxB,EAA2B,OAAO,KAAP;;AAE3B,YAAImK,WAAWD,QAAQlK,MAAR,GAAe,CAA9B;AACA,aAAK,IAAIU,IAAI,CAAb,EAAgBA,IAAIyJ,QAApB,EAA8BzJ,GAA9B,EAAmC;AAC/B,iBAAI,IAAIX,IAAI,CAAZ,EAAeA,IAAImK,QAAQlK,MAA3B,EAAmCD,GAAnC,EAAuC;AACnC,oBAAIS,QAAQ0J,QAAQnK,CAAR,CAAZ;AACA,oBAAIqD,QAAQ,KAAKP,YAAL,CAAkBqH,OAAlB,EAA2B1J,KAA3B,CAAZ;AACA,oBAAG4C,MAAMpD,MAAN,IAAgB,CAAnB,EAAqB;AACjB,wBAAI2B,OAAOuI,QAAQzI,OAAR,CAAgB2B,MAAM,CAAN,CAAhB,CAAX;AACA8G,4BAAQxI,MAAR,CAAeC,IAAf,EAAqB,CAArB;AACA,wBAAIyI,OAAOF,QAAQzI,OAAR,CAAgB2B,MAAM,CAAN,CAAhB,CAAX;AACA8G,4BAAQxI,MAAR,CAAe0I,IAAf,EAAqB,CAArB;AACA;AACH;AACJ;AACJ;AACD,YAAIF,QAAQlK,MAAR,IAAkB,CAAtB,EACI,OAAO,IAAP,CADJ,KAGI,OAAO,KAAP;AACP,KA/wEmC;;AAixEpC;AACAqE,mBAAc,uBAAS9D,MAAT,EAAiB8J,QAAjB,EAA2B;AACrC,YAAIR,WAAW,EAAf;AACA,aAAK,IAAI9J,IAAI,CAAb,EAAgBA,IAAIsK,SAASrK,MAA7B,EAAqCD,GAArC,EAA0C;AACtC8J,qBAAS3J,IAAT,CAAcoH,KAAd,CAAoBuC,QAApB,EAA8BQ,SAAStK,CAAT,CAA9B;AACH;AACD,YAAI2F,aAAa,EAAjB;AACA,aAAK,IAAI3F,OAAI,CAAb,EAAgBA,OAAIQ,OAAOP,MAA3B,EAAmCD,MAAnC,EAAwC;AACpC,gBAAIS,QAAQD,OAAOR,IAAP,CAAZ;AACA,gBAAIuK,QAAQT,SAASpI,OAAT,CAAiBjB,KAAjB,CAAZ;AACA,gBAAG8J,SAAS,CAAC,CAAb,EAAe;AACX5E,2BAAWxF,IAAX,CAAgBM,KAAhB;AACH;AACJ;AACD,eAAOkF,UAAP;AACH,KAhyEmC;;AAkyEpC;AACA7C,kBAAa,sBAAStC,MAAT,EAAiByJ,OAAjB,EAA0B;AACnC,YAAIO,gBAAgB,EAApB;AACA,YAAIC,eAAe,KAAKxJ,YAAL,CAAkBgJ,OAAlB,CAAnB;AACA,aAAK,IAAIjK,IAAI,CAAb,EAAgBA,IAAIQ,OAAOP,MAA3B,EAAmCD,GAAnC,EAAwC;AACpC,gBAAIS,QAAQD,OAAOR,CAAP,CAAZ;AACA,gBAAI0K,aAAa,KAAKzJ,YAAL,CAAkBR,KAAlB,CAAjB;;AAEA,gBAAIgK,gBAAgBC,UAApB,EAA+B;AAC3BF,8BAAcA,cAAcvK,MAA5B,IAAsCQ,KAAtC;AACH;AACJ;AACD,eAAO+J,aAAP;AACH,KA/yEmC;AAgzEpC;AACAG,kBAAa,sBAASnK,MAAT,EAAiByJ,OAAjB,EAA0B;AACnC,YAAIW,gBAAgB,EAApB;AACA,aAAK,IAAI5K,IAAI,CAAb,EAAgBA,IAAIQ,OAAOP,MAA3B,EAAmCD,GAAnC,EAAwC;AACpC,gBAAIS,QAAQD,OAAOR,CAAP,CAAZ;AACA,gBAAI6K,aAAa,KAAKC,YAAL,CAAkBrK,KAAlB,CAAjB;AACA,gBAAIsK,eAAe,KAAKD,YAAL,CAAkBb,OAAlB,CAAnB;;AAEA,gBAAIY,cAAcE,YAAlB,EAA+B;AAC3BH,8BAAcA,cAAc3K,MAA5B,IAAsCQ,KAAtC;AACH;AACJ;AACD,eAAOmK,aAAP;AACH,KA7zEmC;;AA+zEpC;AACA3J,kBAAa,sBAASR,KAAT,EAAgB;AACzB,YAAIuK,YAAY,CAAhB;AACA,YAAGvK,QAAQ,GAAX,EAAe;AACXuK,wBAAYvK,QAAQ,GAApB;AACH,SAFD,MAGI;AACAuK,wBAAYvK,KAAZ;AACH;AACD;AACA,YAAIuK,aAAa,EAAjB,EACI,OAAO,KAAKvM,mBAAZ;AACJ,YAAIuM,aAAa,EAAjB,EACI,OAAO,KAAKtM,iBAAZ;AACJ,eAAOsM,YAAU,KAAKxM,gBAAtB;AACH,KA90EmC;;AAg1EpC;AACAsM,kBAAa,sBAASrK,KAAT,EAAgB;AACzB,YAAIuK,YAAY,CAAhB;AACA,YAAGvK,QAAQ,GAAX,EAAe;AACXuK,wBAAYvK,QAAQ,GAApB;AACH,SAFD,MAGI;AACAuK,wBAAYvK,KAAZ;AACH;AACD,eAAOuK,YAAU,KAAKzM,gBAAtB;AACH,KA11EmC;;AA41EpC0M,oBAAe,wBAASC,MAAT,EAAgBC,MAAhB,EAAuB;AAClC,YAAIC,OAAO,KAAX;AACA,aAAI,IAAIpL,IAAI,CAAZ,EAAeA,IAAIkL,OAAOjL,MAA1B,EAAkCD,GAAlC,EAAsC;AAClC,gBAAIS,QAAQyK,OAAOlL,CAAP,CAAZ;AACA,gBAAGmL,OAAOzJ,OAAP,CAAejB,KAAf,KAAyB,CAAC,CAA7B,EAA+B;AAC3B2K,uBAAO,IAAP;AACA;AACH;AACJ;;AAED,eAAOA,IAAP;AACH;AAv2EmC,CAArB,CAAnB;;AA02EA,IAAIC,iBAAiB,IAArB;;AAEA;;;AAGAC,QAAQC,QAAR,GAAmB,YAAU;AACzB,QAAG,CAACF,cAAJ,EAAmB;AACfA,yBAAiB,IAAIhO,YAAJ,EAAjB;AACH;AACD,WAAOgO,cAAP;AAEH,CAND","file":"LogicDDZGame.js","sourceRoot":"../../../../../../../assets/script/game/DDZ/room","sourcesContent":["var app = require(\"ddz_app\");\r\n\r\n\r\nvar LogicDDZGame = app.BaseClass.extend({\r\n    Init:function(){\r\n        this.JS_Name = \"LogicDDZGame\";\r\n\r\n        this.ComTool = app[app.subGameName + \"_ComTool\"]();\r\n        this.WeChatManager = app[app.subGameName + \"_WeChatManager\"]();\r\n        this.PokerCard = app[app.subGameName + \"_PokerCard\"]();\r\n        this.DDZRoomSet = app.DDZRoomSet();\r\n        this.DDZRoom = app.DDZRoom();\r\n        this.DDZDefine = app.DDZDefine();\r\n        \r\n        //手牌\r\n        this.handCardList = [];\r\n        //选中的牌\r\n        this.selectCardList = [];\r\n        //上一个玩家出牌的牌型\r\n        this.lastCardType = 0;\r\n        //上一个玩家出牌的牌值\r\n        this.latCardList = [];\r\n\r\n        this.Log(\"Init\");\r\n\r\n        this.pokerType = [\r\n            0x02,0x03,0x04,0x05,0x06,0x07,0x08,0x09,0x0A,0x0B,0x0C,0x0D,0x0E,   //方块 2-A\r\n            0x12,0x13,0x14,0x15,0x16,0x17,0x18,0x19,0x1A,0x1B,0x1C,0x1D,0x1E,   //梅花 2-A\r\n            0x22,0x23,0x24,0x25,0x26,0x27,0x28,0x29,0x2A,0x2B,0x2C,0x2D,0x2E,   //红桃 2-A\r\n            0x32,0x33,0x34,0x35,0x36,0x37,0x38,0x39,0x3A,0x3B,0x3C,0x3D,0x3E,   ];//黑桃 2-A\r\n\r\n        this.LOGIC_MASK_COLOR = 0xF0;\r\n        this.LOGIC_MASK_VALUE = 0x0F;\r\n        this.LOGIC_MASK_XIAOWANG = 16;\r\n        this.LOGIC_MASK_DAWANG = 17;\r\n\r\n        //打牌类型\r\n        this.DDZ_CARD_TYPE_NOMARL = 0;            //默认状态\r\n        this.DDZ_CARD_TYPE_BUCHU = 1;             //不出\r\n        this.DDZ_CARD_TYPE_SINGLECARD = 2;      //单牌\r\n        this.DDZ_CARD_TYPE_DUIZI = 3;          //对子\r\n        this.DDZ_CARD_TYPE_3BUDAI = 4;              //3不带\r\n        this.DDZ_CARD_TYPE_3DAI1 = 5;           //3带1\r\n        this.DDZ_CARD_TYPE_3DAI2 = 6;           //3带2  三张同点牌+一对牌\r\n        this.DDZ_CARD_TYPE_SHUNZI = 7;              //顺子\r\n        this.DDZ_CARD_TYPE_LIANDUI = 8;             //联队\r\n        this.DDZ_CARD_TYPE_4DAI1 = 9;          //4带1 \r\n        this.DDZ_CARD_TYPE_4DAI21 = 10;             //4带1对 \r\n        this.DDZ_CARD_TYPE_4DAI2 = 11;                  //4带2 两个单张\r\n        this.DDZ_CARD_TYPE_4DAI4 = 12;              //4带2 两对\r\n        this.DDZ_CARD_TYPE_FEIJI0 = 13;             //飞机 不带\r\n        this.DDZ_CARD_TYPE_FEIJI1 = 14;             //飞机 三顺带单\r\n        this.DDZ_CARD_TYPE_FEIJI2 = 15;             //飞机 三顺带对\r\n        this.DDZ_CARD_TYPE_ZHADAN = 16;             //炸弹\r\n    },\r\n\r\n    InitHandCard:function(){\r\n        this.handCardList = [];\r\n        this.selectCardList = [];\r\n        this.lastCardType = this.DDZ_CARD_TYPE_NOMARL;\r\n        this.lastCardList = [];\r\n\r\n        let handCard = this.DDZRoomSet.GetHandCard();\r\n        for(let i = 0; i < handCard.length; i++){\r\n            let card = handCard[i];\r\n            this.handCardList.push(card);\r\n        }\r\n\r\n        this.SortCardByMax(this.handCardList);\r\n        this.TransformValueToC(this.handCardList);\r\n    },\r\n\r\n    //取消选牌\r\n    ClearSelectCard:function(){\r\n        this.InitHandCard();\r\n        app[app.subGameName + \"Client\"].OnEvent(\"HandCard\");\r\n    },\r\n\r\n\r\n    //如果服务端发过来的牌值有重复，转换成唯一\r\n    TransformValueToC:function(pokers){\r\n        for(let i = 0; i < pokers.length; i++){\r\n            let poker = pokers[i];\r\n            let count = 0;\r\n            for(let j = i; j < pokers.length; j++){\r\n                if(poker == pokers[j]){\r\n                    count++;\r\n                }\r\n                if(count >= 2){\r\n                    pokers[j] = pokers[j]+500;\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n    },\r\n\r\n    //还原客户端转过的牌值\r\n    TransformValueToS:function(pokers){\r\n        for(let i = 0; i < pokers.length; i++){\r\n            if(pokers[i] > 500){\r\n                pokers[i] = pokers[i] - 500;\r\n            }\r\n        }\r\n    },\r\n\r\n    SortCardByMax:function(pokers){\r\n        let self = this;\r\n        pokers.sort(function(a, b){\r\n            //return (b&0x0F) - (a&0x0F);\r\n            return self.GetCardValue(b) - self.GetCardValue(a);\r\n        });\r\n    },\r\n\r\n    SortCardByMinEx:function(pokers){\r\n        let self = this;\r\n        pokers.sort(function(a, b){\r\n            //return (a&0x0F) - (b&0x0F);\r\n            return self.GetCardValue(a) - self.GetCardValue(b);\r\n        });\r\n    },\r\n\r\n    SortCardByMin:function(pokers){\r\n        let self = this;\r\n        pokers.sort(function(a, b){\r\n            let aValue = a[0];\r\n            let bValue = b[0];\r\n            //return (aValue&0x0F) - (bValue&0x0F);\r\n            return self.GetCardValue(aValue) - self.GetCardValue(bValue);\r\n        });\r\n    },\r\n\r\n    OutPokerCard:function(cardList){\r\n        if(!cardList.length){\r\n            return;\r\n        }\r\n        //删除handcardlist和selectCardList中的元素\r\n        for(let i = 0; i < cardList.length; i++){\r\n            let value = cardList[i];\r\n            let pos = this.handCardList.indexOf(value+500);\r\n            if(pos != -1){\r\n                this.handCardList.splice(pos,1);\r\n            }\r\n            else{\r\n                let pos1 = this.handCardList.indexOf(value);\r\n                if(pos1 != -1){\r\n                    this.handCardList.splice(pos1,1);\r\n                }\r\n            }\r\n\r\n            let cardPos = this.selectCardList.indexOf(value);\r\n            if(cardPos != -1){\r\n                this.selectCardList.splice(cardPos,1);\r\n            }\r\n        }\r\n        console.log(\"selectCardList == \"+this.selectCardList);\r\n        app[app.subGameName + \"Client\"].OnEvent(\"HandCard\");\r\n    },\r\n\r\n    GetHandCard:function(){\r\n        return this.handCardList;\r\n    },\r\n\r\n    GetSelectCard:function(){\r\n        return this.selectCardList;\r\n    },\r\n\r\n    ChangeSelectCard:function(cardList){\r\n        this.selectCardList = [];\r\n        this.selectCardList = cardList;\r\n    },\r\n\r\n    SetCardSelected:function(cardIdx){\r\n        let cardType = this.handCardList[cardIdx -1];\r\n        this.selectCardList.push(cardType);\r\n        console.log(\"selectCardList == \"+this.selectCardList);\r\n    },\r\n\r\n    DeleteCardSelected:function(cardIdx){\r\n        let cardType = this.handCardList[cardIdx -1];\r\n        let pos = this.selectCardList.indexOf(cardType)\r\n        if (pos != -1){\r\n            this.selectCardList.splice(pos, 1);\r\n        }\r\n        console.log(\"selectCardList111 == \"+this.selectCardList);\r\n    },\r\n\r\n    SetCardData(opCardType, cardList){\r\n        if(opCardType == this.DDZ_CARD_TYPE_BUCHU || !cardList.length){\r\n            return;\r\n        }\r\n\r\n        if(this.lastCardType == this.DDZ_CARD_TYPE_NOMARL || opCardType == this.DDZ_CARD_TYPE_ZHADAN){\r\n            this.lastCardType = opCardType;\r\n        }\r\n        \r\n        console.log(\"this.lastCardTyp ==\"+this.lastCardType);\r\n        this.lastCardList = cardList;\r\n    },\r\n\r\n    ClearCardData:function(){\r\n        this.lastCardType = this.DDZ_CARD_TYPE_NOMARL;\r\n        this.lastCardList = [];\r\n    },\r\n\r\n    GetLastCardType:function(){\r\n        return this.lastCardType;\r\n    },\r\n\r\n    //检查组合是否只有炸弹\r\n    CheckOnlyBoom:function(list){\r\n        for(let i = 0; i < list.length; i++){\r\n            let item = list[i];\r\n            let sameCard = this.GetSameValue(item, item[0]);\r\n            if(sameCard.length != item.length)\r\n                return false;\r\n        }\r\n        return true;\r\n    },\r\n\r\n    CheckOneCard:function(isSelectCard = true){\r\n        let pokers = [];\r\n        if(isSelectCard==false){\r\n            pokers = this.handCardList;\r\n        }else{\r\n            pokers = this.selectCardList;\r\n        }\r\n        if(pokers.length != 1) return false;\r\n        let lastCardValue = 0;\r\n        let myCardValue = 0;\r\n\r\n        lastCardValue = this.GetCardValue(this.lastCardList[0]);\r\n        myCardValue = this.GetCardValue(pokers[0]);\r\n\r\n        if(lastCardValue && lastCardValue != 0){\r\n            if(this.lastCardList.length != pokers.length) return false;\r\n            if(myCardValue > lastCardValue){\r\n                return true;\r\n            }\r\n            return false;\r\n        }\r\n\r\n        return true;\r\n    },\r\n\r\n    CheckDuizi:function(isSelectCard = true){\r\n        let pokers = [];\r\n        if(isSelectCard==false){\r\n            pokers = this.handCardList;\r\n        }else{\r\n            pokers = this.selectCardList;\r\n        }\r\n        if(pokers.length != 2) return false;\r\n\r\n        let lastCardValue = 0;\r\n        let myCardValue = 0;\r\n        let bDui = false;\r\n\r\n        lastCardValue = this.GetCardValue(this.lastCardList[0]);\r\n        \r\n        for(let i = 0; i < pokers.length; i++){\r\n            let poker = pokers[i];\r\n            let duizi = this.GetSameValue(pokers, poker);\r\n            if(duizi.length == 2){\r\n                myCardValue = this.GetCardValue(poker);\r\n                bDui = true;\r\n                break;\r\n            }\r\n        }\r\n\r\n        if(lastCardValue && lastCardValue != 0){\r\n            if(this.lastCardList.length != pokers.length) return false;\r\n            \r\n            if(myCardValue > lastCardValue){\r\n                return true;\r\n            }\r\n            return false;\r\n        }\r\n\r\n        if(bDui)\r\n            return true;\r\n        return false;\r\n    },\r\n\r\n    CheckShunzi:function(isSelectCard = true){\r\n        let pokers = [];\r\n        if(isSelectCard==false){\r\n            pokers = this.handCardList;\r\n        }else{\r\n            pokers = this.selectCardList;\r\n        }\r\n        if(pokers.length < 5) return false;\r\n\r\n        let lastCardValue = 0;\r\n        let myCardValue = 0;\r\n\r\n        this.SortCardByMax(this.lastCardList);\r\n        this.SortCardByMax(pokers);\r\n\r\n        let lastValue = 0;\r\n        for(let i = 0; i < pokers.length; i++){\r\n            let poker = pokers[i];\r\n            let nowValue = this.GetCardValue(poker);\r\n\r\n            if(nowValue == 15){\r\n                return false;\r\n            }\r\n\r\n            if(lastValue != 0){\r\n                if(lastValue - nowValue != 1)\r\n                    return false;\r\n            }\r\n            \r\n            lastValue = nowValue;\r\n        }\r\n\r\n        lastCardValue = this.GetCardValue(this.lastCardList[0]);\r\n        myCardValue = this.GetCardValue(pokers[0]);\r\n\r\n        if(lastCardValue && lastCardValue != 0){\r\n            if(this.lastCardList.length != pokers.length) return false;\r\n            \r\n            if(myCardValue > lastCardValue){\r\n                return true;\r\n            }\r\n            return false;\r\n        }\r\n\r\n        return true;\r\n    },\r\n\r\n    //如果最后首发只有三带 可以不带牌出\r\n    CheckLastThree:function(tag, lastCard){\r\n        // if(this.lastCardType == 0){\r\n        //     if(this.selectCardList.length != lastCard ||\r\n        //         this.handCardList.length != lastCard) return false;\r\n            \r\n        //     let isCheck = false;\r\n        //     for(let i = 0; i < this.selectCardList.length; i++){\r\n        //         let poker = this.selectCardList[i];\r\n        //         let samePoker = this.GetSameValue(this.selectCardList, poker);\r\n        //         if(samePoker.length >= tag){\r\n        //             isCheck = true;\r\n        //             break;\r\n        //         }\r\n        //     }\r\n        //     if(isCheck && this.selectCardList.length == lastCard && this.handCardList.length == lastCard){\r\n        //         return true;\r\n        //     }\r\n        // }\r\n        return false;\r\n    },\r\n\r\n    CheckSanDaiSiDai:function(tag, isSelectCard = true){\r\n        let pokers = [];\r\n        if(isSelectCard==false){\r\n            pokers = this.handCardList;\r\n        }else{\r\n            pokers = this.selectCardList;\r\n        }\r\n        let handPokers = this.handCardList;\r\n        if(pokers.length < 3) return false;\r\n        //判断玩法\r\n        let sandai=this.DDZRoom.GetRoomConfigByProperty(\"sandai\");\r\n        if (sandai.indexOf(0) < 0 && tag == this.DDZ_CARD_TYPE_3DAI1) {\r\n            //没有勾选三带一玩法\r\n            return false;\r\n        }\r\n        if (sandai.indexOf(1) < 0 && tag == this.DDZ_CARD_TYPE_3DAI2) {\r\n            //没有勾选三带二玩法\r\n            return false;\r\n        }\r\n        let sidai=this.DDZRoom.GetRoomConfigByProperty(\"sidai\");\r\n        if (sidai.indexOf(0) < 0 && tag == this.DDZ_CARD_TYPE_4DAI2) {\r\n            //没有勾选四带2单张玩法\r\n            return false;\r\n        }\r\n        if (sidai.indexOf(1) < 0 && tag == this.DDZ_CARD_TYPE_4DAI4) {\r\n            //没有勾选四带二对玩法\r\n            return false;\r\n        }\r\n        if (sidai.indexOf(2) < 0 && tag == this.DDZ_CARD_TYPE_4DAI1) {\r\n            //没有勾选四带1单张玩法\r\n            return false;\r\n        }\r\n        if (sidai.indexOf(3) < 0 && tag == this.DDZ_CARD_TYPE_4DAI21) {\r\n            //没有勾选四带一对玩法\r\n            return false;\r\n        }\r\n        let lastCardValue = 0;\r\n        let myCardValue = 0;\r\n        let tempArrA = [];\r\n        let tempArrB = [];\r\n\r\n        for(let i=0; i < this.lastCardList.length; i++){\r\n            let poker = this.lastCardList[i];\r\n            let samePoker = this.GetSameValue(this.lastCardList, poker);\r\n            if(tag >= this.DDZ_CARD_TYPE_3BUDAI && tag <= this.DDZ_CARD_TYPE_3DAI2){\r\n                if(samePoker.length >= 3){\r\n                    this.RegularCard(tempArrA, samePoker, 3);\r\n                    //tempArrA = samePoker;\r\n                    break;\r\n                }\r\n            }\r\n            else if(tag >= this.DDZ_CARD_TYPE_4DAI2 && tag <= this.DDZ_CARD_TYPE_4DAI4){\r\n                if(samePoker.length >= 4){\r\n                    this.RegularCard(tempArrA, samePoker, 4);\r\n                    //tempArrA = samePoker;\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n\r\n        for(let i=0; i < pokers.length; i++){\r\n            let poker = pokers[i];\r\n            let samePoker = this.GetSameValue(pokers, poker);\r\n            if(tag >= this.DDZ_CARD_TYPE_3BUDAI && tag <= this.DDZ_CARD_TYPE_3DAI2){\r\n                if(samePoker.length >= 3){\r\n                    this.RegularCard(tempArrB, samePoker, 3);\r\n                    //tempArrB = samePoker;\r\n                    break;\r\n                }\r\n            }\r\n            else if(tag >= this.DDZ_CARD_TYPE_4DAI2 && tag <= this.DDZ_CARD_TYPE_4DAI4){\r\n                if(samePoker.length >= 4){\r\n                    this.RegularCard(tempArrB, samePoker, 4);\r\n                    //tempArrB = samePoker;\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        if(tempArrA.length){\r\n            lastCardValue = this.GetCardValue(tempArrA[0][0]);\r\n        }\r\n        \r\n        if(tempArrB.length){\r\n            myCardValue = this.GetCardValue(tempArrB[0][0]);\r\n        }\r\n\r\n        let daiCardList = this.GetDaiPaiList(pokers, tempArrB);\r\n\r\n        //如果带的牌有王炸，不能出\r\n        let guipai = 0;\r\n        for (let i = 0; i < daiCardList.length; i++) {\r\n            if (this.GetCardValue(daiCardList[i]) == this.LOGIC_MASK_XIAOWANG || \r\n                this.GetCardValue(daiCardList[i]) == this.LOGIC_MASK_DAWANG) {\r\n                guipai++;\r\n            }\r\n        }\r\n        if (guipai >= 2) {\r\n            return false;\r\n        }\r\n        \r\n        if(lastCardValue && lastCardValue != 0){\r\n            if(this.lastCardList.length != pokers.length)\r\n                return false;\r\n            if(tag == this.DDZ_CARD_TYPE_3DAI2 && !this.CheckTagIsDuizi(daiCardList)){\r\n                return false;\r\n            }\r\n            if(tag == this.DDZ_CARD_TYPE_4DAI21 && !this.CheckTagIsDuizi(daiCardList)){\r\n                return false;\r\n            }\r\n            if(tag == this.DDZ_CARD_TYPE_4DAI4 && !this.CheckTagIsDuizi(daiCardList)){\r\n                return false;\r\n            }\r\n            if(myCardValue > lastCardValue){\r\n                return true;\r\n            }\r\n            return false;\r\n        }\r\n        if(tempArrB.length){\r\n            if(tag == this.DDZ_CARD_TYPE_3BUDAI){\r\n                if(pokers.length == 3){\r\n                    return true;\r\n                }\r\n            }\r\n            else if(tag == this.DDZ_CARD_TYPE_3DAI1){\r\n                if(pokers.length == 4){\r\n                    return true;\r\n                }\r\n            }\r\n            else if(tag == this.DDZ_CARD_TYPE_3DAI2){\r\n                if(pokers.length == 5 && this.CheckTagIsDuizi(daiCardList)){\r\n                    return true;\r\n                }\r\n            }\r\n            else if(tag == this.DDZ_CARD_TYPE_4DAI1){\r\n                if(pokers.length == 5){\r\n                    return true;\r\n                }\r\n            }\r\n            else if(tag == this.DDZ_CARD_TYPE_4DAI21){\r\n                if(pokers.length == 6 && this.CheckTagIsDuizi(daiCardList)){\r\n                    return true;\r\n                }\r\n            }\r\n            else if(tag == this.DDZ_CARD_TYPE_4DAI2){\r\n                if(pokers.length == 6){\r\n                    return true;\r\n                }\r\n            }\r\n            else if(tag == this.DDZ_CARD_TYPE_4DAI4){\r\n                if(pokers.length == 8 && this.CheckTagIsDuizi(daiCardList)){\r\n                    return true;\r\n                }\r\n            }\r\n        }\r\n        return false;\r\n    },\r\n\r\n    IsZhadan:function(pokers){\r\n        let temp = [];\r\n        for(let i=0; i < pokers.length; i++){\r\n            let poker = pokers[i];\r\n            let zhadan = this.GetSameValue(pokers, poker);\r\n            if(zhadan.length >= 4){\r\n                temp = zhadan;\r\n                break;\r\n            }\r\n        }\r\n        //是否是王炸\r\n        if (pokers.length == 2) {\r\n            let cardValue_1 = this.GetCardValue(pokers[0]);\r\n            let cardValue_2 = this.GetCardValue(pokers[1]);\r\n            if (cardValue_1 == 16 && cardValue_2 == 17)\r\n                return true;\r\n            if (cardValue_2 == 16 && cardValue_1 == 17)\r\n                return true;\r\n        }\r\n        if(pokers.length){\r\n            if(pokers.length - temp.length == 0){\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    },\r\n    \r\n    CheckZhaDan:function(isSelectCard = true){\r\n        let pokers = [];\r\n        if(isSelectCard==false){\r\n            pokers = this.handCardList;\r\n        }else{\r\n            pokers = this.selectCardList;\r\n        }\r\n\r\n        let lastCardValue = 0;\r\n        let myCardValue = 0;\r\n\r\n        if(this.IsZhadan(this.lastCardList)){\r\n            lastCardValue = this.GetCardValue(this.lastCardList[0]);\r\n        }\r\n\r\n        if(this.IsZhadan(pokers)){\r\n            if(lastCardValue == 0) return true;\r\n            myCardValue = this.GetCardValue(pokers[0]);\r\n        }\r\n        else{\r\n            return false;\r\n        }\r\n\r\n        //王炸最大\r\n        if (myCardValue == 16 || myCardValue == 17) {\r\n            return true;\r\n        }\r\n        \r\n        //先比较牌值再比较张数\r\n        if(myCardValue > lastCardValue){\r\n            if(pokers.length >= this.lastCardList.length){\r\n                return true;\r\n            }\r\n        }\r\n        else if(myCardValue <= lastCardValue){\r\n            if(pokers.length > this.lastCardList.length){\r\n                return true;\r\n            }\r\n        }\r\n\r\n        return false;\r\n    },\r\n\r\n    IsLianShun:function(pokers){\r\n        if(pokers.length < 2) return false;\r\n        \r\n        this.SortCardByMin(pokers);\r\n\r\n        let lastValue = 0;\r\n        for(let i = 0; i < pokers.length; i++){\r\n            let item = pokers[i];\r\n            let nowValue = this.GetCardValue(item[0]);\r\n\r\n            if(nowValue == 15){\r\n                return false;\r\n            }\r\n\r\n            if(lastValue != 0){\r\n                if((lastValue+1) != nowValue)\r\n                    return false;\r\n            }\r\n            \r\n            lastValue = nowValue;\r\n        }\r\n\r\n        return true;\r\n    },\r\n\r\n    //如果有超过tag只取tag数量的牌\r\n    RegularCard:function(pokers, list, tag){\r\n        let temp = [];\r\n        for(let i = 0; i < list.length; i++){\r\n            if(temp.length == tag) break;\r\n            temp.push(list[i]);\r\n        }\r\n        //如果已经在pokers列表里，无需重复计算\r\n        let isHasArr = false;\r\n        for (let i = 0; i < pokers.length; i++) {\r\n            //判断数组是否相等需要排序后转字符串\r\n            if (pokers[i].sort().toString() == temp.sort().toString()) {\r\n                isHasArr = true;\r\n                break;\r\n            }\r\n        }\r\n        if (!isHasArr) {\r\n            pokers[pokers.length] = temp;\r\n        }\r\n    },\r\n\r\n    GetDaiNum:function(){\r\n        return this.daiNum;\r\n    },\r\n    \r\n    CheckFeiJi:function(tag,isSelectCard = true){\r\n        let pokers = [];\r\n        if(isSelectCard==false){\r\n            pokers = this.handCardList;\r\n        }else{\r\n            pokers = this.selectCardList;\r\n        }\r\n        let handPokers = this.handCardList;\r\n        if(pokers.length < 6) return false;\r\n        //判断玩法\r\n        let sandai=this.DDZRoom.GetRoomConfigByProperty(\"sandai\");\r\n        if (sandai.indexOf(0) < 0 && tag == this.DDZ_CARD_TYPE_FEIJI1) {\r\n            //没有勾选三带一玩法\r\n            return false;\r\n        }\r\n        if (sandai.indexOf(1) < 0 && tag == this.DDZ_CARD_TYPE_FEIJI2) {\r\n            //没有勾选三带二玩法\r\n            return false;\r\n        }\r\n        let lastCardValue = 0;\r\n        let myCardValue = 0;\r\n        let tempArrA = [];\r\n        let tempArrB = [];\r\n\r\n        for(let i = 0; i < this.lastCardList.length; i++){\r\n            let poker = this.lastCardList[i];\r\n            let santiao = this.GetSameValue(this.lastCardList, poker);\r\n            let bInList = this.CheckPokerInListEx(tempArrA, poker);\r\n            if(santiao.length >= 3 && !bInList){\r\n                this.RegularCard(tempArrA, santiao, 3);\r\n            }\r\n        }\r\n\r\n        for(let i=0; i < pokers.length; i++){\r\n            let poker = pokers[i];\r\n            let santiao = this.GetSameValue(pokers, poker);\r\n            let bInList = this.CheckPokerInListEx(tempArrB, poker);\r\n            if(santiao.length >= 3 && !bInList && this.GetCardValue(poker) != 15){\r\n                this.RegularCard(tempArrB, santiao, 3);\r\n            }\r\n        }\r\n\r\n        if(tempArrA.length){\r\n            let realPlaneA = this.GetRealPlane(tempArrA);\r\n            lastCardValue = this.GetCardValue(realPlaneA[0][0]);\r\n        }\r\n        \r\n        if(tempArrB.length < 2) return false;\r\n        \r\n        this.SortCardByMin(tempArrB);\r\n\r\n        let realPlane = this.GetRealPlane(tempArrB);\r\n\r\n        if(!realPlane.length) return false;\r\n\r\n        myCardValue = this.GetCardValue(realPlane[0][0]);\r\n        \r\n        let value = (pokers.length - realPlane.length * 3);\r\n        this.daiNum = value;\r\n        let daiPaiList = this.GetDaiPaiList(pokers, realPlane);\r\n        //如果带的牌有王炸，不能出\r\n        let guipai = 0;\r\n        for (let i = 0; i < daiPaiList.length; i++) {\r\n            if (this.GetCardValue(daiPaiList[i]) == this.LOGIC_MASK_XIAOWANG || \r\n                this.GetCardValue(daiPaiList[i]) == this.LOGIC_MASK_DAWANG) {\r\n                guipai++;\r\n            }\r\n        }\r\n        if (guipai >= 2) {\r\n            return false;\r\n        }\r\n        //检测下飞机内是否有炸弹，如果有炸弹不能出\r\n        // for(let i=0; i < pokers.length; i++){\r\n        //     let poker = pokers[i];\r\n        //     let zhadan = this.GetSameValue(pokers, poker);\r\n        //     if(zhadan.length >= 4){\r\n        //         return false;\r\n        //     }\r\n        // }\r\n        if(tag == this.DDZ_CARD_TYPE_FEIJI0){\r\n            if(value == 0){\r\n                if(lastCardValue && lastCardValue != 0){\r\n                    if(myCardValue > lastCardValue){\r\n                        return true;\r\n                    }\r\n                    return false;\r\n                }\r\n                return true;\r\n            }\r\n        }\r\n        else if(tag == this.DDZ_CARD_TYPE_FEIJI1){\r\n            if(value == realPlane.length){\r\n                if(lastCardValue && lastCardValue != 0){\r\n                    if(myCardValue > lastCardValue){\r\n                        return true;\r\n                    }\r\n                    return false;\r\n                }\r\n                return true;\r\n            }\r\n            // else if (handPokers.length < (realPlane.length*3 + realPlane.length)\r\n            //     && handPokers.length == pokers.length) {\r\n            //     //如果手牌少于需要带的牌数并且轮到本家出牌则返回true\r\n            //     return true;\r\n            // }\r\n        }\r\n        else if(tag == this.DDZ_CARD_TYPE_FEIJI2){\r\n            if(realPlane.length==3 && value==1){\r\n                //三飞机带单根,可以组成  444,555 带 3333\r\n                let isHasZhadan = false;\r\n                for(let i=0; i < pokers.length; i++){\r\n                    let poker = pokers[i];\r\n                    let zhadan = this.GetSameValue(pokers, poker);\r\n                    if(zhadan.length >= 4){\r\n                        isHasZhadan = true;\r\n                        break;\r\n                    }\r\n                }\r\n                if (isHasZhadan) {\r\n                    return true;\r\n                }\r\n            }else if(realPlane.length==4 && value==3){\r\n                //三飞机带单根,可以组成  444,555,666 带 3333 77\r\n                let isHasZhadan = false;\r\n                let isHasDuiZi = false;\r\n                for(let i=0; i < pokers.length; i++){\r\n                    let poker = pokers[i];\r\n                    let zhadan = this.GetSameValue(pokers, poker);\r\n                    if(zhadan.length >= 4){\r\n                        isHasZhadan = true;\r\n                        break;\r\n                    }else if (zhadan.length == 2) {\r\n                        // 并且还有一个对子\r\n                        isHasDuiZi = true;\r\n                    }\r\n                }\r\n                if (isHasZhadan && isHasDuiZi) {\r\n                    return true;\r\n                }\r\n            }\r\n            else if(value == realPlane.length * 2 && this.CheckTagIsDuizi(daiPaiList)){\r\n                if(lastCardValue && lastCardValue != 0){\r\n                    if(myCardValue > lastCardValue){\r\n                        return true;\r\n                    }\r\n                    return false;\r\n                }\r\n                return true;\r\n            }\r\n            // else if (handPokers.length < (realPlane.length*3 + realPlane.length*2)\r\n            //     && handPokers.length == pokers.length) {\r\n            //     //如果手牌少于需要带的牌数并且轮到本家出牌则返回true\r\n            //     return true;\r\n            // }\r\n        }\r\n        return false;\r\n    },\r\n\r\n    CheckLianDui:function(isSelectCard = true){\r\n        let pokers = [];\r\n        if(isSelectCard==false){\r\n            pokers = this.handCardList;\r\n        }else{\r\n            pokers = this.selectCardList;\r\n        }\r\n        if(pokers.length < 6) return false;\r\n        if(pokers.length%2 == 1) return false;\r\n\r\n        let lastCardValue = 0;\r\n        let myCardValue = 0;\r\n        let tempArrA = [];\r\n        let tempArrB = [];\r\n\r\n        for(let i = 0; i < this.lastCardList.length; i++){\r\n            let poker = this.lastCardList[i];\r\n            let duizi = this.GetSameValue(this.lastCardList, poker);\r\n            let bInList = this.CheckPokerInList(tempArrA, poker);\r\n            if(duizi.length == 2 && !bInList){\r\n                tempArrA[tempArrA.length] = duizi;\r\n            }\r\n        }\r\n\r\n        for(let i = 0; i < pokers.length; i++){\r\n            let poker = pokers[i];\r\n            let duizi = this.GetSameValue(pokers, poker);\r\n            let bInList = this.CheckPokerInList(tempArrB, poker);\r\n            if(duizi.length == 2 && !bInList){\r\n                tempArrB[tempArrB.length] = duizi;\r\n            }\r\n        }\r\n\r\n        if(tempArrB.length * 2 != pokers.length) return false;\r\n\r\n        if(this.IsLianShun(tempArrA)){\r\n            lastCardValue = this.GetCardValue(tempArrA[0][0]);\r\n        }\r\n\r\n        if(this.IsLianShun(tempArrB)){\r\n            myCardValue = this.GetCardValue(tempArrB[0][0]);\r\n        }\r\n        else{\r\n            return false;\r\n        }\r\n        \r\n        if(lastCardValue && lastCardValue != 0){\r\n            if((pokers.length - this.lastCardList.length) == 0){\r\n                if(myCardValue > lastCardValue){\r\n                    return true;\r\n                }\r\n            }\r\n            return false;\r\n        }\r\n        return true;\r\n    },\r\n\r\n    //检查顺子是不是一条龙\r\n    CheckDragon:function(){\r\n        let pokers = this.lastCardList;\r\n        if(pokers.length != 12) return false;\r\n\r\n        this.SortCardByMinEx(pokers);\r\n\r\n        let lastValue = 0;\r\n        for(let i = 0; i < pokers.length; i++){\r\n            let poker = pokers[i];\r\n            let nowValue = this.GetCardValue(poker);\r\n            if(nowValue == lastValue) return false;\r\n\r\n            if(nowValue == 15) return false;\r\n\r\n            if(lastValue != 0){\r\n                if(nowValue - lastValue != 1)\r\n                    return false;\r\n            }\r\n\r\n            lastValue = nowValue;\r\n        }\r\n\r\n        return true; \r\n    },\r\n    IsHaveBoom:function(isSelectCard = false){\r\n        let pokers = [];\r\n        if(isSelectCard==false){\r\n            pokers = this.handCardList;\r\n        }else{\r\n            pokers = this.selectCardList;\r\n        }\r\n        //先判断是否有王炸\r\n        let wangzhaList = [];\r\n        for(let i = 0; i < pokers.length; i++){\r\n            let poker = pokers[i];\r\n            let zhadan = this.GetSameValue(pokers, poker);\r\n            if(zhadan.length >= 4){\r\n                return true;\r\n            }\r\n            if (this.GetCardValue(pokers[i]) == 16 ||\r\n                this.GetCardValue(pokers[i]) == 17) {\r\n                wangzhaList.push(pokers[i]);\r\n            }\r\n        }\r\n        if (wangzhaList.length == 2) {\r\n            return true;\r\n        }\r\n        return false;\r\n    },\r\n\r\n    IsHaveWangZhaOrBoom:function(isSelectCard = false){\r\n        let pokers = [];\r\n        if(isSelectCard==false){\r\n            pokers = this.handCardList;\r\n        }else{\r\n            pokers = this.selectCardList;\r\n        }\r\n        //先判断是否有王炸\r\n        let wangzhaList = [];\r\n        for(let i = 0; i < pokers.length; i++){\r\n            let poker = pokers[i];\r\n            let zhadan = this.GetSameValue(pokers, poker);\r\n            if (this.GetCardValue(pokers[i]) == 16 ||\r\n                this.GetCardValue(pokers[i]) == 17) {\r\n                wangzhaList.push(pokers[i]);\r\n            }\r\n            if (this.GetCardValue(pokers[i]) != 15) {\r\n                continue;\r\n            }\r\n            if(zhadan.length >= 4){\r\n                return true;\r\n            }\r\n        }\r\n        if (wangzhaList.length == 2) {\r\n            return true;\r\n        }\r\n        return false;\r\n    },\r\n\r\n    IsDismantleBoom:function(){\r\n        let pokers = this.handCardList;\r\n        if(this.CheckZhaDan()){\r\n            return false;\r\n        }\r\n        for(let i = 0; i < pokers.length; i++){\r\n            let poker = pokers[i];\r\n            if(this.selectCardList.indexOf(poker) != -1){\r\n                let zhadan = this.GetSameValue(pokers, poker);\r\n                if(zhadan.length >= 4){\r\n                    return true;\r\n                }\r\n            }\r\n        }\r\n        \r\n        return false;\r\n    },\r\n\r\n    GetCardType:function(isSelectCard = true){\r\n        //0:可以随便出牌 1:不出 2:单牌 3:对子 4:顺子 5:3不带 6:3带1 7:3带2 8:4带1 9:4带2 10:4带3 \r\n        //11:炸弹 12:飞机带单 13:飞机带对 14:连对\r\n        this.daiNum = 0;\r\n\r\n        if(isSelectCard && !this.selectCardList.length){\r\n            return 0;\r\n        }\r\n        \r\n        let bCheck = false;\r\n\r\n        if(this.CheckZhaDan(isSelectCard)){\r\n            return this.DDZ_CARD_TYPE_ZHADAN;\r\n        }\r\n        \r\n        if(this.lastCardType == 0){\r\n            if(this.CheckOneCard(isSelectCard)){\r\n                return this.DDZ_CARD_TYPE_SINGLECARD;\r\n            }\r\n            else if(this.CheckDuizi(isSelectCard)){\r\n                return this.DDZ_CARD_TYPE_DUIZI;\r\n            }\r\n            else if(this.CheckShunzi(isSelectCard)){\r\n                return this.DDZ_CARD_TYPE_SHUNZI;\r\n            }\r\n            else if(this.CheckSanDaiSiDai(this.DDZ_CARD_TYPE_4DAI1, isSelectCard)){\r\n                return this.DDZ_CARD_TYPE_4DAI1;\r\n            }\r\n            else if(this.CheckSanDaiSiDai(this.DDZ_CARD_TYPE_4DAI21, isSelectCard)){\r\n                return this.DDZ_CARD_TYPE_4DAI21;\r\n            }\r\n            else if(this.CheckSanDaiSiDai(this.DDZ_CARD_TYPE_4DAI4, isSelectCard)){\r\n                return this.DDZ_CARD_TYPE_4DAI4;\r\n            }\r\n            else if(this.CheckSanDaiSiDai(this.DDZ_CARD_TYPE_4DAI2, isSelectCard)){\r\n                return this.DDZ_CARD_TYPE_4DAI2;\r\n            }\r\n            else if(this.CheckSanDaiSiDai(this.DDZ_CARD_TYPE_3DAI2, isSelectCard)){\r\n                return this.DDZ_CARD_TYPE_3DAI2;\r\n            }\r\n            else if(this.CheckSanDaiSiDai(this.DDZ_CARD_TYPE_3DAI1, isSelectCard)){\r\n                return this.DDZ_CARD_TYPE_3DAI1;\r\n            }\r\n            else if(this.CheckSanDaiSiDai(this.DDZ_CARD_TYPE_3BUDAI, isSelectCard)){\r\n                return this.DDZ_CARD_TYPE_3BUDAI;\r\n            }\r\n            else if (this.CheckFeiJi(this.DDZ_CARD_TYPE_FEIJI0, isSelectCard)) {\r\n                return this.DDZ_CARD_TYPE_FEIJI0;\r\n            }\r\n            else if(this.CheckFeiJi(this.DDZ_CARD_TYPE_FEIJI1, isSelectCard)){\r\n                return this.DDZ_CARD_TYPE_FEIJI1;\r\n            }\r\n            else if(this.CheckFeiJi(this.DDZ_CARD_TYPE_FEIJI2, isSelectCard)){\r\n                return this.DDZ_CARD_TYPE_FEIJI2;\r\n            }\r\n            else if(this.CheckLianDui(isSelectCard)){\r\n                return this.DDZ_CARD_TYPE_LIANDUI;\r\n            }\r\n            else{\r\n                return 0;\r\n            }\r\n        }\r\n        else if(this.lastCardType == this.DDZ_CARD_TYPE_SINGLECARD){\r\n            if(this.CheckOneCard(isSelectCard)){\r\n                bCheck = true;\r\n            }\r\n        }\r\n        else if(this.lastCardType == this.DDZ_CARD_TYPE_DUIZI){\r\n            if(this.CheckDuizi(isSelectCard)){\r\n                bCheck = true;\r\n            }\r\n        }\r\n        else if(this.lastCardType == this.DDZ_CARD_TYPE_SHUNZI){\r\n            if(this.CheckShunzi(isSelectCard)){\r\n                bCheck = true;\r\n            }\r\n        }\r\n        else if((this.lastCardType == this.DDZ_CARD_TYPE_3BUDAI) || \r\n                (this.lastCardType == this.DDZ_CARD_TYPE_3DAI1) || \r\n                (this.lastCardType == this.DDZ_CARD_TYPE_3DAI2) || \r\n                (this.lastCardType == this.DDZ_CARD_TYPE_4DAI1) || \r\n                (this.lastCardType == this.DDZ_CARD_TYPE_4DAI21) || \r\n                (this.lastCardType == this.DDZ_CARD_TYPE_4DAI2) || \r\n                (this.lastCardType == this.DDZ_CARD_TYPE_4DAI4)){\r\n                if(this.CheckSanDaiSiDai(this.lastCardType, isSelectCard)){\r\n                    bCheck = true;\r\n                }\r\n        }\r\n        else if (this.lastCardType == this.DDZ_CARD_TYPE_FEIJI0) {\r\n            if(this.CheckFeiJi(this.DDZ_CARD_TYPE_FEIJI0, isSelectCard)){\r\n                bCheck = true;\r\n            }\r\n        }\r\n        else if((this.lastCardType == this.DDZ_CARD_TYPE_FEIJI1)){\r\n            if(this.CheckFeiJi(this.DDZ_CARD_TYPE_FEIJI1, isSelectCard)){\r\n                bCheck = true;\r\n            }\r\n        }\r\n        else if(this.lastCardType == this.DDZ_CARD_TYPE_FEIJI2){\r\n            if(this.CheckFeiJi(this.DDZ_CARD_TYPE_FEIJI2, isSelectCard)){\r\n                bCheck = true;\r\n            }\r\n        }\r\n        else if(this.lastCardType == this.DDZ_CARD_TYPE_LIANDUI){\r\n            if(this.CheckLianDui(isSelectCard)){\r\n                bCheck = true;\r\n            }\r\n        }\r\n\r\n        if(bCheck){\r\n            return this.lastCardType;\r\n        }\r\n\r\n        return 0;\r\n    },\r\n    //特殊牌有多种牌型检测\r\n    GetAllCardTypeBySpc:function(){\r\n        if(!this.selectCardList.length){\r\n            return [];\r\n        }\r\n        let allCardType = [];\r\n        if(this.lastCardType == 0){\r\n            let razzSanDaiSiDaiList = this.CheckSanDaiSiDai(this.DDZ_CARD_TYPE_4DAI4);\r\n            if (razzSanDaiSiDaiList) {\r\n                let razzSanDaiSiDaiObj = {\"realCardList\":this.selectCardList, \"cardType\":this.DDZ_CARD_TYPE_4DAI4};\r\n                allCardType.push(razzSanDaiSiDaiObj);\r\n            }\r\n            let razzFeiJiList = this.CheckFeiJi(this.DDZ_CARD_TYPE_FEIJI1);\r\n            if (razzFeiJiList) {\r\n                let razzFeiJiObj = {\"realCardList\":this.selectCardList, \"cardType\":this.DDZ_CARD_TYPE_FEIJI1};\r\n                allCardType.push(razzFeiJiObj);\r\n            }\r\n            return allCardType;\r\n        }\r\n        return allCardType;\r\n    },\r\n    //0:可以随便出牌 1:不出 2:单牌 3:对子 4:顺子 5:3不带 6:3带1 7:3带2 8:4带1 9:4带2 10:4带3 \r\n        //11:炸弹 12:三带飞机 13:四带飞机 14:连对\r\n    GetTipCardSlCard:function(){\r\n        let array = [];\r\n        if(this.lastCardType == this.DDZ_CARD_TYPE_SINGLECARD){\r\n            array = this.GetOneCardTip(true);\r\n        }\r\n        else if(this.lastCardType == this.DDZ_CARD_TYPE_DUIZI){\r\n            array = this.GetDuiziTip(true);\r\n        }\r\n        else if(this.lastCardType == this.DDZ_CARD_TYPE_SHUNZI){\r\n            array = this.GetShunziTip(true);\r\n        }\r\n        else if(this.lastCardType == this.DDZ_CARD_TYPE_3BUDAI ||\r\n                this.lastCardType == this.DDZ_CARD_TYPE_3DAI1 ||\r\n                this.lastCardType == this.DDZ_CARD_TYPE_3DAI2){\r\n            array = this.GetSanDaiTip(this.lastCardType, true);                \r\n        }\r\n        else if(this.lastCardType == this.DDZ_CARD_TYPE_4DAI2 ||\r\n                this.lastCardType == this.DDZ_CARD_TYPE_4DAI4 ||\r\n                this.lastCardType == this.DDZ_CARD_TYPE_4DAI1 ||\r\n                this.lastCardType == this.DDZ_CARD_TYPE_4DAI21){\r\n            array = this.GetSiDaiTip(this.lastCardType, true);\r\n        }\r\n        else if(this.lastCardType == this.DDZ_CARD_TYPE_ZHADAN){\r\n            array = this.GetZhaDan(true);\r\n        }\r\n        else if(this.lastCardType == this.DDZ_CARD_TYPE_FEIJI0){\r\n            array = this.GetFeiJiTip(this.DDZ_CARD_TYPE_FEIJI0, true);\r\n        }\r\n        else if(this.lastCardType == this.DDZ_CARD_TYPE_FEIJI1){\r\n            array = this.GetFeiJiTip(this.DDZ_CARD_TYPE_FEIJI1, true);\r\n        }\r\n        else if(this.lastCardType == this.DDZ_CARD_TYPE_FEIJI2){\r\n            array = this.GetFeiJiTip(this.DDZ_CARD_TYPE_FEIJI2, true);\r\n        }\r\n        else if(this.lastCardType == this.DDZ_CARD_TYPE_LIANDUI){\r\n            array = this.GetLianDuiTip(true);\r\n        }\r\n        else if(this.lastCardType==0){\r\n            //随意出牌\r\n            array.push.apply(array, this.GetOneCardTip(true));\r\n            array.push.apply(array, this.GetDuiziTip(true));\r\n            array.push.apply(array, this.GetShunziTip(true));\r\n            array.push.apply(array, this.GetSanDaiTip(this.DDZ_CARD_TYPE_3BUDAI,true));\r\n            array.push.apply(array, this.GetSanDaiTip(this.DDZ_CARD_TYPE_3DAI1,true));\r\n            array.push.apply(array, this.GetSanDaiTip(this.DDZ_CARD_TYPE_3DAI2,true));\r\n            array.push.apply(array, this.GetSiDaiTip(this.DDZ_CARD_TYPE_4DAI2,true));\r\n            array.push.apply(array, this.GetSiDaiTip(this.DDZ_CARD_TYPE_4DAI4,true));\r\n            array.push.apply(array, this.GetSiDaiTip(this.DDZ_CARD_TYPE_4DAI1,true));\r\n            array.push.apply(array, this.GetSiDaiTip(this.DDZ_CARD_TYPE_4DAI21,true));\r\n            array.push.apply(array, this.GetFeiJiTip(this.DDZ_CARD_TYPE_FEIJI0,true));\r\n            array.push.apply(array, this.GetFeiJiTip(this.DDZ_CARD_TYPE_FEIJI1,true));\r\n            array.push.apply(array, this.GetFeiJiTip(this.DDZ_CARD_TYPE_FEIJI2,true));\r\n            array.push.apply(array, this.GetLianDuiTip(true));\r\n            array.push.apply(array, this.GetZhaDanTip(true));\r\n        }\r\n        if(array.length>0){\r\n             array.sort(this.SortByLength);\r\n        }\r\n        return array;\r\n    },\r\n    SortByLength:function(a,b){\r\n        if(a.length>b.length){\r\n            return -1;\r\n        }\r\n        return 1;\r\n    },\r\n    GetTipCard:function(){\r\n        let array = [];\r\n        if (this.lastCardType == this.DDZ_CARD_TYPE_NOMARL) {\r\n            let setInfo = this.DDZRoomSet.GetRoomSetInfo();\r\n            this.SetCardData(setInfo.opType, setInfo.cardList);\r\n            this.lastCardType = setInfo.opType;\r\n            this.lastCardList = setInfo.cardList;\r\n        }\r\n        if(this.lastCardType == this.DDZ_CARD_TYPE_SINGLECARD){\r\n            array = this.GetOneCard();\r\n        }\r\n        else if(this.lastCardType == this.DDZ_CARD_TYPE_DUIZI){\r\n            array = this.GetDuizi();\r\n        }\r\n        else if(this.lastCardType == this.DDZ_CARD_TYPE_SHUNZI){\r\n            array = this.GetShunzi();\r\n        }\r\n        else if(this.lastCardType == this.DDZ_CARD_TYPE_3BUDAI ||\r\n                this.lastCardType == this.DDZ_CARD_TYPE_3DAI1 ||\r\n                this.lastCardType == this.DDZ_CARD_TYPE_3DAI2){\r\n            array = this.GetSanDai();                \r\n        }\r\n        else if(this.lastCardType == this.DDZ_CARD_TYPE_4DAI2 ||\r\n                this.lastCardType == this.DDZ_CARD_TYPE_4DAI4 ||\r\n                this.lastCardType == this.DDZ_CARD_TYPE_4DAI1 ||\r\n                this.lastCardType == this.DDZ_CARD_TYPE_4DAI21){\r\n            array = this.GetSiDai();\r\n        }\r\n        else if(this.lastCardType == this.DDZ_CARD_TYPE_ZHADAN){\r\n            array = this.GetZhaDan();\r\n        }\r\n        else if(this.lastCardType == this.DDZ_CARD_TYPE_FEIJI0){\r\n            array = this.GetFeiJi(this.DDZ_CARD_TYPE_FEIJI0);\r\n        }\r\n        else if(this.lastCardType == this.DDZ_CARD_TYPE_FEIJI1){\r\n            array = this.GetFeiJi(this.DDZ_CARD_TYPE_FEIJI1);\r\n        }\r\n        else if(this.lastCardType == this.DDZ_CARD_TYPE_FEIJI2){\r\n            array = this.GetFeiJi(this.DDZ_CARD_TYPE_FEIJI2);\r\n        }\r\n        else if(this.lastCardType == this.DDZ_CARD_TYPE_LIANDUI){\r\n            array = this.GetLianDui();\r\n        }\r\n        return array;\r\n    },\r\n\r\n    CheckSelected:function(cardValue){\r\n        if (-1 == this.selectCardList.indexOf(cardValue)){\r\n            return false;\r\n        }\r\n        return true;\r\n    },\r\n\r\n    //0:可以随便出牌 1:不出 2:单牌 3:对子 4:顺子 5:3不带 6:3带1 7:3带2 8:飞机不带 9:4带2 10:4带3 \r\n    //11:炸弹 12:飞机带单 13:飞机带对 14:连对\r\n    GetZhaDan:function(isSelectCard=false){\r\n        let pokers = [];\r\n        if(isSelectCard==false){\r\n            pokers = this.handCardList;\r\n        }else{\r\n            pokers = this.selectCardList;\r\n        }\r\n        let zhadans = [];\r\n\r\n        let lastCardValue = 0;\r\n        lastCardValue = this.GetCardValue(this.lastCardList[0]);\r\n\r\n        //先判断是否有王炸\r\n        let wangzhaList = [];\r\n        for (var i = pokers.length - 1; i >= 0; i--) {\r\n            if (this.GetCardValue(pokers[i]) == 16 ||\r\n                this.GetCardValue(pokers[i]) == 17) {\r\n                wangzhaList.push(pokers[i]);\r\n            }\r\n        }\r\n\r\n        if (wangzhaList.length == 2) {\r\n            zhadans[0] = wangzhaList;\r\n        }\r\n        \r\n        for(let i = pokers.length - 1; i >= 0; i--){\r\n            let poker = pokers[i];\r\n            let zhadan = this.GetSameValue(pokers, poker);\r\n            let bInList = this.CheckPokerInListEx(zhadans, poker);\r\n            if(zhadan.length > 4 && !bInList){\r\n                zhadans[zhadans.length] = zhadan;\r\n            }\r\n            else if(zhadan.length == 4 && !bInList && this.GetCardValue(zhadan[0]) > lastCardValue){\r\n                zhadans[zhadans.length] = zhadan;\r\n            }\r\n        }\r\n\r\n        return zhadans;\r\n    },\r\n\r\n    GetZhaDanTip:function(isSelectCard=false){\r\n        let pokers = [];\r\n        if(isSelectCard==false){\r\n            pokers = this.handCardList;\r\n        }else{\r\n            pokers = this.selectCardList;\r\n        }\r\n        let zhadans = [];\r\n\r\n        //先判断是否有王炸\r\n        let wangzhaList = [];\r\n        for (var i = pokers.length - 1; i >= 0; i--) {\r\n            if (this.GetCardValue(pokers[i]) == 16 ||\r\n                this.GetCardValue(pokers[i]) == 17) {\r\n                wangzhaList.push(pokers[i]);\r\n            }\r\n        }\r\n\r\n        if (wangzhaList.length == 2) {\r\n            zhadans[0] = wangzhaList;\r\n        }\r\n        \r\n        for(let i = pokers.length - 1; i >= 0; i--){\r\n            let poker = pokers[i];\r\n            let zhadan = this.GetSameValue(pokers, poker);\r\n            let bInList = this.CheckPokerInListEx(zhadans, poker);\r\n            if(zhadan.length > 4 && !bInList){\r\n                zhadans[zhadans.length] = zhadan;\r\n            }\r\n            else if(zhadan.length == 4 && !bInList){\r\n                zhadans[zhadans.length] = zhadan;\r\n            }\r\n        }\r\n\r\n        return zhadans;\r\n    },\r\n\r\n    GetZhaDanEx:function(array){\r\n        let pokers = this.handCardList;\r\n        let zhadans = [];\r\n        let arrLen = array.length;//先记录下原来数组的长度，方便后续插入王炸炸弹\r\n\r\n        //先判断是否有王炸\r\n        let wangzhaList = [];\r\n        for (var i = pokers.length - 1; i >= 0; i--) {\r\n            if (this.GetCardValue(pokers[i]) == 16 ||\r\n                this.GetCardValue(pokers[i]) == 17) {\r\n                wangzhaList.push(pokers[i]);\r\n            }\r\n        }\r\n\r\n        if (wangzhaList.length == 2) {\r\n            zhadans[0] = wangzhaList;\r\n        }\r\n        \r\n        for(let i=0; i < pokers.length; i++){\r\n            let poker = pokers[i];\r\n            let zhadan = this.GetSameValue(pokers, poker);\r\n            let bInList = this.CheckPokerInListEx(zhadans, poker);\r\n            if(zhadan.length >= 4 && !bInList){\r\n                zhadans[zhadans.length] = zhadan;\r\n            }\r\n        }\r\n        let wangzha = [];\r\n        for(let i = zhadans.length - 1; i >= 0; i--){\r\n            let item = zhadans[i];\r\n            //对炸弹进行排序，从最小炸弹开始，王炸是最大的炸弹\r\n            if (item.length == 2) {\r\n                wangzha = item;\r\n            } else {\r\n                array.push(item);\r\n            }\r\n        }\r\n        if (wangzha.length > 0) {\r\n            array.push(wangzha);\r\n        }\r\n    },\r\n\r\n    PushTipCard:function(pokers, samePoker, len){\r\n        let temp = [];\r\n        samePoker.reverse();\r\n        for(let i = 0; i < len; i++){\r\n            temp.push(samePoker[i]);\r\n        }\r\n\r\n        pokers.push(temp);\r\n    },\r\n\r\n    GetOneCardTip:function(isSelectCard=false){\r\n        let pokers = [];\r\n        if(isSelectCard==false){\r\n            pokers = this.handCardList;\r\n        }else{\r\n            pokers = this.selectCardList;\r\n        }\r\n        let array = [];\r\n        let chai = [];\r\n\r\n        for(let i = pokers.length - 1; i >= 0; i--){\r\n            let poker = pokers[i];\r\n            let cardValue = this.GetCardValue(poker);\r\n            let sameValue = this.GetSameValue(pokers, poker);\r\n            let bInList = this.CheckPokerInListEx(chai, poker);\r\n            if(sameValue.length == 1){\r\n                this.PushTipCard(array, sameValue, 1);\r\n            }\r\n            else if(sameValue.length > 1 && !bInList){\r\n                this.PushTipCard(chai, sameValue, 1);\r\n            }\r\n        }\r\n        array.push.apply(array, chai);\r\n        return array;\r\n    },\r\n\r\n    GetOneCard:function(isSelectCard=false){\r\n        let pokers = [];\r\n        if(isSelectCard==false){\r\n            pokers = this.handCardList;\r\n        }else{\r\n            pokers = this.selectCardList;\r\n        }\r\n        let array = [];\r\n        let chai = [];\r\n\r\n        let lastCardValue = this.GetCardValue(this.lastCardList[0]);\r\n\r\n        for(let i = pokers.length - 1; i >= 0; i--){\r\n            let poker = pokers[i];\r\n            let cardValue = this.GetCardValue(poker);\r\n            if(cardValue <= lastCardValue) continue;\r\n            let sameValue = this.GetSameValue(pokers, poker);\r\n            let bInList = this.CheckPokerInListEx(chai, poker);\r\n            if(sameValue.length == 1){\r\n                this.PushTipCard(array, sameValue, 1);\r\n            }\r\n            else if(sameValue.length > 1 && !bInList){\r\n                this.PushTipCard(chai, sameValue, 1);\r\n            }\r\n        }\r\n        array.push.apply(array, chai);\r\n        this.GetZhaDanEx(array);\r\n        return array;\r\n    },\r\n\r\n    GetDuiziTip:function(isSelectCard=false){\r\n        let pokers = [];\r\n        if(isSelectCard==false){\r\n            pokers = this.handCardList;\r\n        }else{\r\n            pokers = this.selectCardList;\r\n        }\r\n        let duizis = [];\r\n        let chai = [];\r\n        for(let i = pokers.length - 1; i >= 0; i--){\r\n            let poker = pokers[i];\r\n            let cardValue = this.GetCardValue(poker);\r\n            let duizi = this.GetSameValue(pokers, poker);\r\n            let bInList = this.CheckPokerInListEx(duizis, poker);\r\n            let bInListEx = this.CheckPokerInListEx(chai, poker);\r\n            if(duizi.length == 2 && !bInList){\r\n                this.PushTipCard(duizis, duizi, 2);\r\n            }\r\n            else if(duizi.length > 2 && !bInListEx){\r\n                this.PushTipCard(chai, duizi, 2);\r\n            }\r\n        }\r\n        duizis.push.apply(duizis, chai);\r\n        return duizis;\r\n    },\r\n\r\n    GetDuizi:function(isSelectCard=false){\r\n        let pokers = [];\r\n        if(isSelectCard==false){\r\n            pokers = this.handCardList;\r\n        }else{\r\n            pokers = this.selectCardList;\r\n        }\r\n        let duizis = [];\r\n        let chai = [];\r\n        if(pokers.length < this.lastCardList.length) return [];\r\n\r\n        let lastCardValue = this.GetCardValue(this.lastCardList[0]);\r\n\r\n        for(let i = pokers.length - 1; i >= 0; i--){\r\n            let poker = pokers[i];\r\n            let cardValue = this.GetCardValue(poker);\r\n            if(cardValue <= lastCardValue) continue;\r\n            let duizi = this.GetSameValue(pokers, poker);\r\n            let bInList = this.CheckPokerInListEx(duizis, poker);\r\n            let bInListEx = this.CheckPokerInListEx(chai, poker);\r\n            if(duizi.length == 2 && !bInList){\r\n                this.PushTipCard(duizis, duizi, 2);\r\n            }\r\n            else if(duizi.length > 2 && !bInListEx){\r\n                this.PushTipCard(chai, duizi, 2);\r\n            }\r\n        }\r\n        duizis.push.apply(duizis, chai);\r\n        this.GetZhaDanEx(duizis);\r\n        return duizis;\r\n    },\r\n\r\n    GetShunziTip:function(isSelectCard = false){\r\n        let pokers = [];\r\n        if(isSelectCard==false){\r\n            pokers = this.handCardList;\r\n        }else{\r\n            pokers = this.selectCardList;\r\n        }\r\n        this.SortCardByMax(pokers);\r\n        let array = [];\r\n        for(let i = pokers.length - 1; i >= 0; i--){\r\n            let lastValue = 0;\r\n            let shunzi = [];\r\n            shunzi.push(pokers[i]);\r\n            for(let j = i; j >= 0; j--){\r\n                let poker = pokers[j];\r\n                let nowValue = this.GetCardValue(poker);\r\n                if(nowValue == lastValue) continue;\r\n                if(nowValue == 15){\r\n                    break;\r\n                }\r\n                if(lastValue != 0){\r\n                    if(nowValue - lastValue != 1){\r\n                        break;\r\n                    }\r\n                    shunzi.push(poker);   \r\n                }\r\n                lastValue = nowValue;\r\n                if(shunzi.length>=5){\r\n                    array[array.length] = shunzi;\r\n                }\r\n            }\r\n        }\r\n        return array;\r\n    },\r\n\r\n    GetShunzi:function(isSelectCard=false){\r\n        let pokers = [];\r\n        if(isSelectCard==false){\r\n            pokers = this.handCardList;\r\n        }else{\r\n            pokers = this.selectCardList;\r\n            this.SortCardByMinEx(pokers);\r\n        }\r\n        let array = [];\r\n        // if(pokers.length < this.lastCardList.length) return [];\r\n        this.SortCardByMinEx(this.lastCardList);\r\n        let lastCardValue = this.GetCardValue(this.lastCardList[0]);\r\n\r\n        for(let i = pokers.length - 1; i >= 0; i--){\r\n            let lastValue = 0;\r\n            let shunzi = [];\r\n            shunzi.push(pokers[i]);\r\n            for(let j = i; j >= 0; j--){\r\n                let poker = pokers[j];\r\n                let nowValue = this.GetCardValue(poker);\r\n\r\n                if(nowValue == lastValue) continue;\r\n\r\n                if(nowValue <= lastCardValue){\r\n                    break;\r\n                }\r\n                if(nowValue == 15){\r\n                    break;\r\n                }\r\n                if(lastValue != 0){\r\n                    if(nowValue - lastValue != 1)\r\n                        break;\r\n                    shunzi.push(poker);   \r\n                }\r\n                \r\n                if(shunzi.length >= this.lastCardList.length){\r\n                    array[array.length] = shunzi;\r\n                    break;\r\n                }\r\n                lastValue = nowValue;\r\n            }\r\n        }\r\n        this.GetZhaDanEx(array);\r\n        return array;\r\n    },\r\n    GetSanDaiTip:function(lastCardType,isSelectCard=false){\r\n        let pokers = [];\r\n        if(isSelectCard==false){\r\n            pokers = this.handCardList;\r\n        }else{\r\n            pokers = this.selectCardList;\r\n        }\r\n        let santiaos = [];\r\n        let chai = [];\r\n\r\n        for(let i = 0; i < pokers.length; i++){\r\n            let poker = pokers[i];\r\n            let cardValue = this.GetCardValue(poker);\r\n            let santiao = this.GetSameValue(pokers, poker);\r\n            let bInList = this.CheckPokerInListEx(santiaos, poker);\r\n            let bInListEx = this.CheckPokerInListEx(chai, poker);\r\n            if(santiao.length == 3 && !bInList){\r\n                this.PushTipCard(santiaos, santiao, 3);\r\n            }\r\n            else if(santiao.length > 3 && !bInListEx){\r\n                this.PushTipCard(chai, santiao, 3);\r\n            }\r\n        }\r\n\r\n        this.SortCardByMin(santiaos);\r\n        this.SortCardByMin(chai);\r\n\r\n        santiaos.push.apply(santiaos, chai);\r\n        //判断玩法\r\n        let sandai=this.DDZRoom.GetRoomConfigByProperty(\"sandai\");\r\n        if(lastCardType == this.DDZ_CARD_TYPE_3BUDAI){\r\n            this.GetOtherCard(santiaos, 0, false, true);\r\n        }else if(lastCardType == this.DDZ_CARD_TYPE_3DAI1){\r\n            if (sandai.indexOf(0) >= 0){\r\n                //勾选三带一玩法\r\n                this.GetOtherCard(santiaos, 1, false, true);\r\n            }\r\n        }\r\n        else if(lastCardType == this.DDZ_CARD_TYPE_3DAI2){\r\n            if (sandai.indexOf(1) >= 0){\r\n                //勾选三带二玩法\r\n                this.GetOtherCard(santiaos, 2, true, true);\r\n            }\r\n        }\r\n        return santiaos;\r\n    },\r\n    GetSanDai:function(isSelectCard=false){\r\n        let pokers = [];\r\n        if(isSelectCard==false){\r\n            pokers = this.handCardList;\r\n        }else{\r\n            pokers = this.selectCardList;\r\n        }\r\n        let santiaos = [];\r\n        let chai = [];\r\n        // if(pokers.length < this.lastCardList.length) return [];\r\n\r\n        let lastCardValue = 0;\r\n\r\n        for(let i = 0; i < this.lastCardList.length; i++){\r\n            let poker = this.lastCardList[i];\r\n            let santiao = this.GetSameValue(this.lastCardList, poker);\r\n            if(santiao.length >= 3){\r\n                lastCardValue = this.GetCardValue(santiao[0]);\r\n                break;\r\n            }\r\n        }\r\n\r\n        for(let i = 0; i < pokers.length; i++){\r\n            let poker = pokers[i];\r\n            let cardValue = this.GetCardValue(poker);\r\n            if(cardValue <= lastCardValue) continue;\r\n            let santiao = this.GetSameValue(pokers, poker);\r\n            let bInList = this.CheckPokerInListEx(santiaos, poker);\r\n            let bInListEx = this.CheckPokerInListEx(chai, poker);\r\n            if(santiao.length == 3 && !bInList){\r\n                this.PushTipCard(santiaos, santiao, 3);\r\n            }\r\n            else if(santiao.length > 3 && !bInListEx){\r\n                this.PushTipCard(chai, santiao, 3);\r\n            }\r\n        }\r\n\r\n        this.SortCardByMin(santiaos);\r\n        this.SortCardByMin(chai);\r\n\r\n        santiaos.push.apply(santiaos, chai);\r\n        //判断玩法\r\n        let sandai=this.DDZRoom.GetRoomConfigByProperty(\"sandai\");\r\n        if(this.lastCardType == this.DDZ_CARD_TYPE_3BUDAI){\r\n            this.GetOtherCard(santiaos, 0, false);\r\n        }else if(this.lastCardType == this.DDZ_CARD_TYPE_3DAI1){\r\n            if (sandai.indexOf(0) >= 0){\r\n                //勾选三带一玩法\r\n                this.GetOtherCard(santiaos, 1, false);\r\n            }\r\n        }\r\n        else if(this.lastCardType == this.DDZ_CARD_TYPE_3DAI2){\r\n            if (sandai.indexOf(1) >= 0){\r\n                //勾选三带二玩法\r\n                this.GetOtherCard(santiaos, 2, true);\r\n            }\r\n        }\r\n        this.GetZhaDanEx(santiaos);\r\n        return santiaos;\r\n    },\r\n\r\n    GetSiDaiTip:function(lastCardType,isSelectCard=false){\r\n        let pokers = [];\r\n        if(isSelectCard==false){\r\n            pokers = this.handCardList;\r\n        }else{\r\n            pokers = this.selectCardList;\r\n        }\r\n        let zhadans = [];\r\n        let chai = [];\r\n\r\n        for(let i = 0; i < pokers.length; i++){\r\n            let poker = pokers[i];\r\n            let cardValue = this.GetCardValue(poker);\r\n            let zhadan = this.GetSameValue(pokers, poker);\r\n            let bInList = this.CheckPokerInListEx(zhadans, poker);\r\n            let bInListEx = this.CheckPokerInListEx(chai, poker);\r\n            if(zhadan.length == 4 && !bInList){\r\n                this.PushTipCard(zhadans, zhadan, 4);\r\n            }\r\n            else if(zhadan.length > 4 && !bInListEx){\r\n                this.PushTipCard(chai, zhadan, 4);\r\n            }\r\n        }\r\n\r\n        zhadans.push.apply(zhadans, chai);\r\n        //判断玩法\r\n        let sidai=this.DDZRoom.GetRoomConfigByProperty(\"sidai\");\r\n        if(lastCardType == this.DDZ_CARD_TYPE_4DAI2){\r\n            if (sidai.indexOf(0) >= 0){\r\n                //勾选四带2单张玩法\r\n                this.GetOtherCard(zhadans, 2, false, isSelectCard);\r\n            }\r\n        }\r\n        else if(lastCardType == this.DDZ_CARD_TYPE_4DAI4){\r\n            if (sidai.indexOf(1) >= 0){\r\n                //勾选四带2单张玩法\r\n                this.GetOtherCard(zhadans, 4, true, isSelectCard);\r\n            }\r\n        }else if(lastCardType == this.DDZ_CARD_TYPE_4DAI1){\r\n            if (sidai.indexOf(2) >= 0){\r\n                //勾选四带1单张玩法\r\n                this.GetOtherCard(zhadans, 1, false, isSelectCard);\r\n            }\r\n        }else if(lastCardType == this.DDZ_CARD_TYPE_4DAI21){\r\n            if (sidai.indexOf(3) >= 0){\r\n                //勾选四带一对玩法\r\n                this.GetOtherCard(zhadans, 2, true, isSelectCard);\r\n            }\r\n        }\r\n        return zhadans;\r\n    },\r\n\r\n    GetSiDai:function(isSelectCard=false){\r\n        let pokers = [];\r\n        if(isSelectCard==false){\r\n            pokers = this.handCardList;\r\n        }else{\r\n            pokers = this.selectCardList;\r\n        }\r\n        let zhadans = [];\r\n        let chai = [];\r\n        // if(pokers.length < this.lastCardList.length) return [];\r\n\r\n        let lastCardValue = 0;\r\n\r\n        for(let i = 0; i < this.lastCardList.length; i++){\r\n            let poker = this.lastCardList[i];\r\n            let zhadan = this.GetSameValue(this.lastCardList, poker);\r\n            if(zhadan.length >= 4){\r\n                lastCardValue = this.GetCardValue(zhadan[0]);\r\n                break;\r\n            }\r\n        }\r\n\r\n        for(let i = 0; i < pokers.length; i++){\r\n            let poker = pokers[i];\r\n            let cardValue = this.GetCardValue(poker);\r\n            if(cardValue <= lastCardValue) continue;\r\n            let zhadan = this.GetSameValue(pokers, poker);\r\n            let bInList = this.CheckPokerInListEx(zhadans, poker);\r\n            let bInListEx = this.CheckPokerInListEx(chai, poker);\r\n            if(zhadan.length == 4 && !bInList){\r\n                this.PushTipCard(zhadans, zhadan, 4);\r\n            }\r\n            else if(zhadan.length > 4 && !bInListEx){\r\n                this.PushTipCard(chai, zhadan, 4);\r\n            }\r\n        }\r\n\r\n        zhadans.push.apply(zhadans, chai);\r\n        //判断玩法\r\n        let sidai=this.DDZRoom.GetRoomConfigByProperty(\"sidai\");\r\n        if(this.lastCardType == this.DDZ_CARD_TYPE_4DAI2){\r\n            if (sidai.indexOf(0) >= 0){\r\n                //勾选四带2单张玩法\r\n                this.GetOtherCard(zhadans, 2, false);\r\n            }\r\n        }\r\n        else if(this.lastCardType == this.DDZ_CARD_TYPE_4DAI4){\r\n            if (sidai.indexOf(1) >= 0){\r\n                //勾选四带2单张玩法\r\n                this.GetOtherCard(zhadans, 4, true);\r\n            }\r\n        }else if(this.lastCardType == this.DDZ_CARD_TYPE_4DAI1){\r\n            if (sidai.indexOf(2) >= 0){\r\n                //勾选四带1单张玩法\r\n                this.GetOtherCard(zhadans, 1, false);\r\n            }\r\n        }else if(this.lastCardType == this.DDZ_CARD_TYPE_4DAI21){\r\n            if (sidai.indexOf(3) >= 0){\r\n                //勾选四带一对玩法\r\n                this.GetOtherCard(zhadans, 2, true);\r\n            }\r\n        }\r\n\r\n        this.GetZhaDanEx(zhadans);\r\n        return zhadans;\r\n    },\r\n\r\n    //得到真正的飞机\r\n    GetRealPlane:function(lists){\r\n        let lastValue = 0;\r\n        let realPlane = [];\r\n        for(let i = 0; i < lists.length; i++){\r\n            let item = lists[i];\r\n            let nowValue = this.GetCardValue(item[0]);\r\n            \r\n            if(lastValue != 0){\r\n                if((lastValue+1) != nowValue){\r\n                    if(realPlane.length >= 2){\r\n                        break;\r\n                    }\r\n                    realPlane.splice(0, realPlane.length);\r\n                    realPlane[realPlane.length] = item;\r\n                }\r\n                else{\r\n                    realPlane[realPlane.length] = item;\r\n                }\r\n            }\r\n            else{\r\n                realPlane[realPlane.length] = item;\r\n            }\r\n\r\n            lastValue = nowValue;\r\n        }\r\n        return realPlane;\r\n    },\r\n\r\n    GetFeiJiTip:function(tag,isSelectCard=false){\r\n        let pokers = [];\r\n        if(isSelectCard==false){\r\n            pokers = this.handCardList;\r\n        }else{\r\n            pokers = this.selectCardList;\r\n        }\r\n        // if(pokers.length < this.lastCardList.length) return [];\r\n\r\n        //判断玩法\r\n        let sandai=this.DDZRoom.GetRoomConfigByProperty(\"sandai\");\r\n        if (sandai.indexOf(0) < 0 && tag == this.DDZ_CARD_TYPE_FEIJI1) {\r\n            //没有勾选三带一玩法\r\n            return [];\r\n        }\r\n        if (sandai.indexOf(1) < 0 && tag == this.DDZ_CARD_TYPE_FEIJI2) {\r\n            //没有勾选三带二玩法\r\n            return [];\r\n        }\r\n        let tempArrB = [];\r\n\r\n        for(let i=0; i < pokers.length; i++){\r\n            let poker = pokers[i];\r\n            let santiao = this.GetSameValue(pokers, poker);\r\n            let bInList = this.CheckPokerInList(tempArrB, poker);\r\n            if(santiao.length >= 3 && !bInList && this.GetCardValue(poker) != 15){\r\n                this.RegularCard(tempArrB, santiao, 3);\r\n            }\r\n        }\r\n\r\n        //如果第一次检测三条小于2对 肯定凑不成飞机\r\n        if(tempArrB.length < 2){\r\n            // let zhadan = [];\r\n            // this.GetZhaDanEx(zhadan);\r\n            // return zhadan;\r\n            return [];\r\n        }\r\n        \r\n        this.SortCardByMin(tempArrB);\r\n\r\n        //tempArrB里的三带或四带飞机找出来 去除不用的三条或四条\r\n        let temp = [];\r\n        let lastValue = 0;\r\n        for(let i = 0; i < tempArrB.length; i++){\r\n            let item = tempArrB[i];\r\n            let nowValue = this.GetCardValue(item[0]);\r\n            \r\n            if(lastValue != 0){\r\n                if((lastValue+1) != nowValue){\r\n                    temp.splice(0, temp.length);\r\n                    temp[temp.length] = item;\r\n                }\r\n                else{\r\n                    temp[temp.length] = item;\r\n                }\r\n            }\r\n            else{\r\n                temp[temp.length] = item;\r\n            }\r\n            \r\n            lastValue = nowValue;\r\n        }\r\n        //将真正的飞机合并成一个数组\r\n        let realPlane = [];\r\n        if(temp.length){\r\n            let tp = [];\r\n            for(let i = 0; i < temp.length; i++){\r\n                let item = temp[i];\r\n                for(let j = 0; j < item.length; j++){\r\n                    tp.push(item[j]);\r\n                }\r\n            }\r\n\r\n            realPlane[realPlane.length] = tp;\r\n        }\r\n        if(realPlane.length){\r\n            if(tag == this.DDZ_CARD_TYPE_FEIJI1){\r\n                let needCard1 = realPlane[0].length + (realPlane[0].length/3)*1;\r\n                this.GetOtherCard(realPlane,(realPlane[0].length/3)*1,false,isSelectCard);\r\n                if (!realPlane.length) {\r\n                    return [];\r\n                }\r\n                //如果选中的牌不是所有牌，并且不满足完整牌型，return []\r\n                if (realPlane[0].length != needCard1 && pokers != this.handCardList) {\r\n                    return [];\r\n                }\r\n            }\r\n            else if(tag == this.DDZ_CARD_TYPE_FEIJI2){\r\n                let needCard2 = realPlane[0].length + (realPlane[0].length/3)*2;\r\n                this.GetOtherCard(realPlane,(realPlane[0].length/3)*2,true,isSelectCard);\r\n                if (!realPlane.length) {\r\n                    return [];\r\n                }\r\n                //如果选中的牌不是所有牌，并且不满足完整牌型，return []\r\n                if (realPlane[0].length != needCard2 && pokers != this.handCardList) {\r\n                    return [];\r\n                }\r\n            }\r\n        }\r\n        return realPlane;\r\n    },\r\n\r\n    GetFeiJi:function(tag,isSelectCard=false){\r\n        let pokers = [];\r\n        if(isSelectCard==false){\r\n            pokers = this.handCardList;\r\n        }else{\r\n            pokers = this.selectCardList;\r\n        }\r\n        // if(pokers.length < this.lastCardList.length) return [];\r\n\r\n        //判断玩法\r\n        let sandai=this.DDZRoom.GetRoomConfigByProperty(\"sandai\");\r\n        if (sandai.indexOf(0) < 0 && tag == this.DDZ_CARD_TYPE_FEIJI1) {\r\n            //没有勾选三带一玩法\r\n            return [];\r\n        }\r\n        if (sandai.indexOf(1) < 0 && tag == this.DDZ_CARD_TYPE_FEIJI2) {\r\n            //没有勾选三带二玩法\r\n            return [];\r\n        }\r\n        let lastCardValue = 0;\r\n        let tempArrA = [];\r\n        let tempArrB = [];\r\n\r\n        for(let i = 0; i < this.lastCardList.length; i++){\r\n            let poker = this.lastCardList[i];\r\n            let santiao = this.GetSameValue(this.lastCardList, poker);\r\n            let bInList = this.CheckPokerInList(tempArrA, poker);\r\n            if(santiao.length >= 3 && !bInList){\r\n                //tempArrA[tempArrA.length] = santiao;\r\n                this.RegularCard(tempArrA, santiao, 3);\r\n            }\r\n        }\r\n\r\n        this.SortCardByMin(tempArrA);\r\n        let realPlaneA = [];\r\n        if(tempArrA.length){\r\n            realPlaneA = this.GetRealPlane(tempArrA);\r\n            let lastValue = (this.lastCardList.length - realPlaneA.length * 3);\r\n            if(realPlaneA.length==3 && lastValue==1){\r\n                //三飞机带单根,可以组成  444,555 带 3333\r\n                for(let i=0; i < this.lastCardList.length; i++){\r\n                    let poker = this.lastCardList[i];\r\n                    let zhadan = this.GetSameValue(this.lastCardList, poker);\r\n                    if(zhadan.length >= 4){\r\n                        for (let j = 0; j < realPlaneA.length; j++) {\r\n                            let sameCard = this.GetSameValue(realPlaneA[j], poker);\r\n                            if (sameCard.length == 3) {\r\n                                realPlaneA.splice(j,1);\r\n                            }\r\n                        }\r\n                        break;\r\n                    }\r\n                }\r\n            }else if(realPlaneA.length==4 && lastValue==3){\r\n                //三飞机带单根,可以组成  444,555,666 带 3333 77\r\n                let isHasZhadan = false;\r\n                let isHasDuiZi = false;\r\n                for(let i=0; i < pokers.length; i++){\r\n                    let poker = pokers[i];\r\n                    let zhadan = this.GetSameValue(pokers, poker);\r\n                    if(zhadan.length >= 4){\r\n                        for (let j = 0; j < realPlaneA.length; j++) {\r\n                            let sameCard = this.GetSameValue(realPlaneA[j], poker);\r\n                            if (sameCard.length == 3) {\r\n                                realPlaneA.splice(j,1);\r\n                            }\r\n                        }\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n            lastCardValue = this.GetCardValue(realPlaneA[0][0]);\r\n        }\r\n\r\n        for(let i=0; i < pokers.length; i++){\r\n            let poker = pokers[i];\r\n            let santiao = this.GetSameValue(pokers, poker);\r\n            let bInList = this.CheckPokerInList(tempArrB, poker);\r\n            if(santiao.length >= 3 && !bInList && this.GetCardValue(poker) != 15){\r\n                //tempArrB[tempArrB.length] = santiao;\r\n                this.RegularCard(tempArrB, santiao, 3);\r\n            }\r\n        }\r\n\r\n        //如果第一次检测三条小于2对 肯定凑不成飞机\r\n        if(tempArrB.length < 2){\r\n            let zhadan = [];\r\n            this.GetZhaDanEx(zhadan);\r\n            return zhadan;\r\n        }\r\n        \r\n        this.SortCardByMin(tempArrB);\r\n\r\n        //tempArrB里的三带或四带飞机找出来 去除不用的三条或四条\r\n        let temp = [];\r\n        let lastValue = 0;\r\n        for(let i = 0; i < tempArrB.length; i++){\r\n            if(this.GetCardValue(tempArrB[i][0]) <= lastCardValue) continue;\r\n            if(temp.length == realPlaneA.length) break;\r\n\r\n            let item = tempArrB[i];\r\n            let nowValue = this.GetCardValue(item[0]);\r\n            \r\n            if(lastValue != 0){\r\n                if((lastValue+1) != nowValue){\r\n                    temp.splice(0, temp.length);\r\n                    temp[temp.length] = item;\r\n                }\r\n                else{\r\n                    temp[temp.length] = item;\r\n                }\r\n            }\r\n            else{\r\n                temp[temp.length] = item;\r\n            }\r\n            \r\n            lastValue = nowValue;\r\n        }\r\n        //如果飞机数量不足 返回空\r\n        if(temp.length < realPlaneA.length){\r\n            let zhadan = [];\r\n            this.GetZhaDanEx(zhadan);\r\n            return zhadan;\r\n        }\r\n        //将真正的飞机合并成一个数组\r\n        let realPlane = [];\r\n        if(temp.length){\r\n            let tp = [];\r\n            for(let i = 0; i < temp.length; i++){\r\n                let item = temp[i];\r\n                for(let j = 0; j < item.length; j++){\r\n                    tp.push(item[j]);\r\n                }\r\n            }\r\n\r\n            realPlane[realPlane.length] = tp;\r\n        }\r\n        if(realPlane.length){\r\n            if(tag == this.DDZ_CARD_TYPE_FEIJI1){\r\n                this.GetOtherCard(realPlane, this.lastCardList.length - realPlane[0].length, false);\r\n            }\r\n            else if(tag == this.DDZ_CARD_TYPE_FEIJI2){\r\n                this.GetOtherCard(realPlane, this.lastCardList.length - realPlane[0].length, true);\r\n            }\r\n        }\r\n        \r\n        this.GetZhaDanEx(realPlane);\r\n        return realPlane;\r\n    },\r\n    GetLianDuiTip:function(isSelectCard=false){\r\n        let pokers = [];\r\n        if(isSelectCard==false){\r\n            pokers = this.handCardList;\r\n        }else{\r\n            pokers = this.selectCardList;\r\n        }\r\n        // if(pokers.length < this.lastCardList.length) return [];\r\n\r\n        let tempArrB = [];\r\n\r\n        \r\n        for(let i = pokers.length - 1; i >= 0; i--){\r\n            let poker = pokers[i];\r\n            let duizi = this.GetSameValue(pokers, poker);\r\n            let bInList = this.CheckPokerInListEx(tempArrB, poker);\r\n            if(duizi.length >= 2 && !bInList){\r\n                this.PushTipCard(tempArrB, duizi, 2);\r\n            }\r\n        }\r\n        \r\n        this.SortCardByMin(tempArrB);\r\n\r\n        let temps = [];\r\n        for(let i = 0; i < tempArrB.length; i++){\r\n            let tp = [];\r\n            tp.push.apply(tp, tempArrB[i]);\r\n            let lastValue = 0;\r\n            lastValue = this.GetCardValue(tempArrB[i][0]);\r\n            for(let j = i+1; j < tempArrB.length; j++){\r\n                let item = tempArrB[j];\r\n                let nowValue = this.GetCardValue(item[0]);\r\n            \r\n                if(nowValue == 15){\r\n                    break;\r\n                }\r\n    \r\n                if((lastValue+1) != nowValue){\r\n                    break;\r\n                }\r\n                tp.push.apply(tp, item);\r\n                lastValue = nowValue;\r\n                if(tp.length >= 6){\r\n                    temps[temps.length] = tp;\r\n                }\r\n            }\r\n        }\r\n        return temps;\r\n    },\r\n\r\n    GetLianDui:function(isSelectCard=false){\r\n        let pokers = [];\r\n        if(isSelectCard==false){\r\n            pokers = this.handCardList;\r\n        }else{\r\n            pokers = this.selectCardList;\r\n        }\r\n        // if(pokers.length < this.lastCardList.length) return [];\r\n\r\n        let lastCardValue = 0;\r\n        let tempArrA = [];\r\n        let tempArrB = [];\r\n\r\n        this.SortCardByMinEx(this.lastCardList);\r\n        lastCardValue = this.GetCardValue(this.lastCardList[0]);\r\n        tempArrA = this.lastCardList;\r\n        \r\n        for(let i = pokers.length - 1; i >= 0; i--){\r\n            let poker = pokers[i];\r\n            let duizi = this.GetSameValue(pokers, poker);\r\n            let bInList = this.CheckPokerInListEx(tempArrB, poker);\r\n            if(duizi.length >= 2 && !bInList){\r\n                this.PushTipCard(tempArrB, duizi, 2);\r\n            }\r\n        }\r\n        \r\n        this.SortCardByMin(tempArrB);\r\n\r\n        let temps = [];\r\n        for(let i = 0; i < tempArrB.length; i++){\r\n            let tp = [];\r\n            if(this.GetCardValue(tempArrB[i][0]) <= lastCardValue) continue;\r\n            tp.push.apply(tp, tempArrB[i]);\r\n            let lastValue = 0;\r\n            lastValue = this.GetCardValue(tempArrB[i][0]);\r\n            for(let j = i+1; j < tempArrB.length; j++){\r\n                let item = tempArrB[j];\r\n                let nowValue = this.GetCardValue(item[0]);\r\n            \r\n                if(nowValue == 15){\r\n                    break;\r\n                }\r\n    \r\n                if((lastValue+1) != nowValue){\r\n                    break;\r\n                }\r\n\r\n                tp.push.apply(tp, item);\r\n                lastValue = nowValue;\r\n\r\n                if(tp.length == tempArrA.length){\r\n                    temps[temps.length] = tp;\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n\r\n        this.GetZhaDanEx(temps);\r\n        return temps;\r\n    },\r\n\r\n    GetOtherCard:function(list, tag, needDuizi = false, isSelectCard=false){\r\n        let pokers = [];\r\n        if(isSelectCard==false){\r\n            pokers = this.handCardList;\r\n        }else{\r\n            pokers = this.selectCardList;\r\n        }\r\n        if(!list.length) return;\r\n        let needPokersCount = 0;\r\n        for (let i = 0; i < list.length; i++) {\r\n            needPokersCount = list[i].length + tag;\r\n        }\r\n\r\n        let temp = []; \r\n        let chai = [];\r\n        for(let i = pokers.length -1; i >= 0; i--){\r\n            let poker = pokers[i];\r\n            let cards = this.GetSameValue(pokers, poker);\r\n            let bInList = this.CheckPokerInListEx(temp, poker);\r\n            let bInListEx = this.CheckPokerInListEx(chai, poker);\r\n            let bInListExEx = this.CheckPokerInListEx(list, poker);\r\n            if(cards.length == 1 && !bInList){// && !bInListExEx\r\n                this.PushTipCard(temp, cards, 1);\r\n            }\r\n            else if(cards.length >= 2 && !bInListEx){// && !bInListExEx\r\n                this.PushTipCard(chai, cards, 2);\r\n            }\r\n        }\r\n\r\n        // temp.push.apply(temp, chai);\r\n        //先将list拷贝出来\r\n        let tempList = [];\r\n        tempList = list;\r\n        //将获得的牌加入三条,四条或者飞机之中\r\n        for(let i = 0; i < tempList.length; i++){\r\n            let item = tempList[i];\r\n            let len = item.length;\r\n            if (!needDuizi) {\r\n                for(let j = 0; j < temp.length; j++){\r\n                    if(list[i].length - len == tag){\r\n                        break;\r\n                    }\r\n                    let tp = temp[j];\r\n                    for(let k = 0; k < tp.length; k++){\r\n                        if(list[i].length - len == tag){\r\n                            break;\r\n                        }\r\n                        if(item.indexOf(tp[k]) == -1){\r\n                            //将获得的带牌加入list\r\n                            list[i].push(tp[k]);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            else if (needDuizi) {\r\n                //必须是对子\r\n                for(let j = 0; j < chai.length; j++){\r\n                    if(list[i].length - len == tag){\r\n                        break;\r\n                    }\r\n                    let tp = chai[j];\r\n                    for(let k = 0; k < tp.length; k++){\r\n                        if(list[i].length - len == tag){\r\n                            break;\r\n                        }\r\n                        if(item.indexOf(tp[k]) == -1){\r\n                            //将获得的带牌加入list\r\n                            list[i].push(tp[k]);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            //如果需要带对的，如果没有对。不能出\r\n            if (needDuizi && chai.length == 0){\r\n                list.splice(0,list.length);\r\n                return;\r\n            }\r\n            //如果带的牌有王炸，不能出\r\n            let guipai = 0;\r\n            for (let i = 0; i < list.length; i++) {\r\n                if (typeof(list[i]) == \"object\") {\r\n                    for (let j = 0; j < list[i].length; j++) {\r\n                        if (this.GetCardValue(list[i][j]) == this.LOGIC_MASK_XIAOWANG || \r\n                            this.GetCardValue(list[i][j]) == this.LOGIC_MASK_DAWANG) {\r\n                            guipai++;\r\n                        }\r\n                    }\r\n                }else{\r\n                    if (this.GetCardValue(list[i]) == this.LOGIC_MASK_XIAOWANG || \r\n                        this.GetCardValue(list[i]) == this.LOGIC_MASK_DAWANG) {\r\n                        guipai++;\r\n                    }\r\n                }\r\n                \r\n            }\r\n            if (guipai >= 2) {\r\n                list.splice(0,list.length);\r\n                return;\r\n            }\r\n        }\r\n        //判断下如果加入的牌还不够上家的牌型并且手上还有牌需要补充\r\n        let curPokersCount = 0;\r\n        for (let i = 0; i < list.length; i++) {\r\n            curPokersCount = list[i].length;\r\n        }\r\n        if (curPokersCount < needPokersCount) {\r\n            if (!needDuizi) {\r\n                for (let i = 0; i < list.length; i++) {\r\n                    if (list[i].length >= needPokersCount) continue;\r\n                    for (let j = 0; j < pokers.length; j++) {\r\n                        if (list[i].indexOf(pokers[j]) == -1) {\r\n                            //将获得的带牌加入list\r\n                            list[i].push(pokers[j]);\r\n                            if (list[i].length == needPokersCount) {\r\n                                break;\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }else{\r\n                //如果需要对。但是还有牌没带的，则不能飞机\r\n                list.splice(0,list.length);\r\n            }\r\n        }\r\n    },\r\n\r\n///////////////////////////common///////////////////////////////////////\r\n    CheckPokerInList:function(list, tagCard) { \r\n        if (list.length == 0) return false;\r\n\r\n        let bInList = false;\r\n        for (let i = 0; i < list.length; i++) {\r\n            let item = list[i];\r\n            let pos = item.indexOf(tagCard);\r\n        \r\n            if (pos >= 0){\r\n                return true;\r\n            }\r\n        }\r\n        return bInList\r\n    },\r\n\r\n    CheckPokerInListEx:function(list, tagCard){\r\n        if (list.length == 0) return false;\r\n        \r\n        let bInList = false;\r\n        for (let i = 0; i < list.length; i++) {\r\n            let item = list[i];\r\n            let tagValue = this.GetCardValue(tagCard);\r\n            for (let j = 0; j < item.length; j++) {\r\n                let cardValue = this.GetCardValue(item[j]);\r\n                if(cardValue == tagValue){\r\n                    return true;\r\n                }\r\n            }\r\n        }\r\n        return bInList;\r\n    },\r\n\r\n    //检测列表是否全是对子\r\n    CheckTagIsDuizi:function(tagList){\r\n        if (tagList.length < 2) return false;\r\n        if (tagList.length%2 == 1) return false;\r\n\r\n        let duiziNum = tagList.length/2;\r\n        for (let j = 0; j < duiziNum; j++) {\r\n            for(let i = 0; i < tagList.length; i++){\r\n                let poker = tagList[i];\r\n                let duizi = this.GetSameValue(tagList, poker);\r\n                if(duizi.length >= 2){\r\n                    let pos1 = tagList.indexOf(duizi[0]);\r\n                    tagList.splice(pos1, 1);\r\n                    let pos2 = tagList.indexOf(duizi[1]);\r\n                    tagList.splice(pos2, 1);\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        if (tagList.length == 0)\r\n            return true;\r\n        else\r\n            return false;\r\n    },\r\n\r\n    //获取带牌\r\n    GetDaiPaiList:function(pokers, sameList) {\r\n        let tempList = [];\r\n        for (let i = 0; i < sameList.length; i++) {\r\n            tempList.push.apply(tempList, sameList[i]);\r\n        }\r\n        let daiPaiList = [];\r\n        for (let i = 0; i < pokers.length; i++) {\r\n            let poker = pokers[i];\r\n            let index = tempList.indexOf(poker);\r\n            if(index == -1){\r\n                daiPaiList.push(poker);\r\n            }\r\n        }\r\n        return daiPaiList;\r\n    },\r\n    \r\n    //获取同一牌值\r\n    GetSameValue:function(pokers, tagCard) { \r\n        let sameValueList = [];\r\n        let tagCardValue = this.GetCardValue(tagCard);\r\n        for (let i = 0; i < pokers.length; i++) {\r\n            let poker = pokers[i];\r\n            let pokerValue = this.GetCardValue(poker);\r\n\r\n            if (tagCardValue == pokerValue){\r\n                sameValueList[sameValueList.length] = poker;\r\n            }\r\n        }\r\n        return sameValueList\r\n    },\r\n    //获取同一花色\r\n    GetSameColor:function(pokers, tagCard) { \r\n        let sameColorList = [];\r\n        for (let i = 0; i < pokers.length; i++) {\r\n            let poker = pokers[i];\r\n            let pokerColor = this.GetCardColor(poker);\r\n            let tagCardColor = this.GetCardColor(tagCard);\r\n\r\n            if (pokerColor == tagCardColor){\r\n                sameColorList[sameColorList.length] = poker;\r\n            }\r\n        }\r\n        return sameColorList;\r\n    },\r\n\r\n    //获取牌值\r\n    GetCardValue:function(poker) {\r\n        let realPoker = 0;\r\n        if(poker > 500){\r\n            realPoker = poker - 500;\r\n        }\r\n        else{\r\n            realPoker = poker;\r\n        }\r\n        //大小王值最大\r\n        if (realPoker == 65)\r\n            return this.LOGIC_MASK_XIAOWANG;\r\n        if (realPoker == 66)\r\n            return this.LOGIC_MASK_DAWANG;\r\n        return realPoker&this.LOGIC_MASK_VALUE;\r\n    },\r\n\r\n    //获取花色\r\n    GetCardColor:function(poker) { \r\n        let realPoker = 0;\r\n        if(poker > 500){\r\n            realPoker = poker - 500;\r\n        }\r\n        else{\r\n            realPoker = poker;\r\n        }\r\n        return realPoker&this.LOGIC_MASK_COLOR;\r\n    },\r\n\r\n    CheckSameValue:function(aCards,bCards){\r\n        let bRet = false;\r\n        for(let i = 0; i < aCards.length; i++){\r\n            let poker = aCards[i];\r\n            if(bCards.indexOf(poker) != -1){\r\n                bRet = true;\r\n                break;\r\n            }\r\n        }\r\n\r\n        return bRet;\r\n    }\r\n});\r\n\r\nvar g_LogicDDZGame = null;\r\n\r\n/**\r\n * 绑定模块外部方法\r\n */\r\nexports.GetModel = function(){\r\n    if(!g_LogicDDZGame){\r\n        g_LogicDDZGame = new LogicDDZGame();\r\n    }\r\n    return g_LogicDDZGame;\r\n\r\n}"]}